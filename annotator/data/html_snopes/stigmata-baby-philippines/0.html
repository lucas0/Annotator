<html class="js flexbox canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers no-applicationcache svg inlinesvg smil svgclippaths" lang="en" style=""><head><script async="" src="//cdn.mxpnl.com/libs/mixpanel-2.2.min.js" type="text/javascript"></script><script async="" data-jsonpid="" src="http://cdn-gl.imrworldwide.com/novms/js/2/nlsSDK600.bundle.min.js"></script><script src="http://static.parsely.com/code/ptrack-v0.9.2-engaged-time-slots-video.js"></script><script async="" src="//connect.facebook.net/en_US/fbds.js"></script><script async="" src="http://cdn-gl.imrworldwide.com/conf/P35C41790-24D9-4BCD-9873-48B547719D85.js#name=nlsnInstance&amp;ns=NOLBUNDLE"></script><script async="" src="http://ak.sail-horizon.com/horizon/v1.js" type="text/javascript"></script><script src="http://srv-2019-07-15-00.config.parsely.com/config/nbcnews.com"></script><script async="async" src="http://dpm.demdex.net/id?d_visid_ver=1.5.4&amp;d_rtbd=json&amp;d_ver=2&amp;d_orgid=A8AB776A5245B4220A490D44%40AdobeOrg&amp;d_nsid=0&amp;d_mid=19850973944927567323293015628592617912&amp;d_blob=6G1ynYcLPuiQxYZrsz_pkqfLG9yMXBpb2zX5dvJdYQJzPXImdj0y&amp;d_cid_ic=AVID%012E95E16185313738-400001944001085F&amp;d_cb=s_c_il%5B0%5D._setAudienceManagerFields" type="text/javascript"></script><script async="async" src="http://nbcume.sc.omtrdc.net/id?d_visid_ver=1.5.4&amp;callback=s_c_il%5B0%5D._setAnalyticsFields&amp;mcorgid=A8AB776A5245B4220A490D44%40AdobeOrg&amp;mid=19850973944927567323293015628592617912" type="text/javascript"></script><script async="async" src="http://dpm.demdex.net/id?d_visid_ver=1.5.4&amp;d_rtbd=json&amp;d_ver=2&amp;d_orgid=A8AB776A5245B4220A490D44%40AdobeOrg&amp;d_nsid=0&amp;d_cb=s_c_il%5B0%5D._setMarketingCloudFields" type="text/javascript"></script><script async="" src="http://b.scorecardresearch.com/beacon.js"></script>
<meta charset="utf-8"/>
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
<title>Introducing Danica May Camacho, the world's first 7-billionth baby - Photos</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="en" http-equiv="Content-Language"/>
<meta content="Introducing Danica May Camacho, the world's first 7-billionth baby - Photos" name="title"/>
<meta content="
After all of the  build-up, it seems the U.N. has decided that there should be more than  one 7-billionth baby. Let the circus begin...
msnbc.com staff and news services report:" name="description"/>
<meta content="Photos" name="author"/>
<meta content="http://photoblog.nbcnews.com/_news/2011/10/31/8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby" name="canonical"/>
<meta content='{"domainName":"photoblog","displayName":"Photos","avatar":"http:\/\/nvcdn.nbcnews.com\/_vine\/images\/av\/30x30\/group.gif","url":"http:\/\/photoblog.nbcnews.com\/","type":"group","ass":"","groupId":"4910","articleCount":"16098","seedCount":"985","memberCount":"16","description":"View and discuss the pictures and issues that caught our eyes.","createDate":1163818080,"groupType":null,"groupTypeId":"5","blessed":0,"lastPub":1484757001,"isEnabled":1}' name="section"/>
<meta content="{&quot;section&quot;:&quot;Multimedia&quot;,&quot;subSection&quot;:&quot;News photos&quot;,&quot;subSubSection&quot;:&quot;PhotoBlog&quot;,&quot;sitePageId&quot;:&quot;a8558858&quot;,&quot;headline&quot;:&quot;Introducing Danica May Camacho, the world's first 7-billionth baby&quot;,&quot;pageSource&quot;:&quot;Photos&quot;,&quot;typeName&quot;:&quot;Story&quot;,&quot;byline&quot;:&quot;Photos&quot;,&quot;tags&quot;:[&quot;world-news&quot;,&quot;health&quot;,&quot;baby&quot;,&quot;asia&quot;,&quot;population&quot;,&quot;manila&quot;,&quot;seven-billion&quot;,&quot;phiilippines&quot;],&quot;seedSource&quot;:&quot;&quot;}" name="trackData"/>
<meta content='{"when_to_init":"asap", "load_pers":"1"}' name="jenga-session-config"/>
<meta content="web09" name="server"/>
<meta content="23.203.249.44" name="cip"/>
<meta content="July 14, 2019, 4:56 pm" name="date"/>
<meta content="" name="userDomain"/>
<meta content="8558858" name="contentId"/>
<meta content="@NBCNewsPictures" name="twitter:site"/>
<meta content="@NBCNewsPictures" name="twitter:creator"/>
<meta content="nbcnews.com" name="twitter:domain"/>
<meta content="http://msnbcmedia.msn.com/i/MSNBC/Components/Photo/_new/pb-111031-baby-da-01.jpg" property="og:image"/>
<meta content="http://photoblog.nbcnews.com/_news/2011/10/31/8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby" property="og:url"/>
<meta content="article" property="og:type"/>
<meta content="Introducing Danica May Camacho, the world's first 7-billionth baby" property="og:title"/>
<meta content="After all of the  build-up, it seems the U.N. has decided that there should be more than  one 7-billionth baby. Let the circus begin...
msnbc.com staff and news services report:" property="og:description"/>
<meta content="8558858" property="nv:contentId"/>
<meta content="n" property="nv:contentType"/>
<meta content="Photoblog" property="og:site_name"/>
<meta content="10150138890205613" property="fb:app_id"/>
<link href="http://cdn.lib.newsvine.com/chrome/nbcnews/images/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
<link class="cpk_remote" href="//sslnodeassets.nbcnews.com/newsvine/styles/main.css?v=3" rel="stylesheet" type="text/css"/>
<link class="cpk_remote" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
<script class="cpk_remote" language="javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
<script class="cpk_remote" language="javascript" src="//nvg.nbcnews.com/trackingService/trackingService.min.js" type="text/javascript"></script>
<script class="cpk_remote" language="javascript" src="//sslnodeassets.nbcnews.com/cdnassets/jquery.toggles/v0.0.11/jquery.togglecontrols.min.js" type="text/javascript"></script>
<script class="cpk_remote" language="javascript" src="//cdn.jsdelivr.net/respond/1.4.2/respond.min.js" type="text/javascript"></script>
<script class="cpk_remote" language="javascript" src="//nvcdn.nbcnews.com/_util/tiny_mce/production/tinymce.min.js" type="text/javascript"></script>
<link class="cpk_static" href="//nvcdn.nbcnews.com/_static/css/7e006c969efecbf4f506ba8476a179537b67cd23.css?v=51927" rel="stylesheet" type="text/css"/>
<script class="cpk_static" language="javascript" src="//nvcdn.nbcnews.com/_static/js/7973a46a99093d9d8db6ee403c5e843343265df5.js?v=51927" type="text/javascript"></script><style type="text/css"></style>
<link class="cpk_dynamic" href="//nvcdn.nbcnews.com/_static/css/2b7de203573a461e6e111d19cf673c96467fcc3e.css?v=51927" rel="stylesheet" type="text/css"/>
<script class="cpk_dynamic" language="javascript" src="//nvcdn.nbcnews.com/_static/js/57287852856d023c4cb8863813d3b3f0a3cf310e.js?v=51927" type="text/javascript"></script>
<link class="cpk_chrome" href="http://cdn.lib.newsvine.com/chrome/defaultdiscuss/base.css?v=51927" rel="stylesheet" type="text/css"/>
<link class="cpk_chrome" href="http://cdn.lib.newsvine.com/chrome/nbcnews/base.css?v=51927" rel="stylesheet" type="text/css"/>
<link class="cpk_chrome" href="http://cdn.lib.newsvine.com/chrome/photoblog/style.css?v=51927" rel="stylesheet" type="text/css"/>
<script class="cpk_chrome" language="javascript" src="http://cdn.lib.newsvine.com/chrome/photoblog/chrome.js?v=51927" type="text/javascript"></script>
<script class="cpk_chrome" language="javascript" src="http://cdn.lib.newsvine.com/chrome/nbcnews/chrome.js?v=51927" type="text/javascript"></script>
<script class="cpk_chrome" language="javascript" src="http://cdn.lib.newsvine.com/chrome/defaultdiscuss/chrome.js?v=51927" type="text/javascript"></script>
<script src="//assets.adobedtm.com/cd771b0aa897f931a306d7ab6af0d448836b5fd1/satelliteLib-d7647ef38f862ffb17587d65d0a95182256c1765.js"></script><script type="text/javascript">
/*!******************
Tracking Service $t
Version: 2.4.1
Built: 2017-08-24T19:35:07.994Z
*********************/
!function(e,t){var n=function(){var n=function(e){return"function"==typeof n[e]?n[e].apply(n,Array.prototype.slice.call(arguments,1)):arguments.length>0?n.get.apply(n,arguments):n.list.apply(n,arguments)},r=function(e,t){n.errorLog.push(e),(!t||n.debug>=1)&&i("$t error - "+e)},i=e.console?function(){e.console.log.apply(e.console,arguments)}:function(){},o=function(e,t){e=e||{};for(var n in t)"object"==typeof t[n]?e[n]=o(e[n],t[n]):e[n]=t[n];return e},s=function(e,t){var i=!1;return/^[^a-zA-Z_$]|[^0-9a-zA-Z_$]/.test(e)&&(i="validation: "+e+" is not a valid variable name"),t||void 0===n.eventLog[e]||(i="validation: "+e+" is already registered"),!i||(r(i),!1)},a={exp:36e5,key:"ts_data.",save:function(t,n,r){var i=(new Date).getTime(),o={eventData:n,timestamp:i};i=r?i+r:i+this.exp;var s=/\w+\.\w+$/.exec(e.location.hostname);return this.cookie.set({name:this.key+t,value:JSON.stringify(o),path:"/",expires:new Date(i),domain:s}),n},load:function(e){var t=null;return!!(t=this.cookie.get(this.key+e))&&(t=JSON.parse(t),(new Date).getTime()<t.timestamp?t.eventData:void 0)},listEvents:function(){var e,t=[];e=this.cookie.keys();for(var n in e)isNaN(n)||(n=e[n]),-1!=n.indexOf(this.key)&&t.push(n.split(this.key)[1]);return t},cookie:{get:function(e){var n=t.cookie.split(e+"=");return 2===n.length&&decodeURI(n.pop().split(";").shift())},set:function(e){var n=e.name+"="+encodeURI(e.value)+";";e.expires&&(n+="expires="+e.expires.toUTCString()+";"),n+=e.path?"path="+e.path+";":"",n+=e.domain?"domain="+e.domain+";":"",n+=e.secure?"secure;":"",n+=e.httpOnly?"httpOnly;":"",t.cookie=n},keys:function(){var e=[],n=t.cookie;if(""===n)return e;for(var r=n.split("; "),i=r.length;i--;){var o=r[i].split("=");e[i]=o[0]}return e}}},c={listeners:{},trigger:function(e,t,i){if(this.listeners[t]&&this.listeners[t].length>0)for(var o=0;this.listeners[t][o];o++){var s=this.listeners[t][o];try{s.apply(n,[{type:t},i])}catch(e){r("Cant execute callback for: "+t+". "+e.stack)}}},bind:function(e,t,n){void 0===this.listeners[t]&&(this.listeners[t]=[]),this.listeners[t].push(n)}},f=function(t){if(t=t.split("."),void 0!==e[t[0]]){for(var n=e[t[0]],i=1;t.length>i;i++){if(null===n||void 0===n[t[i]])return r("TRAM convert - undefined - "+t.join().replace(/,/g,"."),!0),!1;n=n[t[i]]}return!function(e){if("object"==typeof e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}return!1}(n)&&n||!1}return r("TRAM convert - missing root obj - "+t[0],!0),!1},l={},v={uniqueKey:"$t_nbc_crossEvent",srcUrl:[e.location.protocol,"//",e.location.host,e.location.pathname].join(""),listen:function(){var t=this.uniqueKey,r=this.srcUrl,i=e.addEventListener?"addEventListener":"attachEvent",o=function(e){try{return JSON.parse(e)}catch(e){return null}};(0,e[i])("attachEvent"==i?"onmessage":"message",function(i){if("string"==typeof i.data&&i.data.substring(0,t.length)===t){var s=o(i.data.replace(t,""));s&&s.action&&s.srcUrl!==r&&("track"!==s.action[0]&&"register"!==s.action[0]||(n.apply(n,s.action),parent!==e&&parent.postMessage(i.data,"*")))}},!1)},send:function(e){var t=this.uniqueKey,n={action:e,srcUrl:this.srcUrl};parent.postMessage(t+JSON.stringify(n),"*")}},u={};return n.version="2.4.1",n.debug=0,n.errorLog=[],n.eventLog={},n.track=function(t,n,s){if(void 0!==this.eventLog[t]){if("object"!=typeof s&&(s={}),n=n||!0,this.eventLog[t]=n,s.persistent){var f=!1;s.expires&&(f=1e3*s.expires),a.save(t,n,f)}if(0!==t.indexOf("_")&&c.trigger(this,"eventTracked",{eventType:t,eventData:n}),u[t]&&u[t].remote){if("object"==typeof n&&!n.$t_remote){var l=[e.location.protocol,"//",e.location.host,e.location.pathname].join("");o(n,{$t_remote:l})}v.send(["track",t,n])}return c.trigger(this,t,n),(1==this.debug&&0!==t.indexOf("_")||2==this.debug)&&i("*Tracking service: "+t+" triggered"),!0}return r("unable to track: "+t),!1},n.register=function(e,t){"object"!=typeof t&&(t={}),t=u[e[f]]=o(u[e[f]]||{},t);for(var n="",i=a.listEvents(),c={},f=0;i[f];f++)c[i[f]]=!0;for("string"==typeof e&&(e=[e]),f=0;e[f];f++){if(!0===c[e[f]])return!0;s(e[f],t.allowDuplicate)?(this.eventLog[e[f]]=null,t.remote&&v.send(["register",e[f],t])):n+=e[f]+","}return!n||(r("could not register: "+n),!1)},n.registeredEvents=function(e){var t=!1,r=[];0===(e=e||"").indexOf("_")&&(t=!0,e=e.substr(1));for(var i in n.eventLog)-1==i.indexOf(e)||0===i.indexOf("_")&&!t||r.push(i);return r},n.bindTrack=function(e){c.bind(this,"eventTracked",e)},n.on=function(e,t){"string"==typeof e&&(e=[e]);for(var n=0;e[n];n++)c.bind(this,e[n],t)},n.load=function(e,t,n){void 0===l[e]?"string"==typeof t?(l[e]={},l[e].info={ref:t,options:n}):r("TRAM load - object reference must be string"):r("TRAM load - object name taken")},n.get=function(e,t){var r=e.split(".")[0];if(t=void 0!==t?t:"",n.eventLog[r]||l[r]){n.eventLog[r]&&(e="$t."+e,r="$t"),e=e.replace(r,l[r].info.ref);var i=f(e);return i||t}return t},n.list=function(e){if(e)n.eventLog[e]?(i(e+" : event info"),i(n.eventLog[e])):l[e]?void 0!==window[l[e].info.ref.split(".")[0]]?(i(e+" : "+l[e].info.ref),i(f(l[e].info.ref))):i(e+" : "+l[e].info.ref+" : Not present"):i(e+" :  Empty or not defined");else{i("%cversion: %s","font-weight:bold;",n.version),i("%cevents:","font-weight:bold;");for(var t in n.eventLog)if(0!==t.indexOf("_")||2==n.debug){var r=u[t]&&u[t].remote?"(remote)":"";n.eventLog[t]?i("%c* %s %s fired %O","color:#B80;",t,r,n.eventLog[t]):(r=u[t]&&u[t].remote?"(remote)":"",i("%s %s",t,r))}i("%cTRAM objects:","font-weight:bold;");for(var o in l)i("%s : %s : %O",o,l[o].info.ref,f(l[o].info.ref));n.errorLog.length>0&&i("%clog: %O","font-weight:bold;",n.errorLog)}},function(){var e=a.listEvents();if(!e)return!1;for(var t=0;e[t];t++){var r=a.load(e[t]);r&&(n.eventLog[e[t]]=r)}}(),n.load("$t","$t.eventLog"),v.listen(),n};if(void 0!==e.$t){if(!parseFloat(e.$t.version)>0){var r=e.$t("getSaves");e.$t=n();for(var i=0;r[i];i++)e.$t.apply(e.$t,r[i])}}else e.$t=n()}(window,document);

if(typeof $t != 'undefined'){
//transport $t calls to dtm TODO remove when direct calls are deleted
  $t('bindTrack',function DTMDirectCall(e,trackingEvent){
    if(typeof _satellite != 'undefined'){
      _satellite.track(trackingEvent.eventType);
    }
  });
  $t('load','dataLayer','analyticsDataLayer');
  $t('load','DTM_dataLayer','DTM');
}

//add in $t tracking to DTM direct calls
(function(_satellite) {
    var tempTrack = _satellite.track,
        eName = 'dtm_directCall';
    $t('register', eName);

    _satellite.track = function(type) {
        var tracked = type != eName ? window.$t('track', eName, type) : false;
        tempTrack(type);
    }
})(window._satellite);
</script><script type="text/javascript">
//setVid v1.3
"undefined"!=typeof jQuery&&!function(e){var t=function(){var t=this,n=function(t,n,o){if(arguments.length>1&&"[object Object]"!==String(n)){if(o=e.extend({},o),(null===n||void 0===n)&&(o.expires=-1),"number"==typeof o.expires){var i=o.expires,s=o.expires=new Date;s.setDate(s.getDate()+i)}return n=String(n),document.cookie=[encodeURIComponent(t),"=",o.raw?n:encodeURIComponent(n),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}o=n||{};var c,d=o.raw?function(e){return e}:decodeURIComponent;return(c=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?d(c[1]):null},o=function(){return"undefined"!=typeof $j?$j.jsonp:function(t,n,o,i){"function"==typeof n&&(i=o,o=n,n=null),"object"!=typeof i&&(i={}),i.url=i.url?i.url:t,i.dataType="jsonp",i.crossDomain=!0,i.success=i.success?i.success:function(){o&&o.apply(n,arguments)},i.callbackParameter="callback",e.ajax(i)}}(),i=function(e){t.errorLog.push(e),s("setVid error- "+e)},s=window.console?function(e){window.console.log(e)}:function(){},c="https:"==window.location.protocol?"https:":"http:",d="undefined"!=typeof $j&&"undefined"!=typeof $j.session.host&&"function"==typeof $j.session.host.getNewsvineRoot?$j.session.host.getNewsvineRoot():c+"//www.newsvine.com/",u="."+/\w+\.\w+$/.exec(window.location.hostname),r=!0;return this.options={timeoutDelay:3e3,emtyValue:"not available"},this.timedout=!1,this.errorLog=[],this.version="1.3",this.checkVid=function(){return null!==n("vid")?n("vid"):!1},this.onVidReady=function(n){t.checkVid()||t.timedout?n.apply(t,[e.Event("vidReady"),t.checkVid()?t.checkVid():t.options.emtyValue]):(e(t).one("vidReady",n),t.options.timeoutDelay&&(clearTimeout(r),r=setTimeout(function(){i("timed out"),t.timedout=!0,e(t).trigger("vidReady",[t.checkVid()?t.checkVid():t.options.emtyValue])},t.options.timeoutDelay)))},this.set=function(){var i=new Date,s=i.getTime(),c={expires:new Date(s+63072e7),path:"/",domain:u};o(d+"_api/user/anonymous",function(o){n("vid",o.data.vid,c),n("_nv",1,c),clearTimeout(r),t.timedout=!0,e(t).trigger("vidReady",[o.data.vid]),"undefined"!=typeof $j&&$j.session.UserLoader.triggerVidReady()})},this.init=function(){"undefined"==typeof e||n("_nv")&&t.checkVid()||this.set()},e(function(){t.init()}),this};window.setVid=window.setVid||t()}(jQuery);
</script><script>
// ===============================================
// AdBlock detector
//
// Attempts to detect the presence of Ad Blocker software
// and notify listener of its existence.
// Copyright (c) 2015 IAB
//
// The MIT License (MIT)
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
// 
// The above copyright notice and this permission notice shall be included in all
// copies or substantial portions of the Software.
// 
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
// SOFTWARE.
// 
// THIS SCRIPT IS PROVIDED STRICTLY "AS IS", AND SHOULD ONLY BE USED IN COMPLIANCE WITH EXISTING LOCAL LAWS AND REGULATIONS.
// ===============================================

"use strict";!function(t){function e(t){var e,n;try{e=JSON.parse(t)}catch(o){try{n=new Function("return "+t),e=n()}catch(o){l("Failed secondary JSON parse",!0)}}return e}function n(t){return"function"==typeof t}function o(t,e){var n,o,r=e,l=document;if(o=l.createElement(t),r)for(n in r)r.hasOwnProperty(n)&&o.setAttribute(n,r[n]);return o}function r(t,e,n){g?t.attachEvent("on"+e,n):t.addEventListener(e,n,!1)}function l(e,n){(h.debug||n)&&t.console&&t.console.log&&(n?console.error("[ABD] "+e):console.log("[ABD] "+e))}function i(t){l("start beginTest"),1!=T&&(b=!0,u(t),S.quick="testing",D.test=setTimeout(function(){a(t,1)},5))}function u(t){var e,n,r=document,i=r.body,u="width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;";if(null==t||"string"==typeof t)return void l("invalid bait being cast");for(null!=t.style&&(u+=t.style),w=o("div",{"class":t.cssClass,style:u}),l("adding bait node to DOM"),i.appendChild(w),e=0;e<z.nullProps.length;e++)n=w[z.nullProps[e]];for(e=0;e<z.zeroProps.length;e++)n=w[z.zeroProps[e]]}function a(t,e){var n,o=document.body,r=!1;if(null==w&&(l("recast bait"),u(t||k)),"string"==typeof t)return l("invalid bait used",!0),void(s()&&setTimeout(function(){b=!1},5));for(D.test>0&&(clearTimeout(D.test),D.test=0),null!==o.getAttribute("abp")&&(l("found adblock body attribute"),r=!0),n=0;n<z.nullProps.length;n++){if(null==w[z.nullProps[n]]){e>4&&(r=!0),l("found adblock null attr: "+z.nullProps[n]);break}if(1==r)break}for(n=0;n<z.zeroProps.length&&1!=r;n++)0==w[z.zeroProps[n]]&&(e>4&&(r=!0),l("found adblock zero attr: "+z.zeroProps[n]));if(void 0!==window.getComputedStyle){var i=window.getComputedStyle(w,null);("none"==i.getPropertyValue("display")||"hidden"==i.getPropertyValue("visibility"))&&(e>4&&(r=!0),l("found adblock computedStyle indicator"))}v=!0,r||e++>=h.maxLoop?(T=r,l("exiting test loop - value: "+T),d(),s()&&setTimeout(function(){b=!1},5)):D.test=setTimeout(function(){a(t,e)},h.loopDelay)}function s(){if(null===w)return!0;try{n(w.remove)&&w.remove(),document.body.removeChild(w)}catch(t){}return w=null,!0}function d(){var t,e;if(null!==T)for(t=0;t<x.length;t++){e=x[t];try{null!=e&&(n(e.complete)&&e.complete(T),T&&n(e.found)?e.found():T===!1&&n(e.notfound)&&e.notfound())}catch(o){l("Failure in notify listeners "+o.Message,!0)}}}function c(){var e,n=!1;document.readyState&&"complete"==document.readyState&&(n=!0),e=function(){i(k,!1)},n?e():r(t,"load",e)}var f="1.0",p="offset",m="client",y=function(){},v=!1,b=!1,g=void 0===t.addEventListener,h={loopDelay:50,maxLoop:5,debug:!0,found:y,notfound:y,complete:y},P=function(){var t={};this.addUrl=function(e){return t[e]={url:e,state:"pending",format:null,data:null,result:null},t[e]},this.setResult=function(n,o,r){var l=t[n];if(null==l&&(l=this.addUrl(n)),l.state=o,null==r)return void(l.result=null);if("string"==typeof r)try{r=e(r),l.format="json"}catch(i){l.format="easylist"}return l.data=r,l}},x=[],w=null,k={cssClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links"},z={nullProps:[p+"Parent"],zeroProps:[]};z.zeroProps=[p+"Height",p+"Left",p+"Top",p+"Width",p+"Height",m+"Height",m+"Width"];var C,S={quick:null,remote:null},T=null,D={test:0,download:0},L={version:f,init:function(t){var e,n;if(t){n={complete:y,found:y,notfound:y};for(e in t)t.hasOwnProperty(e)&&("complete"==e||"found"==e||"notFound"==e?n[e.toLowerCase()]=t[e]:h[e]=t[e]);x.push(n),C=new P,c()}}};t.adblockDetector=L}(window);
</script><script>
(function() {
  var reportAbDetect = function(state) {
  	document.cookie = "i_abd="+encodeURI(state)+";domain=."+location.hostname.split('.').splice(1).join('.')+";path=/";
  };
  if (typeof window.adblockDetector !== 'undefined') {
    window.adblockDetector.init({
      debug:false,
      found: function() {
        reportAbDetect('detected');
      },
      notFound: function() {
        reportAbDetect('not detected');
      }
    });
  }
})();
</script><script>
window.runComscorePv = function() {
    // Comscore
    window._comscore = window._comscore || [];
    window._comscore.push({
        c1: "2",
        c2: "6035083",
        c3: "",
        c4: "nbcnews"
    });
    (function() {
        var s = document.createElement("script"),
            el = document.getElementsByTagName("script")[0];
        s.async = true;
        s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
        el.parentNode.insertBefore(s, el);
    })();
}
window.runComscorePv();
</script>
<script>
$t('on', 'dtm_pv_article', function() {
    window.runComscorePv();
});
</script>
<script src="http://stats.g.doubleclick.net/dc.js"></script><script src="http://assets.adobedtm.com/cd771b0aa897f931a306d7ab6af0d448836b5fd1/s-code-contents-df22810c703bbcb4da38ea9a83b0ffa1091846fd.js"></script><style type="text/css">.mps-gpt-hidden { display: none; }</style><style></style><script charset="utf-8" src="https://platform.twitter.com/js/button.509719336ca39171c37a321231ccaf83.js"></script><link href="//static.vilynx.com/gallery/vpg.min_25e47.css" rel="stylesheet" type="text/css"/></head><body class="c-desktop j_widget j_troff_sandcrawler" id="j_troff_sandcrawler_6">
<div id="parsely-root" style="display: none">
<span data-parsely-site="nbcnews.com" id="parsely-cfg"></span>
<script async="" id="parsely-script" src="http://static.parsely.com/p.js"></script></div>
<script>
    (function(s, p, d) {
      var h=d.location.protocol, i=p+"-"+s,
          e=d.getElementById(i), r=d.getElementById(p+"-root"),
          u=h==="https:"?"d1z2jf7jlzjs58.cloudfront.net"
          :"static."+p+".com";
      if (e) return;
      e = d.createElement(s); e.id = i; e.async = true;
      e.src = h+"//"+u+"/p.js"; r.appendChild(e);
    })("script", "parsely", document);
</script>
<script>
$t('on', 'dtm_pv_article', function() {
    if (s && s.continuousView > 1) {
        if (window.PARSELY && window.PARSELY.beacon) {
            PARSELY.beacon.trackPageView({
                url: $t('dataLayer.canonical_url', [location.protocol, '//', location.host, location.pathname].join('')), // URL to be tracked
                urlref: document.referrer, // Referring URL
                js: 1 // flag indicating this is dynamic
            });
        }
    }
});
</script>
<script>window.DTM=window.DTM||{};window.DTM.routename = "newsvine"</script>
<script src="//www.nbcnews.com/id/51738311" type="text/javascript"></script><script language="javascript" type="text/javascript">document.write('<div class="pokeDiv" style="display:none;"><img id="poke" src="http://log.newsvine.com/poke.gif?x=0|26&amp;get=%2F_news%2F2011%2F10%2F31%2F8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby&amp;rand=1879812583&amp;do=nbcnews.com&amp;ad=" alt="" width="0" height="0" /></div>');</script><div class="pokeDiv" style="display:none;"><img alt="" height="0" id="poke" src="http://log.newsvine.com/poke.gif?x=0|26&amp;get=%2F_news%2F2011%2F10%2F31%2F8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby&amp;rand=1879812583&amp;do=nbcnews.com&amp;ad=" width="0"/></div>
<noscript><div class="pokeDiv" style="display:none;"><img alt="" height="0" id="poke" src="http://log.newsvine.com/poke.gif?x=0|26&amp;get=%2F_news%2F2011%2F10%2F31%2F8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby&amp;rand=1879812583&amp;do=nbcnews.com&amp;ad=" width="0"/></div></noscript>
<div class="chrome_template chrome_nbcnews_ChromeTemplate">
<div class="chrome_header">
<div class="grid_default">
<div class="slim-white-site-header">
<div class="container-gutter">
<div class="container">
<div class="row">
<div class="col-lg-10">
<a class="slim-white-site-header__site-logo inline-block" href="https://www.nbcnews.com/"><svg clip-rule="evenodd" fill-rule="evenodd" viewbox="0 0 166 24" xmlns="https://www.w3.org/2000/svg">
<path d="M43.307 2.132l12.616 12.01v-11.247h4.082v20.834l-12.59-12.248v11.563h-4.108v-20.913zM66.59 14.458h3.74c.843.026 2.397.869 2.397 2.634 0 1.817-1.58 2.607-2.502 2.686h-3.635v-5.321zm-4.161 8.56h9.798c2.317 0 5.03-2.265 5.03-5.347 0-3.161-2.054-4.715-3.397-5.347 0 0 2.476-1.396 2.37-4.398-.132-4.03-3.872-5.031-5.189-5.031h-8.612v20.122zm4.135-16.751h3.055c1.028.079 2.265.87 2.265 2.292 0 1.343-.948 2.292-2.186 2.45h-3.134v-4.741zM92.691 7.058c-4.32-2.871-10.167.053-10.535 5.373-.158 6.453 6.216 9.113 10.535 6.321v4.135c-7.638 2.845-14.645-2.529-14.67-10.324.026-6.612 7.322-12.458 14.67-9.535v4.03zM98.047 2.132l12.615 12.01v-11.247h4.083v20.834l-12.59-12.248v11.563h-4.109v-20.913zM120.751 6.399v4.688h6.558v3.556h-6.558v4.82h6.558v3.555h-10.667v-20.122h10.667v3.503h-6.558zM132.313 2.896l5.321 11.8 1.896-4.24-3.556-7.559h4.188l1.317 3.134 1.264-3.134h4.109l-3.398 7.533 1.897 4.267 5.083-11.8h4.504l-9.219 20.912-4.135-8.876-4.109 8.902-9.481-20.939h4.319zM160.442 2.343c.369 0 2.292.105 4.136 1.212v3.925c-1.08-.685-2.503-1.607-3.872-1.607-1.66 0-2.713 1.238-2.713 2.37 0 2.871 8.007 2.608 8.007 8.955 0 2.107-1.502 6.453-6.796 6.453-.105 0-1.738.158-4.583-1.317v-4.372c1.581 1.712 3.556 2.159 4.32 2.159 1.712 0 2.95-1.342 2.95-2.975 0-3.135-7.796-2.555-7.796-8.903 0-3.45 2.95-5.9 6.347-5.9" fill="#000"></path>
<path d="M11.622 8.567l5.466 12.499-11.276-7.721c-2.829-1.873-2.255-5.084-.688-6.498 2.217-1.873 5.35-1.223 6.497 1.72" fill="#f47a3f"></path>
<path d="M19.16 5.623l-1.988 13.99-5.657-13.302c-1.223-3.326 1.529-5.504 3.364-5.542 2.102-.229 4.74 1.376 4.281 4.854" fill="#ce1041"></path>
<path d="M27.76 6.274l-5.619 13.34-1.797-12.04c-.152-1.834.994-1.873 1.414-2.217l-.65-.268h-1.071c-.114-3.134 2.332-4.51 4.32-4.358 2.141.076 4.548 2.561 3.402 5.542" fill="#7d77b8"></path>
<path d="M33.493 13.269l-11.276 7.759 5.313-12.346c1.606-3.9 5.352-3.135 6.689-1.644 1.452 1.453 1.873 4.396-.726 6.231" fill="#0279b7"></path>
<path d="M34.678 22.404h-13.034l10.587-7.377c2.6-1.72 5.351-.153 6.078 2.102.765 2.522-.956 5.274-3.631 5.274" fill="#62bc46"></path>
<path d="M.927 16.976c.994-2.599 3.746-3.517 6.193-1.949l10.588 7.377h-12.843c-2.676 0-4.778-2.446-3.938-5.427" fill="#fdb912"></path>
</svg>
</a>
<button class="js-toggle btn btn_alt btn_md btn_site-menu inline-block" data-togglecontrols='{"toggleClass":"is-open", "selector":".dropdown_site-nav", "activeTarget":true}'>Sections<i aria-hidden="true" class="fa fa-chevron-down"></i><i aria-hidden="true" class="fa fa-chevron-up"></i></button>
<ul class="nav-bar hidden-xs inline-block">
<li><a class="vilynx_listened" href="https://www.nbcnews.com/nightly-news"> Nightly News</a></li>
<li class="hidden-sm"><a class="vilynx_listened" href="http://www.msnbc.com" target="blank">MSNBC</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/meet-the-press"> Meet the Press</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/dateline"> Dateline</a></li>
<li class="hidden-sm"><a class="vilynx_listened" href="https://www.today.com" target="blank"><span class="today-sun-logo"><img alt="TODAY" height="10" src="https://nodeassets.nbcnews.com/cdnassets/projects/today-logo-site-nav.png" width="20"/></span>Today</a></li>
</ul>
<div class="search site-header-item inline-block" role="search">
<ul class="nav-bar">
<li><a class="js-toggle search_toggle btn_txt vilynx_listened" data-togglecontrols='{"toggleClass":"is-open", "selector":".search_input", "activeTarget":true, "preventDefault":true}' href="https://www.nbcnews.com/search"><i aria-hidden="true" class="fa fa-search"></i><i aria-hidden="true" class="fa fa-times"></i><span class="screen-reader-txt">Search</span></a></li>
</ul>
<div class="search_input">
<form action="https://www.nbcnews.com/search" id="search-form">
<label for="q" id="search_label">
<span class="screen-reader-txt">Search</span>
</label>
<input aria-labelledby="search_label" autofocus="" class="form_control" id="q" name="q" placeholder="Search" required="" type="search"/>
<input class="screen-reader-txt" type="submit" value="Search"/>
</form>
</div>
</div>
</div>
<div class="visible-lg-block col-lg-2">
<ul class="datapoints__share">
<li>
<a class="js-sharethis" href="https://www.facebook.com/sharer/sharer.php?u=undefined" target="_blank" title="Share on Facebook">
<svg enable-background="new 0 0 20 20" version="1.1" viewbox="0 0 20 20" x="0" xml:space="preserve" y="0">
<desc>Share on Facebook</desc>
<path d="M17 1H3C1.9 1 1 1.9 1 3v14c0 1.1 0.9 2 2 2h7v-7H8V9.53h2V7.48c0-2.16 1.21-3.68 3.77-3.68l1.8 0v2.61h-1.2C13.38 6.4 13 7.14 13 7.84v1.69h2.57L15 12h-2v7h4c1.1 0 2-0.9 2-2V3C19 1.9 18.1 1 17 1z"></path>
</svg>
</a>
</li>
<li>
<a class="js-sharethis" href="https://twitter.com/intent/tweet?text=&amp;url=undefined&amp;via=nbcnews" target="_blank" title="Tweet">
<svg enable-background="new 0 0 20 20" version="1.1" viewbox="0 0 20 20" x="0px" xml:space="preserve" y="0px">
<desc>Share on Twitter</desc>
<path d="M17.316 6.246c0.008 0.2 0 0.3 0 0.488c0 4.99-3.797 10.742-10.74 10.742c-2.133 0-4.116-0.625-5.787-1.697 c0.296 0 0.6 0.1 0.9 0.053c1.77 0 3.397-0.604 4.688-1.615c-1.651-0.031-3.046-1.121-3.526-2.621 c0.23 0 0.5 0.1 0.7 0.066c0.345 0 0.679-0.045 0.995-0.131c-1.727-0.348-3.028-1.873-3.028-3.703c0-0.016 0-0.031 0-0.047 c0.509 0.3 1.1 0.5 1.7 0.473c-1.013-0.678-1.68-1.832-1.68-3.143c0-0.691 0.186-1.34 0.512-1.898 C3.942 5.5 6.7 7 9.9 7.158C9.798 6.9 9.8 6.6 9.8 6.297c0-2.084 1.689-3.773 3.774-3.773 c1.086 0 2.1 0.5 2.8 1.191c0.859-0.17 1.667-0.484 2.397-0.916c-0.282 0.881-0.881 1.621-1.66 2.1 c0.764-0.092 1.49-0.293 2.168-0.594C18.694 5.1 18.1 5.7 17.3 6.246z"></path>
</svg>
</a>
</li>
<li>
<a class="vilynx_listened" href="https://secure.nbcnews.com/_tps/accounts/newsletters" target="_blank" title="Email">
<svg version="1.1" viewbox="0 0 20 20" x="0" xml:space="preserve" y="0">
<desc>Email page link</desc>
<path d="M1.57 5.29c0.49 0.26 7.25 3.89 7.5 4.03C9.33 9.45 9.65 9.51 9.98 9.51c0.33 0 0.65-0.06 0.91-0.2s7.01-3.77 7.5-4.03C18.88 5.02 19.34 4 18.44 4H1.52C0.62 4 1.09 5.02 1.57 5.29zM18.61 7.49c-0.56 0.29-7.39 3.85-7.73 4.03s-0.58 0.2-0.91 0.2 -0.57-0.02-0.91-0.2S1.94 7.78 1.39 7.49C1 7.28 1 7.52 1 7.71S1 15 1 15c0 0.42 0.57 1 1 1h16c0.43 0 1-0.58 1-1 0 0 0-7.11 0-7.29S19 7.29 18.61 7.49z"></path>
</svg>
</a>
</li>
</ul>
</div>
</div>
</div>
<nav aria-label="Secondary" class="dropdown dropdown_site-nav" role="navigation">
<h3 class="screen-reader-txt">Secondary Navigation</h3>
<div class="container">
<div class="row">
<div class="col-xs-6 col-sm-4">
<div class="dropdown_col">
<h4 class="item-heading">Sections</h4>
<ul>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/news/us-news">U.S.</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/politics">Politics</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/news/world">World</a></li>
<li><a class="js-localaffiliate vilynx_listened" href="https://www.nbcnews.com/news/us-news/nbc-affiliates-n19981">Local</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/business">Business</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/health">Health</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/investigations">Investigations</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/pop-culture">Pop Culture</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/science">Science</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/tech">Tech</a></li>
<li><a href="https://www.nbcsports.com" target="blank">Sports</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/news/weather">Weather</a></li>
</ul>
</div>
</div>
<div class="col-xs-6 col-sm-4 col">
<div class="dropdown_col">
<h4 class="item-heading">TV</h4>
<ul>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/nightly-news">Nightly News</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/meet-the-press">Meet The Press</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/dateline">Dateline</a></li>
<li><a class="vilynx_listened" href="https://today.com/" target="blank">Today</a></li>
</ul>
<h4 class="item-heading">Featured</h4>
<ul>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/think">Think</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/mach">Mach</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/better">Better</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/leftfield">NBC Left Field</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/news/asian-america">Asian America</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/news/latino">Latino</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/news/nbcblk">NBCBLK</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/feature/nbc-out">NBC Out</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/business/your-business">Your Business</a></li>
</ul>
</div>
</div>
<div class="col-xs-6 col-sm-4">
<div class="dropdown_col">
<h4 class="item-heading">Top Ongoing</h4>
<ul>
<li>
<a data-target="#ongoing-01-section" href="http://photoblog.nbcnews.com/storyline/brexit-referendum">Brexit Referendum</a>
</li>
<li>
<a data-target="#ongoing-02-section" href="http://photoblog.nbcnews.com/storyline/immigration-border-crisis">Immigration Border Crisis</a>
</li>
</ul>
<h4 class="item-heading">Multimedia</h4>
<ul>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/video">Video</a></li>
<li><a class="vilynx_listened" href="https://www.nbcnews.com/news/photo">Photo</a></li>
</ul>
<h4 class="item-heading h3">More From NBC</h4>
<ul>
<li><a href="https://nbcsports.com/">Sports</a></li>
<li><a href="https://cnbc.com/">CNBC</a></li>
<li><a href="http://www.msnbc.com/">MSNBC.com</a></li>
<li><a href="https://nbc.com/">NBC.com</a></li>
<li><a href="https://www.nbclearn.com/portal/site/learn">NBC Learn</a></li>
<li><a href="https://recode.net/">Re/Code</a></li>
<li><a href="http://www.peacockproductions.tv/">Peacock Productions</a></li>
<li><a class="vilynx_listened" href="http://veterans.nbcnews.com/">Next Steps for Vets</a></li>
<li><a href="http://parenttoolkit.com/">Parent Toolkit</a></li>
</ul>
</div>
</div>
</div>
</div>
</nav>
</div>
</div>
</div>
<div class="c-discuss-header">
<p>
<a class="c-site-logo" href="http://www.nbcnews.com/"></a><a class="c-dept-title vilynx_listened" href="http://www.nbcnews.com/news/photo">Photos</a></p>
</div>
</div>
<div class="chrome_viewport">
<div class="elliott_layout_Viewport defaultdiscuss_layout_DiscussionViewport viewport-layout grid-fixed"><div class="layout-container grid-2col mainpane"><div class="j-article-column c-article-column" data-content-id="8558858" data-domain="photoblog" data-headline="Introducing Danica May Camacho, the world's first 7-billionth baby" data-pinned="" data-post-type="text_post" data-type="n">
<article class="c-icon c-article">
<header>
<p class="c-discuss-leader">Discuss as:</p>
<div class="j_zinger2_menu j_widget c-zinger" id="j_zinger2_menu_1"><span class="j-target c-z-target"><a class="c-target" href="http://photoblog.nbcnews.com/#"><span class="c-avatar"><img alt="Author Avatar" class="j-avatar" height="20" src="http://nvcdn.nbcnews.com/_vine/images/av/90x90/msnbc.jpg" width="20"/></span><span class="c-z-label j-label">Sign in</span><span class="c-touchhide">▾</span></a></span></div>
<h1>Introducing Danica May Camacho, the world's first 7-billionth baby</h1>
<div class="c-byline">By <strong> Photos</strong></div>
<span class="c-dateline">Monday Oct 31, 2011 3:30 AM</span>
<div class="c-article-actions">
<span class="c-share-btn">
<a class="c-button c-icon c-email vilynx_listened" href="http://photoblog.nbcnews.com/mailto:?&amp;subject=Introducing Danica May Camacho, the world's first 7-billionth baby&amp;body=%0d%0A%0d%0Avia%20Introducing Danica May Camacho, the world's first 7-billionth baby - Photos%20Discussions%0d%0A%0d%0Ahttp://photoblog.nbcnews.com/_news/2011/10/31/8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby%0d%0A%0d%0Anbcnews.com">Email</a>
</span>
<span class="c-share-btn">
<iframe allowtransparency="true" frameborder="0" scrolling="no" src="https://www.facebook.com/plugins/like.php?layout=button_count&amp;show_faces=false&amp;width=90&amp;action=like&amp;colorscheme=light&amp;href=http://photoblog.nbcnews.com/_news/2011/10/31/8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby" style="border:none; overflow:hidden; width:90px; height:20px"></iframe> </span>
<span class="c-share-btn">
<div class="tweetbutton"><iframe allowtransparency="true" class="twitter-share-button twitter-share-button-rendered twitter-tweet-button" frameborder="0" id="twitter-widget-0" scrolling="no" src="https://platform.twitter.com/widgets/tweet_button.ed954039b4da87657c2de914fe37d022.en.html#dnt=false&amp;id=twitter-widget-0&amp;lang=en&amp;original_referer=http%3A%2F%2Fphotoblog.nbcnews.com%2F_news%2F2011%2F10%2F31%2F8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby&amp;size=m&amp;text=Introducing%20Danica%20May%20Camacho%2C%20the%20world%27s%20first%207-billionth%20baby%20-%20Photos&amp;time=1563149000813&amp;type=share&amp;url=http%3A%2F%2Fphotoblog.nbcnews.com%2F_news%2F2011%2F10%2F31%2F8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby" style="position: static; visibility: visible; width: 61px; height: 20px;" title="Twitter Tweet Button"></iframe><script src="https://platform.twitter.com/widgets.js" type="text/javascript"></script></div> </span>
</div>
<div class="c-tags"></div>
</header>
<div class="elliott_content_ArticleText"> <div class="articleText"><div class="inlinePhoto photo_landscape photo_align_block" data-contentid="8558860" id="vine-inlinePhoto__8558860" style="width:900px;"><img alt="" height="582" id="http://msnbcmedia.msn.com/i/MSNBC/Components/Photo/_new/pb-111031-baby-da-01.jpg" src="https://media1.s-nbcnews.com/j/MSNBC/Components/Photo/_new/pb-111031-baby-da-01.photoblog900.jpg" width="900"/><p class="photo_credit">Erik De Castro / AFP - Getty Images</p><div class="photo_credit_container"><p>A newly born baby girl named Danica May Camacho, the Philippines' symbolic seven billionth baby, is weighed in the Fabella Maternity hospital in Manila on October 31. The world's population will reach seven billion on October 31, according to projections by the United Nations, which says this global milestone presents both an opportunity and a challenge for the planet. </p></div></div><p><span><span>After all of the  build-up, it seems the U.N. has decided that there should be more than  one 7-billionth baby. Let the circus begin...</span></span></p><p><span><span>msnbc.com staff and news services <a href="http://www.msnbc.msn.com/id/45100073/ns/world_news/">report</a>:</span></span></p>
<blockquote>
<p>A string of festivities are being held worldwide, with a series of symbolic 7-billionth babies being born.</p>
<p>The celebrations began in the <nobr><span>Philippines</span></nobr>,  where baby Danica May Camacho was greeted with cheers and an explosion  of photographers' flashbulbs at Manila's Jose Fabella Memorial Hospital.</p>
<p>The <a href="http://www.guardian.co.uk/world/2011/oct/31/seven-billionth-baby-born-philippines">Guardian newspaper reported that</a> Danica, whose name means morning star, had been chosen by the U.N. to  be one of a number of symbolic 7 billionth babies. It is not known who  the actual baby is.</p>
</blockquote><div class="inlinePhoto photo_landscape photo_align_block" data-contentid="8558865" id="vine-inlinePhoto__8558865" style="width:900px;"><img alt="" height="609" id="http://msnbcmedia.msn.com/i/MSNBC/Components/Photo/_new/pb-111031-baby-da-03.jpg" src="https://media1.s-nbcnews.com/j/MSNBC/Components/Photo/_new/pb-111031-baby-da-03.photoblog900.jpg" width="900"/><p class="photo_credit">Erik De Castro / Reuters</p><div class="photo_credit_container"><p>Midwives hold Danica May Camacho up for the cameras.</p></div></div><p>Danica arrived two minutes before midnight Sunday, but doctors decided that was close enough to count for a Monday birthday.<strong> </strong></p>
<p>The baby received a shower of gifts, from a chocolate cake marked "7B Philippines" to a gift certificate for shoes.</p>
<p>"She looks so lovely," the mother,  Camille Galura, whispered as she cradled the 5.5-pound baby, who was  born about a month premature. <em><a href="http://www.msnbc.msn.com/id/45100073/ns/world_news/">Read the full story</a></em>.</p><div class="inlinePhoto photo_landscape photo_align_block" data-contentid="8558863" id="vine-inlinePhoto__8558863" style="width:900px;"><img alt="" height="622" id="http://msnbcmedia.msn.com/i/MSNBC/Components/Photo/_new/pb-111031-baby-da-02.jpg" src="https://media1.s-nbcnews.com/j/MSNBC/Components/Photo/_new/pb-111031-baby-da-02.photoblog900.jpg" width="900"/><p class="photo_credit">Ted Aljibe / AFP - Getty Images</p><div class="photo_credit_container"><p>Danica May Camacho is coddled by her mother Camille as United Nations resident coordinator Jacqui Badcock, left, hands over a gift and Philippine Health Secretary Enrique Ona, right, looks on, during a welcoming ceremony after she was born at a government-run maternity hospital in Manila. Weighing 2.5 kilos, the baby was delivered shortly before midnight October 30 amid an explosion of flash bulbs from a media contingent that had waited for hours at the delivery room. </p></div></div><p><a href="http://photoblog.msnbc.msn.com/seven-billion">See more PhotoBlog posts related to the seven billion population milestone</a>:</p>
<ul>
<li>
<div itxtharvested="0" itxtnodeid="61"><a href="http://photoblog.msnbc.msn.com/_news/2011/10/29/8434392-worlds-largest-family-1-husband-39-wives-94-children">World's largest family: 1 husband, 39 wives, 94 children</a></div>
</li>
<li>
<div itxtharvested="0" itxtnodeid="61"><a href="http://photoblog.msnbc.msn.com/_news/2011/10/28/8401604-managing-a-growing-world-population-with-a-shrinking-water-supply">Managing a growing world population with a shrinking water supply</a></div>
</li>
<li>
<div itxtharvested="0" itxtnodeid="61"><a href="http://photoblog.msnbc.msn.com/_news/2011/10/27/8418298-chinas-middle-class-booms-but-aging-population-threatens-prosperity">China's middle class booms, but aging population threatens prosperity</a></div>
</li>
<li>
<div itxtharvested="0" itxtnodeid="61"><a href="http://photoblog.msnbc.msn.com/_news/2011/10/26/8385144-nations-birth-rates-rise-and-fall-philippines-welcomes-200-babies-an-hour">Nations' birth rates rise and fall: Philippines welcomes 200 babies an hour</a></div>
</li>
<li>
<div itxtharvested="0" itxtnodeid="61"><a href="http://photoblog.msnbc.msn.com/_news/2011/10/25/8434505-7-billion-people-tax-the-worlds-environment">7 billion people tax the world's environment</a></div>
</li>
<li>
<div itxtharvested="0" itxtnodeid="61"><a href="http://photoblog.msnbc.msn.com/_news/2011/10/24/8401161-what-do-7-billion-people-look-like">What do 7 billion people look like?</a></div>
</li>
<li>
<div itxtharvested="0" itxtnodeid="61"><a href="http://photoblog.msnbc.msn.com/_news/2011/10/16/8324563-room-for-more-squeeze-in-the-world-population-is-about-to-hit-7-billion">Room for more? Squeeze in, the world population is about to hit 7 billion</a></div>
</li>
</ul></div></div><div class="c-article-list"><div class="j_contentset_active j_widget" data-domain="photoblog" data-link-to-article="true" data-num-to-show="5" data-title="&lt;h3&gt;Popular Discussions&lt;/h3&gt;" id="j_contentset_active_2"><h3>Popular Discussions</h3><ul><li class=""><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/widespread-flooding-hits-texas-n364826">Widespread Flooding Hits Texas</a><span class="c-comment-label">6 comments</span></li><li class=""><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/americas-fallen-honored-n364286">America's Fallen Honored Across Nation for Memorial Day</a><span class="c-comment-label">8 comments</span></li><li class=""><a class="vilynx_listened" href="http://www.nbcnews.com/pop-culture/music/fifty-years-ago-today-grateful-dead-play-their-first-gig-n354171">Fifty Years Ago Today Grateful Dead Play Their First Gig</a><span class="c-comment-label">12 comments</span></li><li class=""><a class="vilynx_listened" href="http://www.nbcnews.com/storyline/baltimore-unrest/baltimore-cleans-after-riots-n349706">Baltimore Cleans Up After Riots</a><span class="c-comment-label">7 comments</span></li><li class=""><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/clear-waters-show-lake-michigans-centuries-old-shipwrecks-n344626">Clear Waters Show Off Lake Michigan's Century Old Shipwrecks</a><span class="c-comment-label">8 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/mystery-man-rescues-driver-cliffs-edge-n342521">Mystery Man Rescues Driver From Cliff's Edge</a><span class="c-comment-label">25 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/fifty-years-later-malcolm-xs-fight-equality-n310051">Fifty Years Later - Malcolm X's Fight for Equality</a><span class="c-comment-label">10 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/world-press-photo-2014-winners-n304986">World Press Photo 2014 Winners</a><span class="c-comment-label">6 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/world-press-photo-awards-image-gay-couple-russia-n304911">World Press Photo Awards Intimate Image of Gay Couple in Russia</a><span class="c-comment-label">146 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/storyline/ukraine-crisis/aerials-show-airport-destroyed-shelling-ukraine-n288516">Aerials Show Airport Destroyed by Shelling in Ukraine</a><span class="c-comment-label">41 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/fox-visits-10-downing-street-n285106">A Fox Visits British Prime Minister's Office</a><span class="c-comment-label">7 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/storyline/paris-magazine-attack/france-world-rallies-spread-beyond-paris-n284051">From France to the World: Rallies Spread Beyond Paris</a><span class="c-comment-label">7 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/storyline/paris-magazine-attack/world-leaders-converge-paris-support-n283876">Emotional Moments as Leaders Honor Victims of Paris Attacks</a><span class="c-comment-label">24 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/thousands-officers-pay-their-respects-n279396">Thousands of Officers Honor NYPD's Wenjian Liu</a><span class="c-comment-label">77 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/stray-dog-given-burial-honors-after-18-years-guard-duty-n259651">Stray Dog Given Burial Honors After 18 Years on Guard Duty</a><span class="c-comment-label">7 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/nightly-news/nightly-news-brian-williams-celebrates-10-years-n257141">Nightly News With Brian Williams Celebrates 10 Years</a><span class="c-comment-label">11 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/storyline/michael-brown-shooting/national-outrage-u-s-protests-ferguson-decision-n255986">National Outrage: U.S. Protests Ferguson Decision</a><span class="c-comment-label">41 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/storyline/michael-brown-shooting/photos-show-officer-darren-wilson-after-michael-brown-shooting-n255486">Photos Show Officer Darren Wilson After Michael Brown Shooting</a><span class="c-comment-label">95 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/hello-sailors-australian-warship-berths-next-sunbathers-n253341">Hello Sailors! Australian Warship Berths Next to Sunbathers</a><span class="c-comment-label">9 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/indian-police-storm-cult-leader-rampals-compound-n252376">Indian Police Storm Cult Leader Rampal's Compound</a><span class="c-comment-label">13 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/western-ny-digs-out-after-record-breaking-storm-n251906">Western NY Digs Out After Record-Breaking Storm</a><span class="c-comment-label">16 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/dog-days-winter-record-breaking-snow-hits-buffalo-n251471">Dog Days of Winter: Record-Breaking Snow Hits Buffalo</a><span class="c-comment-label">8 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/prince-harry-challenged-mock-sword-fight-oman-n251446">Prince Harry Challenged to Mock Sword Fight in Oman</a><span class="c-comment-label">12 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/tsa-shares-wackiest-items-confiscated-jfk-airport-n251091">TSA Shares Weirdest Items Confiscated From JFK Airport</a><span class="c-comment-label">11 comments</span></li><li class="c-hide"><a class="vilynx_listened" href="http://www.nbcnews.com/news/photo/kodak-legacy-fades-memory-city-n250276">Kodak Legacy Fades Into 'Memory City'</a><span class="c-comment-label">21 comments</span></li><li class="j-more c-more"><a class="c-button" href="http://photoblog.nbcnews.com/#show_more">20 more…</a></li></ul></div></div></article></div>
</div><div class="layout-container grid-1col radbar"><div class="elliott_widget_InsertMPSAd"><div class="box-ad" data-placement="box1"><div class="ad-label"><a class="mediakit" href="https://together.nbcuni.com/" target="_blank">Advertise</a> | <a class="adchoices" href="http://info.evidon.com/pub_info/1195?v=1" target="_blank">AdChoices</a></div></div></div></div></div>
<div class="viewport-layout grid-full">
<div class="defaultdiscuss_Discussion"> <div class="discussions" id="discussions">
<div class="c-discussion-sidebar">
<div class="elliott_widget_InsertMPSAd"><div class="box-ad" data-placement="box2"><div class="ad-label"><a class="mediakit" href="https://together.nbcuni.com/" target="_blank">Advertise</a> | <a class="adchoices" href="http://info.evidon.com/pub_info/1195?v=1" target="_blank">AdChoices</a></div></div></div> </div>
<div class="j_troff_troff c-widget-troff j_widget" data-content-id="8558858" id="j_troff_troff_3"><div class="j-conv-starter c-conv-starter j_widget j_login_check" id="j_login_check_4"></div><div class="j-discussion j_widget j_troff_nvthread j-focus-thread" id="j_troff_nvthread_5"><div class="j-group-discussion c-group-discussion" id="_public_"><section class="j-group-meta j-stickify c-group-meta"><h2><span class="c-group-title">Discussions</span></h2><div class="j-cth"></div><div class="j-group-activity c-group-activity c-verbose"><span class="c-group-activity-count"><span class="c-num">5</span> comments from <span class="c-num">4</span> people</span></div></section><div class="j-thread-collapsible c-thread"><div class="c-holder"><div class="j-comment-expander-prev c-comment-expander-prev" style="display: none;"><button class="j-expand c-button">View <span class="j-text"></span></button></div></div><div class="j-comment-thread c-comments" data-count="5"><article class="j-comment c-comment" id="th3259614-c59479929" style="display: block;"><header><h2><a class="c-username" data-domain-name="7billionth" href="http://7billionth.newsvine.com/" name="59479929" rel="twipsy" title="Visit  Profile">Seven Billionth Person project</a><span class="c-author-about"></span><time class="j-comment-timestamp c-comment-timestamp" data-local-time="10/31/2011 3:11:09 PM" pubdate="Mon, 31 Oct 2011 15:11:09 GMT" style="display: none;" title="Mon, 31 Oct 2011 15:11:09 GMT">Mon, 31 Oct 2011 15:11:09 GMT</time></h2><ul class="c-comment-meta"><li class="j-comment-id c-comment-id"><a class="vilynx_listened vilynx_listened" href="http://photoblog.nbcnews.com/_news/2011/10/31/8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby#th3259614-c59479929">#1</a></li><li class="j-status c-flag" style="display: none;"></li><li class="c-flag c-new">NEW</li></ul></header><div class="j-author-info c-author-info"><a class="j-author-avatar c-author-avatar" data-card-title="Seven Billionth Person project" data-domain-name="7billionth" href="http://7billionth.newsvine.com/" rel="twipsy" title="Open  Card"><img alt="comment author avatar" data-src="http://nvcdn.nbcnews.com/_vine/images/av/60x60/msnbc.jpg" src="http://nvcdn.nbcnews.com/_vine/images/av/60x60/msnbc.jpg" width="60"/></a></div><div class="c-comment-text c-parent"><div class="j-body j-quotable c-comment-body"><span class="j-text"><p>We have collected letters, photographs and videos from around the world for the 7 billionth person. Please join our global conversation, submissions welcome: www.7billionthpersonproject.org</p></span></div><div class="c-comment-info"><span class="j-reply-count c-reply-count c-zero"><strong><span class="j-rc c-num">0</span></strong> replies </span><ul class="c-comment-actions"><li class="j-vote c-vote"><button class="c-button c-icon c-upvotes"> </button></li><li class="j-comment-action c-reply"><a class="j-button-reply c-button c-reply" href="http://photoblog.nbcnews.com/#" ref="th3259614-c59479929">Reply</a></li><li class="j-share c-share" data-placement="top" rel="twipsy" title="Share this comment"><a class="c-button" href="http://photoblog.nbcnews.com/#">Share</a></li><li><button class="j-comment-action j-report c-button c-report c-bad" data-placement="top" rel="twipsy" title="Report abuse"><span>Report</span></button></li><li class="c-admin-cog"><a class="j-admin-cog c-button c-cog" style="display:none;">cog</a></li></ul></div></div><div class="j-replies c-replies"><div class="c-holder"><div class="j-reply-expander-prev c-reply-expander-prev" style="display: none;"><p><button class="j-expand c-button"><span class="j-text"></span></button></p></div><div class="j-reply-articles c-reply-articles" style="display: none;"></div><div class="j-reply-expander-next c-reply-expander-next" style="display: none;"><p><button class="j-expand c-button"><span class="j-text"></span></button></p></div></div></div><div class="c-reply"><form class="j-reply-new c-reply-new" style="display: none;"><fieldset><a class="j-author-avatar c-author-avatar" data-domain-name=""></a><p class="c-username"></p><div class="c-comment-new-textarea"><span class="j-clear-reply c-close" style="display: none;">×</span><div class="j-reply-target c-reply-target" style="display: none;"></div><textarea cols="60" id="te59479929" name="comment" placeholder="Enter your reply here" rows="10"></textarea></div><div class="c-reply-actions"><input class="c-button" name="reply" type="submit" value="Publish"/></div></fieldset></form></div></article><article class="j-comment c-comment" id="th3259614-c59479956" style="display: block;"><header><h2><a class="c-username" data-domain-name="7billionth" href="http://7billionth.newsvine.com/" name="59479956" rel="twipsy" title="Visit  Profile">Seven Billionth Person project</a><span class="c-author-about"></span><time class="j-comment-timestamp c-comment-timestamp" data-local-time="10/31/2011 3:11:51 PM" pubdate="Mon, 31 Oct 2011 15:11:51 GMT" style="display: none;" title="Mon, 31 Oct 2011 15:11:51 GMT">Mon, 31 Oct 2011 15:11:51 GMT</time></h2><ul class="c-comment-meta"><li class="j-comment-id c-comment-id"><a class="vilynx_listened vilynx_listened" href="http://photoblog.nbcnews.com/_news/2011/10/31/8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby#th3259614-c59479956">#2</a></li><li class="j-status c-flag" style="display: none;"></li><li class="c-flag c-new">NEW</li></ul></header><div class="j-author-info c-author-info"><a class="j-author-avatar c-author-avatar" data-card-title="Seven Billionth Person project" data-domain-name="7billionth" href="http://7billionth.newsvine.com/" rel="twipsy" title="Open  Card"><img alt="comment author avatar" data-src="http://nvcdn.nbcnews.com/_vine/images/av/60x60/msnbc.jpg" src="http://nvcdn.nbcnews.com/_vine/images/av/60x60/msnbc.jpg" width="60"/></a></div><div class="c-comment-text c-parent"><div class="j-body j-quotable c-comment-body"><span class="j-text"><p>We have collected letters, photographs and videos from around the world for the 7 billionth person. Please join our global conversation, submissions welcome: www.7billionthpersonproject.org</p></span></div><div class="c-comment-info"><span class="j-reply-count c-reply-count c-zero"><strong><span class="j-rc c-num">0</span></strong> replies </span><ul class="c-comment-actions"><li class="j-vote c-vote"><button class="c-button c-icon c-upvotes"> </button></li><li class="j-comment-action c-reply"><a class="j-button-reply c-button c-reply" href="http://photoblog.nbcnews.com/#" ref="th3259614-c59479956">Reply</a></li><li class="j-share c-share" data-placement="top" rel="twipsy" title="Share this comment"><a class="c-button" href="http://photoblog.nbcnews.com/#">Share</a></li><li><button class="j-comment-action j-report c-button c-report c-bad" data-placement="top" rel="twipsy" title="Report abuse"><span>Report</span></button></li><li class="c-admin-cog"><a class="j-admin-cog c-button c-cog" style="display:none;">cog</a></li></ul></div></div><div class="j-replies c-replies"><div class="c-holder"><div class="j-reply-expander-prev c-reply-expander-prev" style="display: none;"><p><button class="j-expand c-button"><span class="j-text"></span></button></p></div><div class="j-reply-articles c-reply-articles" style="display: none;"></div><div class="j-reply-expander-next c-reply-expander-next" style="display: none;"><p><button class="j-expand c-button"><span class="j-text"></span></button></p></div></div></div><div class="c-reply"><form class="j-reply-new c-reply-new" style="display: none;"><fieldset><a class="j-author-avatar c-author-avatar" data-domain-name=""></a><p class="c-username"></p><div class="c-comment-new-textarea"><span class="j-clear-reply c-close" style="display: none;">×</span><div class="j-reply-target c-reply-target" style="display: none;"></div><textarea cols="60" id="te59479956" name="comment" placeholder="Enter your reply here" rows="10"></textarea></div><div class="c-reply-actions"><input class="c-button" name="reply" type="submit" value="Publish"/></div></fieldset></form></div></article><article class="j-comment c-comment" id="th3259614-c59482512" style="display: block;"><header><h2><a class="c-username" data-domain-name="yangcheng" href="http://yangcheng.newsvine.com/" name="59482512" rel="twipsy" title="Visit  Profile">yangcheng</a><span class="c-author-about"></span><time class="j-comment-timestamp c-comment-timestamp" data-local-time="10/31/2011 4:17:17 PM" pubdate="Mon, 31 Oct 2011 16:17:17 GMT" style="display: none;" title="Mon, 31 Oct 2011 16:17:17 GMT">Mon, 31 Oct 2011 16:17:17 GMT</time></h2><ul class="c-comment-meta"><li class="j-comment-id c-comment-id"><a class="vilynx_listened vilynx_listened" href="http://photoblog.nbcnews.com/_news/2011/10/31/8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby#th3259614-c59482512">#3</a></li><li class="j-status c-flag" style="display: none;"></li><li class="c-flag c-new">NEW</li></ul></header><div class="j-author-info c-author-info"><a class="j-author-avatar c-author-avatar" data-card-title="yangcheng" data-domain-name="yangcheng" href="http://yangcheng.newsvine.com/" rel="twipsy" title="Open  Card"><img alt="comment author avatar" data-src="http://nvcdn.nbcnews.com/_vine/images/av/60x60/msnbc.jpg" src="http://nvcdn.nbcnews.com/_vine/images/av/60x60/msnbc.jpg" width="60"/></a></div><div class="c-comment-text c-parent"><div class="j-body j-quotable c-comment-body"><span class="j-text"><p>[ Begging for helps ] Complaint about Human Rights Violations by IBM China on Centennial </p>
<p>Please Google:</p>
<p>IBM detained mother of ex-employee on the day of centennial</p>
<p>     or</p>
<p>How Much IBM Can Get Away with is the Responsibility of the Media</p>
<p>      or</p>
<p>Tragedy of Labor Rights Repression in IBM China</p></span></div><div class="c-comment-info"><span class="j-reply-count c-reply-count c-zero"><strong><span class="j-rc c-num">0</span></strong> replies </span><ul class="c-comment-actions"><li class="j-vote c-vote"><button class="c-button c-icon c-upvotes"> </button></li><li class="j-comment-action c-reply"><a class="j-button-reply c-button c-reply" href="http://photoblog.nbcnews.com/#" ref="th3259614-c59482512">Reply</a></li><li class="j-share c-share" data-placement="top" rel="twipsy" title="Share this comment"><a class="c-button" href="http://photoblog.nbcnews.com/#">Share</a></li><li><button class="j-comment-action j-report c-button c-report c-bad" data-placement="top" rel="twipsy" title="Report abuse"><span>Report</span></button></li><li class="c-admin-cog"><a class="j-admin-cog c-button c-cog" style="display:none;">cog</a></li></ul></div></div><div class="j-replies c-replies"><div class="c-holder"><div class="j-reply-expander-prev c-reply-expander-prev" style="display: none;"><p><button class="j-expand c-button"><span class="j-text"></span></button></p></div><div class="j-reply-articles c-reply-articles" style="display: none;"></div><div class="j-reply-expander-next c-reply-expander-next" style="display: none;"><p><button class="j-expand c-button"><span class="j-text"></span></button></p></div></div></div><div class="c-reply"><form class="j-reply-new c-reply-new" style="display: none;"><fieldset><a class="j-author-avatar c-author-avatar" data-domain-name=""></a><p class="c-username"></p><div class="c-comment-new-textarea"><span class="j-clear-reply c-close" style="display: none;">×</span><div class="j-reply-target c-reply-target" style="display: none;"></div><textarea cols="60" id="te59482512" name="comment" placeholder="Enter your reply here" rows="10"></textarea></div><div class="c-reply-actions"><input class="c-button" name="reply" type="submit" value="Publish"/></div></fieldset></form></div></article><article class="j-comment c-comment" id="th3259614-c59483812" style="display: block;"><header><h2><a class="c-username" data-domain-name="zeke--stryker" href="http://zeke--stryker.newsvine.com/" name="59483812" rel="twipsy" title="Visit  Profile">Zeke-_stryker</a><span class="c-author-about"></span><time class="j-comment-timestamp c-comment-timestamp" data-local-time="10/31/2011 4:47:15 PM" pubdate="Mon, 31 Oct 2011 16:47:15 GMT" style="display: none;" title="Mon, 31 Oct 2011 16:47:15 GMT">Mon, 31 Oct 2011 16:47:15 GMT</time></h2><ul class="c-comment-meta"><li class="j-comment-id c-comment-id"><a class="vilynx_listened vilynx_listened" href="http://photoblog.nbcnews.com/_news/2011/10/31/8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby#th3259614-c59483812">#4</a></li><li class="j-status c-flag" style="display: none;"></li><li class="c-flag c-new">NEW</li></ul></header><div class="j-author-info c-author-info"><a class="j-author-avatar c-author-avatar" data-card-title="Zeke-_stryker" data-domain-name="zeke--stryker" href="http://zeke--stryker.newsvine.com/" rel="twipsy" title="Open  Card"><img alt="comment author avatar" data-src="http://nvcdn.nbcnews.com/_vine/images/av/60x60/msnbc.jpg" src="http://nvcdn.nbcnews.com/_vine/images/av/60x60/msnbc.jpg" width="60"/></a></div><div class="c-comment-text c-parent"><div class="j-body j-quotable c-comment-body"><span class="j-text"><p>I can't believe we're celebrating this. 7billion is a bad thing.</p></span></div><div class="c-comment-info"><span class="j-reply-count c-reply-count c-zero"><strong><span class="j-rc c-num">0</span></strong> replies </span><ul class="c-comment-actions"><li class="j-vote c-vote"><button class="c-button c-icon c-upvotes"> </button></li><li class="j-comment-action c-reply"><a class="j-button-reply c-button c-reply" href="http://photoblog.nbcnews.com/#" ref="th3259614-c59483812">Reply</a></li><li class="j-share c-share" data-placement="top" rel="twipsy" title="Share this comment"><a class="c-button" href="http://photoblog.nbcnews.com/#">Share</a></li><li><button class="j-comment-action j-report c-button c-report c-bad" data-placement="top" rel="twipsy" title="Report abuse"><span>Report</span></button></li><li class="c-admin-cog"><a class="j-admin-cog c-button c-cog" style="display:none;">cog</a></li></ul></div></div><div class="j-replies c-replies"><div class="c-holder"><div class="j-reply-expander-prev c-reply-expander-prev" style="display: none;"><p><button class="j-expand c-button"><span class="j-text"></span></button></p></div><div class="j-reply-articles c-reply-articles" style="display: none;"></div><div class="j-reply-expander-next c-reply-expander-next" style="display: none;"><p><button class="j-expand c-button"><span class="j-text"></span></button></p></div></div></div><div class="c-reply"><form class="j-reply-new c-reply-new" style="display: none;"><fieldset><a class="j-author-avatar c-author-avatar" data-domain-name=""></a><p class="c-username"></p><div class="c-comment-new-textarea"><span class="j-clear-reply c-close" style="display: none;">×</span><div class="j-reply-target c-reply-target" style="display: none;"></div><textarea cols="60" id="te59483812" name="comment" placeholder="Enter your reply here" rows="10"></textarea></div><div class="c-reply-actions"><input class="c-button" name="reply" type="submit" value="Publish"/></div></fieldset></form></div></article><article class="j-comment c-comment" id="th3259614-c59485331" style="display: block;"><header><h2><a class="c-username" data-domain-name="hkmp5kpdw" href="http://hkmp5kpdw.newsvine.com/" name="59485331" rel="twipsy" title="Visit  Profile">HK_MP5KPDW</a><span class="c-author-about"></span><time class="j-comment-timestamp c-comment-timestamp" data-local-time="10/31/2011 5:21:16 PM" pubdate="Mon, 31 Oct 2011 17:21:16 GMT" style="display: none;" title="Mon, 31 Oct 2011 17:21:16 GMT">Mon, 31 Oct 2011 17:21:16 GMT</time></h2><ul class="c-comment-meta"><li class="j-comment-id c-comment-id"><a class="vilynx_listened vilynx_listened" href="http://photoblog.nbcnews.com/_news/2011/10/31/8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby#th3259614-c59485331">#5</a></li><li class="j-status c-flag" style="display: none;"></li><li class="c-flag c-new">NEW</li></ul></header><div class="j-author-info c-author-info"><a class="j-author-avatar c-author-avatar" data-card-title="HK_MP5KPDW" data-domain-name="hkmp5kpdw" href="http://hkmp5kpdw.newsvine.com/" rel="twipsy" title="Open  Card"><img alt="comment author avatar" data-src="http://nvcdn.nbcnews.com/_vine/images/av/60x60/msnbc.jpg" src="http://nvcdn.nbcnews.com/_vine/images/av/60x60/msnbc.jpg" width="60"/></a></div><div class="c-comment-text c-parent"><div class="j-body j-quotable c-comment-body"><span class="j-text"><p>Is she related to "Dwayne Elizondo Mountain Dew Herbert Camacho"?</p></span></div><div class="c-comment-info"><span class="j-reply-count c-reply-count c-zero"><strong><span class="j-rc c-num">0</span></strong> replies </span><ul class="c-comment-actions"><li class="j-vote c-vote"><button class="c-button c-icon c-upvotes"> </button></li><li class="j-comment-action c-reply"><a class="j-button-reply c-button c-reply" href="http://photoblog.nbcnews.com/#" ref="th3259614-c59485331">Reply</a></li><li class="j-share c-share" data-placement="top" rel="twipsy" title="Share this comment"><a class="c-button" href="http://photoblog.nbcnews.com/#">Share</a></li><li><button class="j-comment-action j-report c-button c-report c-bad" data-placement="top" rel="twipsy" title="Report abuse"><span>Report</span></button></li><li class="c-admin-cog"><a class="j-admin-cog c-button c-cog" style="display:none;">cog</a></li></ul></div></div><div class="j-replies c-replies"><div class="c-holder"><div class="j-reply-expander-prev c-reply-expander-prev" style="display: none;"><p><button class="j-expand c-button"><span class="j-text"></span></button></p></div><div class="j-reply-articles c-reply-articles" style="display: none;"></div><div class="j-reply-expander-next c-reply-expander-next" style="display: none;"><p><button class="j-expand c-button"><span class="j-text"></span></button></p></div></div></div><div class="c-reply"><form class="j-reply-new c-reply-new" style="display: none;"><fieldset><a class="j-author-avatar c-author-avatar" data-domain-name=""></a><p class="c-username"></p><div class="c-comment-new-textarea"><span class="j-clear-reply c-close" style="display: none;">×</span><div class="j-reply-target c-reply-target" style="display: none;"></div><textarea cols="60" id="te59485331" name="comment" placeholder="Enter your reply here" rows="10"></textarea></div><div class="c-reply-actions"><input class="c-button" name="reply" type="submit" value="Publish"/></div></fieldset></form></div></article><article class="j-comment c-comment" id="th3259614-c59490534" style="display: block;"><header><h2><a class="c-username" data-domain-name="lessismore4406222" href="http://lessismore4406222.newsvine.com/" name="59490534" rel="twipsy" title="Visit  Profile">Less is more-4406222</a><span class="c-author-about"></span><time class="j-comment-timestamp c-comment-timestamp" data-local-time="10/31/2011 7:25:43 PM" pubdate="Mon, 31 Oct 2011 19:25:43 GMT" style="display: none;" title="Mon, 31 Oct 2011 19:25:43 GMT">Mon, 31 Oct 2011 19:25:43 GMT</time></h2><ul class="c-comment-meta"><li class="j-comment-id c-comment-id"><a class="vilynx_listened vilynx_listened" href="http://photoblog.nbcnews.com/_news/2011/10/31/8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby#th3259614-c59490534">#6</a></li><li class="j-status c-flag" style="display: none;"></li><li class="c-flag c-new">NEW</li></ul></header><div class="j-author-info c-author-info"><a class="j-author-avatar c-author-avatar" data-card-title="Less is more-4406222" data-domain-name="lessismore4406222" href="http://lessismore4406222.newsvine.com/" rel="twipsy" title="Open  Card"><img alt="comment author avatar" data-src="http://nvcdn.nbcnews.com/_vine/images/av/60x60/msnbc.jpg" src="http://nvcdn.nbcnews.com/_vine/images/av/60x60/msnbc.jpg" width="60"/></a></div><div class="c-comment-text c-parent"><div class="j-body j-quotable c-comment-body"><span class="j-text"><p>Overpopulation and conspicuous consumerism...equals more starving prople and environmental destruction.  But corporations need both in order to make their billions. Give up the McMansions and Occupy Wall Street .  Also check out this youtube video about other problems with consumerism.    </p></span></div><div class="c-comment-info"><span class="j-reply-count c-reply-count c-zero"><strong><span class="j-rc c-num">0</span></strong> replies </span><ul class="c-comment-actions"><li class="j-vote c-vote"><button class="c-button c-icon c-upvotes"> </button></li><li class="j-comment-action c-reply"><a class="j-button-reply c-button c-reply" href="http://photoblog.nbcnews.com/#" ref="th3259614-c59490534">Reply</a></li><li class="j-share c-share" data-placement="top" rel="twipsy" title="Share this comment"><a class="c-button" href="http://photoblog.nbcnews.com/#">Share</a></li><li><button class="j-comment-action j-report c-button c-report c-bad" data-placement="top" rel="twipsy" title="Report abuse"><span>Report</span></button></li><li class="c-admin-cog"><a class="j-admin-cog c-button c-cog" style="display:none;">cog</a></li></ul></div></div><div class="j-replies c-replies"><div class="c-holder"><div class="j-reply-expander-prev c-reply-expander-prev" style="display: none;"><p><button class="j-expand c-button"><span class="j-text"></span></button></p></div><div class="j-reply-articles c-reply-articles" style="display: none;"></div><div class="j-reply-expander-next c-reply-expander-next" style="display: none;"><p><button class="j-expand c-button"><span class="j-text"></span></button></p></div></div></div><div class="c-reply"><form class="j-reply-new c-reply-new" style="display: none;"><fieldset><a class="j-author-avatar c-author-avatar" data-domain-name=""></a><p class="c-username"></p><div class="c-comment-new-textarea"><span class="j-clear-reply c-close" style="display: none;">×</span><div class="j-reply-target c-reply-target" style="display: none;"></div><textarea cols="60" id="te59490534" name="comment" placeholder="Enter your reply here" rows="10"></textarea></div><div class="c-reply-actions"><input class="c-button" name="reply" type="submit" value="Publish"/></div></fieldset></form></div></article><article class="j-comment c-comment" id="th3259614-c59490624" style="display: block;"><header><h2><a class="c-username" data-domain-name="lessismore4406222" href="http://lessismore4406222.newsvine.com/" name="59490624" rel="twipsy" title="Visit  Profile">Less is more-4406222</a><span class="c-author-about"></span><time class="j-comment-timestamp c-comment-timestamp" data-local-time="10/31/2011 7:27:46 PM" pubdate="Mon, 31 Oct 2011 19:27:46 GMT" style="display: none;" title="Mon, 31 Oct 2011 19:27:46 GMT">Mon, 31 Oct 2011 19:27:46 GMT</time></h2><ul class="c-comment-meta"><li class="j-comment-id c-comment-id"><a class="vilynx_listened vilynx_listened" href="http://photoblog.nbcnews.com/_news/2011/10/31/8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby#th3259614-c59490624">#7</a></li><li class="j-status c-flag" style="display: none;"></li><li class="c-flag c-new">NEW</li></ul></header><div class="j-author-info c-author-info"><a class="j-author-avatar c-author-avatar" data-card-title="Less is more-4406222" data-domain-name="lessismore4406222" href="http://lessismore4406222.newsvine.com/" rel="twipsy" title="Open  Card"><img alt="comment author avatar" data-src="http://nvcdn.nbcnews.com/_vine/images/av/60x60/msnbc.jpg" src="http://nvcdn.nbcnews.com/_vine/images/av/60x60/msnbc.jpg" width="60"/></a></div><div class="c-comment-text c-parent"><div class="j-body j-quotable c-comment-body"><span class="j-text"><p>Overpopulation and conspicuous consumerism...equals more starving prople and environmental destruction.  But corporations need both in order to make their billions. Give up the McMansions and Occupy Wall Street .  Also check out this youtube video about other problems with consumerism. </p></span></div><div class="c-comment-info"><span class="j-reply-count c-reply-count c-zero"><strong><span class="j-rc c-num">0</span></strong> replies </span><ul class="c-comment-actions"><li class="j-vote c-vote"><button class="c-button c-icon c-upvotes"> </button></li><li class="j-comment-action c-reply"><a class="j-button-reply c-button c-reply" href="http://photoblog.nbcnews.com/#" ref="th3259614-c59490624">Reply</a></li><li class="j-share c-share" data-placement="top" rel="twipsy" title="Share this comment"><a class="c-button" href="http://photoblog.nbcnews.com/#">Share</a></li><li><button class="j-comment-action j-report c-button c-report c-bad" data-placement="top" rel="twipsy" title="Report abuse"><span>Report</span></button></li><li class="c-admin-cog"><a class="j-admin-cog c-button c-cog" style="display:none;">cog</a></li></ul></div></div><div class="j-replies c-replies"><div class="c-holder"><div class="j-reply-expander-prev c-reply-expander-prev" style="display: none;"><p><button class="j-expand c-button"><span class="j-text"></span></button></p></div><div class="j-reply-articles c-reply-articles" style="display: none;"></div><div class="j-reply-expander-next c-reply-expander-next" style="display: none;"><p><button class="j-expand c-button"><span class="j-text"></span></button></p></div></div></div><div class="c-reply"><form class="j-reply-new c-reply-new" style="display: none;"><fieldset><a class="j-author-avatar c-author-avatar" data-domain-name=""></a><p class="c-username"></p><div class="c-comment-new-textarea"><span class="j-clear-reply c-close" style="display: none;">×</span><div class="j-reply-target c-reply-target" style="display: none;"></div><textarea cols="60" id="te59490624" name="comment" placeholder="Enter your reply here" rows="10"></textarea></div><div class="c-reply-actions"><input class="c-button" name="reply" type="submit" value="Publish"/></div></fieldset></form></div></article></div><div class="c-holder"><div class="j-comment-expander-next c-comment-expander-next" style="display: none;"><button class="j-expand c-button">View <span class="j-text"></span></button></div></div><form class="j-comment-new c-comment-new j_widget j_login_check" id="j_login_check_7"><fieldset><legend>Start a new conversation:</legend><a class="j-author-avatar c-author-avatar" data-domain-name=""><img alt="comment author avatar" height="60" src="http://nvcdn.nbcnews.com/_vine/images/av/60x60/msnbc.jpg" width="60"/></a><div class="c-comment-new-textarea"><textarea id="tte3259614" name="comment" placeholder="What do you think?" rows="4"></textarea></div><div class="c-reply-actions"><input class="c-button" name="comment" type="submit" value="Publish"/></div></fieldset></form></div></div></div></div> </div>
</div>
</div>
</div>
</div>
<div class="chrome_footer">
</div>
<script type="text/javascript">if(typeof window._satellite !== "undefined"){ _satellite.pageBottom();}</script><script>
window.onerror = function(msg, url) {
  _satellite.notify('> error: '+ msg +' tracked',1);
  if (msg) {
    url = url || '';
    _satellite.setVar('errorMessage', msg)
    _satellite.setVar('errorSourceUrl', url);
    _satellite.track('onjserror');
  }
};
</script><script>
  /* version 1.0 */
  /*global $t, jQuery */
  (function($) {
      var subscribeTsEventsToNdpPlayer = function(ndpPlayer, playerBrand) {
          //set stub and make local instance of global
          var $ndp = window.$ndp || { events: {} };

          //register $t event
          $t('register', 'ndp_videoEvent', { 'remote': false }); //not remote for now

          //handle ndp events
          var tsVideoEventBind = function(e) {
              var eventName = e.type && e.type[0] || '';
              //could explicitly map data here, but sending it all is more versatile
              var videoData = e.payload && e.payload.asset || {};
              //add lengths for ads to videoData to standardize
              videoData.totalLength = e.payload && Math.round(e.payload.totalLength) || 0;
              videoData.playheadPosition = e.payload && Math.round(e.payload.playheadPosition) || 0;

              //track $t event (need to get video ID in ad event, incase multiple concurent)
              $t('track', 'ndp_videoEvent', {
                  'eventType': eventName,
                  'videoData': videoData,
                  'playerBrand': playerBrand
              });

          };
          // subscribe to all ndp events, based on $ndp.events "sections"
          var eventSections = ['AdEvent', 'PlaybackEvent'];
          for (var i = 0; eventSections[i]; i++) {
              for (var eventValue in $ndp.events[eventSections[i]]) {
                  if (typeof $ndp.events[eventSections[i]] !== 'undefined' && typeof $ndp.events[eventSections[i]][eventValue] === 'object' && typeof $ndp.events[eventSections[i]][eventValue][0] === 'string') {
                      ndpPlayer.on($ndp.events[eventSections[i]][eventValue], tsVideoEventBind);
                  }
              }
          }
      };
      //run after page is loaded to subscribe to today event
      $(function() {
          if ($t('ndp_playerInit.playerObj')) {
              subscribeTsEventsToNdpPlayer($t('ndp_playerInit.playerObj'), $t('ndp_playerInit.brand'));
          } else {
              $t('on', 'ndp_playerInit', function(e, data) {
                  subscribeTsEventsToNdpPlayer(data.playerObj, data.brand);
              });
          }
      });
  })(jQuery); 
</script><script type="text/javascript">
/* globals $t */
(function(w) {
    var orderid = 0;
    var nl_info = {
        //newsletter id keyed info
        '98': {
            conv_label: 'c2r6COmcqHUQ3fnUvwM',
            path: '/optin/breakingnews/newsletter'
        },
        '1': {
            conv_label: 'h16FCJjNw3UQ3fnUvwM',
            path: '/optin/mach/newsletter'
        },
        '32': {
            conv_label: 'oYkMCLXBsXUQ3fnUvwM',
            path: '/optin/stuffwelove/newsletter'
        },
        '2': {
            conv_label: 'tvPVCJGwyXUQ3fnUvwM',
            path: '/optin/better/newsletter'
        }
    };

    $t('on', 'nv_newsletter_subscribe', function(e) {
        var nl_id = $t(e.type + '.id') + ''; //convert to string
        var cur_path = document.location.pathname;
        //set google conversion values to window only if id matches, and path mathches
        if (nl_info[nl_id] && nl_info[nl_id].path === cur_path) {
            w.google_conversion_id = 938818781;
            w.google_conversion_language = "en";
            w.google_conversion_format = "3";
            w.google_conversion_color = "ffffff";
            w.google_conversion_label = nl_info[nl_id].conv_label; //this one is dynamic per newsletter
            w.google_remarketing_only = false;
            w.google_conversion_order_id = orderid;

            if (typeof(w.google_trackConversion) === 'function') {
                w.google_trackConversion();
                orderid = orderid + 1;
            }
        }
    });
})(window);
</script>
<script src="//www.googleadservices.com/pagead/conversion_async.js" type="text/javascript"></script><script>
// Zergnet
(function(){
    function loadscript(source, callback){
        var tag = document.createElement('script'); tag.type = 'text/javascript'; tag.src = source; tag.async=true;
        if(document.addEventListener) { // only run on IE9+
          tag.addEventListener('load', function(e) { 
            if(typeof callback==='function'){ callback(e); }
          }, false);
        }
        var scr = document.getElementsByTagName('script')[0];
        scr.parentNode.insertBefore(tag, scr);
    }
  
    if(window.addEventListener) { // only run on IE9+
      if(document.getElementById('zergnet-widget-24780')) {
        loadscript('//www.zergnet.com/zerg.js?id=24780'); // old script. Need to deprecate after www launch
      }
      if(document.getElementById('zergnet-widget-29839')){
         loadscript('//www.zergnet.com/zerg.js?id=29839');
      }
    }
})();
</script><script limit="6" onpluginload="window.NEWS &amp;&amp; NEWS.vilynxHandler &amp;&amp; NEWS.vilynxHandler.onPluginLoad || function () {}" src="//static.vilynx.com/plugins/nbc-gallery-analytics.min.js" type="text/javascript"></script>
<script>
/* Copyright (c) 2016 comScore, Inc.
 * All rights reserved.
 * By using this software, you are agreeing to be bound by the
 * terms of these policies: http://www.comscore.com/About_comScore/Privacy_Policy
 */
!function(a,b){false&&"function"==typeof define&&define.a?define([],function(){return a.ns_=b(a.ns_)}):"object"==typeof module&&module.exports?module.exports=b():a.ns_=b(a.ns_)}(this,function(a){a=a||{},a.ns_=a;var b={uid:function(){var a=1;return function(){return+new Date+"_"+a++}}(),filter:function(a,b){var c={};for(var d in b)b.hasOwnProperty(d)&&a(b[d])&&(c[d]=b[d]);return c},extend:function(a){var b,c=arguments.length;a=a||{};for(var d=1;c>d;d++)if(b=arguments[d])for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);return a},getString:function(a,b){var c=String(a);return null==a?b||"na":c},getLong:function(a,b){var c=Number(a);return null==a||isNaN(c)?b||0:c},getInteger:function(a,b){var c=Number(parseInt(a));return null==a||isNaN(c)?b||0:c},getBoolean:function(a,b){var c="true"==String(a).toLowerCase();return null==a?b||!1:c},parseBoolean:function(a,b){return b=b||!1,a?"0"==a?!1:void 0:b},isNotEmpty:function(a){return!this.isEmpty(a)},isEmpty:function(a){return void 0===a||null===a||""===a||a instanceof Array&&0===a.length},indexOf:function(a,b){var c=-1;return this.forEach(b,function(b,d){b==a&&(c=d)}),c},forEach:function(a,b,c){try{if("function"==typeof b)if(c="undefined"!=typeof c?c:null,"number"!=typeof a.length||"undefined"==typeof a[0]){var d="undefined"!=typeof a.__proto__;for(var e in a)a.hasOwnProperty(e)&&(!d||d&&"undefined"==typeof a.__proto__[e])&&"function"!=typeof a[e]&&b.call(c,a[e],e)}else for(var f=0,g=a.length;g>f;f++)b.call(c,a[f],f)}catch(h){}},regionMatches:function(a,b,c,d,e){if(0>b||0>d||b+e>a.length||d+e>c.length)return!1;for(;--e>=0;){var f=a.charAt(b++),g=c.charAt(d++);if(f!=g)return!1}return!0},size:function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b},log:function(a,b){if("undefined"!=typeof b&&b&&"undefined"!=typeof console&&console){var c=new Date,d=c.getHours()+":"+c.getMinutes()+":"+c.getSeconds();console.log(d,a)}},isTrue:function(a){return"undefined"==typeof a?!1:"string"==typeof a?(a=a.toLowerCase(),"true"===a||"1"===a||"on"===a):!!a},toString:function(a){if("undefined"==typeof a)return"undefined";if("string"==typeof a)return a;if("[object Array]"===Object.prototype.toString.call(a))return a.join(",");if(this.size(a)>0){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b}return a.toString()},exists:function(a){return"undefined"!=typeof a&&null!=a},firstGreaterThan0:function(){for(var a=0,b=arguments.length;b>a;a++){var c=arguments[a];if(c>0)return c}return 0},cloneObject:function(a){if(null==a||"object"!=typeof a)return a;var b=function(){function a(){}function b(b){return"object"==typeof b?(a.prototype=b,new a):b}function c(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}function d(){this.copiedObjects=[];var a=this;this.recursiveDeepCopy=function(b){return a.deepCopy(b)},this.depth=0}function e(a,b){var c=new d;return b&&(c.maxDepth=b),c.deepCopy(a)}function f(a){return"undefined"!=typeof window&&window&&window.Node?a instanceof Node:"undefined"!=typeof document&&a===document?!0:"number"==typeof a.nodeType&&a.attributes&&a.childNodes&&a.cloneNode}var g=[];return c.prototype={constructor:c,canCopy:function(){return!1},create:function(a){},populate:function(a,b,c){}},d.prototype={constructor:d,maxDepth:256,cacheResult:function(a,b){this.copiedObjects.push([a,b])},getCachedResult:function(a){for(var b=this.copiedObjects,c=b.length,d=0;c>d;d++)if(b[d][0]===a)return b[d][1]},deepCopy:function(a){if(null===a)return null;if("object"!=typeof a)return a;var b=this.getCachedResult(a);if(b)return b;for(var c=0;c<g.length;c++){var d=g[c];if(d.canCopy(a))return this.applyDeepCopier(d,a)}throw new Error("Unable to clone the following object "+a)},applyDeepCopier:function(a,b){var c=a.create(b);if(this.cacheResult(b,c),this.depth++,this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");return a.populate(this.recursiveDeepCopy,b,c),this.depth--,c}},e.DeepCopier=c,e.deepCopiers=g,e.register=function(a){a instanceof c||(a=new c(a)),g.unshift(a)},e.register({canCopy:function(){return!0},create:function(a){return a instanceof a.constructor?b(a.constructor.prototype):{}},populate:function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&(c[d]=a(b[d]));return c}}),e.register({canCopy:function(a){return a instanceof Array},create:function(a){return new a.constructor},populate:function(a,b,c){for(var d=0;d<b.length;d++)c.push(a(b[d]));return c}}),e.register({canCopy:function(a){return a instanceof Date},create:function(a){return new Date(a)}}),e.register({canCopy:function(a){return f(a)},create:function(a){return"undefined"!=typeof document&&a===document?document:a.cloneNode(!1)},populate:function(a,b,c){if("undefined"!=typeof document&&b===document)return document;if(b.childNodes&&b.childNodes.length)for(var d=0;d<b.childNodes.length;d++){var e=a(b.childNodes[d]);c.appendChild(e)}}}),{deepCopy:e}}();return b.deepCopy(a)},safeGet:function(a,b){return b=this.exists(b)?b:"",this.exists(a)?a:b},getBrowserName:function(){if(!navigator)return"";var a,b,c=navigator.userAgent||"",d=navigator.appName||"";return-1!=(b=c.indexOf("Opera"))||-1!=(b=c.indexOf("OPR/"))?d="Opera":-1!=(b=c.indexOf("Android"))?d="Android":-1!=(b=c.indexOf("Chrome"))?d="Chrome":-1!=(b=c.indexOf("Safari"))?d="Safari":-1!=(b=c.indexOf("Firefox"))?d="Firefox":-1!=(b=c.indexOf("IEMobile"))?d="Internet Explorer Mobile":"Microsoft Internet Explorer"==d||"Netscape"==d?d="Internet Explorer":(a=c.lastIndexOf(" ")+1)<(b=c.lastIndexOf("/"))?(d=c.substring(a,b),d.toLowerCase()==d.toUpperCase()&&(d=navigator.appName)):d="unknown",d},getBrowserFullVersion:function(){if(!navigator)return"";var a,b,c,d,e=navigator.userAgent||"",f=navigator.appName||"",g=navigator.appVersion?""+parseFloat(navigator.appVersion):"";return-1!=(b=e.indexOf("Opera"))?(g=e.substring(b+6),-1!=(b=e.indexOf("Version"))&&(g=e.substring(b+8))):-1!=(b=e.indexOf("OPR/"))?g=e.substring(b+4):-1!=(b=e.indexOf("Android"))?g=e.substring(b+11):-1!=(b=e.indexOf("Chrome"))?g=e.substring(b+7):-1!=(b=e.indexOf("Safari"))?(g=e.substring(b+7),-1!=(b=e.indexOf("Version"))&&(g=e.substring(b+8))):-1!=(b=e.indexOf("Firefox"))?g=e.substring(b+8):"Microsoft Internet Explorer"==f?(d=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=d.exec(e)&&(g=parseFloat(RegExp.$1))):"Netscape"==f?(d=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=d.exec(e)&&(g=parseFloat(RegExp.$1))):g=e.lastIndexOf(" ")+1<(b=e.lastIndexOf("/"))?e.substring(b+1):"unknown",g=g.toString(),-1!=(c=g.indexOf(";"))&&(g=g.substring(0,c)),-1!=(c=g.indexOf(" "))&&(g=g.substring(0,c)),-1!=(c=g.indexOf(")"))&&(g=g.substring(0,c)),a=parseInt(""+g,10),isNaN(a)&&(g=""+parseFloat(navigator.appVersion)),g},browserAcceptsLargeURLs:function(){return"undefined"!=typeof window?(null!==window.ActiveXObject,!0):!0},getNamespace:function(){return a.ns_||a}};return a.StreamSense=a.StreamSense||function(){var c=function(){var a="cs_";return function(){var c="undefined"!=typeof localStorage?localStorage:null;b.extend(this,{get:function(b){return c&&c.getItem(a+b)},set:function(b,d){c&&c.setItem(a+b,d)},has:function(b){return c&&c.getItem(a+b)},remove:function(b){c&&c.removeItem(a+b)},clear:function(){for(var b=0;c&&b<c.length;++b){var d=c.key(b);d.substr(0,a.length)===a&&c.removeItem(d)}}})}}(),d=function(a,b){if("undefined"!=typeof Image){var c=new Image;c.onload=function(){b&&b(200),c=null},c.onerror=function(){b&&b(),c=null},c.src=a}},e=function(a,b,c){c&&"undefined"!=typeof setTimeout&&setTimeout(c,0)},f=function(){return{dir:function(){return null},append:function(a,b,c){},write:function(a,b,c){},deleteFile:function(){return!1},read:function(){return null}}}(),g=function(){return{PLATFORM:"generic",httpGet:d,httpPost:e,Storage:c,IO:f,getCrossPublisherId:function(){return null},getAppName:function(){return h.UNKNOWN_VALUE},getAppVersion:function(){return h.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return h.UNKNOWN_VALUE},getPlatformVersion:function(){return h.UNKNOWN_VALUE},getPlatformName:function(){return"js"},getRuntimeName:function(){return h.UNKNOWN_VALUE},getRuntimeVersion:function(){return h.UNKNOWN_VALUE},getResolution:function(){return h.UNKNOWN_VALUE},getLanguage:function(){return h.UNKNOWN_VALUE},getPackageName:function(){return null},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(a,b){return setTimeout(a,b)},clearTimeout:function(a){return clearTimeout(a)},getDeviceArchitecture:function(){return h.UNKNOWN_VALUE},getConnectionType:function(){return h.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return h.UNKNOWN_VALUE},isConnSecure:function(){return"s"===document.location.href.charAt(4)},processMeasurementLabels:function(){}}}(),h={UNKNOWN_VALUE:"unknown",UNKNOWN_RESOLUTION:"0x0"};b.jsonObjectToStringDictionary=function(a){var b={};for(var c in a){var d=a[c];null===d||void 0===d?b[c]=d:b[c]=a[c]+""}return b},b.getKeys=function(a,b){var c,d=[];for(c in a)b&&!b.test(c)||!a.hasOwnProperty(c)||(d[d.length]=c);return d},b.fixEventTime=function(a){if(a.ns_ts)return parseInt(a.ns_ts);var b=+new Date;return a.ns_ts=String(b),b},b.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},b.addNewPlaybackInterval=function(a,c,d,e){var f={};if(!(d>=c))return b.cloneObject(a);if(f.start=c,f.end=d,0==a.length)return a.push(f),b.cloneObject(a);var g;for(g=0;g<a.length;g++)if(f.start>=a[g].start&&f.end<=a[g].end)return b.cloneObject(a);var h,i=!1;for(h=0;h<a.length;h++)if(h+1===a.length&&f.start>=a[h].start||f.start>=a[h].start&&f.start<a[h+1].start){a.splice(h+1,0,f),i=!0;break}i||a.splice(0,0,f);var j=[a[0]];for(g=1;g<a.length;g++)j[j.length-1].end+e<a[g].start?j.push(a[g]):j[j.length-1].end<a[g].end&&(j[j.length-1].end=a[g].end);return b.cloneObject(j)};var i=function(){var a=["play","pause","pause-on-buffering","end","buffer","buffer-stop","keep-alive","hb","custom","load","start","skstart","adskip","cta","error","trans","drmfa","drmap","drmde","bitrt","playrt","volume","window","audio","video","subs","cdn"];return{PLAY:0,PAUSE:1,PAUSE_ON_BUFFERING:2,END:3,BUFFER:4,BUFFER_STOP:5,KEEPALIVE:6,HEARTBEAT:7,CUSTOM:8,LOAD:9,START:10,SEEK_START:11,AD_SKIP:12,CTA:13,ERROR:14,TRANSFER:15,DRM_FAILED:16,DRM_APPROVED:17,DRM_DENIED:18,BIT_RATE:19,PLAYBACK_RATE:20,VOLUME:21,WINDOW_STATE:22,AUDIO:23,VIDEO:24,SUBS:25,CDN:26,toString:function(b){return a[b]}}}(),j=function(){return{IDLE:0,PLAYBACK_NOT_STARTED:1,PLAYING:2,PAUSED:3,BUFFERING_BEFORE_PLAYBACK:4,BUFFERING_DURING_PLAYBACK:5,BUFFERING_DURING_SEEKING:6,BUFFERING_DURING_PAUSE:7,SEEKING_BEFORE_PLAYBACK:8,SEEKING_DURING_PLAYBACK:9,SEEKING_DURING_BUFFERING:10,SEEKING_DURING_PAUSE:11,PAUSED_DURING_BUFFERING:12}}(),k=function(){var a=["c","s","r"];return{SINGLE_CLIP:0,SEGMENTED:1,REDUCED:2,toString:function(b){return a[b]}}}(),l={STREAMSENSE_VERSION:"5.1.1.160316",MODEL_VERSION:"5.1",DEFAULT_PLAYERNAME:"js_api",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,THROTTLING_DELAY:500,INTERVAL_MERGE_TOLERANCE:500,STANDARD_METADATA_LABELS:["ns_st_ci","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pu","c3","c4","c6"],LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_alias","ca_ns_alias","cb_ns_alias","cc_ns_alias","cd_ns_alias","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","cs_partner","cs_xcid","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_smv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sc","ns_st_sq","ns_st_ppc","ns_st_apc","ns_st_spc","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_sl","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_ad","ns_st_li","ns_st_ci","ns_st_si","ns_st_pt","ns_st_dpt","ns_st_ipt","ns_st_et","ns_st_det","ns_st_upc","ns_st_dupc","ns_st_iupc","ns_st_upa","ns_st_dupa","ns_st_iupa","ns_st_lpc","ns_st_dlpc","ns_st_lpa","ns_st_dlpa","ns_st_pa","ns_ap_jb","ns_ap_et","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ca_cs_c12u","cb_cs_c12u","cc_cs_c12u","cd_cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_dbc","ns_st_bt","ns_st_dbt","ns_st_bp","ns_st_lt","ns_st_skc","ns_st_dskc","ns_st_ska","ns_st_dska","ns_st_skd","ns_st_skt","ns_st_dskt","ns_st_pc","ns_st_dpc","ns_st_pp","ns_st_br","ns_st_pbr","ns_st_rt","ns_st_prt","ns_st_ub","ns_st_vo","ns_st_pvo","ns_st_ws","ns_st_pws","ns_st_ki","ns_st_rp","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pl","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_sr","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_ce","ns_st_ia","ns_st_dt","ns_st_ddt","ns_st_tdt","ns_st_tm","ns_st_dtm","ns_st_ttm","ns_st_de","ns_st_pu","ns_st_ti","ns_st_cu","ns_st_fee","ns_st_at","ns_st_pat","ns_st_vt","ns_st_pvt","ns_st_tt","ns_st_ptt","ns_st_cdn","ns_st_pcdn","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","ns_ecommerce","ns_ec_sv","ns_client_id","ns_order_id","ns_ec_cur","ns_orderline_id","ns_orderlines","ns_prod_id","ns_qty","ns_prod_price","ns_prod_grp","ns_brand","ns_shop","ns_category","category","ns_c","ns_search_term","ns_search_result","ns_m_exp","ns_m_chs","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er"]},m=function(){function a(){function a(){I={},I.ns_st_pt="0",I.ns_st_bt="0",I.ns_st_bc="0",I.ns_st_pc="0",I.ns_st_sq="0",I.ns_st_cl="0",I.ns_st_pn="1",I.ns_st_tp="1",I.ns_st_skc="0",I.ns_st_et="0",I.ns_st_cn="1",I.ns_st_sc="0",I.ns_st_ska="0",I.ns_st_skd="0",I.ns_st_skt="0",I.ns_st_upc="0",I.ns_st_lpc="0",I.ns_st_upa="0",I.ns_st_lpa="0",I.ns_st_ub="0",I.ns_st_br="0",f=!1,e=!1,d=h.UNKNOWN_VALUE,g=NaN,m=0,j=0,i=NaN,n=NaN,p=0,o=0,k=0,s=NaN,q=[],r=[],t=0,u=0,v=0,w=0,x=0,y=0,z=NaN,A=0,B=!1,C=NaN,F=!1,E=0,H=0,D=0,G=0,J=0,K=0,L=0,M=0,N=0}function c(){var a,b,c=0;for(a=0;a<q.length;a++)c+=Math.abs(q[a].end-q[a].start);O.setUniquePlaybackInterval(c);var d=0;for(a=0;a<q.length;a++)b=Math.abs(q[a].end-q[a].start),b>d&&(d=b);O.setLongestPlaybackInterval(d);var e=0;for(a=0;a<r.length;a++)e+=Math.abs(r[a].end-r[a].start);O.setAssetUniquePlaybackInterval(e);var f=0;for(a=0;a<r.length;a++)b=Math.abs(r[a].end-r[a].start),b>f&&(f=b);O.setAssetLongestPlaybackInterval(f)}var d,e,f,g,i,j,k,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=this,P=l.INTERVAL_MERGE_TOLERANCE;b.extend(this,{getHash:function(){return d},setHash:function(a){d=a},setPlaybackIntervalMergeTolerance:function(a){P=a},getPlaybackIntervalMergeTolerance:function(){return P},setLabels:function(a){null!=a&&b.extend(I,a)},getLabels:function(){return I},setLabel:function(a,b){var c={};c[a]=b,O.setLabels(c)},getLabel:function(a){return I[a]},getClipNumber:function(){return parseInt(O.getLabel("ns_st_cn"))},setClipNumber:function(a){O.setLabel("ns_st_cn",String(a))},getPartNumber:function(){return parseInt(O.getLabel("ns_st_pn"))},createLabels:function(a){var c=a||{};c.ns_st_dbt=String(O.getBufferingTime()-A),A=O.getBufferingTime(),c.ns_st_det=String(O.getElapsedTime()-o),o=O.getElapsedTime(),c.ns_st_dupc=String(O.getUniquePlaybackInterval()-t),t=O.getUniquePlaybackInterval(),parseInt(c.ns_st_dupc)<0&&(c.ns_st_dupc="0");var d;d=b.exists(c.ns_st_upc)?parseInt(c.ns_st_upc):O.getUniquePlaybackInterval(),c.ns_st_iupc=String(d-u),u=d,parseInt(c.ns_st_iupc)<0&&(c.ns_st_iupc="0"),c.ns_st_dupa=String(O.getAssetUniquePlaybackInterval()-v),v=O.getAssetUniquePlaybackInterval(),parseInt(c.ns_st_dupa)<0&&(c.ns_st_dupa="0");var e;e=b.exists(c.ns_st_upa)?parseInt(c.ns_st_upa):O.getAssetUniquePlaybackInterval(),c.ns_st_iupa=String(e-w),w=e,parseInt(c.ns_st_iupa)<0&&(c.ns_st_iupa="0"),c.ns_st_dlpc=String(O.getLongestPlaybackInterval()-x),x=O.getLongestPlaybackInterval(),parseInt(c.ns_st_dlpc)<0&&(c.ns_st_dlpc="0"),c.ns_st_dlpa=String(O.getAssetLongestPlaybackInterval()-y),y=O.getAssetLongestPlaybackInterval(),parseInt(c.ns_st_dlpa)<0&&(c.ns_st_dlpa="0");var g;return g=b.exists(c.ns_st_pt)?parseInt(c.ns_st_pt):O.getPlaybackTime(),c.ns_st_ipt=String(g-k),k=g,c.ns_st_dpt=String(O.getPlaybackTime()-j),j=O.getPlaybackTime(),c.ns_st_dpc=String(O.getPauses()-J),J=O.getPauses(),c.ns_st_dskc=String(O.getSeeks()-K),K=O.getSeeks(),c.ns_st_dbc=String(O.getBuffers()-L),L=O.getBuffers(),c.ns_st_dskt=String(O.getSeekingTime()-D),D=O.getSeekingTime(),c.ns_st_dska=String(O.getSeekingAmount()-G),G=O.getSeekingAmount(),b.extend(c,O.getLabels()),O.setSeekingDirection(0),f&&(c.ns_st_spc=String(M),c.ns_st_apc=String(N)),f||b.parseBoolean(c.ns_st_sc)||(c.ns_st_sc="1"),c},getVideoTrack:function(){return O.getLabel("ns_st_vt")},setVideoTrack:function(a){O.setLabel("ns_st_vt",String(a))},getAudioTrack:function(){return O.getLabel("ns_st_at")},setAudioTrack:function(a){O.setLabel("ns_st_at",String(a))},getSubtitleTrack:function(){return O.getLabel("ns_st_tt")},setSubtitleTrack:function(a){O.setLabel("ns_st_tt",String(a))},getCDN:function(){return O.getLabel("ns_st_cdn")},setCDN:function(a){O.setLabel("ns_st_cdn",String(a))},getClipPlaybackIntervals:function(){return q},setClipPlaybackIntervals:function(a){q=a},getAssetPlaybackIntervals:function(){return r},getUniquePlaybackInterval:function(){return parseInt(O.getLabel("ns_st_upc"))},getAssetUniquePlaybackInterval:function(){return parseInt(O.getLabel("ns_st_upa"))},setAssetUniquePlaybackInterval:function(a){O.setLabel("ns_st_upa",String(a))},setUniquePlaybackInterval:function(a){O.setLabel("ns_st_upc",String(a))},getLongestPlaybackInterval:function(){return parseInt(O.getLabel("ns_st_lpc"))},setLongestPlaybackInterval:function(a){O.setLabel("ns_st_lpc",String(a))},getAssetLongestPlaybackInterval:function(){return parseInt(O.getLabel("ns_st_lpa"))},setAssetLongestPlaybackInterval:function(a){O.setLabel("ns_st_lpa",String(a))},incrementPauses:function(){O.setLabel("ns_st_pc",String(O.getPauses()+1))},incrementSeeks:function(){O.setLabel("ns_st_skc",String(O.getSeeks()+1))},incrementPlayCounter:function(){O.setLabel("ns_st_sq",String(O.getPlayCounter()+1))},getPlayCounter:function(){return parseInt(O.getLabel("ns_st_sq"))},getBufferingTime:function(){return parseInt(O.getLabel("ns_st_bt"))},setBufferingTime:function(a){O.setLabel("ns_st_bt",String(a))},addBufferingTime:function(a){if(!isNaN(z)){var b=O.getBufferingTime();b+=a-z,O.setBufferingTime(b),z=NaN}},setPlaybackStartPosition:function(a){s=parseInt(a)},getPlaybackStartPosition:function(){return s},addInterval:function(a){isNaN(s)||isNaN(a)||(q=b.addNewPlaybackInterval(q,s,a,P),r=b.addNewPlaybackInterval(r,s,a,P),c(),s=NaN)},getElapsedTime:function(){return parseInt(O.getLabel("ns_st_et"))},setElapsedTime:function(a){O.setLabel("ns_st_et",String(a))},addElapsedTime:function(a){if(!isNaN(n)){var b=O.getElapsedTime();b+=a-n,O.setElapsedTime(b),n=NaN}},getElapsedTimestamp:function(){return n},setElapsedTimestamp:function(a){n=a},addPlaybackTime:function(a){if(!isNaN(g)){var b=O.getPlaybackTime();b+=a-g,O.setPlaybackTime(b),g=NaN}},getPlaybackTime:function(){return parseInt(O.getLabel("ns_st_pt"))},getExpectedPlaybackPosition:function(a){return isNaN(g)||(m+=a-g),m},setPlaybackTimeOffset:function(a){m=a},getPlaybackTimeOffset:function(){return m},setPlaybackTime:function(a){O.setLabel("ns_st_pt",String(a))},getPlaybackTimestamp:function(){return g},setPlaybackTimestamp:function(a){g=a},setPreviousPlaybackTime:function(a){j=a},setPreviousPlaybackTimestamp:function(a){i=a},getBufferingTimestamp:function(){return z},setBufferingTimestamp:function(a){z=a},getPauses:function(){return parseInt(O.getLabel("ns_st_pc"))},setPauses:function(a){O.setLabel("ns_st_pc",String(a))},getSeeks:function(){return parseInt(O.getLabel("ns_st_skc"))},setSeeks:function(a){O.setLabel("ns_st_skc",String(a))},setSeeking:function(a){B=a},isSeeking:function(){return B},setCollectingSeekingTime:function(a){F=a},isCollectingSeekingTime:function(){return F},setClipStarted:function(a){e=a},isClipStarted:function(){return e},setPlaybackStarted:function(a){f=a},isPlaybackStarted:function(){return f},setSeekingTimestamp:function(a){C=a},getSeekingTimestamp:function(){return C},addSeekingTime:function(a){if(!isNaN(C)){var b=O.getSeekingTime();b+=a-C,O.setSeekingTime(b),C=NaN}},getSeekingTime:function(){return parseInt(O.getLabel("ns_st_skt"))},setSeekingTime:function(a){O.setLabel("ns_st_skt",String(a))},setSeekingTimeBeforeEnd:function(a){H=a},getSeekingTimeBeforeEnd:function(){return H},setSeekStartPosition:function(a){E=a},getSeekStartPosition:function(){return E},setSeekingAmount:function(a){O.setLabel("ns_st_ska",String(a))},getSeekingAmount:function(){return parseInt(O.getLabel("ns_st_ska"))},addSeekingAmount:function(a){var b=O.getSeekingAmount();b+=Math.abs(a-E),O.setSeekingAmount(b);var c;E==a?c=0:E>a?c=-1:a>E&&(c=1),O.setSeekingDirection(c),E=0},getSeekingDirection:function(){return parseInt(O.getLabel("ns_st_skd"))},setSeekingDirection:function(a){O.setLabel("ns_st_skd",String(a))},resetClipLifecycleLabels:function(){I.ns_st_pt="0",j=0,k=0,I.ns_st_bt="0",A=0,I.ns_st_bc="0",L=0,I.ns_st_pc="0",J=0,I.ns_st_sq="0",I.ns_st_upa="0",v=0,w=0,I.ns_st_et="0",o=0,I.ns_st_lpa="0",y=0,I.ns_st_skt="0",D=0,I.ns_st_ska="0",G=0,I.ns_st_skc="0",K=0},incrementSegmentPlaybackCounter:function(){M++},incrementClipLoadCounter:function(){O.setLabel("ns_st_sc",String(O.getClipLoadCounter()+1))},incrementAssetPlaybackCounter:function(){N++},setPreviousUniquePlaybackInterval:function(a){t=a},setPreviousEventIndependentUniquePlaybackInterval:function(a){u=a},setPreviousLongestPlaybackInterval:function(a){x=a},resetAssetPlaybackCounters:function(){r=[],O.setAssetUniquePlaybackInterval(0),v=0,w=0,O.setAssetLongestPlaybackInterval(0),y=0},setSegmentPlaybackCounter:function(a){M=a},setClipLoadCounter:function(a){O.setLabel("ns_st_sc",String(a))},setAssetPlaybackCounter:function(a){N=a},setLowestPartNumberPlayed:function(a){p=a},getSegmentPlaybackCounter:function(){return M},getClipLoadCounter:function(){return parseInt(O.getLabel("ns_st_sc"))},getAssetPlaybackCounter:function(){return N},getLowestPartNumberPlayed:function(){return p},getBuffers:function(){return parseInt(O.getLabel("ns_st_bc"))},incrementBufferCount:function(){O.setLabel("ns_st_bc",String(O.getBuffers()+1))},getPreviousBufferingTime:function(){return A}}),a()}return a.resetClip=function(a,b,c){for(var d=a.getLabels(),e={},f=0;c&&f<c.length;++f)d.hasOwnProperty(c[f])&&(e[c[f]]=d[c[f]]);b.setLabels(e),b.setPlaybackIntervalMergeTolerance(a.getPlaybackIntervalMergeTolerance())},a}(),n=function(){function a(){function a(){c=new m,f={},f.ns_st_bp="0",f.ns_st_pa="0",f.ns_st_pp="0",f.ns_st_sp="1",f.ns_st_id=String(+new Date),d=NaN,e=NaN,h={},i=0,g=!1,j=!1,k=0}var c,d,e,f,g,h,i,j,k,l=this;b.extend(this,{resetClip:function(){var a=c;c=new m,m.resetClip(a,c)},hashExists:function(a){return null!=h[a]},storeHash:function(a){h[a]={}},removeHash:function(a){delete h[a]},storeClipPlaybackCounters:function(){for(var a in h)if(h.hasOwnProperty(a)&&h[a].clipNumber===c.getClipNumber()){b.extend(h[a],{segmentPlaybackCounter:c.getSegmentPlaybackCounter(),clipLoadCounter:c.getClipLoadCounter(),assetPlaybackCounter:c.getAssetPlaybackCounter(),lowestPartNumberPlayed:c.getLowestPartNumberPlayed(),seeking:c.isSeeking(),seekingTimeBeforeEnd:c.getSeekingTimeBeforeEnd(),seekingStartPosition:c.getSeekStartPosition(),clipPlaybackIntervals:c.getClipPlaybackIntervals(),uniquePlaybackInterval:c.getUniquePlaybackInterval(),longestPlaybackInterval:c.getLongestPlaybackInterval(),videoTrack:c.getVideoTrack(),audioTrack:c.getAudioTrack(),subtitleTrack:c.getSubtitleTrack(),cdn:c.getCDN()});break}},getStoredClipRegisters:function(a){return h[a]},getClipNumber:function(a){return h[a].clipNumber},getMaxClipNumber:function(){return i},storeClipNumber:function(a,b){h[a].clipNumber=b,b>i&&(i=b)},setLabels:function(a){null!=a&&b.extend(f,a)},getLabels:function(){return f},setLabel:function(a,b){var c={};c[a]=b,l.setLabels(c)},getLabel:function(a){return f[a]},getClip:function(){return c},createLabels:function(a){var d=a||{};return j||(d.ns_st_pb=null!=d.ns_st_pb?d.ns_st_pb:"1"),b.extend(d,l.getLabels()),c.isPlaybackStarted()&&(d.ns_st_ppc=String(k)),d},incrementPlayCounter:function(){l.setLabel("ns_st_sp",String(parseInt(l.getLabel("ns_st_sp"))+1))},incrementPauses:function(){l.setLabel("ns_st_pp",String(l.getPauses()+1))},addPlaybackTime:function(a){if(!isNaN(e)){var b=l.getPlaybackTime();b+=a-e,l.setPlaybackTime(b),e=NaN}},addBufferingTime:function(a){if(!isNaN(d)){var b=l.getBufferingTime();b+=a-d,l.setBufferingTime(b),d=NaN}},getBufferingTime:function(){return parseInt(l.getLabel("ns_st_bp"))},setBufferingTime:function(a){l.setLabel("ns_st_bp",String(a))},getPlaybackTime:function(){return parseInt(l.getLabel("ns_st_pa"))},setBufferingTimestamp:function(a){d=a},getBufferingTimestamp:function(){return d},setPlaybackTime:function(a){l.setLabel("ns_st_pa",String(a))},setPlaybackTimestamp:function(a){e=a},getPlaybackTimestamp:function(){return e},getPauses:function(){return parseInt(l.getLabel("ns_st_pp"))},setPauses:function(a){l.setLabel("ns_st_pp",String(a))},isPlaylistStarted:function(){return g},setPlaylistStarted:function(a){g=a},getPlaybackCounter:function(){return k},incrementPlaybackCounter:function(){k++},setFirstEventSent:function(a){j=a}}),a()}return a.resetPlaylist=function(b,c,d){for(var e=b.getClip(),f=b.getLabels(),g={},h=0;d&&h<d.length;h++)f.hasOwnProperty(d[h])&&(g[d[h]]=f[d[h]]);c=new a,c.setLabels(g),m.resetClip(e,c.getClip(),d)},a}(),o=function(){return function(a){function c(){e=1}function d(c){f=b.extend({},c);var d=a.getSSECore().getPixelURL();if(a.getAppCore()){if(a.getSSECore().isProperlyInitialized()){var e=a.getSSECore().getExports().am,g=a.getSSECore().getExports().et,h=e.newApplicationMeasurement(a.getAppCore(),g.HIDDEN,c,d);a.getAppCore().getQueue().offer(h)}}else d&&a.getSSECore().getPlatformAPI().httpGet(a.getSSECore().prepareUrl(d,c))}var e,f,g=this;b.extend(this,{newEvent:function(a){d(a.eventLabels),a.eventType!=i.HEARTBEAT&&g.incrementEventCounter()},getEventCounter:function(){return e},incrementEventCounter:function(){e++},setEventCounter:function(a){e=a},getMeasurementSnapshot:function(){return f}}),c()}}(),p=function(){return function(a){function c(){g=0,h=0}function d(){h++;var c={},d=b.fixEventTime(c);c.ns_st_po=String(a.getPlaylist().getClip().getPlaybackTimeOffset()+(d-a.getPlaylist().getClip().getPlaybackTimestamp())),c.ns_st_pa=String(a.getPlaylist().getPlaybackTime()+(d-a.getPlaylist().getPlaybackTimestamp())),c.ns_st_pt=String(a.getPlaylist().getClip().getPlaybackTime()+(d-a.getPlaylist().getClip().getPlaybackTimestamp())),c.ns_st_dpt=String(d-a.getPlaylist().getClip().getPlaybackTimestamp()),a.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK?(c.ns_st_bp=String(a.getPlaylist().getBufferingTime()+(d-a.getPlaylist().getBufferingTimestamp())),c.ns_st_bt=String(a.getPlaylist().getClip().getBufferingTime()+(d-a.getPlaylist().getClip().getBufferingTimestamp())),c.ns_st_dbt=String(d-a.getPlaylist().getClip().getBufferingTimestamp())):c.ns_st_dbt=String(a.getPlaylist().getClip().getBufferingTime()-a.getPlaylist().getClip().getPreviousBufferingTime()),c.ns_st_et=String(a.getPlaylist().getClip().getElapsedTime()+(d-a.getPlaylist().getClip().getElapsedTimestamp())),c.ns_st_det=String(d-a.getPlaylist().getClip().getElapsedTimestamp());var e=b.cloneObject(a.getPlaylist().getClip().getClipPlaybackIntervals()),f=b.cloneObject(a.getPlaylist().getClip().getAssetPlaybackIntervals());e=b.addNewPlaybackInterval(e,a.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(c.ns_st_po),a.getPlaylist().getClip().getPlaybackIntervalMergeTolerance()),f=b.addNewPlaybackInterval(f,a.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(c.ns_st_po),a.getPlaylist().getClip().getPlaybackIntervalMergeTolerance());var l,m,n=0;for(l=0;l<e.length;l++)n+=Math.abs(e[l].end-e[l].start);c.ns_st_upc=String(n),c.ns_st_dupc=String(n-a.getPlaylist().getClip().getUniquePlaybackInterval());var o=0;for(l=0;l<e.length;l++)m=Math.abs(e[l].end-e[l].start),m>o&&(o=m);c.ns_st_lpc=String(o),c.ns_st_dlpc=String(o-a.getPlaylist().getClip().getLongestPlaybackInterval());var p=0;for(l=0;l<f.length;l++)p+=Math.abs(f[l].end-f[l].start);c.ns_st_upa=String(p),c.ns_st_dupa=String(p-a.getPlaylist().getClip().getAssetUniquePlaybackInterval());var q=0;for(l=0;l<f.length;l++)m=Math.abs(f[l].end-f[l].start),m>q&&(q=m);c.ns_st_lpa=String(q),c.ns_st_dlpa=String(q-a.getPlaylist().getClip().getAssetLongestPlaybackInterval()),c.ns_st_hc=String(a.getHeartbeat().getCount());var r=a.getSSECore().createLabels(i.HEARTBEAT,c,d);a.getEventManager().newEvent(r),g=0,k.resume()}function e(){null!=f&&(a.getSSECore().getPlatformAPI().clearTimeout(f),f=null)}var f,g,h,k=this,m=l.DEFAULT_HEARTBEAT_INTERVAL;b.extend(this,{getCount:function(){return h},setIntervals:function(a){m=a},getInterval:function(a){var b=0;if(null!=m)for(var c=0;c<m.length;c++){var d=m[c],e=d.playingtime;if(!e||e>a){b=d.interval;break}}return b},resume:function(){e();var b=k.getInterval(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()));if(b>0){var c=g>0?g:b;f=a.getSSECore().getPlatformAPI().setTimeout(d,c)}g=0},pause:function(){e();var b=k.getInterval(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()));g=b-(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()))%b}}),c()}}(),q=function(){return function(a){function c(){}function d(){var c={},d=b.fixEventTime(c);c.ns_st_po=String(a.getPlaylist().getClip().getExpectedPlaybackPosition(d)),a.getPlaylist().addPlaybackTime(d),a.getPlaylist().setPlaybackTimestamp(d),a.getPlaylist().getClip().addPlaybackTime(d),a.getPlaylist().getClip().setPlaybackTimestamp(d),a.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK&&(a.getPlaylist().addBufferingTime(d),a.getPlaylist().setBufferingTimestamp(d),a.getPlaylist().getClip().addBufferingTime(d),a.getPlaylist().getClip().setBufferingTimestamp(d)),a.getPlaylist().getClip().addElapsedTime(d),a.getPlaylist().getClip().setElapsedTimestamp(d),a.getPlaylist().getClip().addInterval(parseInt(c.ns_st_po)),a.getPlaylist().getClip().setPlaybackStartPosition(parseInt(c.ns_st_po));
var e=a.getSSECore().createLabels(i.KEEPALIVE,c,d);a.getEventManager().newEvent(e),g.resume()}function e(){null!=f&&(a.getSSECore().getPlatformAPI().clearTimeout(f),f=null)}var f,g=this,h=l.DEFAULT_KEEP_ALIVE_INTERVAL;b.extend(g,{resume:function(){e(),f=a.getSSECore().getPlatformAPI().setTimeout(d,h)},pause:function(){e()},setInterval:function(a){h=a},getInterval:function(){return h}}),c()}}(),r=function(){return function(a){function c(){f=j.IDLE,e=null,d=NaN}var d,e,f,g=this;b.extend(g,{eventTypeToState:function(a){if(f==j.IDLE){if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK}else if(f==j.PLAYBACK_NOT_STARTED){if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK;if(a==i.END||a==i.AD_SKIP)return j.IDLE}else if(f==j.PLAYING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.BUFFER)return j.BUFFERING_DURING_PLAYBACK;if(a==i.PAUSE)return j.PAUSED;if(a==i.SEEK_START)return j.SEEKING_DURING_PLAYBACK}else if(f==j.PAUSED){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.BUFFER)return j.BUFFERING_DURING_PAUSE;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_DURING_PAUSE}else if(f==j.BUFFERING_BEFORE_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PLAYBACK_NOT_STARTED;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK}else if(f==j.BUFFERING_DURING_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY||a==i.BUFFER_STOP)return j.PLAYING;if(a==i.PAUSE_ON_BUFFERING)return j.PAUSED_DURING_BUFFERING;if(a==i.SEEK_START)return j.SEEKING_DURING_BUFFERING;if(a==i.PAUSE)return j.PAUSED}else if(f==j.BUFFERING_DURING_SEEKING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.BUFFER_STOP)return j.SEEKING_DURING_PLAYBACK;if(a==i.PAUSE)return j.PAUSED}else if(f==j.BUFFERING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_DURING_PAUSE;if(a==i.BUFFER_STOP||a==i.PAUSE)return j.PAUSED}else if(f==j.SEEKING_BEFORE_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PAUSE)return j.PLAYBACK_NOT_STARTED;if(a==i.PLAY)return j.PLAYING;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK}else if(f==j.SEEKING_DURING_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE)return j.PAUSED;if(a==i.BUFFER)return j.BUFFERING_DURING_SEEKING}else if(f==j.SEEKING_DURING_BUFFERING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PAUSED}else if(f==j.SEEKING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PAUSED;if(a==i.BUFFER)return j.BUFFERING_DURING_PAUSE}else if(f==j.PAUSED_DURING_BUFFERING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.SEEK_START)return j.SEEKING_DURING_BUFFERING;if(a==i.PAUSE)return j.PAUSED;if(a==i.PLAY||a==i.BUFFER_STOP)return j.PLAYING}return null},getCurrentState:function(){return f},newEvent:function(a,b){var c=g.eventTypeToState(a);f!=c&&(e=f,f=c,d=b)},getPreviousState:function(){return e},getLastStateChangeTimestamp:function(){return d}}),c()}}(),s=function(){return function(a){var c=this;b.extend(c,{onSeekStartWhenPausedOrBufferingDuringPause:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onBufferWhenSeekingOrPlayBackNotStartedOrPaused:function(b,c){a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b)},onPlayWhenSeekingDuringBufferingOrSeekingDuringPause:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)},onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)},onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause:function(b,c){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause:function(b,c){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))}})}}(),t=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBufferStop:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=String(a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()),a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),u=function(){return function(a){var c=this;b.extend(c,{onEndAndSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),v=function(){return function(a){var c=this;b.extend(c,{onPauseOnBuffering:function(b,c){var d=parseInt(c.ns_st_po);a.getSSECore().stopPausedOnBufferingTimer(),a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e),a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b),a.getPlaylist().getClip().setPlaybackTimeOffset(d)},onBufferStop:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)},onEndOrAdSkip:function(c,d){var e=parseInt(d.ns_st_po);a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addPlaybackTime(c),a.getPlaylist().getClip().addElapsedTime(c),a.getPlaylist().getClip().addInterval(e);var f=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(f),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)},onPause:function(b,c){var d=parseInt(c.ns_st_po);a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)},onPlay:function(b,c){a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)}})}}(),w=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),x=function(){return function(a){var c=this;b.extend(c,{onBuffer:function(b,c){a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabel("ns_st_pn"))<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabel("ns_st_pn"))),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=String(a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()),a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),y=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),z=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBufferStop:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),A=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().setSeekingTimestamp(b):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=String(a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()),a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),B=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){var e=parseInt(d.ns_st_po);a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(c),a.getPlaylist().getClip().addPlaybackTime(c),a.getPlaylist().getClip().addElapsedTime(c),a.getPlaylist().getClip().addInterval(e);var f=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(f),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBuffer:function(b,c){a.getSSECore().isPauseOnBufferingEnabled()&&a.getSSECore().startPausedOnBufferingTimer(b,c),a.getPlaylist().getClip().incrementBufferCount(),a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)},onPause:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)}})}}(),C=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPause:function(b,c){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=String(a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()),a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),D=function(){return function(a){var c=this;b.extend(c,{onPause:function(b,c){a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))}})}}(),E=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){parseInt(d.ns_st_po);a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=String(a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()),a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),F=function(){return function(){function a(){f=new G(aa),b.getNamespace().comScore?(ba=b.getNamespace().comScore.exports,f.setAppCore(ba.c())):f.setAppCore(null),f.setKeepAlive(new q(f)),
f.setHeartbeat(new p(f)),f.setEventManager(new o(f)),f.setStateMachine(new r),f.setPlaylist(new n),$={},m=new x(f),F=new y(f),H=new A(f),I=new B(f),J=new t(f),K=new v(f),L=new w(f),M=new u(f),N=new z(f),O=new C(f),P=new D(f),Q=new E(f),R=new s(f),S=!1,T=0,U=+new Date,V=!0,X=!1,Z=[]}function c(a){var b=f.getStateMachine().getCurrentState();if(b==j.IDLE||b==j.PLAYBACK_NOT_STARTED||b==j.BUFFERING_BEFORE_PLAYBACK||b==j.SEEKING_BEFORE_PLAYBACK){if(a==i.PLAY)return!0}else if(b==j.PLAYING){if(a==i.END||a==i.AD_SKIP||a==i.SEEK_START||a==i.PAUSE)return!0}else if(b==j.PAUSED||b==j.BUFFERING_DURING_PAUSE||b==j.SEEKING_DURING_PLAYBACK||b==j.SEEKING_DURING_BUFFERING||b==j.SEEKING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP||a==i.PLAY)return!0}else if(b==j.BUFFERING_DURING_PLAYBACK){if(a==i.PAUSE_ON_BUFFERING||a==i.END||a==i.AD_SKIP||a==i.SEEK_START||a==i.PAUSE||a==i.PLAY)return!0}else if(b==j.BUFFERING_DURING_SEEKING){if(a==i.END||a==i.AD_SKIP||a==i.PAUSE||a==i.PLAY)return!0}else if(b==j.PAUSED_DURING_BUFFERING&&(a==i.END||a==i.AD_SKIP||a==i.BUFFER_STOP||a==i.PLAY))return!0;return!1}function d(a,b,d){var e=f.getStateMachine().getCurrentState();a==i.AD_SKIP&&!d.hasOwnProperty("ns_st_ui")&&c(a)?d.ns_st_ui="skip":a==i.SEEK_START&&!d.hasOwnProperty("ns_st_ui")&&c(a)&&(d.ns_st_ui="seek"),e==j.IDLE?a==i.BUFFER?m.onBuffer(b,d):a==i.SEEK_START?m.onSeekStart(b,d):a==i.PLAY&&m.onPlay(b,d):e==j.PLAYBACK_NOT_STARTED?a==i.END||a==i.AD_SKIP?H.onEndOrAdSkip(b,d):a==i.SEEK_START?H.onSeekStart(b,d):a==i.PLAY?H.onPlay(b,d):a==i.BUFFER&&R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):e==j.PLAYING?a==i.END||a==i.AD_SKIP?I.onEndOrAdSkip(b,d):a==i.BUFFER?I.onBuffer(b,d):a==i.SEEK_START?I.onSeekStart(b,d):a==i.PAUSE&&I.onPause(b,d):e==j.PAUSED?a==i.END||a==i.AD_SKIP?F.onEndOrAdSkip(b,d):a==i.PLAY?F.onPlay(b,d):a==i.BUFFER?R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.SEEK_START&&R.onSeekStartWhenPausedOrBufferingDuringPause(b,d):e==j.BUFFERING_BEFORE_PLAYBACK?a==i.END||a==i.AD_SKIP?J.onEndOrAdSkip(b,d):a==i.BUFFER_STOP?J.onBufferStop(b,d):a==i.SEEK_START?J.onSeekStart(b,d):a==i.PAUSE?J.onPause(b,d):a==i.PLAY&&J.onPlay(b,d):e==j.BUFFERING_DURING_PLAYBACK?a==i.PAUSE_ON_BUFFERING?K.onPauseOnBuffering(b,d):a==i.BUFFER_STOP?K.onBufferStop(b,d):a==i.END||a==i.AD_SKIP?K.onEndOrAdSkip(b,d):a==i.SEEK_START?K.onSeekStart(b,d):a==i.PAUSE?K.onPause(b,d):a==i.PLAY&&K.onPlay(b,d):e==j.BUFFERING_DURING_SEEKING?a==i.END||a==i.AD_SKIP?L.onEndOrAdSkip(b,d):a==i.PAUSE?L.onPause(b,d):a==i.PLAY?L.onPlay(b,d):a==i.BUFFER_STOP&&R.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(b,d):e==j.BUFFERING_DURING_PAUSE?a==i.END||a==i.AD_SKIP?M.onEndAndSkip(b,d):a==i.PAUSE?M.onPause(b,d):a==i.PLAY?M.onPlay(b,d):a==i.SEEK_START?R.onSeekStartWhenPausedOrBufferingDuringPause(b,d):a==i.BUFFER_STOP&&R.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(b,d):e==j.SEEKING_BEFORE_PLAYBACK?a==i.END||a==i.AD_SKIP?O.onEndOrAdSkip(b,d):a==i.PAUSE?O.onPause(b,d):a==i.PLAY?O.onPlay(b,d):a==i.BUFFER&&R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):e==j.SEEKING_DURING_PLAYBACK?a==i.END||a==i.AD_SKIP?Q.onEndOrAdSkip(b,d):a==i.PLAY?Q.onPlay(b,d):a==i.BUFFER?R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.PAUSE&&R.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(b,d):e==j.SEEKING_DURING_BUFFERING?a==i.PAUSE?P.onPause(b,d):a==i.BUFFER?R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.PLAY?R.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.END||a==i.AD_SKIP?R.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.BUFFER_STOP&&R.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):e==j.PAUSED_DURING_BUFFERING?a==i.END||a==i.AD_SKIP?N.onEndOrAdSkip(b,d):a==i.BUFFER_STOP?N.onBufferStop(b,d):a==i.SEEK_START?N.onSeekStart(b,d):a==i.PAUSE?N.onPause(b,d):a==i.PLAY&&N.onPlay(b,d):e==j.SEEKING_DURING_PAUSE&&(a==i.BUFFER?R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.PLAY?R.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.PAUSE?R.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(b,d):a==i.END||a==i.AD_SKIP?R.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.BUFFER_STOP&&R.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(b,d)),c(a)&&f.getPlaylist().setFirstEventSent(!0)}function e(a,c){for(var d,e=ea.encodeURIComponent||escape,f=[],g=l.LABELS_ORDER,h=a.split("?"),i=h[0],j=h[1],k=j.split("&"),m=0,n=k.length;n>m;m++){var o=k[m].split("="),p=unescape(o[0]),q=unescape(o[1]);p&&(c[p]=q)}for(var r={},s=0,t=g.length;t>s;s++){var u=g[s];if(c.hasOwnProperty(u)){var v=c[u];"undefined"!=typeof v&&null!=v&&(r[u]=!0,f.push(e(u)+"="+e(c[u])))}}for(var w in c)if(c.hasOwnProperty(w)){if(r[w])continue;var x=c[w];"undefined"!=typeof x&&null!=x&&f.push(e(w)+"="+e(c[w]))}d=i+"?"+f.join("&"),d=d+(d.indexOf("&c8=")<0?"&c8="+e(fa.title):"")+(d.indexOf("&c7=")<0?"&c7="+e(fa.URL):"")+(d.indexOf("&c9=")<0?"&c9="+e(fa.referrer):"");var y=b.browserAcceptsLargeURLs()?l.URL_LENGTH_LIMIT:l.RESTRICTED_URL_LENGTH_LIMIT;if(d.length>y&&d.indexOf("&")>0){var z=d.substr(0,y-8).lastIndexOf("&");d=(d.substring(0,z)+"&ns_cut="+e(d.substring(z+1))).substr(0,y)}return d}var f,m,F,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa=this,ba={},ca=l.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,da=l.THROTTLING_DELAY;b.extend(aa,{createLabels:function(a,c,d){var e={};if("undefined"!=typeof document){var g=document;e.c7=g.URL,e.c8=g.title,e.c9=g.referrer}return null!=c&&b.extend(e,c),e.ns_ts=null!=e.ns_ts?e.ns_ts:String(+new Date),e.ns_st_ev=null!=e.ns_st_ev?e.ns_st_ev:i.toString(a),e.ns_st_mp=null!=e.ns_st_mp?e.ns_st_mp:l.DEFAULT_PLAYERNAME,e.ns_st_mv=null!=e.ns_st_mv?e.ns_st_mv:l.STREAMSENSE_VERSION,e.ns_st_ub=null!=e.ns_st_ub?e.ns_st_ub:"0",e.ns_st_br=null!=e.ns_st_br?e.ns_st_br:"0",e.ns_st_pn=null!=e.ns_st_pn?e.ns_st_pn:"1",e.ns_st_tp=null!=e.ns_st_tp?e.ns_st_tp:"1",e.ns_st_it=null!=e.ns_st_it?e.ns_st_it:k.toString(k.SINGLE_CLIP),e.ns_st_sv=null!=e.ns_st_sv?e.ns_st_sv:l.STREAMSENSE_VERSION,e.ns_st_smv=null!=e.ns_st_smv?e.ns_st_smv:l.MODEL_VERSION,e.ns_type=null!=e.ns_type?e.ns_type:"hidden",e.ns_st_ec=null!=e.ns_st_ec?e.ns_st_ec:String(f.getEventManager().getEventCounter()),e.ns_st_po=null!=e.ns_st_po?e.ns_st_po:String(f.getPlaylist().getPlaylist().getClip().getExpectedPlaybackPosition(d)),e.ns_st_ki=null!=e.ns_st_ki?e.ns_st_ki:String(f.getKeepAlive().getInterval()),f.getPlaylist().createLabels(e),f.getPlaylist().getClip().createLabels(e),b.extend(e,aa.getLabels()),b.extend(e,c),{eventType:a,eventLabels:e}},newEvent:function(a,b,c,e){aa.stopDelayedTransitionTimer();var g=f.getStateMachine().getCurrentState(),h=f.getStateMachine().eventTypeToState(a);if(null!=h&&h!=g)if(!aa.isThrottlingEnabled()||g!=j.PLAYING&&g!=j.PAUSED||h!=j.PLAYING&&h!=j.PAUSED||e){c.ns_st_po||(f.getStateMachine().getCurrentState()==j.PLAYING&&a==i.BUFFER||f.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK&&a==i.BUFFER_STOP?c.ns_st_po=String(f.getPlaylist().getClip().getPlaybackTimeOffset()+(b-f.getPlaylist().getClip().getPlaybackTimestamp())):c.ns_st_po=String(f.getPlaylist().getClip().getExpectedPlaybackPosition(b))),d(a,b,c);var k=0;isNaN(f.getStateMachine().getLastStateChangeTimestamp())||(k=b-f.getStateMachine().getLastStateChangeTimestamp()),f.getStateMachine().newEvent(a,b);for(var l=0,m=Z.length;m>l;l++)Z[l](g,h,c,k)}else Y=f.getPlatformAPI().setTimeout(function(a,c,d){return function(){aa.newEvent(a,b,d,!0)}}(a,h,c),da)},newPseudoEvent:function(a,b,c){if(a!=i.LOAD&&a!=i.START||f.getStateMachine().getCurrentState()==j.IDLE){a!=i.ERROR||c.ns_st_er||(c.ns_st_er=h.UNKNOWN_VALUE),f.getStateMachine().getCurrentState()!=j.IDLE&&f.getStateMachine().getCurrentState()!=j.PLAYBACK_NOT_STARTED&&f.getStateMachine().getCurrentState()!=j.SEEKING_BEFORE_PLAYBACK&&f.getStateMachine().getCurrentState()!=j.BUFFERING_BEFORE_PLAYBACK&&(f.getPlaylist().getClip().addElapsedTime(b),f.getPlaylist().getClip().setElapsedTimestamp(b));var d,e,g,k=!0,l=!1;switch(a){case i.BIT_RATE:d="ns_st_br",e="ns_st_pbr",l=!0;break;case i.PLAYBACK_RATE:d="ns_st_rt",e="ns_st_prt",l=!0;break;case i.VOLUME:d="ns_st_vo",e="ns_st_pvo",l=!0;break;case i.WINDOW_STATE:d="ns_st_ws",e="ns_st_pws",l=!0;break;case i.AUDIO:d="ns_st_at",e="ns_st_pat",l=!1;break;case i.VIDEO:d="ns_st_vt",e="ns_st_pvt",l=!1;break;case i.SUBS:d="ns_st_tt",e="ns_st_ptt",l=!1;break;case i.CDN:d="ns_st_cdn",e="ns_st_pcdn",l=!1;break;default:k=!1}if(k&&c.hasOwnProperty(d)&&(l?(aa.getLabels().hasOwnProperty(d)&&(g=aa.getLabels()[d],c[e]=g),aa.setLabel(d,c[d])):(f.getPlaylist().getClip().getLabels().hasOwnProperty(d)&&(g=f.getPlaylist().getClip().getLabels()[d],c[e]=g),f.getPlaylist().getClip().setLabel(d,c[d]))),!k||f.getStateMachine().getCurrentState()==j.PLAYING||f.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK){c.ns_st_po||(c.ns_st_po=String(f.getPlaylist().getClip().getExpectedPlaybackPosition(b))),f.getStateMachine().getCurrentState()!=j.PLAYING&&f.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PLAYBACK||(f.getPlaylist().addPlaybackTime(b),f.getPlaylist().setPlaybackTimestamp(b),f.getPlaylist().getClip().addPlaybackTime(b),f.getPlaylist().getClip().setPlaybackTimestamp(b),f.getPlaylist().getClip().addInterval(parseInt(c.ns_st_po)),f.getPlaylist().getClip().setPlaybackStartPosition(parseInt(c.ns_st_po))),f.getStateMachine().getCurrentState()!=j.BUFFERING_BEFORE_PLAYBACK&&f.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PAUSE&&f.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PLAYBACK&&f.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_SEEKING||(f.getPlaylist().addBufferingTime(b),f.getPlaylist().setBufferingTimestamp(b),f.getPlaylist().getClip().addBufferingTime(b),f.getPlaylist().getClip().setBufferingTimestamp(b));var m=aa.createLabels(a,c,b);f.getEventManager().newEvent(m)}}},getState:function(){return f.getStateMachine().getCurrentState()},addListener:function(a){Z.push(a)},removeListener:function(a){Z.splice(b.indexOf(a,Z),1)},getLabel:function(a){return $[a]},getLabels:function(){return $},setLabel:function(a,b){null==b?delete $[a]:$[a]=b},setLabels:function(a){for(var b in a)a.hasOwnProperty(b)&&aa.setLabel(b,a[b])},getPlatformAPI:function(){return f.getAppCore()?f.getAppCore().getPlatformAPI():g},getExports:function(){return ba},isProperlyInitialized:function(){var a=f.getAppCore().getAppContext(),b=f.getAppCore().getSalt(),c=f.getAppCore().getPixelURL();return a&&c&&b},setImplementationType:function(a){f.getStateMachine().getCurrentState()!=j.IDLE||a!=k.SINGLE_CLIP&&a!=k.SEGMENTED&&a!=k.REDUCED||f.getPlaylist().setLabel("ns_st_it",k.toString(a))},setThrottlingDelay:function(a){da=a},getThrottlingDelay:function(){return da},isThrottlingEnabled:function(){return X},setThrottlingEnabled:function(a){X=a},isLoadingTimeSent:function(){return S},setLoadingTimeSent:function(a){S=a},getLoadTimeOffset:function(){return T},setLoadTimeOffset:function(a){T=a},getInitTimestamp:function(){return U},setPauseOnBufferingInterval:function(a){ca=a},getPauseOnBufferingInterval:function(){return ca},isPauseOnBufferingEnabled:function(){return V},setPauseOnBufferingEnabled:function(a){V=a},startPausedOnBufferingTimer:function(a,c){aa.stopPausedOnBufferingTimer(),W=aa.getPlatformAPI().setTimeout(function(){var d={},e=b.fixEventTime(d),f=parseInt(c.ns_st_po);d.ns_st_po=String(f+e-a),aa.newEvent(i.PAUSE_ON_BUFFERING,e,d)},ca)},stopPausedOnBufferingTimer:function(){null!=W&&(aa.getPlatformAPI().clearTimeout(W),W=null)},stopDelayedTransitionTimer:function(){Y&&(aa.getPlatformAPI().clearTimeout(Y),Y=null)},setPixelURL:function(a){if(null==a||0==a.length)return null;var b=decodeURIComponent||unescape,c=a.indexOf("?");if(c>=0){if(c<a.length-1){for(var d=a.substring(c+1).split("&"),e=0,f=d.length;f>e;e++){var g=d[e],h=g.split("=");2==h.length?aa.setLabel(h[0],b(h[1])):1==h.length&&aa.setLabel(l.PAGE_NAME_LABEL,b(h[0]))}a=a.substring(0,c+1)}}else a+="?";return _=a},getPixelURL:function(){return _?_:"undefined"!=typeof ns_p&&"string"==typeof ns_p.src?_=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?_=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null},getSseSM:function(){return f},resetPlaylist:function(a){var b=f.getPlaylist();f.setPlaylist(new n),n.resetPlaylist(b,f.getPlaylist(),a)},resetHeartbeat:function(){f.getHeartbeat().pause(),f.setHeartbeat(new p(f))},resetKeepAlive:function(){f.getKeepAlive().pause(),f.setKeepAlive(new q(f))}});var ea,fa;b.isBrowser()?(ea=window,fa=document):(ea={},fa={location:{href:""},title:"",URL:"",referrer:"",cookie:""}),b.extend(this,{prepareUrl:e}),a()}}(),G=function(){return function(a){var c,d,e,f,g,h,i=this;b.extend(i,{getAppCore:function(){return c},getSSECore:function(){return a},getEventManager:function(){return d},getStateMachine:function(){return e},getHeartbeat:function(){return f},getKeepAlive:function(){return g},getPlaylist:function(){return h},setAppCore:function(a){c=a},setKeepAlive:function(a){g=a},setHeartbeat:function(a){f=a},setEventManager:function(a){d=a},setStateMachine:function(a){e=a},setPlaylist:function(a){h=a}})}}(),H=function(){return function(a,c){function d(){h=new F,g=!0,a&&k.setLabels(a),c&&k.setPixelURL(c)}function e(a,b){k.notify(i.CUSTOM,a,b)}function f(){g&&h.getSseSM().getStateMachine().getCurrentState()!=j.IDLE&&k.end()}var g,h,k=this,m=l.STANDARD_METADATA_LABELS;b.extend(this,{isProperlyInitialized:function(){return h.isProperlyInitialized()},reset:function(a){var b=h;b.getSseSM().getKeepAlive().pause(),b.getSseSM().getHeartbeat().pause(),h=new F,n.resetPlaylist(b.getSseSM().getPlaylist(),h.getSseSM().getPlaylist(),a)},setPauseOnBufferingInterval:function(a){h.setPauseOnBufferingInterval(a)},getPauseOnBufferingInterval:function(){return h.getPauseOnBufferingInterval()},setKeepAliveInterval:function(a){h.getSseSM().getKeepAlive().setInterval(a)},getKeepAliveInterval:function(){return h.getSseSM().getKeepAlive().getInterval()},setHeartbeatIntervals:function(a){h.getSseSM().getHeartbeat().setIntervals(a)},play:function(a,b){k.notify(i.PLAY,a,b)},pause:function(a,b){k.notify(i.PAUSE,a,b)},end:function(a,b){k.notify(i.END,a,b)},bufferStart:function(a,b){k.notify(i.BUFFER,a,b)},bufferStop:function(a,b){k.notify(i.BUFFER_STOP,a,b)},load:function(a,b){k.notify(i.LOAD,a,b)},start:function(a,b){k.notify(i.START,a,b)},seekStart:function(a,b){k.notify(i.SEEK_START,a,b)},skipAd:function(a,b){k.notify(i.AD_SKIP,a,b)},callToAction:function(a,b){k.notify(i.CTA,a,b)},error:function(a,b){k.notify(i.ERROR,a,b)},transferPlayback:function(a,b){k.notify(i.TRANSFER,a,b)},drmFail:function(a,b){k.notify(i.DRM_FAILED,a,b)},drmApprove:function(a,b){k.notify(i.DRM_APPROVED,a,b)},drmDeny:function(a,b){k.notify(i.DRM_DENIED,a,b)},changeBitrate:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_br=String(a),k.notify(i.BIT_RATE,d,b)}},changePlaybackRate:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_rt=String(a),k.notify(i.PLAYBACK_RATE,d,b)}},changeVolume:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_vo=String(a),k.notify(i.VOLUME,d,b)}},changeWindowState:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_ws=String(a),k.notify(i.WINDOW_STATE,d,b)}},changeAudio:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_at=String(a),k.notify(i.AUDIO,d,b)}},changeVideo:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_vt=String(a),k.notify(i.VIDEO,d,b)}},changeSubtitle:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_tt=String(a),k.notify(i.SUBS,d,b)}},changeCDN:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_cdn=String(a),k.notify(i.CDN,d,b)}},notify:function(a){var c,d;if(c="object"==typeof arguments[1]?arguments[1]:"object"==typeof arguments[2]?arguments[2]:{},d="number"==typeof arguments[1]?arguments[1]:"number"==typeof arguments[2]?arguments[2]:NaN,i.toString(a)){c=b.jsonObjectToStringDictionary(c);var e=b.fixEventTime(c);c.ns_st_po||isNaN(d)||(c.ns_st_po=b.getInteger(d,0).toString()),c.ns_st_po&&h.getSseSM().getPlaylist().getClip().setPlaybackTimeOffset(parseInt(c.ns_st_po)),a==i.PLAY||a==i.PAUSE||a==i.BUFFER||a==i.END||a==i.SEEK_START||a==i.AD_SKIP||a==i.BUFFER_STOP?h.newEvent(a,e,c):h.newPseudoEvent(a,e,c)}},getLabels:function(){return h.getLabels()},getState:function(){return h.getSseSM().getStateMachine().getCurrentState()},setLabels:function(a){h.setLabels(a)},getLabel:function(a){return h.getLabel(a)},setLabel:function(a,b){h.setLabel(a,b)},getLoadTimeOffset:function(){return h.getLoadTimeOffset()},setLoadTimeOffset:function(a){h.setLoadTimeOffset(a)},setPixelURL:function(a){return h.setPixelURL(a)},getPixelURL:function(){return h.getSseSM().getSSECore().getPixelURL()},setImplementationType:function(a){h.setImplementationType(a)},isPauseOnBufferingEnabled:function(){return h.isPauseOnBufferingEnabled()},setPauseOnBufferingEnabled:function(a){h.setPauseOnBufferingEnabled(a)},isThrottlingEnabled:function(){return h.isThrottlingEnabled()},setThrottlingEnabled:function(a){h.setThrottlingEnabled(a)},setThrottlingDelay:function(a){h.setThrottlingDelay(a)},getThrottlingDelay:function(){return h.getThrottlingDelay()},setPlaybackIntervalMergeTolerance:function(a){h.getSseSM().getPlaylist().getClip().setPlaybackIntervalMergeTolerance(a)},getPlaybackIntervalMergeTolerance:function(){return h.getSseSM().getPlaylist().getClip().getPlaybackIntervalMergeTolerance()},setClip:function(a,c,d){if(void 0===d&&(d=!0),a=b.jsonObjectToStringDictionary(a),d&&h.getSseSM().getStateMachine().getCurrentState()!==j.IDLE&&k.end(),h.getSseSM().getStateMachine().getCurrentState()==j.IDLE){var e="",f=0;if(null!=a.ns_st_cn)e=String(a.ns_st_cn);else for(var g=0;g<m.length;g++)a[m[g]]&&(e+=m[g]+":"+a[m[g]]+";");var i=h.getSseSM().getPlaylist(),l=i.getClip();l.isClipStarted()?(i.hashExists(l.getHash())||(i.storeHash(l.getHash()),i.storeClipNumber(l.getHash(),l.getClipNumber())),i.storeClipPlaybackCounters(),f=i.hashExists(e)?i.getClipNumber(e):b.exists(a.ns_st_cn)?parseInt(a.ns_st_cn):i.getMaxClipNumber()+1):f=i.hashExists(e)?i.getClipNumber(e):l.getClipNumber(),i.resetClip(),l=i.getClip(),l.setHash(e),l.setClipNumber(f),l.setLabels(a);var n=i.getStoredClipRegisters(e);return n&&(l.setClipStarted(!0),l.setSegmentPlaybackCounter(n.segmentPlaybackCounter),l.setClipLoadCounter(n.clipLoadCounter),l.setAssetPlaybackCounter(n.assetPlaybackCounter),l.setLowestPartNumberPlayed(n.lowestPartNumberPlayed),l.setSeeking(n.seeking),l.setSeekingTimeBeforeEnd(n.seekingTimeBeforeEnd),l.setSeekStartPosition(n.seekingStartPosition),l.setClipPlaybackIntervals(n.clipPlaybackIntervals),l.setUniquePlaybackInterval(n.uniquePlaybackInterval),l.setLongestPlaybackInterval(n.longestPlaybackInterval),l.setVideoTrack(n.videoTrack),l.setAudioTrack(n.audioTrack),l.setSubtitleTrack(n.subtitleTrack),l.setCDN(n.cdn),l.setPreviousUniquePlaybackInterval(n.uniquePlaybackInterval),l.setPreviousEventIndependentUniquePlaybackInterval(n.uniquePlaybackInterval),l.setPreviousLongestPlaybackInterval(n.longestPlaybackInterval)),l.incrementClipLoadCounter(),l.isClipStarted()&&c&&(i.incrementPlayCounter(),i.incrementPlaybackCounter()),!0}return!1},setPlaylist:function(a,c){return void 0===c&&(c=!0),a=b.jsonObjectToStringDictionary(a),c&&h.getSseSM().getStateMachine().getCurrentState()!==j.IDLE&&k.end(),h.getSseSM().getStateMachine().getCurrentState()==j.IDLE?(h.getSseSM().getPlaylist().isPlaylistStarted()&&h.resetPlaylist(),h.getSseSM().getPlaylist().setLabels(a),!0):!1},importState:function(){},exportState:function(){return{}},getVersion:function(){return l.STREAMSENSE_VERSION},addListener:function(a){h.addListener(a)},removeListener:function(a){h.removeListener(a)},getClip:function(){return console&&console.warn&&console.warn("getClip() is deprecated. Use getPlaylist().getClip() instead."),h.getSseSM().getPlaylist().getClip()},getPlaylist:function(){return h.getSseSM().getPlaylist()},setHttpGet:function(a){"function"==typeof a&&(h.getPlatformAPI().httpGet=a)},setHttpPost:function(a){"function"==typeof a&&(h.getPlatformAPI().httpPost=a)},setExitEndEventEnabled:function(a){g=a},isExitEndEventEnabled:function(){return g},getPlatformAPI:function(){return h.getPlatformAPI()}}),b.extend(this,{customNotify:e,viewNotify:function(a,b){a=a||k.getPixelURL(),a&&viewNotify(a,b)}}),b.isBrowser()&&(window.addEventListener?(window.addEventListener("beforeunload",f),window.addEventListener("unload",f)):window.attachEvent&&(window.attachEvent("onbeforeunload",f),window.attachEvent("onunload",f))),d()}}();return function(c){function d(a,b){return x[z]||f(a,b)}function e(){z=-1;for(var b=0;y>=b;b++)if(x.hasOwnProperty(String(b))){z=b;break}return a.StreamSense.activeIndex=z,z}function f(b,c){return b=b||null,c=c||null,b&&"object"==typeof b&&(c=b,b=null),x[++y]=new a.StreamSense(c,b),e(),x[y]}function g(){var b=!1,c=z;if("number"==typeof arguments[0]&&isFinite(arguments[0]))c=arguments[0];else if(arguments[0]instanceof a.StreamSense)for(var d in x)if(x.hasOwnProperty(d)&&x[d]===arguments[0]){c=d;break}return x.hasOwnProperty(String(c))&&(b=x[c],delete x[c],b.reset(),e()),b}function h(a){return a=a||{},d().setPlaylist(a),d().getPlaylist()}function i(a,b,c){return a=a||{},"number"==typeof b&&(a.ns_st_cn=String(b)),d().setClip(a,c),d().getClip()}function j(a,b,c){return"undefined"==typeof a?!1:(c=c||null,b=b||{},d().notify(a,b,c))}function k(a){"undefined"!=typeof a&&d().setLabels(a)}function l(){return d().getLabels()}function m(a){"undefined"!=typeof a&&d().getPlaylist().setLabels(a)}function n(){return d().getPlaylist().getLabels()}function o(a){"undefined"!=typeof a&&d().getClip().setLabels(a)}function p(){return d().getClip().getLabels()}function q(a){return d().reset(a||{})}function r(a){return d().getPlaylist().reset(a||{})}function s(a){return d().getClip().reset(a||{})}function t(a){return a=a||{},d().viewNotify(null,a)}function u(a,b){return arguments.length>2&&(a=arguments[1],b=arguments[2]),a=a||{},"number"==typeof b&&(a.ns_st_po=String(b)),d().customNotify(a,b)}function v(){return d().exportState()}function w(a){d().importState(a)}var x={},y=-1,z=-1;b.extend(c,{activeIndex:z,newInstance:f,"new":f,destroyInstance:g,destroy:g,newPlaylist:h,newClip:i,notify:j,setLabels:k,getLabels:l,setPlaylistLabels:m,getPlaylistLabels:n,setClipLabels:o,getClipLabels:p,resetInstance:q,resetPlaylist:r,resetClip:s,viewEvent:t,customEvent:u,exportState:v,importState:w})}(H),H.PlayerEvents=i,H.InternalStates=j,H.ImplementationType=k,H}(),a.StreamingTag=a.StreamingTag||function(){var c=a.StreamSense,d=(a.StreamSense.PlayerEvents,a.StreamSense.InternalStates||null),e=a.StreamSense.ImplementationType||null,f=null!=a.StreamSense.InternalStates&&null!=a.StreamSense.ImplementationType;return function(){var a={LongFormOnDemand:"12",ShortFormOnDemand:"11",Live:"13",UserGeneratedLongFormOnDemand:"22",UserGeneratedShortFormOnDemand:"21",UserGeneratedLive:"23",Bumper:"99",Other:"00"},g={LinearOnDemandPreRoll:"11",LinearOnDemandMidRoll:"12",LinearOnDemandPostRoll:"13",LinearLive:"21",Other:"00"},h=function(a){function g(){if(f)if(b.getNamespace().comScore)q=new c,q.setImplementationType(e.REDUCED);else if(b.exists(a))if(r=b.isTrue(a.debug),b.exists(a.customerC2)&&a.customerC2.length>0){var d=a.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");q=new c,q.setPixelURL(d+".scorecardresearch.com/p?c1=2"),q.setLabel("c2",a.customerC2),q.setImplementationType(e.REDUCED)}else r&&console&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.")}function h(a){b.exists(a)||(a={});for(var c in t)t.hasOwnProperty(c)&&!b.exists(a[t[c]])&&("ns_st_ci"==t[c]?a.ns_st_ci="0":a[t[c]]="*null");return a}function i(a){for(var b in t)if(t.hasOwnProperty(b)&&!j(t[b],o,a))return!1;return!0}function j(a,c,d){if(b.exists(a)&&b.exists(c)&&b.exists(d)){var e=c[a],f=d[a];return b.exists(e)&&b.exists(f)&&e===f}return!1}function k(a){n++;var c={ns_st_cn:String(n),ns_st_pn:"1",ns_st_tp:"0"};b.extend(c,a),q.setClip(c),o=a,q.play()}function l(a){n++,a=h(a);var c={ns_st_cn:String(n),ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};b.extend(c,a),q.setClip(c),q.play(),p=!1}function m(a,b){a=h(a),u==s.None&&(u=b),p&&u==b&&i(a)?(q.getClip().setLabels(a),q.getState()!=d.PLAYING&&q.play()):k(a),p=!0,u=b}var n=0,o=null,p=!1,q=null,r=!1,s={None:0,AudioContent:1,VideoContent:2},t=["ns_st_ci","c3","c4","c6","ns_st_st","ns_st_pu","ns_st_pr","ns_st_ep","ns_st_sn","ns_st_en","ns_st_ct"],u=s.None;b.extend(this,{playAdvertisement:function(){if(q){r&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead.");var a={ns_st_ct:"va"};l(a)}},playVideoAdvertisement:function(a,c){if(q){var d={ns_st_ct:"va"};c?d.ns_st_ct="va"+c:r&&console&&console.warn("Calling 'playVideoAdvertisement' without specifying the media type as a second parameter."),a&&b.extend(d,a),l(d)}},playAudioAdvertisement:function(a,c){if(q){var d={ns_st_ct:"aa"};c?d.ns_st_ct="aa"+c:r&&console&&console.warn("Calling 'playAudioAdvertisement' without specifying the media type as a second parameter."),a&&b.extend(d,a),l(d)}},playContentPart:function(a){if(q){r&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var c={ns_st_ct:"vc"};a&&b.extend(c,a),m(c,s.VideoContent)}},playVideoContentPart:function(a,c){if(q){var d={ns_st_ct:"vc"};c?d.ns_st_ct="vc"+c:r&&console&&console.warn("Calling 'playVideoContentPart' without specifying the media type as a second parameter."),a&&b.extend(d,a),m(d,s.VideoContent)}},playAudioContentPart:function(a,c){if(q){var d={ns_st_ct:"ac"};c?d.ns_st_ct="ac"+c:r&&console&&console.warn("Calling 'playAudioContentPart' without specifying the media type as a second parameter."),a&&b.extend(d,a),m(d,s.AudioContent)}},stop:function(){q&&q.pause()}}),g()};return function(a){}(h),h.ContentType=a,h.AdType=g,h}()}(),a});

(function() {
    var streamingTag = null;
    var previousVideoStopped = true;
    var trackedAd = false;
    $t('on', 'ndp_videoEvent', function(e, data) {
        var eventData = data && data.videoData || {};
        var eventDataRaw = eventData.raw || {};
        switch (data.eventType) {
            case 'NDP_PlaybackEvent_LOADED':
                //set new streaming tag for each instance, stop previous if needed
                if (!previousVideoStopped) {
                    streamingTag.stop();
                }
                streamingTag = new ns_.StreamingTag({ customerC2: '6035083' });

                previousVideoStopped = false;
                trackedAd = false;
                break;

            case 'NDP_PlaybackEvent_START':
            case 'NDP_PlaybackEvent_PLAY':
                var showNamesC6 = {
                    'Dateline': 'dateline',
                    'Dateline Digital': 'dateline',
                    'Meet the Press': 'meetthepress',
                    'MTP Daily': 'meetthepress',
                    'Nightly News': 'nightlynews'
                };
                var videoLength = eventDataRaw.duration * 1000;
                var metadata = {
                    ns_st_ci: eventDataRaw.guid || '*null', // Content Asset ID
                    ns_st_cl: videoLength ? videoLength : "*null", // Clip Length
                    ns_st_st: "NBC News",
                    ns_st_pu: eventDataRaw.source === 'TODAY' ? 'TODAY' : 'NBC News', // Publisher Brand Name
                    ns_st_pr: eventDataRaw.source || '*null', // Program Title
                    ns_st_ep: eventDataRaw.title || '*null', // Episode Title
                    ns_st_sn: "*null", // Episode Season Number
                    ns_st_en: "*null", // Episode Number
                    ns_st_ge: "News", // Content Genre
                    ns_st_ti: "*null", // TMS ID (unavailable)
                    ns_st_ia: "0", // Identical Ad Assignment Flag
                    ns_st_ce: "0", // Complete Episode Flag
                    ns_st_ddt: "*null", // Digital Air Date (not setup) "2014-10-03"
                    ns_st_tdt: "*null", // TV Air Date (not setup) "2014-10-03"
                    c3: "*null", // Dictionary Classification Value
                    c4: "nbcnews", // Unused Dictionary Classification Value
                    c6: showNamesC6[eventDataRaw.source] ? showNamesC6[eventDataRaw.source] : 'nbcnews' // Unused Dictionary Classification Value
                }
                streamingTag && streamingTag.playContentPart(metadata, ns_.StreamingTag.ContentType.ShortFormOnDemand);
                break;
            case 'NDP_AdEvent_PROGRESS':
                //adstart is not used anymore, has to be ad progress
                if (!trackedAd) {
                    streamingTag && streamingTag.playVideoAdvertisement({ ns_st_cl: eventData.totalLength || 0 });
                    trackedAd = true;
                }
                break;
            case 'NDP_AdEvent_COMPLETE':
                trackedAd = false;
                break;
            case 'NDP_PlaybackEvent_COMPLETE':
            case 'NDP_PlaybackEvent_PAUSE':
                streamingTag && streamingTag.stop();
                previousVideoStopped = true;
                break;
        }
    });
})();

</script><script>
//nbcnews.com
/* globals $t, PARSELY */
(function() {
    var currentVideo = {};
    var blurred = false;
    //blur focus events
    window.addEventListener('blur', function() {
        if (currentVideo.playState === 'play') {
            blurred = true;
            PARSELY.video.trackPause(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
        }
    });
    window.addEventListener('focus', function() {
        if (currentVideo.playState === 'play' && blurred) {
            blurred = false;
            PARSELY.video.trackPlay(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
        }
    });
    //video events
    $t('on', 'ndp_videoEvent', function(e, data) {
        if (window.PARSELY && window.PARSELY.video) {
            var eventData = data && data.videoData || {};
            var eventDataRaw = eventData.raw || {};

            var getPubDate = function() { return eventDataRaw.pubDate && (new Date(eventDataRaw.pubDate).getTime()) || 0; };

            switch (data.eventType) {
                case 'NDP_PlaybackEvent_START':
                    if (currentVideo && currentVideo.guid != eventDataRaw.guid) {
                        //end previous if it hadn't
                        if (typeof currentVideo.guid !== 'undefined') {
                            !blurred && PARSELY.video.trackPause(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
                        }
                        currentVideo = {
                            'guid': eventDataRaw.guid,
                            'mediaInfo': {
                                'title': eventDataRaw.title, // required
                                'pub_date_tmsp': getPubDate(), // timestamp
                            },
                            'url': $t('dataLayer.canonical_url', document.location.href),
                            'playState': 'play'
                        };
                    }
                    !blurred && PARSELY.video.trackPlay(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
                    break;
                case 'NDP_PlaybackEvent_PLAY':
                    //resume from pause
                    !blurred && PARSELY.video.trackPlay(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
                    currentVideo.playState = 'play';
                    break;
                case 'NDP_PlaybackEvent_COMPLETE',
                'NDP_PlaybackEvent_PAUSE':
                    !blurred && PARSELY.video.trackPause(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
                    currentVideo.playState = 'pause';
                    break;

                default:
                    break;
            }
        }
    });
})();
</script><script type="text/javascript">
(function(customDomain) {
    function loadHorizon() {
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = location.protocol + '//ak.sail-horizon.com/horizon/v1.js';
        var x = document.getElementsByTagName('script')[0];
        x.parentNode.insertBefore(s, x);
    	}
    loadHorizon();
    var oldOnLoad = window.onload;
    window.onload = function() {
        	if (typeof oldOnLoad === 'function') {
            	oldOnLoad();
      		}
        	Sailthru.setup({
            	domain: customDomain,
                    useStoredTags: true
        		});
    	};
	})('horizon.nbcnews.com');
</script><script>
$t('on', 'dtm_pv_article', function() {
    if (s && s.continuousView > 1) {
        (function(customDomain, url) {
            if (window.Sailthru) {
                Sailthru.track({
                    domain: customDomain,
                    url: url,
                    useStoredTags: true
                });
            }
        })('horizon.nbcnews.com', $t('dataLayer.canonical_url', [location.protocol, '//', location.host, location.pathname].join('')));
    }
});
</script><script>
(function() {
    // neilson
    var canonicalUrl = document.URL;
    var d = new Image(1, 1);
    d.onerror = d.onload = function() {
        d.onerror = d.onload = null;
    };
    d.src = ["//secure-us.imrworldwide.com/cgi-bin/m?ci=us-505401h&cg=0&cc=1&si=", escape(canonicalUrl), "&rp=", escape(document.referrer), "&ts=compact&rnd=", (new Date()).getTime()].join('');
})();
</script><script id="nielsenCustomNbcnews">
/* global $ */
(function() {
    'use strict';
    //calculated on load
    //statics
    var noValue = 'not available';

    //formating for publish date
    var formatDate = function(oldDate) {
        //expecting format: 2017-07-05T11:41:32.000+0000, convert to YYYYMMDD HH:MI:SS (20170705 11:41:32)
        if (typeof oldDate !== 'string') {
            return false;
        }
        var dateStr = oldDate.split('T')[0].split('-');
        var timeStr = oldDate.split('T')[1] && oldDate.split('T')[1].split('.')[0];
        var newDate = dateStr[0] + dateStr[1] + dateStr[2] + ' ' + timeStr;
        return newDate;
    };
    //expose function for custom values
    window.nielsenCutomValues = (function() {
        var customBuilder = function(context) {
            var eventDataRaw = context.eventDataRaw;
            var contentMetadataObject = context.contentMetadataObject;
            var fullEpisode = eventDataRaw.guid && eventDataRaw.guid.indexOf('nn_netcast') != -1 ? 'y' : 'n'; //if its a nightly news netcast its full episode

            //just add all of them for now
            $.extend(contentMetadataObject, {
                type: 'content',
                assetid: eventDataRaw.guid,
                program: eventDataRaw.source || 'NBC News',
                title: eventDataRaw.title,
                length: eventDataRaw.duration,
                mediaURL: eventDataRaw.canonicalUrl,
                airdate: formatDate(eventDataRaw.pubDate) || noValue,
                isfullepisode: fullEpisode,
                //crossId1: eventDataRaw.guid, //not sure
                adloadtype: '2',
                hasAds: '2',
                //from nielsen
                clientid: 'us-800148',
                vcid: 'c04'
            });
            return contentMetadataObject;
        };
        customBuilder.playerID = 'P35C41790-24D9-4BCD-9873-48B547719D85';
        return customBuilder;
    })();
})();
</script><script id="nielsenGlobalVideo">
/* globals $t, NOLBUNDLE */
// this is basicaly a copy of the adobe heartbeat global script.
// v1.8
(function() {
    // Add Static Queue Snippet
    ! function(t, n) {
        t[n] = t[n] || {
            nlsQ: function(e, o, c, r, s, i) {
                return s = t.document, r = s.createElement("script"), r.async = 1, r.src = ("http:" === t.location.protocol ? "http:" : "https:") + "//cdn-gl.imrworldwide.com/conf/" + e + ".js#name=" + o + "&ns=" + n, i = s.getElementsByTagName("script")[0], i.parentNode.insertBefore(r, i), t[n][o] = t[n][o] || {
                    g: c || {},
                    ggPM: function(e, c, r, s, i) {
                        (t[n][o].q = t[n][o].q || []).push([e, c, r, s, i]);
                    }
                }, t[n][o];
            }
        };
    }(window, "NOLBUNDLE");

    var debugState = window.localStorage && window.localStorage.getItem('jf_test') ? true : false;

    // Created SDK Instance
    var playerID = (function(){
        if(window.nielsenCutomValues){
            return window.nielsenCutomValues.playerID;
        }else{
            //default to the nbcnews playerID
            return 'P35C41790-24D9-4BCD-9873-48B547719D85';
        }
    })();
    var _nSdkInstance = NOLBUNDLE.nlsQ(playerID, "nlsnInstance", {
        nol_sdkDebug: debugState ? "debug" : "off"
    });
    var _videoData = null; //video data populated in scope by event
    var _adData = null; //video data populated  
    var _stateInfo = {
        playheadPosition: 0,
        playState: 'stop',
        inAd: false
    };

    var stopSession = function() {
        if (_stateInfo.inAd === true) {
            // Only inside a midroll indicate <stop> for the ad
            _nSdkInstance.ggPM('stop', _stateInfo.playheadPosition);
        } else if (_stateInfo.playState !== 'stop') {
            // Indicate <end> and <stop> for the content
            _nSdkInstance.ggPM('end', _stateInfo.playheadPosition);
            _nSdkInstance.ggPM('stop', _stateInfo.playheadPosition);
        }
    };
    //set for unload with stop session
    window.addEventListener('beforeunload', stopSession);

    $t('on', 'ndp_videoEvent', function(e, data) {
        //populate scope data
        var eventSection = data.eventType.split('_')[1] || '';
        if (eventSection === 'AdEvent') {
            _adData = data; //populate scope data with video data
        } else if (eventSection === 'PlaybackEvent') {
            _videoData = data; //populate scope data with video data
        }

        //if this is a progress event, populate playhead and exit
        if (data.eventType.indexOf('PROGRESS') >= 0) {
            if (data.videoData && data.videoData.playheadPosition !== 0) {
                (function() {
                    var prevPlayheadPosition = _stateInfo.playheadPosition;
                    _stateInfo.playheadPosition = Math.round(data.videoData.playheadPosition / 1000);
                    //populate playhead to nielsen every second
                    if (prevPlayheadPosition != _stateInfo.playheadPosition) {
                        _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);
                    }
                })();
            }

            //let the first AdEvent_PROGRESS event through
            if (!(data.eventType === 'NDP_AdEvent_PROGRESS' && _stateInfo.inAd === false)) {
                return;
            }
        }

        var eventData = _videoData && _videoData.videoData || {};
        var eventDataRaw = eventData.raw || {};

        //default values, overwritten with custom
        var contentMetadataObject = {
            type: 'content',
            assetid: eventDataRaw.guid,
            program: eventDataRaw.source,
            title: eventDataRaw.title,
            length: eventDataRaw.duration,
            mediaURL: eventDataRaw.canonicalUrl,
            airdate: '', // 'YYYYMMDD HH:MI:SS'
            isfullepisode: 'n',
            //crossId1: 'Standard Episode ID',
            crossId2: eventDataRaw.guid,
            adloadtype: '2',
            hasAds: '2',
            //from nielsen
            clientid: 'us-800148',
            vcid: 'c04' //this is set for each brand also
        };

        if (window.nielsenCutomValues) {
            contentMetadataObject = window.nielsenCutomValues({
                'contentMetadataObject': contentMetadataObject,
                'eventDataRaw': eventDataRaw,
                '_stateInfo': _stateInfo
            });

        }

        //specific events
        switch (data.eventType) {
            case 'NDP_PlaybackEvent_LOADED':
                if (_stateInfo.playState === 'play') {
                    //if other video is started while in pause, close out last session, and reset values
                    stopSession();

                    _stateInfo.playState = 'stop';
                    _stateInfo.playheadPosition = 0;
                    _stateInfo.inAd = false;
                }

                _nSdkInstance.ggPM('loadMetadata', contentMetadataObject);
                break;

            case 'NDP_PlaybackEvent_START':
                _nSdkInstance.ggPM('loadMetadata', contentMetadataObject);
                _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);

                _stateInfo.playState = 'play';
                break;

            case 'NDP_PlaybackEvent_PLAY':
            case 'NDP_AdEvent_PLAY':
                //play was resumed (filter multiple plays)
                if (_stateInfo.playState === 'pause') {
                    _stateInfo.playState = 'play';
                    _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);
                }
                break;
            case 'NDP_PlaybackEvent_PAUSE':
            case 'NDP_AdEvent_PAUSE':
                _stateInfo.playState = 'pause';
                _nSdkInstance.ggPM('stop', _stateInfo.playheadPosition);
                break;

            case 'NDP_PlaybackEvent_SEEK':
                _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);
                break;

            case 'NDP_PlaybackEvent_COMPLETE':
                stopSession();
                _stateInfo.playState = 'stop';
                _stateInfo.playheadPosition = 0;
                break;

            case 'NDP_AdEvent_START':
                //move all ad logic to progress
                break;

            case 'NDP_AdEvent_PROGRESS':
                //need flag since complete is always fired
                _stateInfo.inAd = true;
                //hardcoded pre-roll only
                var adMetadataObject = {
                    assetid: ('rand_' + (Math.random() * 36 * 100000 | 0).toString(36)),
                    type: 'preroll'
                };

                _nSdkInstance.ggPM('loadMetadata', adMetadataObject);
                _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);

                _stateInfo.playState = 'play';
                break;

            case 'NDP_AdEvent_COMPLETE':
                if (_stateInfo.inAd) {
                    _stateInfo.inAd = false;
                    _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);
                    _nSdkInstance.ggPM('stop', _stateInfo.playheadPosition);

                    _stateInfo.playheadPosition = 0;
                }
                break;

            default:
                break;
        }
    });
})();
</script><script>
// GA Nav tracking - MB 1/8/15
if (typeof jQuery !== 'undefined') {
  jQuery('.site-header,.slim-white-site-header').on('mousedown', function(e){  
    var href=$(e.target).attr('href'); 
    if (typeof href!='string') {
      href='logo click';
      var tClass=jQuery(e.target).attr('class') || '';
      if (tClass.indexOf('js-toggle')!==-1) {
           href='more click';                       
      }
    } 
    _satellite.setVar('nav_href', href);
    _satellite.track('ga_header-nav_click'); 
  });
}
</script><script>
//github/nbcnews/gumbo#308 by @bradoyler
(function() { 
  var _fbq = window._fbq || (window._fbq = []); 
  if (!_fbq.loaded) { 
    var fbds = document.createElement('script'); 
    fbds.async = true; 
    fbds.src = '//connect.facebook.net/en_US/fbds.js'; 
    
    var s = document.getElementsByTagName('script')[0]; 
    s.parentNode.insertBefore(fbds, s); 
    _fbq.loaded = true; 
  }

  _fbq.push(['addPixelId', '514991798612189']);
 })(); 

window._fbq = window._fbq || []; 
window._fbq.push(['track', 'PixelInitialized', {
  dl:_satellite.getVar("PageUrlPath"),
  rl:_satellite.getVar("Referrer")
}]);
//end github #308
</script><script>
/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */
var Conviva=Conviva||{};(Conviva.r=function(){"use strict";if("undefined"==typeof Conviva.PrivateLoader){var a=Conviva.PrivateLoader={};!function(){var b=a.Client=function(a,f){function h(a,b){if(!(a instanceof c))throw new Error("clientSettings parameter should be an instance of ClientSettings.");
if(!(b instanceof e))throw new Error("systemFactory parameter should be an instance of SystemFactory.");this._settings=a.clone(),this._systemFactory=b,this._systemFactory.configure("SDK",this._settings),
this._exceptionCatcher=this._systemFactory.buildExceptionCatcher(),this._exceptionCatcher.runProtected("Client.init",function(){i._id=E.uinteger32(),i._logger=i._systemFactory.buildLogger(),i._logger.setModuleName("Client"),
i._logger.info("init(): url="+i._settings.gatewayUrl+" customerKey="+i._settings.customerKey),i._config=i._systemFactory.buildConfig(),i._config.load(),i._sessionFactory=i._systemFactory.buildSessionFactory(i,i._settings,i._config),
i._logger.info("init(): done.")},function(a){throw new Error("Client constructor failed: "+a.message)})}var i=this;this._logger=null,this._sessionFactory=null,this._systemFactory=null,this._globalSessionKey=-1,
this._settings=null,this._systemSettings=null,this._exceptionCatcher=null,this._config=null,this._id=-1,this._released=!1,h.apply(this,arguments),this.release=function(){this._released||this._exceptionCatcher.runProtected("Client.release",function(){
i._logger.info("release()"),i._sessionFactory.cleanup(),i._sessionFactory=null,i._globalSessionKey=-1,i._logger=null,i._id=-1,i._exceptionCatcher=null,i._settings=null,i._systemSettings=null,i._systemFactory=null,
i._released=!0})},this.createSession=function(a){var c=b.NO_SESSION_KEY;return this._released?c:null==a||a instanceof d?(this._exceptionCatcher.runProtected("Client.createSession",function(){c=i._sessionFactory.makeVideoSession(a);
}),c):(i._logger.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter"),c)},this.reportError=function(a,b,c){return this._released?void 0:B.isValidString(b)?c!==Conviva.Client.ErrorSeverity.FATAL&&c!==Conviva.Client.ErrorSeverity.WARNING?void this._logger.error("reportError(): invalid error severity: "+c):void this._exceptionCatcher.runProtected("Client.reportError",function(){
var d=i._sessionFactory.getVideoSession(a);null!=d&&d.reportError(b,c)}):void this._logger.error("reportError(): invalid error message string: "+b)},this.updateContentMetadata=function(a,b){return this._released?void 0:b instanceof d?void this._exceptionCatcher.runProtected("Client.updateContentMetadata",function(){
var c=i._sessionFactory.getVideoSession(a);if(null!=c){var d=b.clone();c.updateContentMetadata(d)}}):void i._logger.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter");
},this.detachPlayer=function(a){this._released||this._exceptionCatcher.runProtected("Client.detachPlayer",function(){var b=i._sessionFactory.getVideoSession(a);null!=b&&b.detachPlayer()})},this.attachPlayer=function(a,b){
return this._released?void 0:b instanceof g?void this._exceptionCatcher.runProtected("Client.attachPlayer",function(){var c=i._sessionFactory.getVideoSession(a);null!=c&&c.attachPlayer(b)}):void i._logger.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter");
},this.contentPreload=function(a){this._released||this._exceptionCatcher.runProtected("Client.contentPreload",function(){var b=i._sessionFactory.getVideoSession(a);null!=b&&b.contentPreload()})},this.contentStart=function(a){
this._released||this._exceptionCatcher.runProtected("Client.contentStart",function(){var b=i._sessionFactory.getVideoSession(a);null!=b&&b.contentStart()})},this.sendCustomEvent=function(a,c,e){return this._released?void 0:B.isValidString(c)?void this._exceptionCatcher.runProtected("Client.sendCustomEvent",function(){
if(a==b.NO_SESSION_KEY){if(i._globalSessionKey<0){var f=new d;i._globalSessionKey=i._sessionFactory.makeGlobalSession(f,null)}a=i._globalSessionKey}var g=B.ObjectShallowCopy(e),h=i._sessionFactory.getSession(a);
null!=h&&h.sendCustomEvent(c,g)}):void i._logger.error("sendCustomEvent(): eventName parameter must be a valid string.")},this.adStart=function(a,c,d,e){return this._released?void 0:c!==b.AdStream.CONTENT&&c!==b.AdStream.SEPARATE?void this._logger.error("adStart(): ignored, invalid value for adStream parameter: "+c):d!==b.AdPlayer.CONTENT&&d!==b.AdPlayer.SEPARATE?void this._logger.error("adStart(): ignored, invalid value for adPlayer parameter: "+d):e!==b.AdPosition.PREROLL&&e!==b.AdPosition.MIDROLL&&e!==b.AdPosition.POSTROLL?void this._logger.error("adStart(): ignored, invalid value for adPosition parameter: "+e):void this._exceptionCatcher.runProtected("Client.adStart",function(){
var b=i._sessionFactory.getVideoSession(a);null!=b&&b.adStart(c,d,e)})},this.adEnd=function(a){this._released||this._exceptionCatcher.runProtected("Client.adEnd",function(){var b=i._sessionFactory.getVideoSession(a);
null!=b&&b.adEnd()})},this.cleanupSession=function(a){return this._released?void 0:a===b.NO_SESSION_KEY?void this._logger.warning("cleanupSession(): ignored, can't cleanup Client.NO_SESSION_KEY"):void this._exceptionCatcher.runProtected("Client.cleanupSession",function(){
var b=i._sessionFactory.getVideoSession(a);null!=b&&i._sessionFactory.cleanupSession(a)})},this.getPlayerStateManager=function(){if(this._released)throw new Error("This instance of Conviva.Client has been released.");
return new g(this._systemFactory)},this.releasePlayerStateManager=function(a){if(this._released)throw new Error("This instance of Conviva.Client has been released.");this._exceptionCatcher.runProtected("Client.releasePlayerStateManager",function(){
a instanceof g&&a.release()})},this.getSettings=function(){return this._settings},this.getId=function(){return this._id}};b.version="2.117.0.31658",b.NO_SESSION_KEY=-2,b.AdPosition={PREROLL:"PREROLL",MIDROLL:"MIDROLL",
POSTROLL:"POSTROLL"},b.AdStream={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},b.AdPlayer={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},b.ErrorSeverity={FATAL:0,WARNING:1},b.DeviceType={DESKTOP:"DESKTOP",CONSOLE:"Console",
SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV",UNKNOWN:"Unknown"};var c=a.ClientSettings=function(a){function b(a){if(!B.isValidString(a))throw new Error("customerKey must be valid");
this.customerKey=a}this._customerKey=null,B.defGet(this,"customerKey",function(){return this._customerKey}),B.defSet(this,"customerKey",function(a){B.isValidString(a)&&(this._customerKey=a)}),this._heartbeatInterval=c.defaultProductionHeartbeatInterval,
B.defGet(this,"heartbeatInterval",function(){return this._heartbeatInterval}),B.defSet(this,"heartbeatInterval",function(a){if("number"==typeof a){var b=B.NumberToUnsignedInt(a);b===a&&(this._heartbeatInterval=b);
}}),this._gatewayUrl=c.defaultProductionGatewayUrl,B.defGet(this,"gatewayUrl",function(){return this._gatewayUrl}),B.defSet(this,"gatewayUrl",function(a){B.isValidString(a)&&(this._gatewayUrl=a)}),b.apply(this,arguments),
this.equals=function(a){return this.customerKey===a.customerKey&&this.gatewayUrl===a.gatewayUrl&&this.heartbeatInterval===a.heartbeatInterval},this.clone=function(){var a=new c(this.customerKey);return a.gatewayUrl=this.gatewayUrl,
a.heartbeatInterval=this.heartbeatInterval,a}};c.defaultDevelopmentGatewayUrl="https://conviva.testonly.conviva.com",c.defaultProductionGatewayUrl="https://cws.conviva.com",c.defaultDevelopmentHeartbeatInterval=5,
c.defaultProductionHeartbeatInterval=20;var d=a.ContentMetadata=function(){function a(){return this._custom}function b(a){return null!=a&&"undefined"!=a&&"null"!=a&&""!=a}function c(a){if("object"==typeof a){
var c={};for(var d in a)if(b(d)){var e=a[d];b(e)&&(c[d]=e)}this._custom=c}}function e(){return this._defaultBitrateKbps}function f(a){this._defaultBitrateKbps=F.sanitizeSpecialIntegerValue(a)}function g(){
return this._streamType}function h(a){(a===d.StreamType.UNKNOWN||a===d.StreamType.VOD||a===d.StreamType.LIVE)&&(this._streamType=a)}function i(){return this._duration}function j(a){this._duration=F.sanitizeSpecialIntegerValue(a);
}function k(){return this._encodedFrameRate}function l(a){this._encodedFrameRate=F.sanitizeSpecialIntegerValue(a)}function m(){}this.assetName=null,this._custom={},B.defGet(this,"custom",a),B.defSet(this,"custom",c),
this._defaultBitrateKbps=-2,B.defGet(this,"defaultBitrateKbps",e),B.defSet(this,"defaultBitrateKbps",f),this.defaultResource=null,this.viewerId=null,this.applicationName=null,this.streamUrl=null,this._streamType=d.StreamType.UNKNOWN,
B.defGet(this,"streamType",g),B.defSet(this,"streamType",h),this._duration=-1,B.defGet(this,"duration",i),B.defSet(this,"duration",j),this._encodedFrameRate=-1,B.defGet(this,"encodedFrameRate",k),B.defSet(this,"encodedFrameRate",l),
m.apply(this,arguments),this.clone=function(){var a=new d;a.assetName=this.assetName,a.applicationName=this.applicationName,a.streamUrl=this.streamUrl,a.viewerId=this.viewerId,a.defaultBitrateKbps=this.defaultBitrateKbps,
a.defaultResource=this.defaultResource,a.streamType=this.streamType,a.duration=this.duration,a.encodedFrameRate=this.encodedFrameRate;for(var b in this.custom)a.custom[b]=this.custom[b];return a}};d.StreamType={
UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"};var e=a.SystemFactory=function(a,b){function c(a,b){if(!(a instanceof l))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this._systemInterface=a,
this._timeInterface=this._systemInterface._timeInterface,this._timerInterface=this._systemInterface._timerInterface,this._httpInterface=this._systemInterface._httpInterface,this._storageInterface=this._systemInterface._storageInterface,
this._metadataInterface=this._systemInterface._metadataInterface,this._loggingInterface=this._systemInterface._loggingInterface,b instanceof f?this._settings=b.clone():this._settings=new f}var d=this;c.apply(this,arguments),
this.configure=function(a,b){this._packageName=a,this._clientSettings=b},this.release=function(){this._systemInterface.release(),this._systemInterface=null,this._packageName=null,this._settings=null,this._logBuffer=null;
};var e={build:function(){return new H(d._loggingInterface,d._timeInterface,d.getSettings(),d._logBuffer,d._packageName)}};this.buildLogger=function(){return e.build()},this.buildSessionFactory=function(a,b,c){
return new v(a,b,c,this)},this.buildPing=function(){return new D(this.buildLogger(),this.buildHttpClient(),this._clientSettings)},this.buildCallbackWithTimeout=function(){return new w(this.buildTimer());
},this.buildCallbackWithTimeoutNoPing=function(){var a=null,b=new z(this.buildLogger(),a,this.getSettings()),c=new L(this.buildLogger(),this._timerInterface,b);return new w(c)},this.buildHttpClient=function(){
return new G(this.buildLogger(),this._httpInterface,this.buildCallbackWithTimeoutNoPing(),this.getSettings())},this.buildExceptionCatcher=function(){return new z(this.buildLogger(),this.buildPing(),this.getSettings());
},this.buildTime=function(){return new K(this._timeInterface,this.buildLogger())},this.buildTimer=function(){return new L(this.buildLogger(),this._timerInterface,this.buildExceptionCatcher())},this.buildStorage=function(){
return new I(this.buildLogger(),this._storageInterface,this.buildCallbackWithTimeout(),this.getSettings())},this.buildConfig=function(){return new x(this.buildLogger(),this.buildStorage(),this.buildJsonInterface());
},this.buildSystemMetadata=function(){return new J(this.buildLogger(),this._metadataInterface,this.buildExceptionCatcher())},this.buildCwsProtocol=function(){return new q},this.buildGatewayControl=function(a){
return new A(a,this.buildLogger(),this.buildHttpClient(),this.buildJsonInterface())},this.buildCwsSession=function(a,b,c){var d=this.buildGatewayControl(b);return new t(this.buildEventQueue(),a,b,this.buildLogger(),this.buildExceptionCatcher(),this.buildTimer(),d,this.buildCwsProtocol(),this.buildTime(),this.getLogBuffer(),c);
},this.buildSession=function(a,b,c,d,e,f){var g=this.buildExceptionCatcher(),h=this.buildLogger(),i=this.buildCwsSession(a,b,c);return new u(d,e,f,c,this.buildSystemMetadata(),i,g,h)},this.buildEventQueue=function(){
return new y},this.buildJsonInterface=function(){return new r},this.getLogBuffer=function(){return this._logBuffer},this.getSettings=function(){return this._settings},this._logBuffer=new C},f=a.SystemSettings=function(){
function a(){}this._logLevel=f.defaultProductionLogLevel,B.defGet(this,"logLevel",function(){return this._logLevel}),B.defSet(this,"logLevel",function(a){if("number"==typeof a){var b=B.NumberToUnsignedInt(a);
b===a&&b>=f.LogLevel.DEBUG&&b<=f.LogLevel.ERROR&&(this._logLevel=b)}}),this._allowUncaughtExceptions=f.defaultProductionAllowUncaughtExceptions,B.defGet(this,"allowUncaughtExceptions",function(){return this._allowUncaughtExceptions;
}),B.defSet(this,"allowUncaughtExceptions",function(a){B.isBoolean(a)&&(this._allowUncaughtExceptions=a)}),this._storageTimeout=f.defaultStorageTimeout,B.defGet(this,"storageTimeout",function(){return this._storageTimeout;
}),B.defSet(this,"storageTimeout",function(a){if("number"==typeof a){var b=B.NumberToUnsignedInt(a);b===a&&(this._storageTimeout=b)}}),this._httpTimeout=f.defaultHttpTimeout,B.defGet(this,"httpTimeout",function(){
return this._httpTimeout}),B.defSet(this,"httpTimeout",function(a){if("number"==typeof a){var b=B.NumberToUnsignedInt(a);b===a&&(this._httpTimeout=b)}}),a.apply(this,arguments),this.equals=function(a){
return this.logLevel===a.logLevel&&this.allowUncaughtExceptions===a.allowUncaughtExceptions&&this.storageTimeout===a.storageTimeout&&this.httpTimeout===a.httpTimeout},this.clone=function(){var a=new f;return a.logLevel=this.logLevel,
a.allowUncaughtExceptions=this.allowUncaughtExceptions,a.storageTimeout=this.storageTimeout,a.httpTimeout=this.httpTimeout,a}};f.LogLevel={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},f.defaultDevelopmentLogLevel=f.LogLevel.DEBUG,
f.defaultProductionLogLevel=f.LogLevel.ERROR,f.defaultDevelopmentAllowUncaughtExceptions=!0,f.defaultProductionAllowUncaughtExceptions=!1,f.defaultStorageTimeout=10,f.defaultHttpTimeout=10;var g=a.PlayerStateManager=function(a){
function b(a){c._systemFactory=a,c._logger=c._systemFactory.buildLogger(),c._logger.setModuleName("PlayerStateManager"),c._exceptionCatcher=c._systemFactory.buildExceptionCatcher()}var c=this;c._monitorNotifier=null,
c._bitrateKbps=-2,c._playerState=g.PlayerState.UNKNOWN,c._currentMetadata={},c._renderedFrameRate=-2,c._encodedFrameRate=-2,c._duration=-2,c._playheadTimeMs=-1,c._bufferLengthMs=-1,c._playerVersion=null,
c._playerType=null,c._streamUrl=null,c._lastError=null,c._pendingErrors=[],c._released=!1,this.release=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.release",function(){null!=c._monitorNotifier&&c._monitorNotifier.onRelease(),
c.removeMonitoringNotifier(),c._systemFactory=null,c._logger=null,c._exceptionCatcher=null,c._released=!0})},this.getPlayheadTime=function(){return c._playheadTimeMs},this.setPlayheadTime=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setPlayheadTime",function(){
c._playheadTimeMs=F.Integer(a,-1,null,-1),null!=c._monitorNotifier&&c._monitorNotifier.onPlayheadTimeChange(c._playheadTimeMs)})},this.getBufferLength=function(){return c._bufferLengthMs},this.setBufferLength=function(a){
c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setBufferLength",function(){c._bufferLengthMs=F.Integer(a,-1,null,-1),null!=c._monitorNotifier&&c._monitorNotifier.onBufferLengthChange(c._bufferLengthMs);
})},this.getRenderedFrameRate=function(){return c._renderedFrameRate},this.setRenderedFrameRate=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setRenderedFrameRate",function(){
c._renderedFrameRate=F.Integer(a,-1,null,-1),null!=c._monitorNotifier&&c._monitorNotifier.onRenderedFrameRateChange(c._renderedFrameRate)})},this.getEncodedFrameRate=function(){return c._encodedFrameRate;
},this.setEncodedFrameRate=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setEncodedFrameRate",function(){var b=F.sanitizeSpecialIntegerValue(a);b>=-1&&(c._encodedFrameRate=b,
null!=c._monitorNotifier&&c._monitorNotifier.onEncodedFrameRateChange(c._encodedFrameRate))})},this.getDuration=function(){return c._duration},this.setDuration=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setDuration",function(){
var b=F.sanitizeSpecialIntegerValue(a);b>=-1&&(c._duration=b,null!=c._monitorNotifier&&c._monitorNotifier.onContentLengthChange(c._duration))})},this.getStreamUrl=function(){return c._streamUrl},this.setStreamUrl=function(a){
c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setStreamUrl",function(){c._streamUrl=a,null!=c._monitorNotifier&&c._monitorNotifier.onStreamUrlChange(c._streamUrl)})},this.getPlayerType=function(){
return c._playerType},this.setPlayerType=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setPlayerType",function(){c._playerType=a,null!=c._monitorNotifier&&c._monitorNotifier.onPlayerTypeChange(c._playerType);
})},this.getPlayerVersion=function(){return c._playerVersion},this.setPlayerVersion=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setPlayerVersion",function(){c._playerVersion=a,
null!=c._monitorNotifier&&c._monitorNotifier.onPlayerVersionChange(c._playerVersion)})},this.setMonitoringNotifier=function(a,b){return c._released?void 0:null!=c._monitorNotifier?!1:(c._monitorNotifier=a,
c._logger.setSessionId(b),!0)},this.removeMonitoringNotifier=function(){c._released||(c._monitorNotifier=null,c._logger.setSessionId(null))},this.pushCurrentState=function(){c.setPlayerState(c.getPlayerState()),
c.setBitrateKbps(c.getBitrateKbps()),c.setDuration(c.getDuration()),c.setEncodedFrameRate(c.getEncodedFrameRate()),c.setPlayheadTime(c.getPlayheadTime()),c.setBufferLength(c.getBufferLength()),c.setStreamUrl(c.getStreamUrl()),
c.setPlayerType(c.getPlayerType()),c.setPlayerVersion(c.getPlayerVersion());for(var a=0;a<c._pendingErrors.length;a++){var b=c._pendingErrors[a];c.setError(b)}c._pendingErrors=[]},this.getPlayerState=function(){
return c._playerState},this.setPlayerState=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setPlayerState",function(){g.isValidPlayerState(a)?(c._playerState=a,null!=c._monitorNotifier&&c._monitorNotifier.onPlayerStateChange(c._playerState)):c._logger.error("PlayerStateManager.SetPlayerState(): invalid state: "+a);
})},this.getBitrateKbps=function(){return c._bitrateKbps},this.setBitrateKbps=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setBitrateKbps",function(){var b=F.sanitizeSpecialIntegerValue(a);
b>=-1&&(c._bitrateKbps=b,null!=c._monitorNotifier&&c._monitorNotifier.onBitrateChange(c._bitrateKbps))})},this.setSeekStart=function(a){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setSeekStart()",function(){
null!=c._monitorNotifier&&c._monitorNotifier.onSeekEvent(g.SEEK_ACTIONS_TYPE.SEEK_START,a)})},this.setSeekEnd=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setSeekEnd()",function(){
null!=c._monitorNotifier&&c._monitorNotifier.onSeekEvent(g.SEEK_ACTIONS_TYPE.SEEK_END,-1)})},this.setUserSeekButtonUp=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonUp()",function(){
null!=c._monitorNotifier&&c._monitorNotifier.onSeekEvent(g.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.setUserSeekButtonDown()",function(){
null!=c._monitorNotifier&&c._monitorNotifier.onSeekEvent(g.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setError=function(a){if(c._lastError=a,null!=c._monitorNotifier){var b=a.errorCode,d=a.severity;c._monitorNotifier.onError(b,d);
}else c._pendingErrors.push(a)},this.sendError=function(a,b){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.sendError",function(){var d=new Conviva.PrivateLoader.StreamerError(a,b);c.setError(d);
})},this.reset=function(){c._released||c._exceptionCatcher.runProtected("PlayerStateManager.reset",function(){c._bitrateKbps=-2,c._playerState=g.PlayerState.UNKNOWN,c._currentMetadata={},c._renderedFrameRate=-1,
c._encodedFrameRate=-1,c._duration=-1,c._playheadTimeMs=-1,c._bufferLengthMs=-1,c._playerVersion=null,c._playerType=null,c._streamUrl=null,c._lastError=null,c._pendingErrors=[]})},this.getError=function(){
return c._lastError},b.apply(c,arguments)};g.PlayerState={STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},g.isValidPlayerState=function(a){
return a===g.PlayerState.STOPPED||a===g.PlayerState.PLAYING||a===g.PlayerState.BUFFERING||a===g.PlayerState.PAUSED||a===g.PlayerState.UNKNOWN||a===g.PlayerState.NOT_MONITORED?!0:!1},g.SEEK_ACTIONS_TYPE={
SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"};var h=a.HttpInterface=function(){this.makeRequest=function(a,b,c,d,e,f){},this.release=function(){}},i=a.LoggingInterface=function(){this.consoleLog=function(a,b){},
this.release=function(){}},j=a.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},
this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},
this.getOperatingSystemVersion=function(){},this.release=function(){}},k=a.StorageInterface=function(){this.saveData=function(a,b,c,d){},this.loadData=function(a,b,c){},this.release=function(){}},l=a.SystemInterface=function(a,b,c,d,e,f){
function g(a,b,c,d,e,f){B.validateInterface(a,new m,"TimeInterface"),B.validateInterface(b,new n,"TimerInterface"),B.validateInterface(c,new h,"HttpInterface"),B.validateInterface(d,new k,"StorageInterface"),
B.validateInterface(e,new j,"MetadataInterface"),B.validateInterface(f,new i,"LoggingInterface"),this._timeInterface=a,this._timerInterface=b,this._httpInterface=c,this._storageInterface=d,this._metadataInterface=e,
this._loggingInterface=f}g.apply(this,arguments),this.release=function(){this._timeInterface.release(),this._timeInterface=null,this._timerInterface.release(),this._timerInterface=null,this._httpInterface.release(),
this._httpInterface=null,this._storageInterface.release(),this._storageInterface=null,this._metadataInterface.release(),this._metadataInterface=null,this._loggingInterface.release(),this._loggingInterface=null;
}},m=a.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},n=a.TimerInterface=function(){this.createTimer=function(a,b,c){},this.release=function(){}},o=a.JSON2={};!function(){
function a(a){return 10>a?"0"+a:a}function b(a){return d.lastIndex=0,d.test(a)?'"'+a.replace(d,function(a){var b=g[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"';
}function c(a,d){var g,i,j,k,l,m=e,n=d[a];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(a)),"function"==typeof h&&(n=h.call(d,a,n)),typeof n){case"string":return b(n);case"number":
return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(e+=f,l=[],Object.prototype.toString.apply(n)===Object.prototype.toString.apply([])){for(k=n.length,
g=0;k>g;g+=1)l[g]=c(g,n)||"null";return j=0===l.length?"[]":e?"[\n"+e+l.join(",\n"+e)+"\n"+m+"]":"["+l.join(",")+"]",e=m,j}if(h&&"object"==typeof h)for(k=h.length,g=0;k>g;g+=1)"string"==typeof h[g]&&(i=h[g],
j=c(i,n),j&&l.push(b(i)+(e?": ":":")+j));else for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(j=c(i,n),j&&l.push(b(i)+(e?": ":":")+j));return j=0===l.length?"{}":e?"{\n"+e+l.join(",\n"+e)+"\n"+m+"}":"{"+l.join(",")+"}",
e=m,j}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null;
},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d,e,f,g,h;"function"!=typeof o.stringify&&(d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
g={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},o.stringify=function(a,b,d){var g;if(e="",f="","number"==typeof d)for(g=0;d>g;g+=1)f+=" ";else"string"==typeof d&&(f=d);if(h=b,
b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON2.stringify");return c("",{"":a})})}();var p=a.JsonParse=function(){var a,b,c,d,e={'"':'"',"\\":"\\","/":"/",
b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},f=function(b){throw{name:"SyntaxError",message:b,at:a,text:c}},g=function(d){return d&&d!==b&&f("Expected '"+d+"' instead of '"+b+"'"),b=c.charAt(a),a+=1,b},h=function(){
var a,c="";for("-"===b&&(c="-",g("-"));b>="0"&&"9">=b;)c+=b,g();if("."===b)for(c+=".";g()&&b>="0"&&"9">=b;)c+=b;if("e"===b||"E"===b)for(c+=b,g(),("-"===b||"+"===b)&&(c+=b,g());b>="0"&&"9">=b;)c+=b,g();return a=+c,
isNaN(a)?void f("Bad number"):a},i=function(){var a,c,d,h="";if('"'===b)for(;g();){if('"'===b)return g(),h;if("\\"===b)if(g(),"u"===b){for(d=0,c=0;4>c&&(a=parseInt(g(),16),isFinite(a));c+=1)d=16*d+a;h+=String.fromCharCode(d);
}else{if("string"!=typeof e[b])break;h+=e[b]}else h+=b}f("Bad string")},j=function(){for(;b&&" ">=b;)g()},k=function(){switch(b){case"t":return g("t"),g("r"),g("u"),g("e"),!0;case"f":return g("f"),g("a"),
g("l"),g("s"),g("e"),!1;case"n":return g("n"),g("u"),g("l"),g("l"),null}f("Unexpected '"+b+"'")},l=function(){var a=[];if("["===b){if(g("["),j(),"]"===b)return g("]"),a;for(;b;){if(a.push(d()),j(),"]"===b)return g("]"),
a;g(","),j()}}f("Bad array")},m=function(){var a,c={};if("{"===b){if(g("{"),j(),"}"===b)return g("}"),c;for(;b;){if(a=i(),j(),g(":"),Object.hasOwnProperty.call(c,a)&&f('Duplicate key "'+a+'"'),c[a]=d(),
j(),"}"===b)return g("}"),c;g(","),j()}}f("Bad object")};return d=function(){switch(j(),b){case"{":return m();case"[":return l();case'"':return i();case"-":return h();default:return b>="0"&&"9">=b?h():k();
}},function(e,g){var h;return c=e,a=0,b=" ",h=d(),j(),b&&f("Syntax error"),"function"==typeof g?function i(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.hasOwnProperty.call(e,c)&&(d=i(e,c),
void 0!==d?e[c]=d:delete e[c]);return g.call(a,b,e)}({"":h},""):h}}(),q=a.CwsProtocol=function(){this.generateEvent=function(a,b,c,d){return d.seq=a,d.st=b,d.t=c,d},this.generateSessionEndEvent=function(a,b){
var c=q.EVENT_TYPE_SESSION_END,d={};return this.generateEvent(a,b,c,d)}};q.version="2.2",q.gatewayPath="/0/wsg",q.DEFAULT_CLIENT_ID="0",q.DEFAULT_MAX_HEARTBEAT_INFOS=0,q.DEFAULT_PLAYHEAD_TIME=-1,q.DEFAULT_BUFFER_LENGTH=-1,
q.SDK_METADATA_SCHEMA="sdk.js.1",q.EVENT_TYPE_STATE_CHANGE="CwsStateChangeEvent",q.EVENT_TYPE_ERROR="CwsErrorEvent",q.EVENT_TYPE_SESSION_END="CwsSessionEndEvent",q.EVENT_TYPE_CUSTOM="CwsCustomEvent",q.EVENT_TYPE_SEEK="CwsSeekEvent",
q.RESPONSE_STATUS_NO_ERRORS="ok",q.RESPONSE_KEY_STATUS="err",q.RESPONSE_KEY_CLIENT_ID="clid",q.RESPONSE_KEY_CONFIG="cfg",q.RESPONSE_KEY_EVENTS="evs",q.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxhbinfos",
q.RESPONSE_CONFIG_KEY_SEND_LOGS="slg",q.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL="hbi",q.RESPONSE_CONFIG_KEY_GATEWAY_URL="gw",q.MESSAGE_TYPE_SESSION_HEARTBEAT="CwsSessionHb",q.REQUEST_KEY_MESSAGE_TYPE="t",
q.REQUEST_KEY_SESSION_TIME="st",q.REQUEST_KEY_SESSION_START_TIME="sst",q.REQUEST_KEY_IS_LIVE="lv",q.REQUEST_KEY_SEQUENCE_NUMBER="seq",q.REQUEST_KEY_CUSTOMER_KEY="cid",q.REQUEST_KEY_CLIENT_ID="clid",q.REQUEST_KEY_CLIENT_VERSION="clv",
q.REQUEST_KEY_PROTOCOL_VERSION="pver",q.REQUEST_KEY_INSTANCE_ID="iid",q.REQUEST_KEY_SESSION_ID="sid",q.REQUEST_KEY_VIEWER_ID="vid",q.REQUEST_KEY_ASSET_NAME="an",q.REQUEST_KEY_PLAYER_NAME="pn",q.REQUEST_KEY_TAGS="tags",
q.REQUEST_KEY_SESSION_FLAGS="sf",q.REQUEST_KEY_EVENTS="evs",q.REQUEST_KEY_LOGS="lg",q.REQUEST_KEY_HEARTBEAT_INFOS="hbinfos",q.REQUEST_KEY_IS_SDK_CLIENT="sdk",q.REQUEST_KEY_PAUSE_JOIN="pj",q.REQUEST_KEY_PLAYER_STATE="ps",
q.REQUEST_KEY_BITRATE="br",q.REQUEST_KEY_CONTENT_LENGTH="cl",q.REQUEST_KEY_ENCODED_FRAME_RATE="efps",q.REQUEST_KEY_AVERAGE_FRAME_RATE="afps",q.REQUEST_KEY_RESOURCE="rs",q.REQUEST_KEY_PLAYHEAD_TIME="pht",
q.REQUEST_KEY_BUFFER_LENGTH="bl",q.REQUEST_KEY_STREAM_URL="url",q.REQUEST_KEY_CAPABILITIES="caps",q.REQUEST_KEY_PLATFORM_METADATA="pm",q.REQUEST_PLATFORM_METADATA_KEY_SCHEMA="sch",q.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME="br",
q.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION="brv",q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND="dvb",q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER="dvma",q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL="dvm",
q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE="dvt",q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION="dvv",q.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME="fw",q.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION="fwv",
q.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME="os",q.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION="osv",q.REQUEST_KEY_PROTOCOL_CAPP="caps",q.REQUEST_EVENT_KEY_TYPE="t",q.REQUEST_EVENT_KEY_SEQUENCE_NUMBER="seq",
q.REQUEST_EVENT_KEY_SESSION_TIME="st",q.REQUEST_EVENT_KEY_SEEK_ACT_TYPE="act",q.REQUEST_EVENT_KEY_SEEK_TO_POS="skto",q.REQUEST_ERROR_EVENT_KEY_MESSAGE="err",q.REQUEST_ERROR_EVENT_KEY_FATAL="ft",q.REQUEST_STATE_CHANGE_EVENT_KEY_NEW="new",
q.REQUEST_STATE_CHANGE_EVENT_KEY_OLD="old",q.REQUEST_CUSTOM_EVENT_KEY_NAME="name",q.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES="attr",q.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER="seq",q.REQUEST_HEARTBEAT_INFO_KEY_STATUS="err",
q.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME="rtt",q.convertPlayerState=function(a){switch(a){case g.PlayerState.STOPPED:return q.eStopped;case g.PlayerState.PLAYING:return q.ePlaying;case g.PlayerState.BUFFERING:
return q.eBuffering;case g.PlayerState.PAUSED:return q.ePaused;case g.PlayerState.NOT_MONITORED:return q.eNotMonitored;default:return q.eUnknown}},q.eStopped=1,q.ePlaying=3,q.eBuffering=6,q.ePaused=12,
q.eNotMonitored=98,q.eUnknown=100,q.SessionFlags={GLOBAL:0,VIDEO:1,QUALITY_METRICS:2,BITRATE_METRICS:4},q.Capabilities={INSIGHTS:0};var r=(a.JSONInterface=function(){this.encode=function(a){},this.decode=function(a){};
},a.LibJSONInterface=function(){this.encode=function(a){var b=null;try{b=o.stringify(a)}catch(c){}return b},this.decode=function(a){var b=null;try{b=p(a)}catch(c){}return B.isObject(b)||(b=null),b}}),s=a.CwsHeartbeat=function(){
function a(){}this._data={},a.apply(this,arguments),this.get=function(){return this._data},this.setField=function(a,b){this._data[a]=b},this.setInnerField=function(a,b,c){this._data[a]||(this._data[a]={}),
this._data[a][b]=c},this.setMessageType=function(a){this.setField(q.REQUEST_KEY_MESSAGE_TYPE,a)},this.setSessionTime=function(a){this.setField(q.REQUEST_KEY_SESSION_TIME,a)},this.setSessionStartTime=function(a){
this.setField(q.REQUEST_KEY_SESSION_START_TIME,a)},this.setIsLive=function(a){this.setField(q.REQUEST_KEY_IS_LIVE,a)},this.setSequenceNumber=function(a){this.setField(q.REQUEST_KEY_SEQUENCE_NUMBER,a)},
this.setCustomerKey=function(a){this.setField(q.REQUEST_KEY_CUSTOMER_KEY,a)},this.setClientId=function(a){this.setField(q.REQUEST_KEY_CLIENT_ID,a)},this.setClientVersion=function(a){this.setField(q.REQUEST_KEY_CLIENT_VERSION,a);
},this.setProtocolVersion=function(a){this.setField(q.REQUEST_KEY_PROTOCOL_VERSION,a)},this.setCapfield=function(a){this.setField(q.REQUEST_KEY_PROTOCOL_CAPP,a)},this.setSessionId=function(a){this.setField(q.REQUEST_KEY_SESSION_ID,a);
},this.setInstanceId=function(a){this.setField(q.REQUEST_KEY_INSTANCE_ID,a)},this.setViewerId=function(a){this.setField(q.REQUEST_KEY_VIEWER_ID,a)},this.setAssetName=function(a){this.setField(q.REQUEST_KEY_ASSET_NAME,a);
},this.setPlayerName=function(a){this.setField(q.REQUEST_KEY_PLAYER_NAME,a)},this.setTags=function(a){this.setField(q.REQUEST_KEY_TAGS,a)},this.setSessionFlags=function(a){this.setField(q.REQUEST_KEY_SESSION_FLAGS,a);
},this.setCapabilities=function(a){this.setField(q.REQUEST_KEY_CAPABILITIES,a)},this.setEvents=function(a){this.setField(q.REQUEST_KEY_EVENTS,a)},this.setIsSdkClient=function(a){this.setField(q.REQUEST_KEY_IS_SDK_CLIENT,a);
},this.setLogs=function(a){this.setField(q.REQUEST_KEY_LOGS,a)},this.setHeartbeatInfos=function(a){this.setField(q.REQUEST_KEY_HEARTBEAT_INFOS,a)},this.setPlayerState=function(a){this.setField(q.REQUEST_KEY_PLAYER_STATE,a);
},this.setPauseJoin=function(a){this.setField(q.REQUEST_KEY_PAUSE_JOIN,a)},this.setContentLength=function(a){this.setField(q.REQUEST_KEY_CONTENT_LENGTH,a)},this.setBitrate=function(a){this.setField(q.REQUEST_KEY_BITRATE,a);
},this.setResource=function(a){this.setField(q.REQUEST_KEY_RESOURCE,a)},this.setEncodedFrameRate=function(a){this.setField(q.REQUEST_KEY_ENCODED_FRAME_RATE,a)},this.setAverageFrameRate=function(a){this.setField(q.REQUEST_KEY_AVERAGE_FRAME_RATE,a);
},this.setPlatformMetadataSchema=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_SCHEMA,a)},this.setBrowserName=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_BROWSER_NAME,a);
},this.setBrowserVersion=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_BROWSER_VERSION,a)},this.setDeviceBrand=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_BRAND,a);
},this.setDeviceManufacturer=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MANUFACTURER,a)},this.setDeviceModel=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_MODEL,a);
},this.setDeviceType=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_TYPE,a)},this.setDeviceVersion=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_DEVICE_VERSION,a);
},this.setFrameworkName=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_NAME,a)},this.setFrameworkVersion=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_FRAMEWORK_VERSION,a);
},this.setOperatingSystemName=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_NAME,a)},this.setOperatingSystemVersion=function(a){this.setInnerField(q.REQUEST_KEY_PLATFORM_METADATA,q.REQUEST_PLATFORM_METADATA_KEY_OPERATING_SYSTEM_VERSION,a);
},this.setPlayheadTime=function(a){this.setField(q.REQUEST_KEY_PLAYHEAD_TIME,a)},this.setBufferLength=function(a){this.setField(q.REQUEST_KEY_BUFFER_LENGTH,a)},this.setStreamUrl=function(a){this.setField(q.REQUEST_KEY_STREAM_URL,a);
}},t=a.CwsSession=function(a,c,d,e,f,h,i,j,k,l,m){function n(a,b,c,d,e,f,g,h,i,j,k){this._eventQueue=a,this._client=b,this._clientSettings=c,this._logger=d,this._logger.setModuleName("CwsSession"),this._exceptionCatcher=e,
this._timer=f,this._gatewayControl=g,this._cwsProtocol=h,this._time=i,this._logBuffer=j,this._clientConfig=k}var o=this;o._heartbeatTimerCancel=null,o._startTimeMs=0,o._heartbeatSequenceNumber=0,o._sessionFlags=q.SessionFlags.GLOBAL,
o._capabilities=q.Capabilities.INSIGHTS,o._heartbeatInfos=[],o._lastRequestSentMs=-1,o._bitrateKbps=-2,o._resource=null,o._playerState=g.PlayerState.NOT_MONITORED,o._encodedFrameRate=-1,o._contentLengthSec=-1,
o._bufferLengthMs=q.DEFAULT_BUFFER_LENGTH,o._playheadTimeMs=q.DEFAULT_PLAYHEAD_TIME,o._streamUrl=null,o._averageFrameRate=-1,o._assetName=null,o._viewerId=null,o._playerName=null,o._isLive=null,o._tags={},
o._browserName=null,o._browserVersion=null,o._deviceBrand=null,o._deviceManufacturer=null,o._deviceModel=null,o._deviceType=null,o._deviceVersion=null,o._frameworkName=null,o._frameworkVersion=null,o._operatingSystemName=null,
o._operatingSystemVersion=null,o._pauseJoin=!1,o._hasJoined=!1,o._cleanedUp=!1,o._willEndSoon=!1,n.apply(this,arguments),this.cleanup=function(){this._clientConfig=null,this._logBuffer=null,this._systemSettings=null,
this._time=null,this._cwsProtocol=null,this._gatewayControl=null,this._timer=null,this._exceptionCatcher=null,this._logger=null,this._clientSettings=null,this._client=null,this._eventQueue.flush(),this._eventQueue=null,
this._cleanedUp=!0},this.start=function(a){this._session=a,this._global=this._session._global,this._logger.setSessionId(this._session._id),this._startTimeMs=this._time.current(),this.isVideoSession()&&(this._sessionFlags+=t.DEFAULT_VIDEO_SESSION_FLAGS);
},this.willEndSoon=function(){this._willEndSoon=!0},this.initialize=function(){this._logger.debug("initialize()")},this.end=function(){this.isVideoSession()&&(this._logger.debug("end(): schedule the last hb before session cleanup"+o.sessionTypeTag()),
this.enqueueSessionEndEvent()),this.cancelHeartbeatTimer(),this.sendHeartbeat()},this.startSendingHeartbeats=function(){this._willEndSoon||(this.sendHeartbeat(),this.resetHeartbeatTimer())},this.setBrowserName=function(a){
o._logger.debug("setBrowserName(): "+a);var b=o._browserName;b!==a&&null!=a&&(o._logger.debug("Change browserName from "+b+" to "+a),o._browserName=a)},this.setBrowserVersion=function(a){o._logger.debug("setBrowserVersion(): "+a);
var b=o._browserVersion;b!==a&&null!=a&&(o._logger.debug("Change browserVersion from "+b+" to "+a),o._browserVersion=a)},this.setDeviceBrand=function(a){o._logger.debug("setDeviceBrand(): "+a);var b=o._deviceBrand;
b!==a&&null!=a&&(o._logger.debug("Change deviceBrand from "+b+" to "+a),o._deviceBrand=a)},this.setDeviceManufacturer=function(a){o._logger.debug("setDeviceManufacturer(): "+a);var b=o._deviceManufacturer;
b!==a&&null!=a&&(o._logger.debug("Change deviceManufacturer from "+b+" to "+a),o._deviceManufacturer=a)},this.setDeviceModel=function(a){o._logger.debug("setDeviceModel(): "+a);var b=o._deviceModel;b!==a&&null!=a&&(o._logger.debug("Change deviceModel from "+b+" to "+a),
o._deviceModel=a)},this.setDeviceType=function(a){o._logger.debug("setDeviceBrand(): "+a);var b=o._deviceType;b!==a&&null!=a&&(o._logger.debug("Change deviceType from "+b+" to "+a),o._deviceType=a)},this.setDeviceVersion=function(a){
o._logger.debug("setDeviceVersion(): "+a);var b=o._deviceVersion;b!==a&&null!=a&&(o._logger.debug("Change deviceVersion from "+b+" to "+a),o._deviceVersion=a)},this.setOperatingSystemName=function(a){o._logger.debug("setOperatingSystemName(): "+a);
var b=o._operatingSystemName;b!==a&&null!=a&&(o._logger.debug("Change operatingSystemName from "+b+" to "+a),o._operatingSystemName=a)},this.setOperatingSystemVersion=function(a){o._logger.debug("setOperatingSystemVersion(): "+a);
var b=o._operatingSystemVersion;b!==a&&null!=a&&(o._logger.debug("Change operatingSystemVersion from "+b+" to "+a),o._operatingSystemVersion=a)},this.setBufferLengthMs=function(a){var b=o._bufferLengthMs;
b!==a&&a>=-1&&(o._logger.debug("Change buffer length from "+b+" to "+a),o._bufferLengthMs=a)},this.getFrameworkName=function(){return o._frameworkName},this.setFrameworkName=function(a){o._logger.debug("setFrameworkName(): "+a);
var b=o._frameworkName;b!==a&&null!=a&&(o._logger.debug("Change frameworkName from "+b+" to "+a),o._frameworkName=a)},this.getFrameworkVersion=function(){return o._frameworkVersion},this.setFrameworkVersion=function(a){
o._logger.debug("setFrameworkVersion(): "+a);var b=o._frameworkVersion;b!==a&&null!=a&&(o._logger.debug("Change frameworkVersion from "+b+" to "+a),o._frameworkVersion=a)},this.setPlayheadTimeMs=function(a){
var b=o._playheadTimeMs;b!==a&&a>=-1&&(o._logger.debug("Change playhead time from "+b+" to "+a),o._playheadTimeMs=a)},this.setStreamUrl=function(a){o._logger.debug("setStreamUrl(): "+a);var b=o._streamUrl;
b!==a&&null!=a&&(o._logger.debug("Change stream url from "+b+" to "+a),o.enqueueStreamUrlChangeEvent(b,a),o._streamUrl=a)},this.setBitrateKbps=function(a){o._logger.debug("setBitrateKbps(): "+a);var b=o._bitrateKbps;
b!==a&&a>=-1&&(o._logger.info("Change bitrate from "+b+" to "+a),o.enqueueBitrateChangeEvent(b,a),o._bitrateKbps=a)},this.setResource=function(a){o._logger.debug("setResource(): "+a);var b=o._resource;b!==a&&null!=a&&(o._logger.info("Change resource from "+b+" to "+a),
o.enqueueResourceChangeEvent(b,a),o._resource=a)},this.setAssetName=function(a){o._logger.debug("setAssetName(): "+a);var b=o._assetName;b!==a&&null!=a&&(o._logger.info("Change assetName from "+b+" to "+a),
o.enqueueAssetNameChangeEvent(b,a),o._assetName=a)},this.setIsLive=function(a){o._logger.debug("setIsLive(): "+a);var b=o._isLive;b!==a&&null!=a&&(o._logger.info("Change isLive from "+b+" to "+a),o._isLive=a);
},this.setViewerId=function(a){o._logger.debug("setViewerId(): "+a);var b=o._viewerId;b!==a&&null!=a&&(o._logger.info("Change viewerId from "+b+" to "+a),o._viewerId=a)},this.setPlayerName=function(a){
o._logger.debug("setPlayerName(): "+a);var b=o._playerName;b!==a&&null!=a&&(o._logger.info("Change playerName from "+b+" to "+a),o._playerName=a)},this.setTags=function(a){o._logger.debug("setTags()");var b=o._tags;
B.ObjectShallowEquals(b,a)||null==a||(o._logger.info("Change tags from "+B.ObjectToString(b)+" to "+B.ObjectToString(a)),o.enqueueTagsChangeEvent(b,a),o._tags=a)},this.setEncodedFrameRate=function(a){o._logger.debug("setEncodedFrameRate(): "+a),
o._encodedFrameRate=a},this.setAverageFrameRate=function(a){o._logger.debug("setAverageFrameRate(): "+a),o._averageFrameRate=a},this.setContentLength=function(a){o._logger.debug("setContentLength(): "+a),
o._contentLengthSec=a},this.setPlayerState=function(a){o._logger.debug("setPlayerState(): "+a),o._hasJoined||a!=g.PlayerState.PLAYING||(o.togglePauseJoin(!1),o._hasJoined=!0);var b=o._playerState;o._logger.info("setPlayerState(): changing player state from "+b+" to "+a),
o.enqueuePlayerStateChangeEvent(b,a),o._playerState=a},this.togglePauseJoin=function(a){if(o._logger.debug("togglePauseJoin()"),o._pauseJoin===a)return void o._logger.debug("togglePauseJoin(): same value, ignoring");
var b=o._pauseJoin,c=!o._pauseJoin;o.enqueuePauseJoinChangeEvent(b,c),o._pauseJoin=!o._pauseJoin},this.sendError=function(a,b){o.enqueueErrorEvent(a,b)},this.enqueueEvent=function(a,b){b[q.REQUEST_EVENT_KEY_TYPE]=a,
b[q.REQUEST_EVENT_KEY_SESSION_TIME]=this.getSessionTime(),b[q.REQUEST_EVENT_KEY_SEQUENCE_NUMBER]=this._eventQueue.getNumber(),this._eventQueue.enqueue(b)},this.enqueueSessionEndEvent=function(){var a=this.getSessionTime(),b=this.getNextEventNumber(),c=this._cwsProtocol.generateSessionEndEvent(b,a);
this._eventQueue.enqueue(c)},this.enqueueTagsChangeEvent=function(a,b){var c=null;B.dictCount(a)>0&&(c={},c[q.REQUEST_KEY_TAGS]=a);var d={};d[q.REQUEST_KEY_TAGS]=b,this.declareStateChange(d,c)},this.enqueueAssetNameChangeEvent=function(a,b){
var c={};c[q.REQUEST_KEY_ASSET_NAME]=b,this.declareStateChange(c,null)},this.enqueueErrorEvent=function(a,b){var c={};c[q.REQUEST_ERROR_EVENT_KEY_MESSAGE]=a,c[q.REQUEST_ERROR_EVENT_KEY_FATAL]=b,this.enqueueEvent(q.EVENT_TYPE_ERROR,c);
},this.enqueueBitrateChangeEvent=function(a,b){var c={},d={};-1>a&&(a=-1),d[q.REQUEST_KEY_BITRATE]=a,c[q.REQUEST_KEY_BITRATE]=b,this.declareStateChange(c,d)},this.enqueueSeekEvent=function(a,b){var c={};
c[q.REQUEST_EVENT_KEY_SEEK_ACT_TYPE]=a,b>=0&&(c[q.REQUEST_EVENT_KEY_SEEK_TO_POS]=b),this.enqueueEvent(q.EVENT_TYPE_SEEK,c)},this.enqueueResourceChangeEvent=function(a,b){var c={},d={};null!==a&&(d[q.REQUEST_KEY_RESOURCE]=a),
c[q.REQUEST_KEY_RESOURCE]=b,this.declareStateChange(c,d)},this.enqueueStreamUrlChangeEvent=function(a,b){var c={},d={};null!==a&&(d[q.REQUEST_KEY_STREAM_URL]=a),c[q.REQUEST_KEY_STREAM_URL]=b,this.declareStateChange(c,d);
},this.enqueuePauseJoinChangeEvent=function(a,b){var c={},d={};d[q.REQUEST_KEY_PAUSE_JOIN]=a,c[q.REQUEST_KEY_PAUSE_JOIN]=b,this.declareStateChange(c,d)},this.enqueuePlayerStateChangeEvent=function(a,b){
var c={},d={};c[q.REQUEST_KEY_PLAYER_STATE]=q.convertPlayerState(b),d[q.REQUEST_KEY_PLAYER_STATE]=q.convertPlayerState(a),this.declareStateChange(c,d)},this.declareStateChange=function(a,b){var c={};c[q.REQUEST_STATE_CHANGE_EVENT_KEY_NEW]=a,
null!=b&&B.dictCount(b)>0&&(c[q.REQUEST_STATE_CHANGE_EVENT_KEY_OLD]=b),this.enqueueEvent(q.EVENT_TYPE_STATE_CHANGE,c)},this.enqueueCustomEvent=function(a,b){var c={};c[q.REQUEST_CUSTOM_EVENT_KEY_NAME]=a,
c[q.REQUEST_CUSTOM_EVENT_KEY_ATTRIBUTES]=b,this.enqueueEvent(q.EVENT_TYPE_CUSTOM,c)},this.cancelHeartbeatTimer=function(){null!=o._heartbeatTimerCancel&&(o._heartbeatTimerCancel(),o._heartbeatTimerCancel=null);
},this.resetHeartbeatTimer=function(){o.cancelHeartbeatTimer();var a=1e3*o._clientSettings.heartbeatInterval;o._heartbeatTimerCancel=o._timer.create(o.sendHeartbeat,a,"Session.sendHeartbeat")},this.createHeartbeatInfo=function(){
var a={};a.err="pending",a.seq=o._heartbeatSequenceNumber-1,a.sentAt=o.getSessionTime(),a.rtt=-1,o._heartbeatInfos.push(a)},this.updateHeartbeatInfoOnFailure=function(a,b){for(var c=0;c<o._heartbeatInfos.length;c++){
var d=o._heartbeatInfos[c],e=d.seq;e===a&&(d.rtt=o.getSessionTime()-d.sentAt,d.err=b)}},this.updateHeartbeatInfoOnSuccess=function(a){for(var b=0;b<o._heartbeatInfos.length;b++){var c=o._heartbeatInfos[b],d=c.seq;
d===a&&(c.rtt=o.getSessionTime()-c.sentAt,c.err="ok")}},this.removeOutdatedHeartbeatInfos=function(){for(var a,b,c=o._clientConfig.get(x.CONFIG_KEY_MAX_HEARTBEAT_INFOS),d=[],e=0;e<o._heartbeatInfos.length;e++)b=o._heartbeatInfos[e],
a=b.seq,a<o._heartbeatSequenceNumber-c&&d.push(e);for(var f=[],g=0;g<o._heartbeatInfos.length;g++)b=o._heartbeatInfos[g],a=b.seq,d.indexOf(g)<0&&f.push(o._heartbeatInfos[g]);o._heartbeatInfos=f},this.compileHeartbeatInfos=function(){
o.removeOutdatedHeartbeatInfos();for(var a=[],b=0;b<o._heartbeatInfos.length;b++){var c=o._heartbeatInfos[b],d={};d[q.REQUEST_HEARTBEAT_INFO_KEY_SEQUENCE_NUMBER]=c.seq,d[q.REQUEST_HEARTBEAT_INFO_KEY_ROUNDTRIP_TIME]=c.rtt,
d[q.REQUEST_HEARTBEAT_INFO_KEY_STATUS]=c.err,a.push(d)}return a},this.makeHeartbeat=function(){var a=new s;if(a.setMessageType(q.MESSAGE_TYPE_SESSION_HEARTBEAT),a.setCustomerKey(o._clientSettings.customerKey),
a.setClientId(o._clientConfig.get(x.CONFIG_KEY_CLIENT_ID)),a.setSessionId(o._session._id),a.setSequenceNumber(o._heartbeatSequenceNumber),a.setProtocolVersion(q.version),a.setClientVersion(b.version),a.setInstanceId(o._client.getId()),
a.setCapfield(0),a.setPlatformMetadataSchema(q.SDK_METADATA_SCHEMA),null!=o._browserName&&a.setBrowserName(o._browserName),null!=o._browserVersion&&a.setBrowserVersion(o._browserVersion),null!=o._deviceBrand&&a.setDeviceBrand(o._deviceBrand),
null!=o._deviceManufacturer&&a.setDeviceManufacturer(o._deviceManufacturer),null!=o._deviceModel&&a.setDeviceModel(o._deviceModel),null!=o._deviceType&&a.setDeviceType(o._deviceType),null!=o._deviceVersion&&a.setDeviceVersion(o._deviceVersion),
null!=o._frameworkName&&a.setFrameworkName(o._frameworkName),null!=o._frameworkVersion&&a.setFrameworkVersion(o._frameworkVersion),null!=o._operatingSystemName&&a.setOperatingSystemName(o._operatingSystemName),
null!=o._operatingSystemVersion&&a.setOperatingSystemVersion(o._operatingSystemVersion),null!=o._viewerId&&a.setViewerId(o._viewerId),null!=o._playerName&&a.setPlayerName(o._playerName),B.dictCount(o._tags)>0&&a.setTags(o._tags),
o.isVideoSession()){null!=o._assetName&&a.setAssetName(o._assetName),null!=o._isLive&&a.setIsLive(o._isLive),a.setSessionFlags(o._sessionFlags);var c=q.convertPlayerState(o._playerState);a.setPlayerState(c),
a.setPauseJoin(o._pauseJoin),o._contentLengthSec>0&&a.setContentLength(o._contentLengthSec),o._bitrateKbps>0&&a.setBitrate(o._bitrateKbps),null!==o._resource&&a.setResource(o._resource),o._encodedFrameRate>0&&a.setEncodedFrameRate(o._encodedFrameRate),
o._averageFrameRate>=0&&a.setAverageFrameRate(o._averageFrameRate),a.setPlayheadTime(o._playheadTimeMs),a.setBufferLength(o._bufferLengthMs),null!=o._streamUrl&&a.setStreamUrl(o._streamUrl)}else a.setSessionFlags(q.SessionFlags.GLOBAL);
a.setCapabilities(o._capabilities);var d=o._eventQueue.flush();if(o.isGlobalSession()&&0===d.length)return null;if(a.setEvents(d),a.setIsSdkClient(!0),o._clientConfig.get(x.CONFIG_KEY_SEND_LOGS)&&a.setLogs(o._logBuffer.flush()),
o._clientConfig.get(x.CONFIG_KEY_MAX_HEARTBEAT_INFOS)>0){var e=o.compileHeartbeatInfos();e.length>0&&a.setHeartbeatInfos(e)}return a.setSessionStartTime(o._startTimeMs),a.setSessionTime(o.getSessionTime()),
o._heartbeatSequenceNumber++,a.get()},this.sendHeartbeat=function(){if(!o._cleanedUp){var a=o.makeHeartbeat();null!=a&&o.postHeartbeat(a)}},this.postHeartbeat=function(a){o.createHeartbeatInfo();var b=o._heartbeatSequenceNumber-1;
o._logger.info("postHeartbeat(): Send HB["+b+"]"+o.sessionTypeTag());var c=function(a,c){o.onHeartbeatResponse(a,c,b)};o._gatewayControl.send(a,c)},this.onHeartbeatResponse=function(a,b,c){o._cleanedUp||o._exceptionCatcher.runProtected("onHeartbeatResponse",function(){
if(a){var d=b;if(null!=d){o._logger.debug("onHeartbeatResponse(): received valid response for HB["+c+"]"),o.updateHeartbeatInfoOnSuccess(c);var e=d[q.RESPONSE_KEY_CLIENT_ID];null!=e&&e!=o._clientConfig.get(x.CONFIG_KEY_CLIENT_ID)&&(o._logger.debug("onHeartbeatResponse(): setting the client id to "+e+" (from gateway)"),
o._clientConfig.set(x.CONFIG_KEY_CLIENT_ID,e),o._clientConfig.save());var f=d[q.RESPONSE_KEY_STATUS];null!=f&&f!=q.RESPONSE_STATUS_NO_ERRORS&&o._logger.error("onHeartbeatResponse(): error from gateway: "+f);
var g=d[q.RESPONSE_KEY_CONFIG];if("object"==typeof g){var h=g[q.RESPONSE_CONFIG_KEY_MAX_HEARTBEAT_INFOS];null!=h&&o._clientConfig.get(x.CONFIG_KEY_MAX_HEARTBEAT_INFOS)!==h&&(o._logger.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+h+" (from gateway)"),
o._clientConfig.set(x.CONFIG_KEY_MAX_HEARTBEAT_INFOS,h));var i=g[q.RESPONSE_CONFIG_KEY_SEND_LOGS],j=null!=i?B.AsBoolean(i):!1;j!==o._clientConfig.get(x.CONFIG_KEY_SEND_LOGS)&&(o._logger.debug("onHeartbeatResponse(): turning "+(j?"on":"off")+" sending of logs"),
o._clientConfig.set(x.CONFIG_KEY_SEND_LOGS,j));var k=g[q.RESPONSE_CONFIG_KEY_HEARTBEAT_INTERVAL];if(null!=k){var l=B.Int32.Cast(k),m=l;m!=o._clientSettings.heartbeatInterval&&(o._logger.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+m),
o._clientSettings.heartbeatInterval=m,null!=o._heartbeatTimerCancel&&o.resetHeartbeatTimer())}var n=g[q.RESPONSE_CONFIG_KEY_GATEWAY_URL];null!=n&&n!=o._clientSettings.gatewayUrl&&(o._logger.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+n),
o._clientSettings.gatewayUrl=n)}}else o._logger.warning("onHeartbeatResponse(): decoded heartbeat response is null.")}else{var p=b;B.isValidString(p)?B.stringStartsWith(p,"HTTP timeout")?o._logger.warning("onHeartbeatResponse(): "+p):o._logger.error("onHeartbeatResponse(): failed to send heartbeat: "+p):(p=u.DEFAULT_HEARTBEAT_ERROR_MESSAGE,
o._logger.error("onHeartbeatResponse(): "+p)),o.updateHeartbeatInfoOnFailure(c,p)}})},this.getSessionTime=function(){var a=B.Int32.Cast(o._time.current()-o._startTimeMs);return a},this.getNextEventNumber=function(){
return this._eventQueue.getNumber()},this.sessionTypeTag=function(){return this.isGlobalSession()?" (global session)":""},this.isGlobalSession=function(){return this._global},this.isVideoSession=function(){
return!this._global}};t.DEFAULT_VIDEO_SESSION_FLAGS=q.SessionFlags.VIDEO+q.SessionFlags.QUALITY_METRICS+q.SessionFlags.BITRATE_METRICS;var u=(a.IMonitor=function(){this.onPlayerStateChange=function(a){},
this.onBitrateChange=function(a){},this.onSeekEvent=function(a,b){},this.onEncodedFrameRateChange=function(a){},this.onRenderedFrameRateChange=function(a){},this.onContentLengthChange=function(a){},this.onPlayheadTimeChange=function(a){},
this.onStreamUrlChange=function(a){},this.onBufferLengthChange=function(a){},this.onPlayerTypeChange=function(a){},this.onPlayerVersionChange=function(a){},this.onError=function(a,b){},this.onRelease=function(){};
},a.Session=function(){function a(a,b,c,d,e,f,g,h){this._id=a,this._global=b,this._contentMetadata=c,this._clientConfig=d,this._systemMetadata=e,this._cwsSession=f,this._exceptionCatcher=g,this._logger=h,
this._logger.setModuleName("Session"),this._logger.setSessionId(B.ToString(this._id))}var b=this;b._contentMetadata=null,b._playerStateManager=null,b._id=0,b._global=!1,b._cleaningUp=!1,b._cleanedUp=!1,
b._adPlaying=!1,b._adStream=null,b._adPlayer=null,b._adPosition=null,b._ignorePlayerState=!1,b._pooledPlayerState=g.PlayerState.NOT_MONITORED,b._ignoreBitrateAndResource=!1,b._ignorePlayheadTimeandBufferLength=!1,
b._ignoreEncodedFrameRateAndDuration=!1,b._ignoreError=!1,b._playingFpsObservationCount=0,b._playingFpsTotal=0,a.apply(b,arguments),this.start=function(){if(b.isVideoSession()?b._logger.info("start(): assetName="+b._contentMetadata.assetName):b._logger.info("start()"+b.sessionTypeTag()),
b._cwsSession.start(this),b._clientConfig.isReady())b.initiateSession();else{var a=function(){b.initiateSession()};b._clientConfig.register(a)}},this.cleanup=function(){if(b._logger.info("cleanup()"+b.sessionTypeTag()),
b._cleaningUp=!0,b._cwsSession.willEndSoon(),b._clientConfig.isReady())b.endCwsSessionAndCleanupAll();else{var a=function(){b.endCwsSessionAndCleanupAll()};b._clientConfig.register(a)}},this.cleanupAll=function(){
b._logger.debug("cleanupAll()"+b.sessionTypeTag()),b.isVideoSession()&&null!=b._playerStateManager&&b.detachPlayer(),b._contentMetadata=null,b._logger.setSessionId(null),b._logger=null,b._exceptionCatcher=null,
b._client=null,b._clientConfig=null,b._systemMetadata=null,b._cwsSession.cleanup(),b._cwsSession=null,b._cleanedUp=!0},this.endCwsSessionAndCleanupAll=function(){b._cwsSession.end(),b.cleanupAll()},this.initiateSession=function(){
b._cwsSession.initialize(),b.setStatesFromSystemMetadata(),b.isVideoSession()&&b.setStatesFromContentMetadata(),b._cwsSession.startSendingHeartbeats()},this.setStatesFromSystemMetadata=function(){b._logger.debug("setStatesFromSystemMetadata()");
var a=b._systemMetadata.get(),c=a[J.BROWSER_NAME];null!=c&&b._cwsSession.setBrowserName(c);var d=a[J.BROWSER_VERSION];null!=d&&b._cwsSession.setBrowserVersion(d);var e=a[J.DEVICE_BRAND];null!=e&&b._cwsSession.setDeviceBrand(e);
var f=a[J.DEVICE_MANUFACTURER];null!=f&&b._cwsSession.setDeviceManufacturer(f);var g=a[J.DEVICE_MODEL];null!=g&&b._cwsSession.setDeviceModel(g);var h=a[J.DEVICE_TYPE];null!=h&&b._cwsSession.setDeviceType(h);
var i=a[J.DEVICE_VERSION];null!=i&&b._cwsSession.setDeviceVersion(i);var j=a[J.FRAMEWORK_NAME];null!=j&&b._cwsSession.setFrameworkName(j);var k=a[J.FRAMEWORK_VERSION];null!=k&&b._cwsSession.setFrameworkVersion(k);
var l=a[J.OPERATING_SYSTEM_NAME];null!=l&&b._cwsSession.setOperatingSystemName(l);var m=a[J.OPERATING_SYSTEM_VERSION];null!=m&&b._cwsSession.setOperatingSystemVersion(m)},this.setStatesFromContentMetadata=function(){
if(b._logger.debug("setStatesFromContentMetadata()"),b._contentMetadata.defaultBitrateKbps>0&&b._cwsSession._bitrateKbps<0&&b._cwsSession.setBitrateKbps(b._contentMetadata.defaultBitrateKbps),null!=b._contentMetadata.defaultResource&&null==b._cwsSession._resource&&b._cwsSession.setResource(b._contentMetadata.defaultResource),
null!=b._contentMetadata.streamUrl&&null==b._cwsSession._streamUrl&&b._cwsSession.setStreamUrl(b._contentMetadata.streamUrl),b._contentMetadata.duration>0&&b._cwsSession.setContentLength(b._contentMetadata.duration),
b._contentMetadata.encodedFrameRate>0&&b._cwsSession.setEncodedFrameRate(b._contentMetadata.encodedFrameRate),b._contentMetadata.streamType!==d.StreamType.UNKNOWN){var a=b._contentMetadata.streamType===d.StreamType.LIVE;
b._cwsSession.setIsLive(a)}null!=b._contentMetadata.assetName&&b._cwsSession.setAssetName(b._contentMetadata.assetName),null!=b._contentMetadata.viewerId&&b._cwsSession.setViewerId(b._contentMetadata.viewerId),
null!=b._contentMetadata.applicationName&&b._cwsSession.setPlayerName(b._contentMetadata.applicationName),B.dictCount(b._contentMetadata.custom)>0&&b._cwsSession.setTags(b._contentMetadata.custom)},this.setRenderedFrameRate=function(a){
b._renderedFrameRate=a,b.updateAverageFrameRate()},this.updateAverageFrameRate=function(){if(b._cwsSession._playerState===g.PlayerState.PLAYING){var a=b._renderedFrameRate;if(a>=0){b._playingFpsTotal+=a,
b._playingFpsObservationCount++;var c=B.Int32.Cast(1*b._playingFpsTotal/b._playingFpsObservationCount);b._cwsSession.setAverageFrameRate(c)}}},this.onPlayerStateChange=function(a){return b._logger.debug("onPlayerStateChange(): "+a),
b._cwsSession._playerState!=a?(b._cwsSession._playerState==g.PlayerState.NOT_MONITORED&&a!=g.PlayerState.NOT_MONITORED&&(b._pooledPlayerState=a),b._ignorePlayerState?void b._logger.debug("onPlayerStateChange(): "+a+" (pooled, "+(b._adPlaying?"ad playing":"preloading")+")"):void b._cwsSession.setPlayerState(a)):void 0;
},this.onBitrateChange=function(a){return b._logger.debug("onBitrateChange(): "+a),b._ignoreBitrateAndResource?void b._logger.info("onBitrateChange(): ignored"):void b._cwsSession.setBitrateKbps(a)},this.onSeekEvent=function(a,c){
b._cwsSession.enqueueSeekEvent(a,c)},this.onRenderedFrameRateChange=function(a){b._logger.debug("onRenderedFrameRateChange(): "+a),b._ignoreEncodedFrameRateAndDuration?b._logger.info("onRenderedFrameRateChange(): Ignored rendered frame rate data: "+a+" (ads)"):(b.setRenderedFrameRate(a),
b._logger.info("onRenderedFrameRateChange(): Received rendered frame rate data: "+a))},this.onEncodedFrameRateChange=function(a){b._logger.debug("onEncodedFrameRateChange(): "+a),b._contentMetadata.encodedFrameRate>0||(a>0?b._ignoreEncodedFrameRateAndDuration?b._logger.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+a+" (ads)"):(b._cwsSession.setEncodedFrameRate(a),
b._logger.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+a)):b._logger.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+a))},this.onContentLengthChange=function(a){
b._logger.debug("onContentLengthChange(): "+a),b._contentMetadata.duration>0||(a>0?b._ignoreEncodedFrameRateAndDuration?b._logger.info("setContentLength(): Ignored content length data: "+a+" (ads)"):(b._cwsSession.setContentLength(a),
b._logger.info("setContentLength(): Received content length data: "+a)):b._logger.warning("setContentLength(): Ignored invalid content length data: "+a))},this.onStreamUrlChange=function(a){b._logger.debug("onStreamUrlChange(): "+a),
b._cwsSession.setStreamUrl(a)},this.onPlayheadTimeChange=function(a){b._ignorePlayheadTimeandBufferLength||b._cwsSession.setPlayheadTimeMs(a)},this.onBufferLengthChange=function(a){b._ignorePlayheadTimeandBufferLength||b._cwsSession.setBufferLengthMs(a);
},this.onPlayerTypeChange=function(a){b._logger.debug("onPlayerTypeChange(): "+a),null==b._cwsSession.getFrameworkName()&&b._cwsSession.setFrameworkName(a)},this.onPlayerVersionChange=function(a){b._logger.debug("onPlayerVersionChange(): "+a),
null==b._cwsSession.getFrameworkVersion()&&b._cwsSession.setFrameworkVersion(a)},this.onError=function(a,c){b._logger.debug("onError(): "+a+" ("+c+")"),b.reportError(a,c)},this.onRelease=function(){b._logger.debug("onRelease()"),
b.detachPlayer()},this.adStart=function(a,c,d){return b._logger.debug("adStart(): adStream="+a+" adPlayer="+c+" adPosition="+d),b._adPlaying?void b._logger.warning("adStart(): multiple adStart calls, ignoring"):(b._adPlaying=!0,
b._adStream=a,b._adPlayer=c,b._adPosition=d,b._cwsSession._hasJoined||b._cwsSession.togglePauseJoin(!0),void(b._adStream==Conviva.Client.AdStream.CONTENT||b._adPlayer==Conviva.Client.AdPlayer.SEPARATE?(b._cwsSession._playerState!==g.PlayerState.NOT_MONITORED&&(b._pooledPlayerState=b._cwsSession._playerState),
b._cwsSession.setPlayerState(g.PlayerState.NOT_MONITORED),b._ignorePlayerState=!0):b._adStream==Conviva.Client.AdStream.SEPARATE&&b._adPlayer==Conviva.Client.AdPlayer.CONTENT&&(b._cwsSession._playerState!==g.PlayerState.NOT_MONITORED&&(b._pooledPlayerState=b._cwsSession._playerState),
b._cwsSession.setPlayerState(g.PlayerState.NOT_MONITORED),b._ignorePlayerState=!0,b._ignoreBitrateAndResource=!0,b._ignoreEncodedFrameRateAndDuration=!0,b._ignorePlayheadTimeandBufferLength=!0,b._ignoreError=!0)));
},this.adEnd=function(){return b._logger.debug("adEnd()"),b._adPlaying?(b._cwsSession._hasJoined||b._cwsSession.togglePauseJoin(!1),b._adStream==Conviva.Client.AdStream.CONTENT||b._adPlayer==Conviva.Client.AdPlayer.SEPARATE?b._preloading||(b._ignorePlayerState=!1,
b._cwsSession.setPlayerState(b._pooledPlayerState)):b._adStream==Conviva.Client.AdStream.SEPARATE&&b._adPlayer==Conviva.Client.AdPlayer.CONTENT&&(b._ignoreBitrateAndResource=!1,b._ignoreEncodedFrameRateAndDuration=!1,
b._ignorePlayheadTimeandBufferLength=!1,b._ignoreError=!1,b._preloading||(b._ignorePlayerState=!1,b._cwsSession.setPlayerState(b._pooledPlayerState))),b._adPlaying=!1,void(b._adStream=b._adPlayer=b._adPosition=null)):void b._logger.debug("adEnd(): called before adStart, ignoring");
},this.detachPlayer=function(){b._logger.debug("detachPlayer()"),null!==b._playerStateManager&&(b._exceptionCatcher.runProtected("Session.detachPlayer",function(){b._playerStateManager.removeMonitoringNotifier();
}),b._playerStateManager=null,b._cwsSession.setPlayerState(g.PlayerState.NOT_MONITORED))},this.attachPlayer=function(a){return b._logger.debug("attachPlayer()"),null!=b._playerStateManager?void b._logger.error("attachPlayer(): detach current PlayerStateManager first"):void b._exceptionCatcher.runProtected("Session.attachPlayer()",function(){
a.setMonitoringNotifier(b,b._id)?(a.pushCurrentState(),b._playerStateManager=a):b._logger.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")})},this.contentPreload=function(){
return b._logger.debug("contentPreload()"),b._preloading?void b._logger.debug("contentPreload(): called twice, ignoring"):(b._preloading=!0,void(b._ignorePlayerState=!0))},this.contentStart=function(){
return b._logger.debug("contentStart()"),b._preloading?(b._preloading=!1,void(b._adPlaying||(b._ignorePlayerState=!1,b._cwsSession.setPlayerState(b._pooledPlayerState)))):void b._logger.warning("contentStart(): called without contentPreload, ignoring");
},this.reportError=function(a,c){if(b._logger.info("reportError(): "+a),!B.isValidString(a))return void b._logger.error("reportError(): invalid error message string: "+a);if(c!==Conviva.Client.ErrorSeverity.FATAL&&c!==Conviva.Client.ErrorSeverity.WARNING)return void b._logger.error("reportError(): invalid error severity: "+c);
if(b._ignoreError)return void b._logger.debug("reportError(): ignored");var d=c===Conviva.Client.ErrorSeverity.FATAL;b._cwsSession.sendError(a,d)},this.updateContentMetadata=function(a){b._logger.debug("updateContentMetadata(): enter"),
b._exceptionCatcher.runProtected("Session.updateContentMetadata",function(){b.mergeContentMetadata(a),b.setStatesFromContentMetadata()})},this.sendCustomEvent=function(a,c){b._logger.info("sendEvent(): eventName="+a+b.sessionTypeTag()),
b._cwsSession.enqueueCustomEvent(a,c)},this.mergeContentMetadata=function(a){null==b._contentMetadata.assetName?B.isValidString(a.assetName)&&(b._contentMetadata.assetName=a.assetName,b._cwsSession.enqueueAssetNameChangeEvent(b._contentMetadata.assetName)):b._logger.warning("mergeContentMetadata(): assetName was already set."),
null==b._contentMetadata.applicationName?B.isValidString(a.applicationName)&&(b._contentMetadata.applicationName=a.applicationName):b._logger.warning("mergeContentMetadata(): applicationName was already set."),
null==b._contentMetadata.streamUrl?B.isValidString(a.streamUrl)&&(b._contentMetadata.streamUrl=a.streamUrl):b._logger.warning("mergeContentMetadata(): streamUrl was already set."),null==b._contentMetadata.viewerId?B.isValidString(a.viewerId)&&(b._contentMetadata.viewerId=a.viewerId):b._logger.warning("mergeContentMetadata(): viewerId was already set."),
b._contentMetadata.defaultBitrateKbps<=0?a.defaultBitrateKbps>0&&(b._contentMetadata.defaultBitrateKbps=a.defaultBitrateKbps):b._logger.warning("mergeContentMetadata(): defaultBitrateKbps was already set."),
null==b._contentMetadata.defaultResource?B.isValidString(a.defaultResource)&&(b._contentMetadata.defaultResource=a.defaultResource):b._logger.warning("mergeContentMetadata(): defaultResource was already set."),
b._contentMetadata.duration<=0?a.duration>0&&(b._contentMetadata.duration=a.duration):b._logger.warning("mergeContentMetadata(): duration was already set."),b._contentMetadata.encodedFrameRate<=0?a.encodedFrameRate>0&&(b._contentMetadata.encodedFrameRate=a.encodedFrameRate):b._logger.warning("mergeContentMetadata(): encodedFrameRate was already set."),
b._contentMetadata.streamType==d.StreamType.UNKNOWN?a.streamType!=d.StreamType.UNKNOWN&&(b._contentMetadata.streamType=a.streamType):b._logger.warning("mergeContentMetadata(): streamType was already set.");
var c={};for(var e in a.custom){var f=b._contentMetadata.custom[e];null==f?c[e]=a.custom[e]:b._logger.warning("mergeContentMetadata(): custom."+e+" was already set.")}if(B.dictCount(c)>0){var g={};for(e in b._contentMetadata.custom)g[e]=b._contentMetadata.custom[e];
for(e in c)g[e]=c[e];b._contentMetadata.custom=g}},this.isGlobalSession=function(){return b._global},this.isVideoSession=function(){return!b._global},this.sessionTypeTag=function(){return b.isGlobalSession()?" (global session)":"";
}});u.DEFAULT_HEARTBEAT_ERROR_MESSAGE="received no response (or a bad response) to heartbeat POST request";var v=a.SessionFactory=function(){function a(a,c,d,e){b._client=a,b._clientSettings=c,b._clientConfig=d,
b._systemFactory=e,b._logger=b._systemFactory.buildLogger(),b._logger.setModuleName("SessionFactory"),b._nextSessionKey=0,b._sessionsByKey={}}var b=this;b._logger=null,b._logBuffer=null,b._nextSessionKey=0,
b._sessionsByKey=null,a.apply(b,arguments),this.cleanup=function(){b._logger=null,b._logBuffer=null;for(var a in b._sessionsByKey){var c=b._sessionsByKey[a];c.cleanup()}b._sessionsByKey=null,b._nextSessionKey=0;
},this.newSessionKey=function(){var a=b._nextSessionKey;return b._nextSessionKey++,a},this.makeVideoSession=function(a){return null==a&&(a=new d),b.makeSession(a,!1)},this.makeGlobalSession=function(a){
return b.makeSession(a,!0)},this.generateSessionId=function(){return E.integer32()},this.makeSession=function(a,c){var d=a.clone(a),e=b.generateSessionId(),f=b._systemFactory.buildSession(b._client,b._clientSettings,b._clientConfig,e,c,d),g=b.newSessionKey();
return b.addSession(g,f),f.start(),g},this.getSession=function(a){var c=b._sessionsByKey[a];return null==c&&b._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),c},this.getVideoSession=function(a){
var c=this.getSession(a);return null!=c&&(c.isVideoSession()||(b._logger.error("Client: invalid sessionKey. Did you cleanup that session previously?"),c=null)),c},this.addSession=function(a,c){b._sessionsByKey[a]=c;
},this.removeSession=function(a){delete b._sessionsByKey[a]},this.cleanupSession=function(a){var c=b.getSession(a);b.removeSession(a),c.cleanup()}},w=a.CallbackWithTimeout=function(a){this._timer=a,this.getWrapperCallback=function(a,b,c){
var d=!1,e=function(){d||(d=!0,a(!1,c+" ("+b+" ms)"))};this._timer.createOnce(e,b,"CallbackWithTimeout.wrap");var f=function(b,c){d||(d=!0,a(b,c))};return f}},x=a.Config=function(a,b,c){var d=this;this._logger=a,
this._logger.setModuleName("Config"),this._storage=b,this._jsonInterface=c,this._defaultConfig={clientId:q.DEFAULT_CLIENT_ID,sendLogs:!1,maxHbInfos:q.DEFAULT_MAX_HEARTBEAT_INFOS},this._config=B.ObjectShallowCopy(this._defaultConfig),
this._loaded=!1,this._loadedEmpty=!1,this._waitingConsumers=[],this.isReady=function(){return this._loaded},this.load=function(){var a=function(a,b){a?(d._parse(b),d._logger.debug("load(): configuration successfully loaded from local storage"+(d._loadedEmpty?" (was empty)":"")+".")):d._logger.error("load(): error loading configuration from local storage: "+b),
d._loaded=!0,d._notify()};this._storage.load(x.STORAGE_KEY,a)},this._parse=function(a){var b=this._jsonInterface.decode(a);if(null==b)return void(this._loadedEmpty=!0);var c=b[x.CONFIG_STORAGE_KEY_CLIENT_ID];
null!=c&&c!=q.DEFAULT_CLIENT_ID&&""!=c&&"null"!=c&&(this._config[x.CONFIG_KEY_CLIENT_ID]=c,this._logger.debug("parse(): loaded clientId="+c+" (from local storage)"))},this._marshall=function(){var a={};
return a[x.CONFIG_STORAGE_KEY_CLIENT_ID]=this._config.clientId,this._logger.debug("_marshall(): saving clientId="+this._config.clientId+" (to local storage)"),this._jsonInterface.encode(a)},this.save=function(){
var a=function(a,b){a?d._logger.debug("save(): configuration successfully saved to local storage."):d._logger.error("save(): error saving configuration to local storage: "+b)};this._storage.save(x.STORAGE_KEY,this._marshall(),a);
},this.register=function(a){return this.isReady()?void a():void this._waitingConsumers.push(a)},this.get=function(a){return this._loaded?this._config[a]:null},this.set=function(a,b){this._loaded&&(this._config[a]=b);
},this._notify=function(){for(var a;null!=(a=this._waitingConsumers.shift());)a()}};x.STORAGE_KEY="sdkConfig",x.CONFIG_STORAGE_KEY_CLIENT_ID="clId",x.CONFIG_KEY_CLIENT_ID="clientId",x.CONFIG_KEY_SEND_LOGS="sendLogs",
x.CONFIG_KEY_MAX_HEARTBEAT_INFOS="maxHbInfos";var y=a.EventQueue=function(){this._events=[],this._nextEventNumber=0,this.enqueue=function(a){this._events.push(a)},this.getNumber=function(){var a=this._nextEventNumber;
return this._nextEventNumber++,a},this.flush=function(){var a=this._events;return this._events=[],a}},z=a.ExceptionCatcher=function(a,b,c){this._logger=a,this._logger.setModuleName("ExceptionCatcher"),
this._ping=b,this._systemSettings=c,this.runProtected=function(a,b,c){try{b()}catch(d){if(null!=c)c(d);else{if(this._systemSettings.allowUncaughtExceptions)throw d;this.onUncaughtException(a,d)}}},this.onUncaughtException=function(a,b){
var c="Uncaught exception: "+a+": "+b.toString();if(null!=this._ping)try{this._ping.send(c)}catch(d){this._logger.error("Caught exception while sending ping: "+d.toString())}this._logger.error(c)}},A=a.GatewayControl=function(a,b,c,d){
var e=this;this._clientSettings=a,this._logger=b,this._logger.setModuleName("GatewayControl"),this._httpClient=c,this._jsonInterface=d,this.send=function(a,b){var c=this._jsonInterface.encode(a),d=this._clientSettings.gatewayUrl+q.gatewayPath,f=function(a,c){
if(a){var d=e._jsonInterface.decode(c);b(a,d)}else{var f=c;b(a,f)}};this._httpClient.request("POST",d,c,"application/json",f)}},B=a.Lang={};B.validateInterface=function(a,b,c){if(null==a)throw new Error("Expected "+c+" implementation is null.");
for(var d in b)if("function"!=typeof a[d])throw new Error("Expected method "+d+" in "+c+" implementation.")},B.dictCount=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},B.ToString=function(a){
return""+a},B.NumberToInt=function(a){return Math.floor(a)},B.NumberToUnsignedInt=function(a){return Math.abs(B.NumberToInt(a))},B.AsBoolean=function(a){return Boolean(a)},B.isValidString=function(a){return"string"==typeof a&&""!==a;
},B.stringStartsWith=function(a,b){return"string"!=typeof a||"string"!=typeof b?!1:"function"==typeof a.indexOf?0===a.indexOf(b):!1},B.isBoolean=function(a){return"boolean"==typeof a},B.UrlEncodeString=function(a){
return escape(a)},B.isObject=function(a){return"object"==typeof a},B.ObjectToString=function(a){var b="";for(var c in a){var d=a[c],e=d;b+=c+"="+e}return"Object{"+b+"}"},B.ObjectShallowCopyOmitNull=function(a){
var b=B.ObjectShallowCopy(a);for(var c in b)null==b[c]&&delete b[c];return b},B.ObjectShallowCopy=function(a){var b={};for(var c in a)b[c]=a[c];return b},B.ObjectShallowEquals=function(a,b){if(typeof a!=typeof b)return!1;
if(a instanceof Object&&b instanceof Object){if(B.dictCount(a)!==B.dictCount(b))return!1;var c=!0;for(var d in a)if(c=a[d]===b[d],!c)return!1;return!0}return a===b},B.isInteger=function(a){if("number"!=typeof a)return!1;
var b=Math.round(a);return b===a},B.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},B.ArrayEquals=function(a,b){if(a===b)return!0;if(null==a||null==b)return!1;if(a.length!=b.length)return!1;
for(var c=0;c<a.length;++c)if(B.isArray(a[c])&&B.isArray(b[c])){if(!B.ArrayEquals(a[c],b[c]))return!1}else if(a[c]!==b[c])return!1;return!0},B.isObjectDefinePropertyPresent=function(){return"undefined"!=typeof Object.defineProperty&&function(){
try{return Object.defineProperty({},"x",{}),!0}catch(a){return!1}}()},B.defGet=function(a,b,c){if(B.isObjectDefinePropertyPresent())Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:c});else{
if("undefined"==typeof a.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");a.__defineGetter__(b,c)}},B.defSet=function(a,b,c){if(B.isObjectDefinePropertyPresent())Object.defineProperty(a,b,{
configurable:!0,set:c});else{if("undefined"==typeof a.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");a.__defineSetter__(b,c)}},function(){
var a={};a.two32=4294967296,a.MaxValue=a.two32-1,a.MinValue=0,B.UInt32=a,B.UInt32.Cast=function(b){var c=parseInt(b,10);return c>a.MaxValue?c%=a.two32:c<a.MinValue&&(c=-c%a.two32,c=a.two32-c),c},B.UInt32.InRange=function(b){
var c=parseInt(b,10);return c<=a.MaxValue&&c>=a.MinValue};var b={};b.MaxValue=2147483647,b.MinValue=-2147483648,B.Int32=b,B.Int32.Cast=function(a){var c=parseInt(a,10);return c>b.MaxValue?c%=b.MaxValue:c<b.MinValue&&(c=-c%b.MaxValue,
c=b.MaxValue-c),c},B.Int32.InRange=function(a){var c=parseInt(a,10);return c<=b.MaxValue&&c>=b.MinValue}}();var C=a.LogBuffer=function(){var a=32;this._buffer=[],this.add=function(b){this._buffer.length>=a&&this._buffer.shift(),
this._buffer.push(b)},this.flush=function(){var a=this._buffer;return this._buffer=[],a}},D=a.Ping=function(a,c,d){this._isSendingPing=!1,this._cachedBasePingUrl=null,this._logger=a,this._logger.setModuleName("Ping"),
this._httpClient=c,this._clientSettings=d,this.send=function(a){if(!this._isSendingPing){this._isSendingPing=!0;var b=this.getBasePingUrl()+"&d="+B.UrlEncodeString(a.toString());this._logger.error("send(): "+b),
this._httpClient.request("GET",b,null,null,null),this._isSendingPing=!1}},this.getBasePingUrl=function(){if(!this._cachedBasePingUrl){var a=D.SERVICE_URL+"?comp="+D.COMPONENT_NAME+"&clv="+b.version;if(this._clientSettings&&(a+="&cid="+this._clientSettings.customerKey),
a+="&sch="+q.SDK_METADATA_SCHEMA,!this._clientSettings)return a;this._cachedBasePingUrl=a}return this._cachedBasePingUrl}};D.COMPONENT_NAME="sdkjs",D.SERVICE_URL="https://pings.conviva.com/ping.ping";var E=a.Random={};
E.maxUInt32=4294967295,E.maxInt32=2147483647,E.minInt32=-2147483648,E.integer32=function(){return Math.floor(Math.random()*E.maxUInt32)+E.minInt32},E.uinteger32=function(){return Math.floor(Math.random()*E.maxUInt32);
};var F=a.Sanitize={};F.Integer=function(a,b,c,d){if(isNaN(a))return d;if("number"!=typeof a)return d;if(a==d)return d;var e=B.NumberToInt(a);return F.EnforceBoundaries(e,b,c)},F.EnforceBoundaries=function(a,b,c){
return null!=c&&a>c?a=c:null!=b&&b>a&&(a=b),a},F.sanitizeSpecialIntegerValue=function(a){return-1==a||-2==a?a:a=F.Integer(a,0,null,-1)};var G=(a.StreamerError=function(){function a(a,b){c.errorCode=a,c.severity=b;
}var c=this;c.errorCode=null,c.severity=b.ErrorSeverity.FATAL,a.apply(c,arguments)},a.HttpClient=function(a,b,c,d){this._logger=a,this._logger.setModuleName("HttpClient"),this._httpInterface=b,this._callbackWithTimeout=c,
this._systemSettings=d,this.request=function(a,b,c,d,e){var f=1e3*this._systemSettings.httpTimeout,g=this._callbackWithTimeout.getWrapperCallback(e,f,"HTTP timeout");this._logger.debug("request(): calling HttpInterface.makeRequest"),
this._httpInterface.makeRequest(a,b,c,d,f,g)}}),H=a.Logger=function(a,b,c,d,e){this._loggingInterface=a,this._timeInterface=b,this._settings=c,this._logBuffer=d,this._packageName=e,this.debug=function(a){
this.log(a,f.LogLevel.DEBUG)},this.info=function(a){this.log(a,f.LogLevel.INFO)},this.warning=function(a){this.log(a,f.LogLevel.WARNING)},this.error=function(a){this.log(a,f.LogLevel.ERROR)},this.log=function(a,b){
var c=this.formatMessage(a,b);this._logBuffer.add(c),this._settings.logLevel<=b&&this._loggingInterface.consoleLog(c,b)},this.prependModuleName=function(a){var b=a;return b="["+this._moduleName+"] "+b},
this.prependPackageName=function(a){var b=a;return b="["+this._packageName+"] "+b},this.prependConvivaNamespace=function(a){var b=a;return b="[Conviva] "+b},this.prependTime=function(a){var b=this._timeInterface.getEpochTimeMs(),c=(b/1e3).toFixed(3).toString();
return"["+c+"] "+a},this.prependLogLevel=function(a,b){var c=H.getLogLevelString(b),d=a;return d="["+c+"] "+d},this.prependSessionId=function(a){var b=a;return null!=this._sessionId&&(b="sid="+this._sessionId+" "+b),
b},this.setSessionId=function(a){this._sessionId=a},this.setModuleName=function(a){this._moduleName=a},this.formatMessage=function(a,b){return this.prependConvivaNamespace(this.prependTime(this.prependLogLevel(this.prependPackageName(this.prependModuleName(this.prependSessionId(a))),b)));
}};H.getLogLevelString=function(a){var b;switch(a){case f.LogLevel.ERROR:b="ERROR";break;case f.LogLevel.WARNING:b="WARNING";break;case f.LogLevel.INFO:b="INFO";break;case f.LogLevel.DEBUG:b="DEBUG"}return b;
};var I=a.Storage=function(a,b,c,d){this._logger=a,this._logger.setModuleName("Storage"),this._storageInterface=b,this._callbackWithTimeout=c,this._systemSettings=d,this.load=function(a,b){var c=this._callbackWithTimeout.getWrapperCallback(b,1e3*this._systemSettings.storageTimeout,"storage load timeout");
this._logger.debug("load(): calling StorageInterface.loadData"),this._storageInterface.loadData(I.STORAGE_SPACE,a,c)},this.save=function(a,b,c){var d=this._callbackWithTimeout.getWrapperCallback(c,1e3*this._systemSettings.storageTimeout,"storage save timeout");
this._logger.debug("save(): calling StorageInterface.saveData"),this._storageInterface.saveData(I.STORAGE_SPACE,a,b,d)}};I.STORAGE_SPACE="Conviva";var J=a.SystemMetadata=function(a,c,d){this._logger=a,
this._logger.setModuleName("SystemMetadata"),this._metadataInterface=c,this._exceptionCatcher=d,this._cachedMetadata=null,this.get=function(){return this._cachedMetadata||this.retrieve(),this._cachedMetadata;
},this.retrieve=function(){function a(a,b){d._exceptionCatcher.runProtected("Session.getSystemMetadataSchema(): "+a,function(){var c=b[a];b[a]=c.call(d._metadataInterface)})}var c={};c[J.BROWSER_NAME]=this._metadataInterface.getBrowserName,
c[J.BROWSER_VERSION]=this._metadataInterface.getBrowserVersion,c[J.DEVICE_BRAND]=this._metadataInterface.getDeviceBrand,c[J.DEVICE_MANUFACTURER]=this._metadataInterface.getDeviceManufacturer,c[J.DEVICE_MODEL]=this._metadataInterface.getDeviceModel,
c[J.DEVICE_TYPE]=this._metadataInterface.getDeviceType,c[J.DEVICE_VERSION]=this._metadataInterface.getDeviceVersion,c[J.FRAMEWORK_NAME]=this._metadataInterface.getFrameworkName,c[J.FRAMEWORK_VERSION]=this._metadataInterface.getFrameworkVersion,
c[J.OPERATING_SYSTEM_NAME]=this._metadataInterface.getOperatingSystemName,c[J.OPERATING_SYSTEM_VERSION]=this._metadataInterface.getOperatingSystemVersion;var d=this;this._logger.debug("retrieve(): calling MetadataInterface methods");
for(var e in c)a(e,c),B.isValidString(c[e])||delete c[e];c[J.DEVICE_TYPE]!==b.DeviceType.DESKTOP&&c[J.DEVICE_TYPE]!==b.DeviceType.CONSOLE&&c[J.DEVICE_TYPE]!==b.DeviceType.SETTOP&&c[J.DEVICE_TYPE]!==b.DeviceType.MOBILE&&c[J.DEVICE_TYPE]!==b.DeviceType.TABLET&&c[J.DEVICE_TYPE]!==b.DeviceType.SMARTTV&&delete c[J.DEVICE_TYPE],
this._cachedMetadata=B.ObjectShallowCopyOmitNull(c)}};J.BROWSER_NAME="browserName",J.BROWSER_VERSION="browserVersion",J.DEVICE_BRAND="deviceBrand",J.DEVICE_MANUFACTURER="deviceManufacturer",J.DEVICE_MODEL="deviceModel",
J.DEVICE_TYPE="deviceType",J.DEVICE_VERSION="deviceVersion",J.FRAMEWORK_NAME="frameworkName",J.FRAMEWORK_VERSION="frameworkVersion",J.OPERATING_SYSTEM_NAME="operatingSystemName",J.OPERATING_SYSTEM_VERSION="operatingSystemVersion";
var K=a.Time=function(a,b){this._timeInterface=a,this._logger=b,this._logger.setModuleName("Time"),this.current=function(){var a=this._timeInterface.getEpochTimeMs();return B.isInteger(a)||this._logger.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+a+")"),
a}},L=a.Timer=function(a,b,c){var d=this;this._logger=a,this._logger.setModuleName("Timer"),this._timerInterface=b,this._exceptionCatcher=c,this.create=function(a,b,c){var e=function(){d._exceptionCatcher.runProtected(c,function(){
a()})},f=this.createTimer(e,b,c);return f},this.createOnce=function(a,b,c){var e={cancel:null},f=function(){d._exceptionCatcher.runProtected(c,function(){e&&"function"==typeof e.cancel&&(e.cancel(),e.cancel=null,
e=null),a()})},g=this.createTimer(f,b,c);return e.cancel=g,g},this.createTimer=function(a,b,c){return this._logger.debug("createTimer(): calling TimerInterface.create"),this._timerInterface.createTimer(a,b,c);
}}}(),Conviva.Client=a.Client,Conviva.ContentMetadata=a.ContentMetadata,Conviva.PlayerStateManager=a.PlayerStateManager,Conviva.SystemSettings=a.SystemSettings,Conviva.ClientSettings=a.ClientSettings,Conviva.SystemInterface=a.SystemInterface,
Conviva.HttpInterface=a.HttpInterface,Conviva.TimeInterface=a.TimeInterface,Conviva.TimerInterface=a.TimerInterface,Conviva.LoggingInterface=a.LoggingInterface,Conviva.MetadataInterface=a.MetadataInterface,
Conviva.StorageInterface=a.StorageInterface,Conviva.SystemFactory=a.SystemFactory}})();
</script><script>
/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */

// Monitor a HTML5 video element and reports relevant video quality data
// to Conviva via Conviva.PlayerStateManager.
// Tested for progressive download streams in Chrome, on Mac and Windows devices.

/** How often do we poll the streamer */
Html5PlayerInterface.POLL_STREAMER_INTERVAL_MS /* : int */ = 500;

/** The number of POLL intervals after which we switch to PAUSED state if PHT does not move */
Html5PlayerInterface.PAUSED_STATE_ON_CONSTANT_PHT_POLL_COUNT /* : int */ = 4000 / Html5PlayerInterface.POLL_STREAMER_INTERVAL_MS;

/** The number of POLL intervals after which we switch to PLAY state if PHT moves as for playing */
Html5PlayerInterface.PLAY_STATE_ON_MOVING_PHT_POLL_COUNT /* : int */ = 2000 / Html5PlayerInterface.POLL_STREAMER_INTERVAL_MS;

/** The expected value of average phSpeed for PLAYING state */
Html5PlayerInterface.PHT_PLAY_EXPECTED_SPEED /* : int */ = 1;

/** The expected value of average phSpeed for PAUSED/BUFFERING state */
Html5PlayerInterface.PHT_PAUSED_EXPECTED_SPEED /* : int */ = 0;

/** Threshold to further compensate for variance in average phSpeed values */
Html5PlayerInterface.PHT_PLAY_TOLERANCE /* : int */ = 0.25;

function Html5PlayerInterface(playerStateManager, videoElement) {

    // "this" binding for callbacks
    var _s = this;
    var enableLogging = false; //enable to turn on logging 

    _s._lastPlayHeadTimeSpeeds /* : array */ = [];

    // We happen to reuse some of the system interfaces we defined to bootstrap the Conviva SDK here.
    // We could use system APIs directly as well.
    this._timerInterface = new Html5Timer();
    this._loggingInterface = new Html5Logging();

    this._addEventListener = function(eventName, eventListener, eventSource) {
        // Shorthand
        if (typeof eventSource === 'undefined') {
            eventSource = _s._videoElement;
        }

        // Remember what event we are listening to, on what source and through which listener.
        _s._eventListeners.push([eventName, eventListener, eventSource]);

        if (window.addEventListener) {
            eventSource.addEventListener(eventName, eventListener, false);
        } else {
            eventSource.attachEvent('on' + eventName, eventListener);
        }
    };

    this._removeEventListener = function(eventName, eventListener, eventSource) {
        if (typeof eventSource === 'undefined') {
            eventSource = _s._videoElement;
        }

        if (window.removeEventListener) {
            eventSource.removeEventListener(eventName, eventListener, false);
        } else {
            eventSource.detachEvent('on' + eventName, eventListener);
        }
    };

    this._registerVideoEventListeners = function() {
        _s._addEventListener("ended", function() {
            _s._receivedHtml5Event("ended");
        });
        _s._addEventListener("pause", function() {
            _s._receivedHtml5Event("pause");
        });
        _s._addEventListener("playing", function() {
            _s._receivedHtml5Event("playing");
        });
        _s._addEventListener("emptied", function() {
            _s._receivedHtml5Event("emptied");
        });
        _s._addEventListener("stalled", function() {
            if (_s._videoElement.paused) {
                // Viewer experience will not be affected by the lack of data
                // if the video is not actively playing.
                // So we do not consider this experience-impacting buffering.
                _s._log("Ignored stalled event (player was paused)");
                return;
            }
            //_s._receivedHtml5Event("stalled");
            //Ignore stalled event completely
        });
        _s._addEventListener("waiting", function() {
            if (_s._videoElement.seeking) {
                // Some HTML5 video element implementations send out tons of 
                // "waiting" events while seeking.
                // So we do not consider this experience-impacting buffering.
                _s._log("Ignored waiting event (player was seeking)");
                return;
            }
            _s._receivedHtml5Event("waiting");
        });
        _s._addEventListener("error", function() {
            // Sometimes triggers without an error attached.
            if (_s._videoElement.error) {
                var html5ErrorCode = _s._videoElement.error.code;
                _s._reportHtml5Error(html5ErrorCode);
            }
        });
        _s._addEventListener("loadedmetadata", _s._loadedMetadata);
        _s._addEventListener("seeking", function() {
            if (!_s.isSeekStarted) {
                _s._log('player is seeeking');
                _s.isSeekStarted = true;
                _s._playerStateManager.setSeekStart(-1);
            }
        });
        _s._addEventListener("seeked", function() {
            _s._log('player is seeked');
            _s.isSeekStarted = false;
            _s._playerStateManager.setSeekEnd();
        });

        // Monitor error events from nested <source> elements as well.
        _s._monitorErrorsFromSourceElements();
    };

    this._monitorErrorsFromSourceElements = function() {
        if (typeof _s._videoElement.children !== "undefined") {
            var sourceElementErrorHandler = function() {
                // <source> elements do not provide an actual error code
                _s._log("Caught non-specific error from <source> element, reporting as ERR_UNKNOWN");
                _s._reportHtml5Error(0);
            };
            _s._videoElement._sources = _s._videoElement.children;
            for (var i = 0; i < _s._videoElement._sources.length; i++) {
                var source = _s._videoElement._sources[i];
                if (source.tagName == "SOURCE") {
                    _s._addEventListener("error", sourceElementErrorHandler, source);
                }
            }
        }
    };

    this._removeVideoEventHandlers = function() {
        for (var i = 0; i < _s._eventListeners.length; i++) {
            var evNameHandler = _s._eventListeners[i];
            _s._removeEventListener(evNameHandler[0], evNameHandler[1], evNameHandler[2]);
        }
        _s._eventListeners = [];
    };

    // Sometimes we may start monitoring the HTML5 video element late.
    // This method attempts to deduce the current Conviva player state without relying
    // on HTML5 video element events.
    this._findCurrentState = function() {
        _s._prevReadyState = _s._videoElement.readyState;

        if (_s._videoElement.readyState === 0) {
            // Nothing happened yet
            _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.STOPPED);
        } else if (_s._videoElement.ended) {
            // Video playback already ended
            _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.STOPPED);
        } else if (_s._videoElement.paused || _s._videoElement.seeking) {
            // Video playback is currently paused.
            _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED);
        } else {
            // Otherwise we must be actively playing video
            _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PLAYING);
        }
        // Perhaps we have received some metadata already
        if (_s._videoElement.readyState >= _s._videoElement.HAVE_METADATA) {
            _s._loadedMetadata();
        }
    };

    // Extract Conviva video quality data from HTML5 video element events.
    this._receivedHtml5Event = function(html5Event) {
        var convivaPlayerState = _s._convertHtml5EventToConvivaPlayerState(html5Event);

        _s._log("Received HTML5 event: " + html5Event + ". Mapped to Conviva player state: " + convivaPlayerState);

        _s._updateConvivaPlayerState(convivaPlayerState);
    };

    this._updateConvivaPlayerState = function(newConvivaPlayerState) {
        if (_s._playerStateManager.getPlayerState() !== newConvivaPlayerState) {
            _s._log("Changing Conviva player state to: " + newConvivaPlayerState);

            // Report the new player state to Conviva.
            _s._playerStateManager.setPlayerState(newConvivaPlayerState);
            // reset the PHT calculation on state change
            _s._resetPlayHeadTimes();
            // Failsafe to avoid overcorrecting the player state when we just changed it.
            _s._playerStateRecentlyChanged = true;
        }
    };

    // Maps relevant HTML5 video element events to the corresponding Conviva player state.
    this._convertHtml5EventToConvivaPlayerState = function(html5Event) {
        switch (html5Event) {
            case "playing":
                return Conviva.PlayerStateManager.PlayerState.PLAYING;
            case "waiting":
                return Conviva.PlayerStateManager.PlayerState.BUFFERING;
            case "ended":
            case "stopped":
                return Conviva.PlayerStateManager.PlayerState.STOPPED;
            case "pause":
                return Conviva.PlayerStateManager.PlayerState.PAUSED;
            default:
                return Conviva.PlayerStateManager.PlayerState.UNKNOWN;
        }
    };

    // Converts HTML5 video element errors to human-readable Conviva errors.
    // See http://dev.w3.org/html5/spec-author-view/video.html#error-codes
    this._reportHtml5Error = function(html5ErrorCode) {
        var html5ErrorMessage;
        switch (html5ErrorCode) {
            case 1:
                html5ErrorMessage = "MEDIA_ERR_ABORTED";
                break;
            case 2:
                html5ErrorMessage = "MEDIA_ERR_NETWORK";
                break;
            case 3:
                html5ErrorMessage = "MEDIA_ERR_DECODE";
                break;
            case 4:
                html5ErrorMessage = "MEDIA_ERR_SRC_NOT_SUPPORTED";
                break;
            default:
                html5ErrorMessage = "MEDIA_ERR_UNKNOWN";
        }

        _s._log("Reporting error: code=" + html5ErrorCode + " message=" + html5ErrorMessage);

        // HTML5 players generally do not recover from these errors,
        // so we mark all errors as fatal.
        // If the player does recover and the video starts playing,
        // the Conviva Platform will ignore the error.
        var html5ErrorSeverity = Conviva.Client.ErrorSeverity.FATAL;

        // Report the error to Conviva.
        _s._playerStateManager.sendError(html5ErrorMessage, html5ErrorSeverity);
    };

    // When metadata is available, we extract the duration of the video and report it.
    this._loadedMetadata = function() {
        var dur = _s._videoElement.duration;
        if (!isNaN(dur) && dur != Infinity) {
            // Report the duration to Conviva.
            _s._playerStateManager.setDuration(dur);
        }
    };

    // Regularly poll for the current position in the video and current buffer length
    this._startPolling = function() {
        this._previousPosition = 0;
        this._currentPosition = 0;
        this._currentBufferLength = 0;
        this._pollingTimerCancel = this._timerInterface.createTimer(
            this._poll,
            500, // check updated position every 500 milliseconds
            "Html5PlayerInterface._poll()"
        );
    };

    this._poll = function() {
        _s._pollPosition();
        _s._pollBufferLength();
        _s._inferPlayerStateFromPosition();
    };

    this._pollPosition = function() {
        // Get the current position in the video.
        _s._previousPosition = _s._currentPosition;
        _s._currentPosition = _s._videoElement.currentTime;

        now = Date.now();
        if (_s._lastPollTime > 0 && now > _s._lastPollTime) {
            // We ignore the first POLL, and out-of-band Poll (happen when we send the HB)
            currentPhtSpeed = ((_s._currentPosition - _s._previousPosition) / (now - _s._lastPollTime)) * 1000;
            // New entry will be added to end of array
            _s._lastPlayHeadTimeSpeeds.push(currentPhtSpeed);
        }
        _s._lastPollTime = now;

        if (_s._lastPlayHeadTimeSpeeds.length > Math.max(Html5PlayerInterface.PAUSED_STATE_ON_CONSTANT_PHT_POLL_COUNT,
                Html5PlayerInterface.PLAY_STATE_ON_MOVING_PHT_POLL_COUNT)) {
            // Drop the first entry in the array (the oldest)
            _s._lastPlayHeadTimeSpeeds.shift();
        }

        // Report to Conviva, in milliseconds
        _s._playerStateManager.setPlayheadTime(_s._currentPosition * 1000);
    };

    this._pollBufferLength = function() {
        var buffered = _s._videoElement.buffered;
        if (buffered === undefined) return;

        // Find all buffered segments ahead of the current position and add up the lengths
        // to figure out how long content can keep playing with the data already downloaded.
        var bufferLength = 0;
        for (var i = 0; i < buffered.length; i++) {
            var start = buffered.start(i);
            var end = buffered.end(i);
            if (start <= _s._currentPosition && _s._currentPosition < end) {
                bufferLength += end - _s._currentPosition;
            }
        }

        _s._currentBufferLength = bufferLength;

        // Report to Conviva, in milliseconds
        _s._playerStateManager.setBufferLength(_s._currentBufferLength * 1000);
    };

    // Sometimes we can't rely on HTML5 video element waiting/emptied/stalled/playing events,
    // they simply won't trigger. In those scenarios, the current position in the video
    // can be a more accurate indicator of whether content is actively playing.

    // The general idea is then for us to regularly query the current position in the video,
    // compare it to previous values, and adjust the current Conviva player state based
    // on whether the video is progressing or not:
    // - If the current Conviva player state is not "playing", and the video is progressing,
    //   we correct the Conviva player state to "playing".
    // - If the current Conviva player state is "playing", and the video is not progressing,
    //   we check whether the video is paused. If it is, we correct the Conviva player state
    //   to "paused". Otherwise, we must be stalled, so we correct the Conviva player state to "buffering".

    // Note that for live streaming content, some video players do not maintain a reliable value
    // for the current position inside the video stream.
    this._inferPlayerStateFromPosition = function() {
        // Compare the current position with the last observation.
        // If different, video playback has progressed since we last checked.
        // PD-12813: extended to all HTML5 platforms for playbackRate support
        var numPhSpeedSamples /* : int */ = _s._lastPlayHeadTimeSpeeds.length;
        if (numPhSpeedSamples >= Math.min(Html5PlayerInterface.PLAY_STATE_ON_MOVING_PHT_POLL_COUNT, Html5PlayerInterface.PAUSED_STATE_ON_CONSTANT_PHT_POLL_COUNT)) {
            var avgSpeed /* : Number */ = 0.0;
            var phtSamples = _s._lastPlayHeadTimeSpeeds.slice();
            for (var index = 0; index < phtSamples.length; index++) {
                var phSpeed /* : Number */ = phtSamples[index];
                avgSpeed += phSpeed;
            }
            avgSpeed /= numPhSpeedSamples;

            var adjustedPlayingSpeed /* : Number */ = Html5PlayerInterface.PHT_PLAY_EXPECTED_SPEED;
            var adjustedPlayingSpeedTolerance /* : Number */ = Html5PlayerInterface.PHT_PLAY_TOLERANCE;

            // PD-12813: adjust based on playbackRate if present and positive (couldn't get negative values to actually rewind)
            var pbRate /* : Number */ = _s._videoElement.playbackRate;
            if (!isNaN(pbRate) && pbRate != Infinity && pbRate > 0) {
                // PD-12813: Safari doesn't handle playbackRate < 0.5. Others?
                isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;
                if (isSafari && pbRate < 0.5) {
                    pbRate = 0.5;
                }
                adjustedPlayingSpeed = adjustedPlayingSpeed * pbRate;
                adjustedPlayingSpeedTolerance = adjustedPlayingSpeedTolerance * pbRate;
                // PD-12813: safer to reset speeds and return? Didn't seem necessary so far.
                //_s._resetPlayHeadTimes();
            }

            // Get the current Conviva player state.
            var currentConvivaState = _s._playerStateManager.getPlayerState();
            if (currentConvivaState != Conviva.PlayerStateManager.PlayerState.PLAYING && numPhSpeedSamples >= Html5PlayerInterface.PLAY_STATE_ON_MOVING_PHT_POLL_COUNT && Math.abs(avgSpeed - adjustedPlayingSpeed) < adjustedPlayingSpeedTolerance) {
                _s._log("Adjusting Conviva player state to: PLAYING");
                _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PLAYING);
                return;
            }

            if (currentConvivaState == Conviva.PlayerStateManager.PlayerState.PLAYING && numPhSpeedSamples >= Html5PlayerInterface.PAUSED_STATE_ON_CONSTANT_PHT_POLL_COUNT && avgSpeed == Html5PlayerInterface.PHT_PAUSED_EXPECTED_SPEED) {
                if (_s._videoElement.paused) {
                    _s._log("Adjusting Conviva player state to: PAUSED");
                    _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED);
                } else if (_s._videoElement.seeking) {
                    // If we are seeking, stick with the current player state for now.
                } else {
                    _s._log("Adjusting Conviva player state to: BUFFERING");
                    _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.BUFFERING);
                }
                return;
            }
        }
        // Removing Old Logic
        /*_s._positionDelta = Math.abs(_s._previousPosition - _s._currentPosition);

        // Ignore large position increments most likely due to seeking.
        // Can't rely on HTML5 video "seeking" events or "seeking" property for that.
        if (_s._positionDelta > 1) return;

        // To prevent cascading state changes, only adjust the player state
        // based on position observations within the same player state
        if (_s._playerStateRecentlyChanged) {
            _s._playerStateRecentlyChanged = false;
            return;
        }

        var videoProgressed = _s._positionDelta !== 0;

        // Get the current Conviva player state.
        var currentConvivaState = _s._playerStateManager.getPlayerState();

        // Verify that the current Conviva player state is consistent with video progress.
        if (videoProgressed && currentConvivaState !== Conviva.PlayerStateManager.PlayerState.PLAYING) {
            // Video is actually playing, we should be in playing state.
            _s._log("Adjusting Conviva player state to: PLAYING");
            _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PLAYING);
        } else if (!videoProgressed && currentConvivaState === Conviva.PlayerStateManager.PlayerState.PLAYING) {
            // Video is not actually playing, we should not be in playing state.
            if (_s._videoElement.paused) {
                // If the video is currently paused, switch to paused state.
                _s._log("Adjusting Conviva player state to: PAUSED");
                _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.PAUSED);
            } else if (_s._videoElement.seeking) {
                // If we are seeking, stick with the current player state for now.
            } else {
                // Otherwise we must be waiting for more data, go to buffering state.
                _s._log("Adjusting Conviva player state to: BUFFERING");
                _s._updateConvivaPlayerState(Conviva.PlayerStateManager.PlayerState.BUFFERING);
            }
        }*/
    };

    this._stopPolling = function() {
        this._pollingTimerCancel();
    };

    this._resetPlayHeadTimes = function() {
        _s._lastPlayHeadTimeSpeeds = [];
        _s._previousPosition = -1;
        _s._lastPollTime = 0;
    };

    // PlayerStateManager

    this.getPlayerStateManager = function() {
        return this._playerStateManager;
    };

    // Utilities

    this._log = function(message) {
        if (enableLogging) {
            var formattedMessage = "[Html5PlayerInterface] " + message;
            this._loggingInterface.consoleLog(formattedMessage, Conviva.SystemSettings.LogLevel.DEBUG);
        }
    };

    // Constructor

    function _constr(playerStateManager, videoElement) {
        this._log("Html5PlayerInterface._constr()");

        if (!playerStateManager) {
            throw new Error("Html5PlayerInterface: playerStateManager argument cannot be null.");
        }
        if (!videoElement) {
            throw new Error("Html5PlayerInterface: videoElement argument cannot be null.");
        }

        this._playerStateManager = playerStateManager;
        this._videoElement = videoElement;

        // Start listening for HTML5 video element events.
        this._eventListeners = [];
        this._registerVideoEventListeners();
        this._resetPlayHeadTimes();
        // Start polling for the current position in the video.
        this._startPolling();

        this._findCurrentState();
    }

    _constr.apply(this, arguments);

    // Destructor

    this.cleanup = function() {
        this._log("Html5PlayerInterface.cleanup()");

        this._stopPolling();
        this._removeVideoEventHandlers();

        this._videoElement = null;
        this._playerStateManager = null;
    };
}


/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */
/*! This is sample code meant to illustrate proper Conviva integration in video applications. */
/*! This file should not be included in video applications as part of integrating Conviva. */

// Implements Conviva.HttpInterface for Chrome.

function Html5Http() {

    function _constr() {
        // nothing to initialize
    }

    _constr.apply(this, arguments);

    this.makeRequest = function(httpMethod, url, data, contentType, timeoutMs, callback) {
        // XDomainRequest only exists in IE, and is IE8-IE9's way of making CORS requests.
        // It is present in IE10 but won't work right.
        // if (typeof XDomainRequest !== "undefined" && navigator.userAgent.indexOf('MSIE 10') === -1) {
        //  return this.makeRequestIE89.apply(this, arguments);
        // }
        return this.makeRequestStandard.apply(this, arguments);
    };

    this.makeRequestStandard = function(httpMethod, url, data, contentType, timeoutMs, callback) {
        var xmlHttpReq = new XMLHttpRequest();

        xmlHttpReq.open(httpMethod, url, true);

        if (contentType && xmlHttpReq.overrideMimeType) {
            xmlHttpReq.overrideMimeType = contentType;
        }
        if (contentType && xmlHttpReq.setRequestHeader) {
            xmlHttpReq.setRequestHeader('Content-Type', contentType);
        }
        if (timeoutMs > 0) {
            xmlHttpReq.timeout = timeoutMs;
            xmlHttpReq.ontimeout = function() {
                // Often this callback will be called after onreadystatechange.
                // The first callback called will cleanup the other to prevent duplicate responses.
                xmlHttpReq.ontimeout = xmlHttpReq.onreadystatechange = null;
                if (callback) callback(false, "timeout after " + timeoutMs + " ms");
            };
        }

        xmlHttpReq.onreadystatechange = function() {
            if (xmlHttpReq.readyState === 4) {
                xmlHttpReq.ontimeout = xmlHttpReq.onreadystatechange = null;
                if (xmlHttpReq.status == 200) {
                    if (callback) callback(true, xmlHttpReq.responseText);
                } else {
                    if (callback) callback(false, "http status " + xmlHttpReq.status);
                }
            }
        };

        xmlHttpReq.send(data);

        return null; // no way to cancel the request
    };

    //   this.makeRequestIE89 = function (httpMethod, url, data, contentType, timeoutMs, callback) {
    //    // IE8-9 does not allow changing the contentType on CORS requests.
    //    // IE8-9 does not like mixed intranet/extranet CORS requests.
    //    // IE8-9 does not like mixed HTTPS-in-HTTP-page / HTTP-in-HTTPS-page CORS requests.

    //    var xmlHttpReq = new XDomainRequest();

    //    xmlHttpReq.open(httpMethod, url, true); // async=true

    //    if (timeoutMs != null) {
    //        xmlHttpReq.timeout = timeoutMs;
    //        xmlHttpReq.ontimeout = function () {
    //            xmlHttpReq.onload = xmlHttpReq.onerror = null;
    //            if (callback) callback(false, "timeout after "+timeoutMs+" ms");
    //        };
    //    }

    // // onreadystatechange won't trigger for XDomainRequest.
    //    xmlHttpReq.onload = function () {
    //     xmlHttpReq.ontimeout = null;
    //     if (callback) callback(true, xmlHttpReq.responseText);
    //    };
    //    xmlHttpReq.onerror = function () {
    //     xmlHttpReq.ontimeout = null;
    //     if (callback) callback(false, "http status " + xmlHttpReq.status);
    //    };

    //    xmlHttpReq.send(data);

    //    return null; // no way to cancel the request
    //   };

    this.release = function() {
        // nothing to release
    };

}


/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */
/*! This is sample code meant to illustrate proper Conviva integration in video applications. */
/*! This file should not be included in video applications as part of integrating Conviva. */

// Implements Conviva.LoggingInterface for Chrome.

function Html5Logging() {

    function _constr() {
        // nothing to initialize
    }

    _constr.apply(this, arguments);

    this.consoleLog = function(message, logLevel) {
        if (typeof console === 'undefined') return;
        if (console.log && logLevel === Conviva.SystemSettings.LogLevel.DEBUG ||
            logLevel === Conviva.SystemSettings.LogLevel.INFO) {
            console.log(message);
        } else if (console.warn && logLevel === Conviva.SystemSettings.LogLevel.WARNING) {
            console.warn(message);
        } else if (console.error && logLevel === Conviva.SystemSettings.LogLevel.ERROR) {
            console.error(message);
        }
    };

    this.release = function() {
        // nothing to release
    };

}


/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */
/*! This is sample code meant to illustrate proper Conviva integration in video applications. */
/*! This file should not be included in video applications as part of integrating Conviva. */

// Implements Conviva.MetadataInterface for Chrome.

// The Conviva Platform will recognize HTTP user agent strings for major browsers,
// and use these to fill in some of the missing metadata.
// You can validate the resulting metadata through our validation tools.
// If you wish you can maintain your own user agent string parsing on the client side
// instead, and use it to supply the requested Conviva data.

function Html5Metadata() {

    function _constr() {
        // nothing to initialize
    }

    _constr.apply(this, arguments);

    // Relying on HTTP user agent string parsing on the Conviva Platform.
    this.getBrowserName = function() {
        return null;
    };

    // Relying on HTTP user agent string parsing on the Conviva Platform.
    this.getBrowserVersion = function() {
        return null;
    };

    // Relying on HTTP user agent string parsing on the Conviva Platform.
    this.getDeviceBrand = function() {
        return null;
    };

    // Relying on HTTP user agent string parsing on the Conviva Platform.
    this.getDeviceManufacturer = function() {
        return null;
    };

    // Relying on HTTP user agent string parsing on the Conviva Platform.
    this.getDeviceModel = function() {
        return null;
    };

    // Relying on HTTP user agent string parsing on the Conviva Platform.
    this.getDeviceType = function() {
        return null;
    };

    // There is no value we can access that qualifies as the device version.
    this.getDeviceVersion = function() {
        return null;
    };

    // HTML5 can qualify as an application framework of sorts.
    this.getFrameworkName = function() {
        return "HTML5";
    };

    // No convenient way to detect HTML5 version.
    this.getFrameworkVersion = function() {
        return null;
    };

    // Relying on HTTP user agent string parsing on the Conviva Platform.
    this.getOperatingSystemName = function() {
        return null;
    };

    // Relying on HTTP user agent string parsing on the Conviva Platform.
    this.getOperatingSystemVersion = function() {
        return null;
    };

    this.release = function() {
        // nothing to release
    };

}


/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */
/*! This is sample code meant to illustrate proper Conviva integration in video applications. */
/*! This file should not be included in video applications as part of integrating Conviva. */

// Implements Conviva.StorageInterface for Chrome.

// HTML5 localStorage relies on a single key to index items,
// so we find a consistent way to combine storageSpace and storageKey.

function Html5Storage() {

    function _constr() {
        // nothing to initialize
    }

    _constr.apply(this, arguments);

    this.saveData = function(storageSpace, storageKey, data, callback) {
        var localStorageKey = storageSpace + "." + storageKey;
        try {
            localStorage.setItem(localStorageKey, data);
            callback(true, null);
        } catch (e) {
            callback(false, e.toString());
        }
    };

    this.loadData = function(storageSpace, storageKey, callback) {
        var localStorageKey = storageSpace + "." + storageKey;
        try {
            var data = localStorage.getItem(localStorageKey);
            callback(true, data);
        } catch (e) {
            callback(false, e.toString());
        }
    };

    this.release = function() {
        // nothing to release
    };

}


// Implements SystemInterfaceFactory

// Convenience factory class to produce HTML5-specific SystemInterface objects
// based on the underlying system implementations.

var Html5SystemInterfaceFactory = function() {
    this.build = function() {
        return new Conviva.SystemInterface(
            new Html5Time(),
            new Html5Timer(),
            new Html5Http(),
            new Html5Storage(),
            new Html5Metadata(),
            new Html5Logging()
        );
    };
};


/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */
/*! This is sample code meant to illustrate proper Conviva integration in video applications. */
/*! This file should not be included in video applications as part of integrating Conviva. */

// Implements Conviva.TimeInterface for Chrome.

function Html5Time() {

    function _constr() {
        // nothing to initialize
    }

    _constr.apply(this, arguments);

    this.getEpochTimeMs = function() {
        var d = new Date();
        return d.getTime();
    };

    this.release = function() {
        // nothing to release
    };
}


/*! (C) 2016 Conviva, Inc. All rights reserved. Confidential and proprietary. */
/*! This is sample code meant to illustrate proper Conviva integration in video applications. */
/*! This file should not be included in video applications as part of integrating Conviva. */

// Implements Conviva.TimerInterface for Chrome.

// setInterval does exactly what we need. We just need to return a function 
// which cancels the timer when called.
// Some JavaScript implementations do not have setInterval, in which case
// you may have to write it yourself using setTimeout.

function Html5Timer() {

    function _constr() {
        // nothing to initialize
    }

    _constr.apply(this, arguments);

    this.createTimer = function(timerAction, intervalMs, actionName) {
        var timerId = setInterval(timerAction, intervalMs);
        var cancelTimerFunc = (function() {
            if (timerId !== -1) {
                clearInterval(timerId);
                timerId = -1;
            }
        });
        return cancelTimerFunc;
    };

    this.release = function() {
        // nothing to release
    };

}
</script><script>
// conviva setup
/* globals $t, Conviva, Html5SystemInterfaceFactory, Html5PlayerInterface */

(function(Conviva, html5SystemInterfaceFactory, Html5PlayerInterface) {

    //setup conviva on player init
    $t('on', 'ndp_playerInit', function(e, data) {
        var ndp = data.playerObj;
        //doenst matter to make a new one, it will be the same.
        setupConviva(ndp);
    });

    var settings = {
        CUSTOMER_KEY: "d1ba19b311442f00663cf58858840ea4f364eea4",
        ConvivaApplicationName: "ndpplayer",
        serviceUrl: "https://nbcu-news-test.testonly.conviva.com",
    };

    var client = false;

    var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];

    var crossBrandPageType = function() {
        //setup pagetype for cross platform MBT, bludenode, today.com

        var ramenPageType = $t('jsonLd.Dataset.0.pageType', '').toLowerCase();
        if (ramenPageType) {
            return ramenPageType;
        }
        if (window.s) {
            if (window.s.prop12 && window.s.prop12.indexOf('=') === -1) {
                return window.s.prop12;

            } else {
                return window.s.eVar2 || 'unknown';
            }
        }
        //default 
        return 'unknown';
    };

    function setupConviva(ndp) {
        var $ndp = window.$ndp || { events: {}, NativeSingleton: {} };

        var state = {
            inSession: false, //keep track of session creation to help disambiguate when an ad plays and video content plays
            inAdState: false,
            clientSession: false,
            currentAsset: {},
        };

        //init client
        initClient();
        //add handlers to specific instance of NDP player initiated, for each time
        addHandlers(ndp);

        //initiate client and ensure a single instance of conviva client per user
        function initClient() {
            if (!client) {
                /*initialize conviva */
                // To create boostrap the Conviva Library
                //this is the customer key provided by conviva tied to the nbc news account, there are both a dev and a production key defined in the configuration object
                var systemSettings = new Conviva.SystemSettings();

                //this is currently not masking errors, the conviva team has been engaged in determining why.
                //TODO : Move log level value to configuration.js
                systemSettings.logLevel = Conviva.SystemSettings.LogLevel.NONE;

                var systemInterface = new html5SystemInterfaceFactory().build();

                var systemFactory = new Conviva.SystemFactory(systemInterface, systemSettings);
                //Customer integration
                var clientSettings = new Conviva.ClientSettings(settings.CUSTOMER_KEY);
                //the touchstone service url is only used by dev for verification. this should not be set in prod
                if (window.NDP_DEBUG) {
                    //this sets up conviva to report to the touchstone interface only for dev
                    clientSettings.gatewayUrl = settings.serviceUrl;
                }
                client = new Conviva.Client(clientSettings, systemFactory);
            }
        }

        function createConvivaSession(asset) {

            //there should only be one session active at a time so end the session if it exists
            endSession();

            if (!asset) {
                return;
            }

            //keep track that the session has started
            state.inSession = true;
            //provide the convivhtml5interface with info about the videoplayer element
            var playerStateManager = client.getPlayerStateManager();
            //inform conviv about what stream is playing by filling out a content metadata object
            var contentMetadata = new Conviva.ContentMetadata();

            contentMetadata.assetName = asset.getID();
            contentMetadata.streamUrl = $ndp.NativeSingleton.contentURL;
            contentMetadata.streamType = (function() {
                if ($ndp.NativeSingleton.isLive()) {
                    return Conviva.ContentMetadata.StreamType.LIVE;
                } else {
                    return Conviva.ContentMetadata.StreamType.VOD;
                }
            })();
            contentMetadata.applicationName = settings.ConvivaApplicationName;
            contentMetadata.duration = asset.raw && !isNaN(asset.raw.duration) && asset.raw.duration;
            contentMetadata.custom = {
                //custom values
                pageType: crossBrandPageType(),
                playerTech: $ndp.playbackAdapter || 'not available',
                domain: topLevelDomain
            };


            //provide the session with the content metadata object
            state.clientSession = client.createSession(contentMetadata);
            //the html5interface module takes care of marshalling the native video events into conviva specific implementations
            var videoElement = $ndp.NativeSingleton.getVideoElement();
            new Html5PlayerInterface(playerStateManager, videoElement);
            // until player is attached, Conviva State remains in NOT_MONITORED State
            client.attachPlayer(state.clientSession, playerStateManager);
        }

        function sendAdStart() {
            //track state of ad as far as conviva understands
            state.inAdState = true;
            //creqates a new conviva session
            createConvivaSession(state.currentAsset);
            // calls the conviva client and reports that an ad has started playback
            // params are as follows.
            // adStream:   Required: Whether the ad is embedded inside the content stream
            //             Set to Conviva.Client.AdStream.SEPARATE if value is unknown
            //             string {ENUM: Conviva.Client.AdStream.CONTENT/SEPARATE}
            // adPlayer:   Required: Whether the ad is played by the same player as the original video content.
            //             Set to Conviva.Client.AdPlayer.SEPARATE if value is unknown
            //             string {ENUM: Conviva.Client.AdPlayer.CONTENT/SEPARATE}
            // adPosition: Always need to Set to Conviva.Client.AdPosition.PREROLL
            client.adStart(state.clientSession, Conviva.Client.AdStream.SEPARATE, Conviva.Client.AdPlayer.SEPARATE, Conviva.Client.AdPosition.PREROLL);
        }

        function sendAdEnd() {
            if (state.inAdState) {
                client.adEnd(state.clientSession);
            }
            state.inAdState = false;
        }

        function attachSession() {
            sendAdEnd();
            //if the ad did not start for some reason we need to create the client session
            if (!state.inSession) {
                createConvivaSession(state.currentAsset);
            }
        }

        function endSession() {
            //only end the session if it is allready started
            if (state.inSession) {
                client.cleanupSession(state.clientSession);
                state.inSession = false;
            }
        }

        function SetContentMetaData(event) {
            endSession();
            state.currentAsset = event.getAsset();

        }

        function handleStart() {
            if (!state.inSession) {
                createConvivaSession(state.currentAsset);
            }
            attachSession(state.currentAsset);
        }

        function handlePlay() {
            if (!state.inSession) {
                createConvivaSession(state.currentAsset);
                attachSession(state.currentAsset);
            }
        }

        function handleSeek(event) {
            //We end the session if the user seeks back to the beginning of the video so we can treat it as a new session
            if (event.payload.playheadPosition < 100) {
                endSession();
            }
            if (!state.inSession) {
                createConvivaSession(state.currentAsset);
            }
        }

        function reportError(errType) {
            if (state.inSession) {
                client.reportError(state.clientSession, errType, Conviva.Client.ErrorSeverity.FATAL);
            }
            endSession();
        }

        function addHandlers(ndp) {
            //set up reference to event structs we want to listen for
            var PlaybackEvent = $ndp.events.PlaybackEvent;
            var AdEvent = $ndp.events.AdEvent;
            var ErrorEvent = $ndp.events.ErrorEvent;
            var VideoEvent = $ndp.events.VideoEvent;
            var SystemEvent = $ndp.events.SystemEvent;

            //loaded handler sets asset for next session
            ndp.on(PlaybackEvent.LOADED, SetContentMetaData);
            //start handler starts monitoring of content
            ndp.on(PlaybackEvent.START, handleStart);
            //play handler starts continues monitering of content
            ndp.on(PlaybackEvent.PLAY, handlePlay);
            //complete handler clears session when  stream ends
            ndp.on(PlaybackEvent.COMPLETE, endSession);
            //adevent start handler  sends ad start to conviva
            ndp.on(AdEvent.START, sendAdStart);
            //adevent complete handler sends ad end to conviva
            ndp.on(AdEvent.COMPLETE, sendAdEnd);
            //We end the session if the user seeks back to the beginning of the video so we can treat it as a new session
            ndp.on(PlaybackEvent.SEEK, handleSeek);
            //errors should clear the session
            ndp.on(ErrorEvent.MEDIA_ERROR, function() { reportError('media error'); });
            ndp.on(ErrorEvent.NETWORK_ERROR, function() { reportError('network error'); });
            ndp.on(ErrorEvent.TIMEOUT_ERROR, function() { reportError('timeout error'); });
            ndp.on(VideoEvent.ABORT, function() { reportError('abort error'); });
            ndp.on(VideoEvent.ERROR, function() { reportError('unknown error'); });
            ndp.on(AdEvent.ERROR, function() { reportError('ad error'); });
            ndp.on(SystemEvent.VIDEO_ERROR, function() { reportError('video error'); });
        }
    }
})(Conviva, Html5SystemInterfaceFactory, Html5PlayerInterface);
</script><script>
/*
 * video heartbeats - 2.0.1 - 2016-08-22
 * Copyright (c) 2016 Adobe Systems, Inc. All Rights Reserved.
 */

// Heartbeat core
!function(a){if("undefined"==typeof b)var b={};if("undefined"==typeof c)var c={};if("undefined"==typeof d)var d={};if(d.radio||(d.radio={}),d.plugin||(d.plugin={}),"undefined"==typeof e)var e={};e.clock||(e.clock={}),function(a){"use strict";function b(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function c(a,b){return a<<b|a>>>32-b}function d(a,d,e,f,g,h){return b(c(b(b(d,a),b(f,h)),g),e)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,c){a[c>>5]|=128<<c%32,a[(c+64>>>9<<4)+14]=c;var d,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(d=0;d<a.length;d+=16)i=m,j=n,k=o,l=p,m=e(m,n,o,p,a[d],7,-680876936),p=e(p,m,n,o,a[d+1],12,-389564586),o=e(o,p,m,n,a[d+2],17,606105819),n=e(n,o,p,m,a[d+3],22,-1044525330),m=e(m,n,o,p,a[d+4],7,-176418897),p=e(p,m,n,o,a[d+5],12,1200080426),o=e(o,p,m,n,a[d+6],17,-1473231341),n=e(n,o,p,m,a[d+7],22,-45705983),m=e(m,n,o,p,a[d+8],7,1770035416),p=e(p,m,n,o,a[d+9],12,-1958414417),o=e(o,p,m,n,a[d+10],17,-42063),n=e(n,o,p,m,a[d+11],22,-1990404162),m=e(m,n,o,p,a[d+12],7,1804603682),p=e(p,m,n,o,a[d+13],12,-40341101),o=e(o,p,m,n,a[d+14],17,-1502002290),n=e(n,o,p,m,a[d+15],22,1236535329),m=f(m,n,o,p,a[d+1],5,-165796510),p=f(p,m,n,o,a[d+6],9,-1069501632),o=f(o,p,m,n,a[d+11],14,643717713),n=f(n,o,p,m,a[d],20,-373897302),m=f(m,n,o,p,a[d+5],5,-701558691),p=f(p,m,n,o,a[d+10],9,38016083),o=f(o,p,m,n,a[d+15],14,-660478335),n=f(n,o,p,m,a[d+4],20,-405537848),m=f(m,n,o,p,a[d+9],5,568446438),p=f(p,m,n,o,a[d+14],9,-1019803690),o=f(o,p,m,n,a[d+3],14,-187363961),n=f(n,o,p,m,a[d+8],20,1163531501),m=f(m,n,o,p,a[d+13],5,-1444681467),p=f(p,m,n,o,a[d+2],9,-51403784),o=f(o,p,m,n,a[d+7],14,1735328473),n=f(n,o,p,m,a[d+12],20,-1926607734),m=g(m,n,o,p,a[d+5],4,-378558),p=g(p,m,n,o,a[d+8],11,-2022574463),o=g(o,p,m,n,a[d+11],16,1839030562),n=g(n,o,p,m,a[d+14],23,-35309556),m=g(m,n,o,p,a[d+1],4,-1530992060),p=g(p,m,n,o,a[d+4],11,1272893353),o=g(o,p,m,n,a[d+7],16,-155497632),n=g(n,o,p,m,a[d+10],23,-1094730640),m=g(m,n,o,p,a[d+13],4,681279174),p=g(p,m,n,o,a[d],11,-358537222),o=g(o,p,m,n,a[d+3],16,-722521979),n=g(n,o,p,m,a[d+6],23,76029189),m=g(m,n,o,p,a[d+9],4,-640364487),p=g(p,m,n,o,a[d+12],11,-421815835),o=g(o,p,m,n,a[d+15],16,530742520),n=g(n,o,p,m,a[d+2],23,-995338651),m=h(m,n,o,p,a[d],6,-198630844),p=h(p,m,n,o,a[d+7],10,1126891415),o=h(o,p,m,n,a[d+14],15,-1416354905),n=h(n,o,p,m,a[d+5],21,-57434055),m=h(m,n,o,p,a[d+12],6,1700485571),p=h(p,m,n,o,a[d+3],10,-1894986606),o=h(o,p,m,n,a[d+10],15,-1051523),n=h(n,o,p,m,a[d+1],21,-2054922799),m=h(m,n,o,p,a[d+8],6,1873313359),p=h(p,m,n,o,a[d+15],10,-30611744),o=h(o,p,m,n,a[d+6],15,-1560198380),n=h(n,o,p,m,a[d+13],21,1309151649),m=h(m,n,o,p,a[d+4],6,-145523070),p=h(p,m,n,o,a[d+11],10,-1120210379),o=h(o,p,m,n,a[d+2],15,718787259),n=h(n,o,p,m,a[d+9],21,-343485551),m=b(m,i),n=b(n,j),o=b(o,k),p=b(p,l);return[m,n,o,p]}function j(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function k(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function l(a){return j(i(k(a),8*a.length))}function m(a,b){var c,d,e=k(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=i(e,8*a.length)),c=0;16>c;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=i(f.concat(k(b)),512+8*b.length),j(i(g.concat(d),640))}function n(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function o(a){return unescape(encodeURIComponent(a))}function p(a){return l(o(a))}function q(a){return n(p(a))}function r(a,b){return m(o(a),o(b))}function s(a,b){return n(r(a,b))}function t(a,b,c){return b?c?r(b,a):s(b,a):c?p(a):q(a)}a.md5=t}(b),function(a){"use strict";var b={};b.startsWith=function(a,b){return 0==a.indexOf(b)},a.StringUtils=b}(b),function(a){"use strict";var b={};b.clone=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},b.merge=function(a,c){var d=b.clone(a);for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);return d},a.ObjectUtils=b}(b),function(a){"use strict";function b(a,b,c){this.fn=a,this.ctx=b,this.params=c}b.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)},a.radio.Command=b}(d),function(a){"use strict";function b(a,b){this._queue=[],this._lastTs=0,this._isSuspended="undefined"!=typeof a?a:!1,this._delay="undefined"!=typeof b?b:0}b.prototype.addCommand=function(a){this._queue.push(a),this._drain()},b.prototype.cancelAllCommands=function(){this._queue=[]},b.prototype.isEmpty=function(){return 0===this._queue.length},b.prototype.suspend=function(){this._isSuspended=!0},b.prototype.resume=function(){this._isSuspended=!1,this._drain()},b.prototype.flush=function(){this._isSuspended=!1;for(var a=0;a<this._queue.length;a++){var b=this._queue[a];b.run()}this._queue=[]},b.prototype._drain=function(){if(!this._isSuspended&&!this._drainInProgress){this._drainInProgress=!0;var a=this;!function b(){var c=a._queue.shift();c?a._runCommand(c,function(){a._isSuspended||b()}):a._drainInProgress=!1}()}},b.prototype._runCommand=function(a,b){function c(){a.run(),null!=b&&b.call(d)}var d=this;if(0==this._lastTs)c();else{var e=(new Date).getTime(),f=e-this._lastTs;this._lastTs=e,f<this._delay?setTimeout(c,this._delay-f):c()}},a.radio.CommandQueue=b}(d),function(a){"use strict";function b(a,b){if(this._name=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._listeners={},this._requests={},this._commands={},this._isShutDown=!1}function c(a,c){if(a===c)return!0;for(var d=(a||"").split(b.SEPARATOR),e=(c||"").split(b.SEPARATOR),f=!0,g=0;g<d.length;g++)f=f&&(d[g]===b.WILDCARD||d[g]===e[g]);return f}b.WILDCARD="*",b.SEPARATOR=":",b.prototype.toString=function(){return"<channel: "+this._name+">"},b.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(d,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)},b.prototype.on=function(a,b,c){this._isShutDown||(this._listeners[a]||(this._listeners[a]=[]),this._listeners[a].push({fn:b,ctx:c}))},b.prototype.off=function(a,b,c){if(!this._isShutDown){if(b="function"==typeof b?b:null,!a&&null==b&&!c)return void(this._listeners={});if(a)this._removeListener(a,b,c);else for(a in this._listeners)this._listeners.hasOwnProperty(a)&&this._removeListener(a,b,c)}},b.prototype.trigger=function(a){if(!this._isShutDown)for(var b in this._listeners)if(this._listeners.hasOwnProperty(b)&&c(b,a.name))for(var d=this._listeners[b].slice(0),e=0;e<d.length;e++){var f=d[e];f.fn.call(f.ctx,a)}},b.prototype.comply=function(a,b,c){this._isShutDown||(this._commands[a]={cmd:b,ctx:c})},b.prototype.command=function(a,b){if(!this._isShutDown){var c=this._commands[a];return c?void c.cmd.call(c.ctx,b):void this._logger.warn(d,"#command > No command handler for: "+a)}},b.prototype.reply=function(a,b,c){this._isShutDown||(this._requests[a]={fn:b,ctx:c})},b.prototype.request=function(a){if(!this._isShutDown){var b=this._requests[a];return b?b.fn.call(b.ctx):(this._logger.warn(d,"#request > No request handler for: "+a),null)}},b.prototype._removeListener=function(a,b,c){b="function"==typeof b?b:null;var d=this._listeners[a];if(d){if(!d.length||null==b&&!c)return void delete this._listeners[a];for(var e=0;e<d.length;e++){var f=d[e];null!==b&&b!==f.fn||c&&c!==f.ctx||this._listeners[a].splice(e,1)}}};var d="radio::Channel";a.radio.Channel=b}(d),function(a){"use strict";function b(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._channels={}}var c=a.radio.Channel;b.prototype.channel=function(a){return this._channels[a]||(this._channels[a]=new c(a,this._logger)),this._channels[a]},b.prototype.shutdown=function(){for(var a in this._channels)this._channels.hasOwnProperty(a)&&this._channels[a].shutdown()},a.radio.Radio=b}(d),function(a){"use strict";function b(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a}a.extend=b}(d),function(a){"use strict";function b(){}b.prototype.write=function(a){throw new Error("Implementation error: Method must be overridden.")},a.ILogWriter=b}(d),function(a){"use strict";function b(){}b.prototype.write=function(a){window.console&&window.console.log&&window.console.log(a)},a.LogWriter=b}(d,c),function(a){"use strict";function b(){}b.prototype.setLogWriter=function(a){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getEnabled=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.debug=function(a,b){throw new Error("Implementation error: Method must be overridden.")},b.prototype.info=function(a,b){throw new Error("Implementation error: Method must be overridden.")},b.prototype.warn=function(a,b){throw new Error("Implementation error: Method must be overridden.")},b.prototype.error=function(a,b){throw new Error("Implementation error: Method must be overridden.")},a.ILogger=b}(d),function(a){"use strict";function b(){this._logWriter=new d}function c(a){return 10>a?"00"+a:100>a?"0"+a:""+a}var d=a.LogWriter;b.prototype.setLogWriter=function(a){if(!a)throw new Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=a,this._enabled=!1},b.prototype.getLogWriter=function(){return this._logWriter},b.prototype.getEnabled=function(){return this._enabled},b.prototype.enable=function(){this._enabled=!0},b.prototype.disable=function(){this._enabled=!1},b.prototype.debug=function(a,b){this._log(a,f,b)},b.prototype.info=function(a,b){this._log(a,e,b)},b.prototype.warn=function(a,b){this._log(a,g,b)},b.prototype.error=function(a,b){this._log(a,h,b)},b.prototype._log=function(a,b,d){if(b==h||this._enabled){var e="",f=new Date;e+="["+f.toTimeString()+"."+c(f.getMilliseconds())+"] ["+b+"] ",e+="["+a+"] "+d,this._logWriter.write(e)}};var e="INFO",f="DEBUG",g="WARN",h="ERROR";a.Logger=b}(d),function(a){"use strict";function b(a,b){this._pluginName=a,this._eventName=b}var c=a.radio.Channel;b.prototype.getPluginName=function(){return this._pluginName},b.prototype.getEventName=function(){return this._eventName},b.prototype.getName=function(){return this._pluginName+c.SEPARATOR+this._eventName},a.Trigger=b}(d),function(a){"use strict";function b(a,b){this.name=a,this.data=b}b.SUCCESS="success",b.ERROR="error",b.createFromTrigger=function(a){return new b(a.getName())},a.Event=b}(d),function(a){"use strict";function b(){this._events={}}b.prototype.addEventListener=function(a,b,c){a&&b&&(c=c||window,this._events[a]=this._events[a]||[],this._events[a].push({cb:b,ctx:c}))},b.prototype.removeEventListener=function(a,b,c){if(a&&b){c=c||window;var d,e,f=!1;for(e in this._events)if(a===e){f=!0;break}if(f){for(d=this._events[e].length-1;d>=0;d--){var g=this._events[e][d];b===g.cb&&c===g.ctx&&this._events[e].splice(d,1)}this._events[e].length||delete this._events[e]}}},b.prototype.dispatchEvent=function(a){if(a.name){var b,c;for(b in this._events)if(this._events.hasOwnProperty(b)&&a.name===b){var d=this._events[b],e=d.slice(0),f=e.length;for(c=0;f>c;c++)e[c].cb.call(e[c].ctx,a);break}}},b.prototype.removeAllListeners=function(a){if(a){var b,c;for(c in this._events)if(this._events.hasOwnProperty(c)){for(b=this._events[c].length-1;b>=0;b--){var d=this._events[c][b];d.ctx===a&&this._events[c].splice(b,1)}this._events[c].length||delete this._events[c]}}else this._events={}},a.EventDispatcher=b}(d),function(a){"use strict";function b(){}function c(a,b){this.url=a||null,this.method=b,this._xmlhttp=null}function d(){d.__super__.constructor.call(this),this._connection=null}var e=a.Event,f=a.EventDispatcher;b.GET="GET",d.RESPONSE="response",d.INSTANCE="instance",a.extend(d,f),d.prototype.close=function(){this.removeAllListeners(null)},d.prototype.load=function(a){a&&a.method&&a.url&&(a._xmlhttp=this._createCORSRequest(a),a._xmlhttp?a._xmlhttp.send():this._loadImage(a))},d.prototype._createCORSRequest=function(a){var b=null;if("undefined"!=typeof window.XMLHttpRequest){var c=new window.XMLHttpRequest;"withCredentials"in c&&(b=c,b.open(a.method,a.url,!0))}if(null==b&&"undefined"!=typeof window.XDomainRequest&&(b=new window.XDomainRequest,b.open(a.method,a.url)),b){var f={};f[d.INSTANCE]=this;var g=this;b.onload=function(){return b.status&&parseInt(b.status,10)>=400?this.onerror():(f[d.RESPONSE]=b.responseText,void g.dispatchEvent(new e(e.SUCCESS,f)))},b.onerror=function(){g.dispatchEvent(new e(e.ERROR,f))}}return b},d.prototype._loadImage=function(a){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=a.url;var b={};b[d.RESPONSE]="",b[d.INSTANCE]=this,this.dispatchEvent(new e(e.SUCCESS,b))},a.URLRequestMethod=b,a.URLRequest=c,a.URLLoader=d}(d),function(a){"use strict";var b="js",c="2.0.1.88",d="c8c0b1",e=4,f={};f.getVersion=function(){return b+"-"+c+"-"+d},f.getMajor=function(){return f.getNumberAtPosition(0)},f.getMinor=function(){return f.getNumberAtPosition(1)},f.getMicro=function(){return f.getNumberAtPosition(2)},f.getPatch=function(){return f.getNumberAtPosition(3)},f.getBuild=function(){return d},f.getApiLevel=function(){return e},f.getNumberAtPosition=function(a){return c.split(".")[a]},a.Version=f}(c),function(a){"use strict";function b(a,b){this._message=a,this._details=b}b.prototype.getMessage=function(){return this._message},b.prototype.getDetails=function(){return this._details},a.ErrorInfo=b}(c),function(a){"use strict";function b(){this.debugLogging=!1}a.HeartbeatConfig=b}(c),function(a){"use strict";function b(){}b.prototype.onError=function(a){},a.HeartbeatDelegate=b}(c),function(a){"use strict";function b(){}b.prototype.configure=function(a){throw new Error("Implementation error: Method must be overridden.")},b.prototype.bootstrap=function(a){throw new Error("Implementation error: Method must be overridden.")},b.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.resolveData=function(a){throw new Error("Implementation error: Method must be overridden.")},a.plugin.IPlugin=b}(d),function(a){"use strict";function b(a,b,c,d){this.trigger=a,this.action=c,this.plugin=b,this._paramMappings={},this.mergeParams(d)}var c=a.plugin.ParamMapping;b.prototype.mergeParams=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b];this._paramMappings[c.getKeyName()]=c}},b.prototype.getParams=function(){var a=[];for(var b in this._paramMappings)this._paramMappings.hasOwnProperty(b)&&a.push(this._paramMappings[b]);return a},b.prototype.addParam=function(a){this._paramMappings[a.getKeyName()]=a},b.prototype.removeParam=function(a,b){var d=new c(a,b);this._paramMappings.hasOwnProperty(d.getKeyName())&&delete this._paramMappings[d.getKeyName()]},a.plugin.Behaviour=b}(d),function(a){"use strict";function b(a,b,d){this._pluginName=a,this._key=b,this._paramName=d||a+c.SEPARATOR+b}var c=a.radio.Channel;b.prototype.getPluginName=function(){return this._pluginName},b.prototype.getKey=function(){return this._key},b.prototype.getKeyName=function(){return this._pluginName+c.SEPARATOR+this._key},b.prototype.getParamName=function(){return this._paramName},a.plugin.ParamMapping=b}(d),function(a){"use strict";function b(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._plugins={},this._behaviours={},this._radio=new d(this._logger),this._dataChannel=this._radio.channel(g),this._ctrlChannel=this._radio.channel(h)}var c=a.Event,d=a.radio.Radio,e=a.radio.Channel,f=a.plugin.Behaviour;b.ERROR="error",b.prototype.addPlugin=function(a){var b=a.getName();this._plugins[b]&&this._logger.warn(i,"#addPlugin > Replacing plugin: "+b),this._plugins[b]=a,a.bootstrap(this)},b.prototype.setupPlugins=function(){for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].setup()},b.prototype.pluginExists=function(a){return!!this._plugins[a]},b.prototype.isPluginInitialized=function(a){return this._plugins[a]&&this._plugins[a].isInitialized()},b.prototype.on=function(a,b,c,d){this._dataChannel.on(a+e.SEPARATOR+b,c,d)},b.prototype.off=function(a,b,c,d){var f=a&&b?a+e.SEPARATOR+b:null;this._dataChannel.off(f,c,d)},b.prototype.trigger=function(a){var b=a.name,c=this._behaviours[b];if(c){var d,e,f,g,h,i={},j={};for(d=0;d<c.length;d++)if(f=c[d],g=f.getParams())for(e=0;e<g.length;e++)h=g[e],i[h.getPluginName()]=i[h.getPluginName()]||[],h.key in i[h.getPluginName()]||i[h.getPluginName()].push(h.getKey());for(var k in i)i.hasOwnProperty(k)&&(j[k]=this.request(k,i[k]));for(d=0;d<c.length;d++){f=c[d];var l={_behaviour:f,_eventData:a.data||{}};if(g=f.getParams()){for(e=0;e<g.length;e++)h=g[e],l[h.getParamName()]=j[h.getPluginName()]?j[h.getPluginName()][h.getKey()]:null;this.command(f.plugin.getName(),f.action,l)}}}this._dataChannel.trigger(a)},b.prototype.request=function(a,b){var c=this._plugins[a];return c&&b&&0!=b.length?c.resolveData(b):null},b.prototype.raise=function(a){this._errorInfo=a;var d=new c(b.ERROR,a);this._ctrlChannel.trigger(d)},b.prototype.getErrorInfo=function(){return this._errorInfo},b.prototype.destroy=function(){this._radio.shutdown();for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].destroy()},b.prototype.comply=function(a,b,c){this._dataChannel.comply(a.getName()+e.SEPARATOR+b,c,a)},b.prototype.command=function(a,b,c){this._dataChannel.command(a+e.SEPARATOR+b,c)},b.prototype.registerBehaviour=function(a,b,c,d){var e=a.getName(),g=new f(a,b,c,d);this._behaviours[e]=this._behaviours[e]||[],this._behaviours[e].push(g)};var g="data_channel",h="ctrl_channel",i="plugin::PluginManager";a.plugin.PluginManager=b}(d),function(a,b){"use strict";function c(a){this._name=a,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this._logTag="plugin::"+this.getName(),this._logger=new d}var d=a.Logger,e=a.Trigger,f=a.Event,g=b.ErrorInfo;c.INITIALIZED="initialized",c.prototype.configure=function(a){},c.prototype.bootstrap=function(a){this._pluginManager=a,this._isDestroyed&&this._pluginManager.raise(new g("Invalid state.","Plugin already destroyed."))},c.prototype.setup=function(){this._trigger(c.INITIALIZED),this._isInitialized=!0},c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},c.prototype.enable=function(){this._isEnabled=!0,this._enabled()},c.prototype.disable=function(){this._isEnabled=!1,this._disabled()},c.prototype.getName=function(){return this._name},c.prototype.getLogger=function(){return this._logger},c.prototype.isInitialized=function(){return this._isInitialized},c.prototype.resolveData=function(a){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,a);var b=null;if(a)for(var c=0;c<a.length;c++){var d=a[c];this._dataResolver.hasOwnProperty(d)&&(b=b||{},"function"==typeof this._dataResolver[d]?b[d]=this._dataResolver[d].call(this):b[d]=this._dataResolver[d])}return b},c.prototype.toString=function(){return"<plugin: "+this._name+">"},c.prototype._enabled=function(){},c.prototype._disabled=function(){},c.prototype._teardown=function(){},c.prototype._canProcess=function(){return this._isEnabled?this._isDestroyed?(this._logger.error(this._logTag,"Plugin destroyed."),!1):!0:(this._logger.error(this._logTag,"Plugin disabled."),!1)},c.prototype._trigger=function(a,b){var c=f.createFromTrigger(new e(this.getName(),a));c.data=b,this._pluginManager.trigger(c)},a.plugin.BasePlugin=c}(d,c),function(a){"use strict";function b(a,b,c){this.name=a,this.interval=b,this.isActive=!1,this.repeatCount="undefined"!=typeof c?c:e,this._nextTickTimestamp=0,this.reset()}function c(a,b){if(!a)throw new Error("Reference to the ClockService object cannot be NULL");if(this._service=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._isDestroyed=!1,this._timers={};var c=this;this._clock=window.setInterval(function(){c._onTick()},1e3*f)}b.prototype.reset=function(){this.tick=0,this._createdTimestamp=(new Date).getTime(),this._updateNextTickTimestamp()},b.prototype.shouldTick=function(){var a=(new Date).getTime();return a>this._nextTickTimestamp-f/2?(this.tick++,this._updateNextTickTimestamp(),!0):!1},b.prototype._updateNextTickTimestamp=function(){this._nextTickTimestamp=this._createdTimestamp+1e3*this.interval*(this.tick+1)},c.prototype.createTimer=function(a,c,d){this._timers[a]=new b(a,c,d)},c.prototype.destroyTimer=function(a){delete this._timers[a]},c.prototype.resumeTimer=function(a,b){b="undefined"!=typeof b?b:!1,this._logger.debug(d,"#resumeTimer(name="+a+", reset="+b+")");var c=this._timers[a];c&&(c.isActive=!0,b&&c.reset())},c.prototype.pauseTimer=function(a,b){b="undefined"!=typeof b?b:!1,this._logger.debug(d,"#pauseTimer(name="+a+", reset="+b+")");var c=this._timers[a];c&&(c.isActive=!1,b&&c.reset())},c.prototype.isTimerPaused=function(a){var b=this._timers[a];return b?!b.isActive:!1},c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))},c.prototype._onTick=function(){for(var a in this._timers)if(this._timers.hasOwnProperty(a)){var b=this._timers[a];b.isActive&&b.shouldTick()&&(b.interval>1&&this._logger.debug(d,"#_onTick() > "+b.name+"("+b.tick+" | "+b.repeatCount+")"),0!=b.repeatCount?(this._service.onTick(b.name,b.interval,b.tick),b.repeatCount!=e&&b.repeatCount--):this.destroyTimer(b.name))}};var d="service.clock::TimerManager",e=-1,f=.25;a.clock.TimerDescriptor=b,a.clock.TimerManager=c}(e),function(a,b,c){"use strict";function d(a){if(d.__super__.constructor.call(this,h),!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._timerManager=new e(this,this._logger),this._setupDataResolver()}var e=c.clock.TimerManager,f=b.StringUtils,g=a.plugin.BasePlugin;a.extend(d,g),d.prototype.bootstrap=function(a){d.__super__.bootstrap.call(this,a),this._pluginManager.comply(this,i,this._cmdCreate),this._pluginManager.comply(this,k,this._cmdResume),this._pluginManager.comply(this,j,this._cmdPause),this._pluginManager.comply(this,l,this._cmdDestroy)},d.prototype._teardown=function(){this._timerManager.destroy()},d.prototype._cmdCreate=function(a){var b=a[o]||s;this._timerManager.createTimer(a[m],a[n],b)},d.prototype._cmdPause=function(a){this._timerManager.pauseTimer(a[m],!!a[q])},d.prototype._cmdResume=function(a){this._timerManager.resumeTimer(a[m],!!a[q])},d.prototype._cmdDestroy=function(a){this._timerManager.destroyTimer(a[m])},d.prototype.onTick=function(a,b,c){a+=".tick";var d={};d[m]=a,d[n]=b,d[p]=c,this._trigger(a,d)},d.prototype._setupDataResolver=function(){var a={},b=this._timerManager;a[r]=function(a){return b.isTimerPaused(a)},this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var e=b[d];if(c=c||{},f.startsWith(e,r)){var g=e.split(r+".");g.length>0&&(c[e]=a[r].call(this,g[1]))}}return c}};var h="service.clock",i="create",j="pause",k="resume",l="destroy",m="name",n="interval",o="repeat_count",p="tick",q="reset",r="is_paused",s=-1;c.clock.ClockService=d}(d,b,e),function(a,b,c){"use strict";function d(a,b){if(this._logger=new e,this._pluginManager=new f(this._logger),this._pluginManager.addPlugin(new g(this._logger)),b)for(var c=0;c<b.length;c++)this._pluginManager.addPlugin(b[c]);this._pluginManager.setupPlugins(),this._isDestroyed=!1}var e=a.Logger,f=a.plugin.PluginManager,g=b.clock.ClockService;d.prototype.configure=function(a){if(!a)throw new Error("Configuration object cannot be NULL.");a.debugLogging?this._logger.enable():this._logger.disable(),this._isDestroyed&&this._logger.error(h,"Instance is destroyed.")},d.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var h="Heartbeat";c.Heartbeat=d}(d,e,c),a.ADB||(a.ADB={}),a.ADB.core||(a.ADB.core=d),a.ADB.va||(a.ADB.va=c),a.ADB.va.utils||(a.ADB.va.utils=b),a.ADB.va.plugins||(a.ADB.va.plugins={})}(this);

// VideoPlayerPlugin
!function(a){if("undefined"==typeof b)var b={};!function(a){"use strict";var b={};b.ASSET_TYPE_VOD="vod",b.ASSET_TYPE_LIVE="live",b.ASSET_TYPE_LINEAR="linear",a.AssetType=b}(b),function(a){"use strict";function b(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}b.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime},a.AdBreakInfo=b}(b),function(a){"use strict";function b(){this.id=null,this.name=null,this.length=null,this.position=null}b.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position},a.AdInfo=b}(b),function(a){"use strict";function b(){this.name=null,this.length=null,this.position=null,this.startTime=null}b.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime},a.ChapterInfo=b}(b),function(a){"use strict";function b(){this.bitrate=null,this.fps=null,this.droppedFrames=null,this.startupTime=null}b.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime},a.QoSInfo=b}(b),function(a){"use strict";function b(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.streamType=null,this.resumed=!1}b.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", streamType="+this.streamType+", resumed="+this.resumed},a.VideoInfo=b}(b),function(a){"use strict";function b(){this.debugLogging=!1}a.VideoPlayerPluginConfig=b}(b),function(a){"use strict";function b(){}b.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getAdBreakInfo=function(){return null},b.prototype.getAdInfo=function(){return null},b.prototype.getChapterInfo=function(){return null},b.prototype.getQoSInfo=function(){return null},a.VideoPlayerPluginDelegate=b}(b),function(a,b){"use strict";function c(a){if(c.__super__.constructor.call(this,h),!a)throw new Error("PlayerPlugin delegate cannot be NULL.");this._delegate=a,this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._isTrackingAd=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._videoIdle=!1,this._setupDataResolver()}var d=a.plugin.ParamMapping,e=a.Trigger,f=a.plugin.BasePlugin,g=b.VideoPlayerPluginConfig;a.extend(c,f),c.prototype.configure=function(a){if(!a)throw new Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof g))throw new Error("Expected config data to be instance of VideoPlayerPluginConfig.");a.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure(debugLogging="+a.debugLogging+")")},c.prototype.bootstrap=function(a){c.__super__.bootstrap.call(this,a),this._registerCommands(),this._registerBehaviours()},c.prototype._cmdVideoIdleStart=function(a){this._logger.info(this._logTag,"#_cmdVideoIdleStart()"),this._videoIdle=!0},c.prototype._cmdVideoIdleResume=function(a){this._logger.info(this._logTag,"#_cmdVideoIdleResume()"),this._videoIdle&&(this._trigger(o),this._trigger(p),a.isInChapter&&this._trigger(A),a.isInAd&&(this._trigger(u),this._isTrackingAd=!0)),this._videoIdle=!1},c.prototype.trackSessionStart=function(){if(this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session.");if(this._isTrackingSessionStarted)return void this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started.");this._trigger(o),this._isTrackingSessionStarted=!0;var a=this._dataResolver(["video.resumed"]);a.hasOwnProperty("video.resumed")&&a["video.resumed"]&&this._trigger(p)}},c.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()"),this._canProcess()&&(this._trigger(m),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)},c.prototype.trackVideoUnload=function(){if(this._logger.info(this._logTag,"#trackVideoUnload()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session.");this._stopPlayheadTimer(),this._trigger(n),this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._videoIdle=!1}},c.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()"),this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&(this._trigger(s),this._startPlayheadTimer())},c.prototype.trackPause=function(){if(this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")){this._stopPlayheadTimer();var a={};a[H]=!1,this._trigger(t,a)}},c.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&(this._stopPlayheadTimer(),this._trigger(w))},c.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&(this._trigger(x),this._startPlayheadTimer())},c.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&(this._stopPlayheadTimer(),this._trigger(y))},c.prototype.trackSeekComplete=function(){if(this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekComplete")){this._trigger(z),this._startPlayheadTimer();var a=this._dataResolver(["ad.isInAd"]);this._isTrackingAd=a.hasOwnProperty("ad.isInAd")&&a["ad.isInAd"]}},c.prototype.trackComplete=function(a){if(this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")){var b={};b[G]=a,this._stopPlayheadTimer(),this._trigger(q,b)}},c.prototype.trackTimedMetadata=function(a){this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(r,a)},c.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()"),this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(A)},c.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"trackChapterComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&this._trigger(B)},c.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&(this._trigger(u),this._isTrackingAd=!0)},c.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdComplete")&&(this._trigger(v),this._isTrackingAd=!1)},c.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()"),this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(C)},c.prototype.trackVideoPlayerError=function(a){if(this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+a+")"),this._startSessionIfNeeded("trackVideoPlayerError")){var b={};b[I]=l,b[J]=a,this._trigger(D,b)}},c.prototype.trackApplicationError=function(a){if(this._logger.info(this._logTag,"#trackApplicationError(errorId="+a+")"),this._startSessionIfNeeded("trackApplicationError")){var b={};b[I]=k,b[J]=a,this._trigger(D,b)}},c.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart),this._pluginManager.comply(this,"handleVideoIdleResume",this._cmdVideoIdleResume)},c.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new e(j,E),this,"handleVideoIdleStart"),this._pluginManager.registerBehaviour(new e(j,F),this,"handleVideoIdleResume",[new d(i,"ad.isInAd","isInAd"),new d(i,"chapter.isInChapter","isInChapter")])},c.prototype._setupDataResolver=function(){function a(){return g.video?g.video:(g.video=h._delegate.getVideoInfo(),h._logger.info(h._logTag,"Data from delegate > VideoInfo: "+g.video),g.video)}function b(){return g.ad?g.ad:(g.ad=h._delegate.getAdInfo(),h._logger.info(h._logTag,"Data from delegate > AdInfo: "+g.ad),g.ad)}function c(){return g.pod?g.pod:(g.pod=h._delegate.getAdBreakInfo(),h._logger.info(h._logTag,"Data from delegate > AdBreakInfo: "+g.pod),g.pod)}function d(){return g.chapter?g.chapter:(g.chapter=h._delegate.getChapterInfo(),h._logger.info(h._logTag,"Data from delegate > ChapterInfo: "+g.chapter),g.chapter)}function e(){return g.qos?g.qos:(g.qos=h._delegate.getQoSInfo(),h._logger.info(h._logTag,"Data from delegate > QoSInfo: "+g.qos),g.qos)}var f={},g={},h=this;f["video.id"]=function(){var b=a(),c=b?b.id:null;return h._logger.debug(h._logTag,"Resolving video.id: "+c),c},f["video.name"]=function(){var b=a(),c=b?b.name:null;return h._logger.debug(h._logTag,"Resolving video.name: "+c),c},f["video.length"]=function(){var b=a(),c=b?b.length:NaN;return h._logger.debug(h._logTag,"Resolving video.length: "+c),c},f["video.playerName"]=function(){var b=a(),c=b?b.playerName:null;return h._logger.debug(h._logTag,"Resolving video.playerName: "+c),c},f["video.streamType"]=function(){var b=a(),c=b?b.streamType:null;return h._logger.debug(h._logTag,"Resolving video.streamType: "+c),c},f["video.playhead"]=function(){var b=a(),c=b?b.playhead:NaN;return h._logger.debug(h._logTag,"Resolving video.playhead: "+c),c},f["video.resumed"]=function(){var b=a(),c=b?b.resumed:!1;return h._logger.debug(h._logTag,"Resolving video.resumed: "+c),c},f["video.playheadStalled"]=function(){return this._playheadStalled},f["pod.name"]=function(){var a=c(),b=a?a.name:null;return h._logger.debug(h._logTag,"Resolving pod.name: "+b),b},f["pod.playerName"]=function(){var a=c(),b=a?a.playerName:null;return h._logger.debug(h._logTag,"Resolving pod.playerName: "+b),b},f["pod.position"]=function(){var a=c(),b=a?a.position:NaN;return h._logger.debug(h._logTag,"Resolving pod.position: "+b),b},f["pod.startTime"]=function(){var a=c(),b=a?a.startTime:NaN;return h._logger.debug(h._logTag,"Resolving pod.startTime: "+b),b},f["ad.isInAd"]=function(){var a=b(),c=null!=a;return h._logger.debug(h._logTag,"Resolving ad.isInAd: "+c),c},f["ad.isInAdBreak"]=function(){var a=c(),b=null!=a;return h._logger.debug(h._logTag,"Resolving ad.isInAdBreak: "+b),b},f["ad.id"]=function(){var a=b(),c=a?a.id:null;return h._logger.debug(h._logTag,"Resolving ad.id: "+c),c},f["ad.name"]=function(){var a=b(),c=a?a.name:null;return h._logger.debug(h._logTag,"Resolving ad.name: "+c),c},f["ad.length"]=function(){var a=b(),c=a?a.length:NaN;return h._logger.debug(h._logTag,"Resolving ad.length: "+c),c},f["ad.position"]=function(){var a=b(),c=a?a.position:NaN;return h._logger.debug(h._logTag,"Resolving ad.position: "+c),c},f["chapter.isInChapter"]=function(){var a=d(),b=null!=a;return h._logger.debug(h._logTag,"Resolving chapter.isInChapter: "+b),b},f["chapter.name"]=function(){var a=d(),b=a?a.name:null;return h._logger.debug(h._logTag,"Resolving chapter.name: "+b),b},f["chapter.length"]=function(){var a=d(),b=a?a.length:NaN;return h._logger.debug(h._logTag,"Resolving chapter.length: "+b),b},f["chapter.position"]=function(){var a=d(),b=a?a.position:NaN;return h._logger.debug(h._logTag,"Resolving chapter.position: "+b),b},f["chapter.startTime"]=function(){var a=d(),b=a?a.startTime:NaN;return h._logger.debug(h._logTag,"Resolving chapter.startTime: "+b),b},f["qos.bitrate"]=function(){var a=e(),b=a?a.bitrate:NaN;return h._logger.debug(h._logTag,"Resolving qos.bitrate: "+b),b},f["qos.fps"]=function(){var a=e(),b=a?a.fps:NaN;return h._logger.debug(h._logTag,"Resolving qos.fps: "+b),b},f["qos.droppedFrames"]=function(){var a=e(),b=a?a.droppedFrames:NaN;return h._logger.debug(h._logTag,"Resolving qos.droppedFrames: "+b),b},f["qos.startupTime"]=function(){var a=e(),b=a?1e3*a.startupTime:NaN;return h._logger.debug(h._logTag,"Resolving qos.startupTime: "+b),b},this._dataResolver=function(a){if(!a||0==a.length)return null;g={};for(var b=null,c=0;c<a.length;c++){var d=a[c];b=b||{},b[d]=f.hasOwnProperty(d)?f[d].call(this):null}return b}},c.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(t)))},c.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,this._playheadStalled&&(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this.trackPlay()))},c.prototype._startPlayheadTimer=function(){var a=this;this._playheadTimer||(this._playheadTimer=setInterval(function(){if(a._canProcess()){var b=a._dataResolver(["ad.isInAd","video.playhead"]);if(a._isTrackingAd)a._playheadStalled&&a._trackExitStall(),b.hasOwnProperty("ad.isInAd")&&!b["ad.isInAd"]&&(a._isTrackingAd=!1);else{var c=b["video.playhead"];c!=a._previousPlayhead?a._trackExitStall():a._previousPlayhead>=0&&c==a._previousPlayhead&&(a._stalledPlayheadCount++,a._stalledPlayheadCount==L&&a._trackPlayheadStall()),a._previousPlayhead=c}}},K))},c.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null),this._trackExitStall()},c.prototype._startSessionIfNeeded=function(a){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+a+"() > Tracking session auto-start."),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+a+"() > No active tracking session."),!1)};var h="player",i=h,j="adobe-heartbeat",k="sourceErrorExternal",l="sourceErrorSDK",m="video_load",n="video_unload",o="video_start",p="video_resume",q="video_complete",r="timed_metadata",s="play",t="pause",u="ad_start",v="ad_complete",w="buffer_start",x="buffer_complete",y="seek_start",z="seek_complete",A="chapter_start",B="chapter_complete",C="bitrate_change",D="track_error",E="video_idle_start",F="video_idle_resume",G="callback",H="filter_report",I="source",J="error_id",K=1001,L=2;b.VideoPlayerPlugin=c}(a.ADB.core,b),a.ADB.va.plugins.videoplayer||(a.ADB.va.plugins.videoplayer=b)}(this);

// AdobeHeartbeatPlugin
!function(a){if("undefined"==typeof b)var b={};b.clock||(b.clock={}),b.context||(b.context={}),b.filter||(b.filter={}),b.model||(b.model={}),b.network||(b.network={}),function(a,b){"use strict";function c(a,b,c,d,e){if(!b)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=b,!a)throw new Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=a,!e)throw new Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+c,this._logger=e,this._isDestroyed=!1,this._createTimer(c,d),this._installHandlers()}var d=a.Event;c.KEY_NAME="name",c.KEY_INTERVAL="interval",c.KEY_RESET="reset",c.prototype.resume=function(a){this._logger.debug(this._logTag,"Starting timer: "+this._name);var b={};b[c.KEY_NAME]=e+"."+this._name,b[c.KEY_RESET]=a,this._pluginManager.command(f,i,b)},c.prototype.pause=function(a){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var b={};b[c.KEY_NAME]=e+"."+this._name,b[c.KEY_RESET]=a,this._pluginManager.command(f,h,b)},c.prototype.destroy=function(){if(!this._isDestroyed){this._isDestroyed=!0,this._uninstallHandlers();var a={};a[c.KEY_NAME]=e+"."+this._name,this._pluginManager.command(f,j,a)}},c.prototype.setInterval=function(a){var b=k+"."+e+"."+this._name,c=this._pluginManager.request(f,[b])[b];this.pause(!0),this._createTimer(this._name,a),c||this.resume(!0)},c.prototype._cmdResume=function(a){var b=!1;null!=a&&a.hasOwnProperty(c.KEY_RESET)&&(b=a[c.KEY_RESET]),this.resume(b)},c.prototype._cmdPause=function(a){var b=!1;null!=a&&a.hasOwnProperty(c.KEY_RESET)&&(b=a[c.KEY_RESET]),this.pause(b)},c.prototype._onTick=function(a,b){this._channel.trigger(new d("clock:"+this._name+".tick",b))},c.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this),this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this),this._pluginManager.on(f,e+"."+this._name+".tick",this._onTick,this)},c.prototype._uninstallHandlers=function(){this._channel.off(null,null,this),this._pluginManager.off(null,null,null,this)},c.prototype._createTimer=function(a,b){this._name=a,this._interval=b;var d={};d[c.KEY_NAME]=e+"."+this._name,d[c.KEY_INTERVAL]=this._interval,this._pluginManager.command(f,g,d)};var e="heartbeat",f="service.clock",g="create",h="pause",i="resume",j="destroy",k="is_paused";b.clock.Timer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,f,h,d)}var d=a.Event,e=b.clock.Timer;a.extend(c,e),c.prototype._onCheckStatusComplete=function(a){var b=a.data[l];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+b+")"),b){if(b==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");b>g?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+b),this.setInterval(g)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+b),this.setInterval(b))}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(h)},c.prototype._getSettings=function(a){this._logger.debug(this._logTag,"#_getSettings()"),this._channel.trigger(new d(i))},c.prototype._installHandlers=function(){c.__super__._installHandlers.call(this),this._channel.on(j,this._getSettings,this),this._channel.on(k,this._onCheckStatusComplete,this),this._channel.reply(l,function(){return this._interval},this)};var f="check_status",g=600,h=60,i="clock:check_status.tick",j="clock:check_status.get_settings",k="net:check_status_complete",l="check_status_interval";b.clock.CheckStatusTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,e,f,d)}var d=b.clock.Timer;a.extend(c,d),c.prototype._onCheckStatusComplete=function(a){var b=a.data[g];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+b+")"),b){if(b==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+b),this.setInterval(b)}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(f)},c.prototype._installHandlers=function(){c.__super__._installHandlers.call(this),this._channel.on(h,this._onCheckStatusComplete,this),this._channel.reply(g,function(){return this._interval},this)};var e="reporting",f=10,g="reporting_interval",h="net:check_status_complete";b.clock.ReportingTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,e,f,d)}var d=b.clock.Timer;a.extend(c,d);var e="idle",f=1800;b.clock.IdleTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,e,f,d)}var d=b.clock.Timer;a.extend(c,d);var e="flush_filter",f=.25;b.clock.FlushFilterTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,c){if(!a)throw new Error("Reference to the pluginManager object cannot be NULL");if(!b)throw new Error("Reference to the channel object cannot be NULL");if(!c)throw new Error("Reference to the logger object cannot be NULL");this._isDestroyed=!1,this._reportingTimer=new f(a,b,c),this._checkStatusTimer=new d(a,b,c),this._flushFilterTimer=new e(a,b,c),this._idleTimer=new g(a,b,c)}var d=b.clock.CheckStatusTimer,e=b.clock.FlushFilterTimer,f=b.clock.ReportingTimer,g=b.clock.IdleTimer;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())},b.clock.Clock=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){this.value=a,this.hint=b}function d(a){this.realm=a,this.data={}}c.HINT_SHORT="short",d.prototype.setField=function(a,b,d){this.data[a]=new c(b,d)},d.prototype._createAccessor=function(a,b,c){var d=this;return function(){return arguments.length&&(d[a]=arguments[0],d.setField(b,arguments[0],c)),d[a]}},b.model.Dao=d,b.model.DaoField=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.adId(a.adId()),this.sid(a.sid()),this.resolver(a.resolver()),this.podId(a.podId()),this.podPosition(a.podPosition()),this.podOffset(a.podOffset()),this.podName(a.podName()),this.adLength(a.adLength()),this.adName(a.adName())}else this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName("")}var d=b.model.Dao;a.extend(c,d),b.model.AdDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",e.HINT_SHORT),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.reportSuiteId(a.reportSuiteId()),this.trackingServer(a.trackingServer()),this.ssl(a.ssl())}else this.reportSuiteId(""),this.trackingServer(""),this.ssl(0)}var d=b.model.Dao,e=b.model.DaoField;a.extend(c,d),b.model.AdobeAnalyticsDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.id(a.id()),this.sid(a.sid()),this.name(a.name()),this.position(a.position()),this.length(a.length()),this.offset(a.offset())}else this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0)}var d=b.model.Dao;a.extend(c,d),b.model.ChapterDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type()),this.name(a.name()),this.videoId(a.videoId()),this.publisher(a.publisher()),this.length(a.length());var b=a.adData()?new e(a.adData()):null;this.adData(b);var d=a.chapterData()?new f(a.chapterData()):null;this.chapterData(d)}else this.type(""),this.name(""),this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null)}var d=b.model.Dao,e=b.model.AdDao,f=b.model.ChapterDao;a.extend(c,d),c.TYPE_AD="ad",c.TYPE_MAIN_CONTENT="main",b.model.AssetDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration","duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type()),this.duration(a.duration()),this.playhead(a.playhead()),this.id(a.id()),this.source(a.source()),this.ts(a.ts()),this.prevTs(a.prevTs())}else this.type(""),this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1)}var d=b.model.Dao;a.extend(c,d),c.EVENT_TYPE_AA_START="aa_start",c.EVENT_TYPE_AA_AD_START="aa_ad_start",c.EVENT_TYPE_START="start",c.EVENT_TYPE_RESUME="resume",c.EVENT_TYPE_CHAPTER_START="chapter_start",c.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",c.EVENT_TYPE_PLAY="play",c.EVENT_TYPE_PAUSE="pause",c.EVENT_TYPE_STALL="stall",c.EVENT_TYPE_BUFFER="buffer",c.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",c.EVENT_TYPE_ERROR="error",c.EVENT_TYPE_COMPLETE="complete",b.model.EventDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.bitrate(a.bitrate()),this.fps(a.fps()),this.droppedFrames(a.droppedFrames()),this.startupTime(a.startupTime()),this.isStartupTimeOverridden=a.isStartupTimeOverridden}else this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1}var d=b.model.Dao;a.extend(c,d),b.model.QoSDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.ovp(a.ovp()),this.sdk(a.sdk()),this.channel(a.channel()),this.playerName(a.playerName()),this.libVersion(a.libVersion()),this.apiLevel(a.apiLevel())}else this.ovp(e),this.sdk(e),this.channel(e),this.playerName(""),this.libVersion(""),this.apiLevel(0)}var d=b.model.Dao;a.extend(c,d);var e="unknown";b.model.ServiceProviderDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.sessionId(a.sessionId())}else this.sessionId(null)}var d=b.model.Dao;a.extend(c,d),b.model.SessionDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.type=this._createAccessor("_type","type",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type())}else this.type(null)}var d=b.model.Dao;a.extend(c,d),b.model.StreamDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.analyticsVisitorId(a.analyticsVisitorId()),this.marketingCloudVisitorId(a.marketingCloudVisitorId()),this.visitorId(a.visitorId())}else this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null)}var d=b.model.Dao;a.extend(c,d),b.model.UserDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"aam"),this.audienceManagerBlob=this._createAccessor("_audienceManagerBlob","blob",null),this.audienceManagerLocationHint=this._createAccessor("_audienceManagerLocationHint","loc_hint",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.audienceManagerBlob(a.audienceManagerBlob()),this.audienceManagerLocationHint(a.audienceManagerLocationHint())}else this.audienceManagerBlob(null),this.audienceManagerLocationHint(null)}var d=b.model.Dao;a.extend(c,d),b.model.AudienceManagerDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,c,i,j){this.eventData=new e,this.eventData.type(b),this.eventData.duration(0),this.eventData.ts((new Date).getTime()),this.eventData.playhead(c),this.assetData=new f(a._assetData),this.streamData=new g(a._streamData),this.qosData=new h(a._qosData),this.cuserData=d.clone(a._cuserData),this.meta=i,this.callback=j,this.filterReport=!0}var d=a.ObjectUtils,e=b.model.EventDao,f=b.model.AssetDao,g=b.model.StreamDao,h=b.model.QoSDao;b.model.TrackItem=c}(a.ADB.va.utils,b),function(a,b){"use strict";function c(a,b,c,i,j,k){this.adobeAnalyticsData=a,this.userData=b,this.aamData=c,this.serviceProviderData=i,this.sessionData=j,this.eventData=new e(k.eventData),this.assetData=new f(k.assetData),this.streamData=new g(k.streamData),this.qosData=new h(k.qosData),this.cuserData=d.clone(k.cuserData),this.meta=d.clone(k.meta),this.callback=k.callback,this.filterReport=k.filterReport}var d=a.ObjectUtils,e=b.model.EventDao,f=b.model.AssetDao,g=b.model.StreamDao,h=b.model.QoSDao;b.model.CUserDao;b.model.Report=c}(a.ADB.va.utils,b),function(a){"use strict";function b(){}b.prototype.serializeReport=function(a){},b.prototype.serializeDao=function(a){},b.prototype.serializeMap=function(a){},b.prototype.serializeNumber=function(a,b,c,d){},b.prototype.serializeString=function(a,b,c,d){},a.model.ISerializer=b}(b),function(a,b){"use strict";function c(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a}var d=b.model.Dao,e=b.model.DaoField,f=b.model.ISerializer;a.extend(c,f),c.prototype.serializeReport=function(a){var b=[];return b.push(this.serializeDao(a.adobeAnalyticsData)),b.push(this.serializeDao(a.userData)),b.push(this.serializeDao(a.aamData)),b.push(this.serializeMap(a.cuserData,"cuser")),b.push(this.serializeDao(a.serviceProviderData)),b.push(this.serializeDao(a.sessionData)),b.push(this.serializeDao(a.eventData)),b.push(this.serializeDao(a.assetData)),b.push(this.serializeDao(a.streamData)),b.push(this.serializeDao(a.qosData)),b.push(this.serializeMap(a.meta,"meta")),{serializedOutput:b.filter(function(a){return!!a}).join("&"),callback:a.callback}},c.prototype.serializeDao=function(a){var b=this._processDao(a);return b.filter(function(a){return!!a}).join("&")},c.prototype.serializeMap=function(a,b){var c=[],d=b?b:"meta";for(var e in a)a.hasOwnProperty(e)&&a[e]&&c.push("s:"+d+":"+e+"="+window.encodeURIComponent(a[e]));return c.join("&")},c.prototype.serializeNumber=function(a,b,c,d){var f=h;return null==b||isNaN(b)?null:(d===e.HINT_SHORT&&(f=i),f+":"+c+":"+a+"="+Math.floor(b))},c.prototype.serializeString=function(a,b,c,d){return b?j+":"+c+":"+a+"="+window.encodeURIComponent(b):null},c.prototype._processDao=function(a){var b=[];for(var c in a.data)if(a.data.hasOwnProperty(c)){var e=a.data[c],f=e.value,h=e.hint,i=null,j=a.realm;if(null==f)continue;"number"==typeof f?i=this.serializeNumber(c,f,j,h):"string"==typeof f?i=this.serializeString(c,f,j,h):f instanceof d?i=this.serializeDao(f):this._logger.warn(g,"#_processDao() > Unable to serialize DAO. Field: "+c+". Value: "+f+"."),i&&b.push(i)}return b};var g="ah::QuerystringSerializer",h="l",i="h",j="s";b.model.QuerystringSerializer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){if(!a)throw new Error("Reference to the data object cannot be NULL");if(this._data=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b}c.prototype.parse=function(){var a,b,c,i,j;if(window.DOMParser){var k=new window.DOMParser;j=k.parseFromString(this._data,"text/xml")}else j=new window.ActiveXObject("Microsoft.XMLDOM"),j.async=!1,j.loadXML(this.data);var l;l=parseInt(j.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10),l&&(a=l),l=parseInt(j.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10),l&&(b=l),l=parseInt(j.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10),l&&(c=1==l),j.getElementsByTagName("nielsenEnabled")[0]?(l=parseInt(j.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10),i=1==l):i=!0;var m={};return m[e]=a,m[f]=b,m[g]=c,m[h]=i,this._logger.debug(d,"#parse() > Obtained configuration settings."),m};var d="ah::SettingsParser",e="reporting_interval",f="check_status_interval",g="track_external_errors",h="nielsen_enabled";b.network.SettingsParser=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){if(this._trackingServer=null,this._checkStatusServer=null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._quietMode=!1,this._visitorOptedOut=!1,this._prevReportSent=null,!a)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._serializer=new i(b),this._installEventListeners()}var d=a.Event,e=a.URLRequestMethod,f=a.URLRequest,g=a.URLLoader,h=b.network.SettingsParser,i=b.model.QuerystringSerializer;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(j,"#destroy()"),this._uninstallEventListeners())},c.prototype._onApiConfig=function(a){var b=a.data;this._logger.debug(j,"#_onApiConfig(sb_server="+b[k]+", check_status_server="+b[l]+", publisher="+b[m]+", quiet_mode="+b[n]+", ssl="+b[o]+")"),this._trackingServer=this._updateRequestProtocol(b[k],b[o]),this._checkStatusServer=this._updateRequestProtocol(b[l],b[o]),this._publisher=b[m],this._quietMode=b[n],this._isConfigured=!0},c.prototype._onUpdateVisitorOptOut=function(a){var b=a.data;this._logger.debug(j,"#_onUpdateVisitorOptOut(visitor_opt_out="+b[q]+")"),this._visitorOptedOut=b[q]},c.prototype._onFilterReportAvailable=function(a){var b=a.data;if(!this._isConfigured)return void this._logger.warn(j,"#_onFilterReportAvailable() > Unable to send request: not configured.");var c=b[p],h=this._serializer.serializeReport(c),i=this._trackingServer+"/?"+h.serializedOutput;if(this._prevReportSent&&this._prevReportSent.eventData&&c.eventData&&this._prevReportSent.eventData.playhead==c.eventData.playhead&&this._prevReportSent.eventData.ts==c.eventData.ts&&this._prevReportSent.eventData.prevTs==c.eventData.prevTs&&this._prevReportSent.eventData.type==c.eventData.type)return void this._logger.debug(j,"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\n"+i);this._prevReportSent=c;var k=new f(i,e.GET);this._logger.debug(j,"#_onFilterReportAvailable() > "+k.url);var l=this,m=function(a){o.close(),h.callback&&h.callback.call(null)},n=function(a){o.close(),l._logger.warn(j,"#_onFilterReportAvailable() > Failed to send heartbeat report."),h.callback&&h.callback.call(null)};if(!this._quietMode&&!this._visitorOptedOut){var o=new g;o.addEventListener(d.SUCCESS,m,this),o.addEventListener(d.ERROR,n,this),o.load(k)}},c.prototype._onClockCheckStatusTick=function(a){function b(a){if(a.data){var b=new h(a.data.response,i._logger),c=b.parse();c?i._channel.trigger(new d(v,c)):i._logger.warn(j,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")}n.close()}function c(a){i._logger.warn(j,"#_onClockCheckStatusTick() > Failed to obtain the config. settings."),n.close()}if(!this._isConfigured)return void this._logger.warn(j,"#_onClockCheckStatusTick() > Unable to send request: not configured.");if(!this._publisher)return void this._logger.warn(j,"#_onClockCheckStatusTick() > Publisher is NULL.");var i=this,k=this._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),l=this._checkStatusServer+k+".xml?r="+(new Date).getTime(),m=new f(l,e.GET),n=new g;n.addEventListener(d.SUCCESS,b,this),n.addEventListener(d.ERROR,c,this),this._logger.debug(j,"#_onClockCheckStatusTick() > Get new settings from: "+l),n.load(m)},c.prototype._updateRequestProtocol=function(a,b){var c=a;return 0===c.indexOf("http://")?c=c.slice(7):0===c.indexOf("https://")&&(c=c.slice(8)),b?"https://"+c:"http://"+c},c.prototype._installEventListeners=function(){this._channel.on(r,this._onApiConfig,this),this._channel.on(s,this._onUpdateVisitorOptOut,this),this._channel.on(t,this._onFilterReportAvailable,this),this._channel.on(u,this._onClockCheckStatusTick,this)},c.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var j="ah::Network",k="tracking_server",l="check_status_server",m="publisher",n="quiet_mode",o="ssl",p="report",q="visitor_opt_out",r="api:config",s="api:update_visitor_optout",t="filter:data_available",u="clock:check_status.tick",v="net:check_status_complete";b.network.Network=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){if(!a)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._isDestroyed=!1,this._isBufferingInProgress=!1,this._reportBuffer={},this._tsHistory={},this._workQueue=new i,this._installEventListeners()}function d(a){var b=[];return a&&a.forEach(function(a){a.eventData.type()==k.EVENT_TYPE_PAUSE||a.eventData.type()==k.EVENT_TYPE_STALL?(!a.filterReport||a.eventData.duration()>u)&&b.push(a):b.push(a)}),b}function e(a){var b=-1,c=-1,d=[];return a.forEach(function(a){a.eventData.type()==k.EVENT_TYPE_START?a.assetData.type()==l.TYPE_MAIN_CONTENT?-1==b?b=d.push(a)-1:(a.eventData.prevTs(-1),d[b]=a):-1==c?c=d.push(a)-1:(a.eventData.prevTs(-1),d[c]=a):d.push(a)}),d}function f(a){var b=[];return a.forEach(function(c){if(c.eventData.type()==k.EVENT_TYPE_PLAY){if(c.eventData.duration()>t)b.push(c);else if(0==c.eventData.duration()&&c.assetData.type()==l.TYPE_MAIN_CONTENT){var d=g(a);d.indexOf(c)==d.length-1&&b.push(c)}}else b.push(c)}),b}function g(a){var b=[];return a.forEach(function(a){(a.eventData.type()==k.EVENT_TYPE_PLAY||a.eventData.type()==k.EVENT_TYPE_BUFFER||a.eventData.type()==k.EVENT_TYPE_START)&&b.push(a)}),b}var h=a.radio.Command,i=a.radio.CommandQueue,j=a.Event,k=b.model.EventDao,l=b.model.AssetDao;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(w,"#destroy()"),this._uninstallEventListeners(),this.clear())},c.prototype.clear=function(){this._logger.debug(w,"#clear()"),this._workQueue.cancelAllCommands(),this._reportBuffer={},this._tsHistory={},this._isBufferingInProgress=!1},c.prototype.flush=function(){this._workQueue.addCommand(new h(this._flushBufferReport,this))},c.prototype._bufferReport=function(a){if(!this._isDestroyed){var b=a[q];if(b){var c=b.sessionData.sessionId();this._reportBuffer[c]=this._reportBuffer[c]||[],this._reportBuffer[c].push(b)}if(!this._isBufferingInProgress){this._isBufferingInProgress=!0;var d={};d[p]=!0,d[r]=1,this._channel.command(s,d)}}},c.prototype._flushBufferReport=function(){function a(a){if(a)for(var c=0;c<a.length;c++){var d=a[c],e=d.sessionData.sessionId();b._tsHistory[e]=b._tsHistory[e]||{};var f=d.eventData.type()+"."+(d.assetData.type()==l.TYPE_AD?d.assetData.adData().adId():d.assetData.videoId());b._tsHistory[e].hasOwnProperty(f)&&d.eventData.prevTs(b._tsHistory[e][f]),b._tsHistory[e][f]=d.eventData.ts()}}if(!this._isDestroyed){var b=this;for(var c in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(c)){var g=f(e(d(this._reportBuffer[c])));a(g);for(var h=0;h<g.length;h++){var i=g[h],k={};k[q]=i,this._channel.trigger(new j(n,k))}}this._reportBuffer={};var m=this._channel.request(v),o=this._tsHistory[m]||{};this._tsHistory={},this._tsHistory[m]=o,this._isBufferingInProgress=!1}},c.prototype._onContextReportAvailable=function(a){var b=a.data;this._workQueue.addCommand(new h(this._bufferReport,this,[b]))},c.prototype._onClockFlushFilterTick=function(a){this.flush()},c.prototype._installEventListeners=function(){this._channel.on(m,this._onContextReportAvailable,this),this._channel.on(o,this._onClockFlushFilterTick,this)},c.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var m="context:report_available",n="filter:data_available",o="clock:flush_filter.tick",p="reset",q="report",r="repeat_count",s="clock:flush_filter.resume",t=250,u=250,v="session_id",w="ah::ReportFilter";b.filter.ReportFilter=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){this._onFail={fn:a,ctx:b}}var d=a.ErrorInfo;c.prototype.validateFields=function(a,b){if(!a)return this._fail("Data cannot be null");if(b)for(var c=0;c<b.length;c++){var d=b[c];switch(d){case"videoId":if(!a.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof a.videoId)return this._fail("The ID for the main video must be a String.");if(""===a.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!a.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof a.streamType)return this._fail("The stream type for the main video must be a String.");if(""===a.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"videoLength":if(!a.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof a.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(a.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"playhead":if(!a.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if("number"!=typeof a.playhead)return this._fail("The playhead for the main video must be a Number.");if(isNaN(a.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case"playerName":if(!a.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof a.playerName)return this._fail("The player name for the main video must be a String.");if(""===a.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"rsid":if(!a.hasOwnProperty("rsid"))return this._fail("account (rsid) is required and has to be set in the AppMeasurement instance.");if("string"!=typeof a.rsid)return this._fail("account (rsid) of the AppMeasurement instance must be a String.");if(""===a.rsid)return this._fail("account (rsid) of the AppMeasurement instance  cannot be an empty string.");break;case"trackingServer":if(!a.hasOwnProperty("trackingServer"))return this._fail("trackingServer is required and has to be set in the AppMeasurement instance.");if("string"!=typeof a.trackingServer)return this._fail("trackingServer of the AppMeasurement instance must be a String.");if(""===a.trackingServer)return this._fail("trackingServer of the AppMeasurement instance cannot be an empty string.");break;case"podPlayerName":if(!a.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof a.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===a.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!a.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof a.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(a.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!a.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof a.adId)return this._fail("The ad ID must be a String.");if(""===a.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!a.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof a.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(a.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"chapterPosition":if(!a.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof a.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(a.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");break;case"chapterOffset":if(!a.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof a.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(a.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case"chapterLength":if(!a.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof a.chapterLength)return this._fail("The length of the chapter must be a Number.");if(isNaN(a.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+d)}}return!0},c.prototype._fail=function(a){var b=new d("Invalid input data",a);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,b),!1},b.context.InputDataValidator=c}(a.ADB.va,b),function(a,b){"use strict";function c(a,b){if(!b)throw new Error("Reference to the logger object cannot be NULL");if(this._logger=b,!a)throw new Error("Reference to the context object cannot be NULL");this._context=a}var d=b.model.Report;
c.prototype.createReportForItem=function(a){return this._logger.debug(e,"Creating report for item: "+a.eventData.type()),new d(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,a)};var e="ah::ReportFactory";b.context.ReportFactory=c}(a.ADB.core,b),function(a,b,c,d){"use strict";function e(a,b){if(!a)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._lastInBandItem=null,this._autoComputedStartupTime=0,this._reportingInterval=fa,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._cuserData=null,this._adobeAnalyticsData=new j,this._serviceProviderData=new k,this._userData=new l,this._aamData=new m,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._activeAssetId=null,this._isDestroyed=!1,this._doNotOverrideEventDuration=!1,this._reportFactory=new u(this,this._logger),this._inputDataValidator=new v(function(a){this._logger.error(w,a.getMessage()+" | "+a.getDetails()),this._channel.trigger(new h(y,a))},this),this._stashedChapterData=null,this._stashedAdData=null,this._trackExternalErrors=!0,this._installEventListeners()}var f=c.md5,g=c.ObjectUtils,h=a.Event,i=d.model.SessionDao,j=d.model.AdobeAnalyticsDao,k=d.model.ServiceProviderDao,l=d.model.UserDao,m=d.model.AudienceManagerDao,n=d.model.EventDao,o=d.model.AssetDao,p=d.model.StreamDao,q=d.model.QoSDao,r=d.model.AdDao,s=d.model.ChapterDao,t=d.model.TrackItem,u=d.context.ReportFactory,v=d.context.InputDataValidator;e.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(w,"#destroy()"),this._uninstallEventListeners())},e.prototype._onApiAnalyticsStart=function(a){this._logger.debug(w,"#_onApiAnalyticsStart()");var b=a.data;if(this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(b,["playhead"])){this._userData.visitorId(b.vid),this._userData.analyticsVisitorId(b.aid),this._userData.marketingCloudVisitorId(b.mid),this._aamData.audienceManagerBlob(b.blob),this._aamData.audienceManagerLocationHint(b.loc_hint),b.customerIDs&&(this._cuserData=b.customerIDs),this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_AA_START,b.playhead,null,b._eventData[E]);c.assetData.adData(null),c.assetData.type(o.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(c)}},e.prototype._onApiAnalyticsAdStart=function(a){this._logger.debug(w,"#_onApiAnalyticsAdStart()");var b=a.data;if(this._checkCall("_onApiAnalyticsAdStart")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_AA_AD_START,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiVideoLoad=function(a){var b=a.data;this._logger.debug(w,"#_onApiVideoLoad(rsid="+b.rsid+", aa_trackingServer="+b.trackingServer+")"),this._resetInternalState(),this._inputDataValidator.validateFields(b,["rsid","trackingServer"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0)},e.prototype._onApiVideoUnload=function(a){return this._logger.debug(w,"#_onApiVideoUnload()"),this._isTrackingSessionActive?void(this._isTrackingSessionActive=!1):void this._logger.debug(w,"#_onApiVideoUnload() > No active tracking session.")},e.prototype._onApiVideoStart=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiVideoStart(id="+b.videoId+", name="+b.videoName+", length="+b.videoLength+", type="+b.streamType+", playerName="+b.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(b,["videoId","streamType","videoLength","playhead","playerName"])){this._adobeAnalyticsData.reportSuiteId(b.rsid),this._adobeAnalyticsData.trackingServer(b.trackingServer),this._adobeAnalyticsData.ssl(Number(b.useSsl)),this._serviceProviderData.ovp(b.ovp),this._serviceProviderData.sdk(b.sdk),this._serviceProviderData.channel(b.channel),this._serviceProviderData.libVersion(b.version),this._serviceProviderData.apiLevel(b.apiLvl),this._activeAssetId=b.videoId,this._serviceProviderData.playerName(b.playerName),this._assetData.videoId(this._activeAssetId),this._assetData.length(b.videoLength),this._assetData.type(o.TYPE_MAIN_CONTENT),this._assetData.publisher(b.publisher),this._assetData.name(b.videoName),this._streamData.type(b.streamType),this._updateQoSInfo(b);var c=b.metaNielsen?g.merge(b.metaVideo,b.metaNielsen):b.metaVideo,d=new t(this,n.EVENT_TYPE_START,b.playhead,c,b._eventData[E]);this._sendHit(d)}},e.prototype._onApiVideoResume=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiVideoResume(id="+b.videoId+", name="+b.videoName+", length="+b.videoLength+", type="+b.streamType+", playerName="+b.playerName+")"),this._checkCall("_onApiVideoResume")&&this._inputDataValidator.validateFields(b,["videoId","streamType","videoLength","playhead","playerName"])){this._activeAssetId=b.videoId,this._assetData.videoId(this._activeAssetId),this._assetData.length(b.videoLength),this._assetData.type(o.TYPE_MAIN_CONTENT),this._assetData.name(b.videoName),this._streamData.type(b.streamType);var c=new t(this,n.EVENT_TYPE_RESUME,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiVideoComplete=function(a){this._logger.debug(w,"#_onApiVideoComplete()");var b=a.data;if(this._checkCall("_onApiVideoComplete")){var c=new t(this,n.EVENT_TYPE_COMPLETE,this._assetData.length(),null,b._eventData[E]);this._sendHit(c),this._isVideoComplete=!0}},e.prototype._onApiPlay=function(a){this._logger.debug(w,"#_onApiPlay()");var b=a.data;if(this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_PLAY,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiPause=function(a){this._logger.debug(w,"#_onApiPause()");var b=a.data;if(this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=b.playheadStalled?n.EVENT_TYPE_STALL:n.EVENT_TYPE_PAUSE,d=new t(this,c,b.playhead,null,b._eventData[E]);b._eventData.hasOwnProperty(F)&&(d.filterReport=b._eventData[F]),this._sendHit(d)}},e.prototype._onApiBufferStart=function(a){this._logger.debug(w,"#_onApiBufferStart()");var b=a.data;if(this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_BUFFER,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiSeekStart=function(a){this._logger.debug(w,"#_onApiSeekStart()"),this._checkCall("_onApiSeekStart")&&(this._stashedAdData=this._assetData.adData(),this._stashedChapterData=this._assetData.chapterData(),this._assetData.adData(null),this._assetData.type(o.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId(),this._assetData.chapterData(null))},e.prototype._onApiSeekComplete=function(a){this._logger.debug(w,"#_onApiSeekComplete()");var b=a.data;if(this._checkCall("_onApiSeekComplete")&&this._inputDataValidator.validateFields(b,["playhead"])){if(b.isInAd){if(!this._inputDataValidator.validateFields(b,["adId","adPosition","podPosition","podPlayerName"]))return;var c=f(this._assetData.videoId())+"_"+b.podPosition;if(this._stashedAdData&&this._stashedAdData.podId()==c&&parseInt(this._stashedAdData.podPosition(),10)==b.adPosition)this._assetData.adData(this._stashedAdData),this._activeAssetId=this._stashedAdData.adId();else if(!this._assetData.adData()){this._activeAssetId=b.adId;var d=new r;d.adId(this._activeAssetId),d.adName(b.adName),d.adLength(b.adLength),d.podId(c),d.resolver(b.podPlayerName),d.podPosition(b.podPosition+""),d.podName(b.podName),d.podOffset(b.podSecond),d.sid(this._generateSessionId()),this._assetData.adData(d)}this._assetData.type(o.TYPE_AD)}else this._assetData.adData(null),this._assetData.type(o.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId();if(b.isInChapter){if(!this._inputDataValidator.validateFields(b,["chapterPosition","chapterLength","chapterOffset"]))return;if(this._stashedChapterData&&b.chapterPosition==this._stashedChapterData.position())this._assetData.chapterData(this._stashedChapterData);else if(!this._assetData.chapterData()){var e=new s;e.id(f(this._assetData.videoId())+"_"+b.chapterPosition),e.name(b.chapterName),e.length(b.chapterLength),e.position(b.chapterPosition),e.offset(b.chapterOffset),e.sid(this._generateSessionId()),this._assetData.chapterData(e)}}else this._assetData.chapterData(null);this._stashedAdData=null,this._stashedChapterData=null}},e.prototype._onApiAdStart=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiAdStart(id="+b.adId+", player_name="+b.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+b.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(b,["playhead","podPosition","podPlayerName","adId","adPosition"])){this._activeAssetId=b.adId;var c=new r;c.adId(this._activeAssetId),c.adName(b.adName),c.adLength(b.adLength),c.resolver(b.podPlayerName),c.podId(f(this._assetData.videoId())+"_"+b.podPosition),c.podPosition(b.adPosition+""),c.podName(b.podName),c.podOffset(b.podSecond),c.sid(this._generateSessionId()),this._assetData.adData(c),this._assetData.type(o.TYPE_AD),this._updateQoSInfo(b);var d=g.merge(b.metaVideo,b.metaAd);d=b.metaNielsen?g.merge(d,b.metaNielsen):d;var e=new t(this,n.EVENT_TYPE_START,b.playhead,d,b._eventData[E]);this._sendHit(e)}},e.prototype._onApiAdComplete=function(a){this._logger.debug(w,"#_onApiAdComplete()");var b=a.data;if(this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(b,["playhead"])){if(this._assetData.type()!=o.TYPE_AD)return void this._logger.warn(w,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_COMPLETE,b.playhead,null,b._eventData[E]);this._sendHit(c),this._assetData.adData(null),this._assetData.type(o.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId()}},e.prototype._onApiChapterStart=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiChapterStart(name="+b.chapterName+", length="+b.chapterLength+", position="+b.chapterPosition+", chapter_offset="+b.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(b,["playhead","chapterPosition","chapterOffset","chapterLength"])){var c=new s;c.id(f(this._assetData.videoId())+"_"+b.chapterPosition),c.name(b.chapterName),c.length(b.chapterLength),c.position(b.chapterPosition),c.offset(b.chapterOffset),c.sid(this._generateSessionId()),this._assetData.chapterData(c),this._updateQoSInfo(b);var d=g.merge(b.metaVideo,b.metaChapter),e=new t(this,n.EVENT_TYPE_CHAPTER_START,b.playhead,d,b._eventData[E]);e.assetData.adData(null),e.assetData.type(o.TYPE_MAIN_CONTENT),this._sendHit(e)}},e.prototype._onApiChapterComplete=function(a){this._logger.debug(w,"#_onApiChapterComplete()");var b=a.data;if(this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(b,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(w,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_CHAPTER_COMPLETE,b.playhead,null,b._eventData[E]);c.assetData.adData(null),c.assetData.type(o.TYPE_MAIN_CONTENT),this._sendHit(c),this._assetData.chapterData(null)}},e.prototype._onApiBitrateChange=function(a){this._logger.debug(w,"#_onApiBitrateChange()");var b=a.data;if(this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_BITRATE_CHANGE,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiTrackError=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiTrackError(source="+b._eventData.source+", err_id="+b._eventData.error_id+")"),!this._isTrackingSessionActive)return void this._logger.warn(w,"#_onApiTrackError() > No active tracking session.");if(this._trackExternalErrors||b._eventData.source===x){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_ERROR,0,null,b._eventData[E]);c.eventData.id(b._eventData.error_id),c.eventData.source(b._eventData.source),this._sendHit(c)}},e.prototype._onApiTrackInternalError=function(a){var b=a.data;this._logger.debug(w,"#_onApiTrackInternalError(source="+b.source+", err_id="+b.error_id+")"),this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_ERROR,0);c.eventData.id(b.error_id),c.eventData.source(b.source),this._sendHit(c)},e.prototype._onApiQuantumEnd=function(a){this._logger.debug(w,"#_onApiQuantumEnd(interval="+this._channel.request(B)+")");var b=a.data;this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(b,["playhead"])&&(this._lastInBandItem&&(this._lastInBandItem.eventData.playhead(b.playhead),this._updateQoSInfo(b),this._lastInBandItem.qosData.bitrate(this._qosData.bitrate()),this._lastInBandItem.qosData.fps(this._qosData.fps()),this._lastInBandItem.qosData.droppedFrames(this._qosData.droppedFrames()),this._lastInBandItem.qosData.startupTime(this._qosData.startupTime())),this._sendHit(this._lastInBandItem))},e.prototype._onNetworkCheckStatusComplete=function(a){var b=a.data;this._trackExternalErrors=b[I],this._reportingInterval=b[J],this._reportingInterval||(this._reportingInterval=fa),this._logger.debug(w,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},e.prototype._onResetSessionId=function(a){var b=this._generateSessionId();this._sessionData=new i,this._sessionData.sessionId(b),this._logger.debug(w,"#_resetSessionId(new sessionId="+b+")")},e.prototype._installEventListeners=function(){this._channel.on(K,this._onApiAnalyticsStart,this),this._channel.on(L,this._onApiAnalyticsAdStart,this),this._channel.on(M,this._onApiVideoLoad,this),this._channel.on(N,this._onApiVideoUnload,this),this._channel.on(O,this._onApiVideoStart,this),this._channel.on(P,this._onApiVideoComplete,this),this._channel.on(Q,this._onApiVideoResume,this),this._channel.on(R,this._onApiAdStart,this),this._channel.on(S,this._onApiAdComplete,this),this._channel.on(T,this._onApiPlay,this),this._channel.on(U,this._onApiPause,this),this._channel.on(V,this._onApiBufferStart,this),this._channel.on(W,this._onApiSeekStart,this),this._channel.on(X,this._onApiSeekComplete,this),this._channel.on(Y,this._onApiChapterStart,this),this._channel.on(Z,this._onApiChapterComplete,this),this._channel.on(aa,this._onApiBitrateChange,this),this._channel.on($,this._onApiTrackError,this),this._channel.on(_,this._onApiTrackInternalError,this),this._channel.on(ba,this._onApiQuantumEnd,this),this._channel.on(da,this._onNetworkCheckStatusComplete,this),this._channel.on(D,this._onResetSessionId,this),this._channel.reply(C,function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null},this)},e.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},e.prototype._resetInternalState=function(){this._logger.debug(w,"#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._autoComputedStartupTime=0,this._streamData=new p,this._qosData=new q,this._sessionData=new i,this._assetData=new o,this._cuserData=null,this._stashedAdData=null,this._stashedChapterData=null,this._lastInBandItem=null},e.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())},e.prototype._updateQoSInfo=function(a){this._qosData.bitrate(a.bitrate||0),this._qosData.fps(a.fps||0),this._qosData.droppedFrames(a.droppedFrames||0),null==a.startupTime||isNaN(a.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(a.startupTime),this._qosData.isStartupTimeOverridden=!0)},e.prototype._checkCall=function(a){return this._isTrackingSessionActive?this._isVideoComplete?(this._logger.warn(w,"#"+a+"() > The video content already completed."),!1):!0:(this._logger.warn(w,"#"+a+"() > No active tracking session."),!1)},e.prototype._updateLastInBandItem=function(a){var b=(new Date).getTime(),c=1e3*Math.abs(a.eventData.playhead()-this._lastInBandItem.eventData.playhead()),d=Math.abs(b-this._lastInBandItem.eventData.ts());this._lastInBandItem.eventData.type()!=n.EVENT_TYPE_PAUSE&&this._lastInBandItem.eventData.type()!=n.EVENT_TYPE_STALL?(d*ea>=c||this._doNotOverrideEventDuration)&&d<=this._reportingInterval*ea*1e3?this._lastInBandItem.eventData.duration(b-this._lastInBandItem.eventData.ts()):(this._logger.warn(w,"[WARNING] Resetting duration in lastInBandItem to 0. playheadDelta:"+c+" tsDelta:"+d+" event type:"+this._lastInBandItem.eventData.type()),this._lastInBandItem.eventData.duration(0)):this._lastInBandItem.eventData.duration(b-this._lastInBandItem.eventData.ts()),this._doNotOverrideEventDuration&&(this._doNotOverrideEventDuration=!1),this._lastInBandItem.eventData.ts(b),this._lastInBandItem.eventData.playhead(a.eventData.playhead()),this._lastInBandItem.qosData.startupTime(a.qosData.startupTime()),this._lastInBandItem.qosData.isStartupTimeOverridden=a.qosData.isStartupTimeOverridden},e.prototype._sendHit=function(a){function b(a){var b=c._reportFactory.createReportForItem(a);b.qosData.isStartupTimeOverridden||b.qosData.startupTime(c._autoComputedStartupTime);var e={};e[G]=b,c._channel.trigger(new h(ca,e)),(b.eventData.type()==n.EVENT_TYPE_PLAY||b.eventData.type()==n.EVENT_TYPE_BUFFER||b.eventData.type()==n.EVENT_TYPE_START)&&(d={},d[H]=!0,c._channel.command(z,d))}var c=this,d={};switch(a.eventData.type()){case n.EVENT_TYPE_START:case n.EVENT_TYPE_PLAY:case n.EVENT_TYPE_PAUSE:case n.EVENT_TYPE_STALL:case n.EVENT_TYPE_BUFFER:this._lastInBandItem&&(this._updateLastInBandItem(a),this._lastInBandItem.eventData.type()==n.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==o.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),a!=this._lastInBandItem&&b(this._lastInBandItem)),b(a),this._lastInBandItem=a,d={},d[H]=!0,this._channel.command(z,d);break;case n.EVENT_TYPE_COMPLETE:this._lastInBandItem&&(a.assetData.type()==o.TYPE_AD&&(this._doNotOverrideEventDuration=!0),this._updateLastInBandItem(a),b(this._lastInBandItem)),b(a),a.assetData.type()==o.TYPE_MAIN_CONTENT?(this._lastInBandItem=null,d={},d[H]=!0,this._channel.command(A,d)):a.assetData.type()==o.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(o.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case n.EVENT_TYPE_CHAPTER_START:case n.EVENT_TYPE_CHAPTER_COMPLETE:this._lastInBandItem&&(this._updateLastInBandItem(a),b(this._lastInBandItem)),b(a),this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(a.eventData.type()==n.EVENT_TYPE_CHAPTER_START?new s(a.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),b(this._lastInBandItem));break;default:b(a)}};var w="ah::Context",x="sourceErrorSDK",y="error",z="clock:reporting.resume",A="clock:reporting.pause",B="reporting_interval",C="session_id",D="reset_session_id",E="callback",F="filter_report",G="report",H="reset",I="track_external_errors",J="reporting_interval",K="api:aa_start",L="api:aa_ad_start",M="api:video_load",N="api:video_unload",O="api:video_start",P="api:video_complete",Q="api:video_resume",R="api:ad_start",S="api:ad_complete",T="api:play",U="api:pause",V="api:buffer_start",W="api:seek_start",X="api:seek_complete",Y="api:chapter_start",Z="api:chapter_complete",$="api:track_error",_="api:track_internal_error",aa="api:bitrate_change",ba="api:quantum_end",ca="context:report_available",da="net:check_status_complete",ea=1.5,fa=10;d.context.Context=e}(a.ADB.core,a.ADB.va,a.ADB.va.utils,b),function(a){"use strict";function b(a,b){this.trackingServer=a,this.publisher=b,this.ssl=!1,this.ovp=c,this.sdk=c,this.quietMode=!1,this.debugLogging=!1,this.__isPrimetime=!1,this.__psdkVersion=null}var c="unknown";a.AdobeHeartbeatPluginConfig=b}(b),function(a){"use strict";function b(){}b.prototype.onError=function(a){},a.AdobeHeartbeatPluginDelegate=b}(b),function(a,b,c){"use strict";function d(a){d.__super__.constructor.call(this,q),this._radio=new i(this._logger),this._channel=this._radio.channel(y),this._delegate=a,this._context=new l(this._channel,this._logger),this._filter=new m(this._channel,this._logger),this._network=new n(this._channel,this._logger),this._setupDataResolver()}var e=a.Event,f=a.Trigger,g=a.plugin.BasePlugin,h=a.plugin.ParamMapping,i=a.radio.Radio,j=b.ErrorInfo,k=b.Version,l=c.context.Context,m=c.filter.ReportFilter,n=c.network.Network,o=c.clock.Clock,p=c.AdobeHeartbeatPluginConfig;a.extend(d,g),d.prototype.configure=function(a){if(!a)throw new Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof p))throw new Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");this._config=a,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");var b=this._config.trackingServer+"/settings/",c={};c[ba]=this._config.trackingServer,c[ca]=b,c[da]=this._config.publisher,c[ea]=this._config.quietMode,c[fa]=this._config.ssl,this._channel.trigger(new e(ja,c)),this._isConfigured=!0},d.prototype.bootstrap=function(a){d.__super__.bootstrap.call(this,a),this._channel.on(z,this._onError,this),this._clock=new o(this._pluginManager,this._channel,this._logger),this._channel.command(Ea),this._channel.trigger(new e(La)),this._registerCommands(),this._registerBehaviours()},d.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._filter.destroy(),this._network.destroy()},d.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):d.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)},d.prototype._cmdAnalyticsError=function(a){this._errorInfo||(this._errorInfo=new j("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(z,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},d.prototype._cmdAnalyticsStart=function(a){if(this._canProcess()){var b={};b[ga]=a.visitorOptedOut,this._channel.trigger(new e(ka,b)),this._channel.trigger(new e(ha,a))}},d.prototype._cmdAnalyticsAdStart=function(a){this._canProcess()&&this._channel.trigger(new e(ia,a))},d.prototype._cmdVideoLoad=function(a){this._errorInfo=null,this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new e(ma,a)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),this._channel.trigger(new e(la,a)),this._isTrackingSessionActive=!0)},d.prototype._cmdVideoUnload=function(a){this._errorInfo=null,this._canProcess()&&(this._channel.trigger(new e(ma,a)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._isTrackingSessionActive=!1)},d.prototype._cmdVideoStart=function(a){this._canProcess()&&this._channel.trigger(new e(na,a))},d.prototype._cmdVideoComplete=function(a){this._canProcess()&&this._channel.trigger(new e(oa,a))},d.prototype._cmdVideoResume=function(a){this._canProcess()&&this._channel.trigger(new e(pa,a))},d.prototype._cmdPlay=function(a){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(a))},d.prototype._cmdPause=function(a){this._canProcess()&&(this._channel.trigger(new e(ta,a)),this._isPaused=!0,this._runIdleTimer(!0))},d.prototype._cmdAdStart=function(a){this._canProcess()&&(this._channel.trigger(new e(qa,a)),this._resumePlaybackIfPossible(a))},d.prototype._cmdAdComplete=function(a){this._canProcess()&&(this._channel.trigger(new e(ra,a)),a.isInAdBreak||this._resumePlaybackIfPossible(a))},d.prototype._cmdBufferStart=function(a){this._canProcess()&&(this._channel.trigger(new e(ua,a)),this._isBuffering=!0,this._runIdleTimer(!0))},d.prototype._cmdBufferComplete=function(a){this._canProcess()&&(this._isBuffering=!1,this._resumePlaybackIfPossible(a))},d.prototype._cmdSeekStart=function(a){this._canProcess()&&(this._channel.trigger(new e(va,a)),this._channel.trigger(new e(ta,a)),this._isSeeking=!0,this._runIdleTimer(!0))},d.prototype._cmdSeekComplete=function(a){this._canProcess()&&(this._channel.trigger(new e(wa,a)),this._isSeeking=!1,this._resumePlaybackIfPossible(a))},d.prototype._cmdChapterStart=function(a){this._canProcess()&&this._channel.trigger(new e(xa,a))},d.prototype._cmdChapterComplete=function(a){this._canProcess()&&this._channel.trigger(new e(ya,a))},d.prototype._cmdBitrateChange=function(a){this._canProcess()&&this._channel.trigger(new e(Ba,a))},d.prototype._cmdTrackError=function(a){this._canProcess()&&this._channel.trigger(new e(za,a))},d.prototype._cmdClockReportingTick=function(a){this._canProcess()&&this._channel.trigger(new e(Ca,a))},d.prototype._cmdIdleTick=function(a){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(V),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger(T))},d.prototype._onError=function(a){this._errorInfo=a.data;var b={};b[_]=Da,b[aa]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails(),this._channel.trigger(new e(Aa,b)),this._runReportingTimer(!1),this._trigger(z,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo)},d.prototype._runIdleTimer=function(a){var b={};b[$]=!0,a?this._channel.command(Ja,b):this._channel.command(Ka,b)},d.prototype._runFlushFilterTimer=function(a){var b={};b[$]=!0,a?this._channel.command(Ha,b):this._channel.command(Ia,b)},d.prototype._runReportingTimer=function(a){var b={};b[$]=!0,a?this._channel.command(Fa,b):this._channel.command(Ga,b)},d.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError),this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart),this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart),this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete),this._pluginManager.comply(this,"handleVideoResume",this._cmdVideoResume),this._pluginManager.comply(this,"handlePlay",this._cmdPlay),this._pluginManager.comply(this,"handlePause",this._cmdPause),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete),this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart),this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete),this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart),this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete),this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart),this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete),this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange),this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError),this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick),this._pluginManager.comply(this,"handleIdleTick",this._cmdIdleTick)},d.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new f(t,C),this,"handleVideoLoad",[new h(s,"rsid","rsid"),new h(s,"tracking_server","trackingServer")]),this._pluginManager.registerBehaviour(new f(t,D),this,"handleVideoUnload"),this._pluginManager.registerBehaviour(new f(t,E),this,"handleVideoStart",[new h(t,"video.id","videoId"),new h(t,"video.name","videoName"),new h(t,"video.length","videoLength"),new h(t,"video.playhead","playhead"),new h(t,"video.playerName","playerName"),new h(t,"video.streamType","streamType"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime"),new h(s,"rsid","rsid"),new h(s,"tracking_server","trackingServer"),new h(s,"channel","channel"),new h(s,"meta.video.*","metaVideo"),new h(s,"ssl","useSsl"),new h(u,"meta","metaNielsen"),new h(r,"publisher","publisher"),new h(r,"sdk","sdk"),new h(r,"ovp","ovp"),new h(r,"version","version"),new h(r,"api_level","apiLvl")]),this._pluginManager.registerBehaviour(new f(t,G),this,"handleVideoComplete",[new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,F),this,"handleVideoResume",[new h(t,"video.id","videoId"),new h(t,"video.name","videoName"),new h(t,"video.length","videoLength"),new h(t,"video.playhead","playhead"),new h(t,"video.playerName","playerName"),new h(t,"video.streamType","streamType")]),this._pluginManager.registerBehaviour(new f(t,H),this,"handlePlay",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,I),this,"handlePause",[new h(t,"video.playhead","playhead"),new h(t,"video.playheadStalled","playheadStalled"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,J),this,"handleAdStart",[new h(t,"video.playhead","playhead"),new h(t,"ad.id","adId"),new h(t,"ad.name","adName"),new h(t,"ad.length","adLength"),new h(t,"ad.position","adPosition"),new h(t,"pod.name","podName"),new h(t,"pod.playerName","podPlayerName"),new h(t,"pod.position","podPosition"),new h(t,"pod.startTime","podSecond"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime"),new h(s,"meta.video.*","metaVideo"),new h(s,"meta.ad.*","metaAd"),new h(u,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(t,K),this,"handleAdComplete",[new h(t,"video.playhead","playhead"),new h(t,"ad.isInAdBreak","isInAdBreak"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,L),this,"handleBufferStart",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,M),this,"handleBufferComplete",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,N),this,"handleSeekStart",[new h(t,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new f(t,O),this,"handleSeekComplete",[new h(t,"video.playhead","playhead"),new h(t,"ad.isInAd","isInAd"),new h(t,"ad.id","adId"),new h(t,"ad.position","adPosition"),new h(t,"pod.playerName","podPlayerName"),new h(t,"pod.position","podPosition"),new h(t,"chapter.isInChapter","isInChapter"),new h(t,"chapter.position","chapterPosition"),new h(t,"chapter.name","chapterName"),new h(t,"chapter.length","chapterLength"),new h(t,"chapter.startTime","chapterOffset"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),
this._pluginManager.registerBehaviour(new f(t,P),this,"handleChapterStart",[new h(t,"video.playhead","playhead"),new h(t,"chapter.position","chapterPosition"),new h(t,"chapter.name","chapterName"),new h(t,"chapter.length","chapterLength"),new h(t,"chapter.startTime","chapterOffset"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime"),new h(s,"meta.video.*","metaVideo"),new h(s,"meta.chapter.*","metaChapter"),new h(u,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(t,Q),this,"handleChapterComplete",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,R),this,"handleBitrateChange",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,S),this,"handleTrackError"),this._pluginManager.registerBehaviour(new f(v,X),this,"handleClockReportingTick",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(v,Z),this,"handleIdleTick",[]),this._pluginManager.registerBehaviour(new f(r,V),this,"handleClockReportingTick",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(s,z),this,"handleAnalyticsError"),this._pluginManager.registerBehaviour(new f(s,A),this,"handleAnalyticsStart",[new h(s,"vid","vid"),new h(s,"aid","aid"),new h(s,"mid","mid"),new h(s,"customerIDs","customerIDs"),new h(s,"visitorOptedOut","visitorOptedOut"),new h(s,"blob","blob"),new h(s,"loc_hint","loc_hint"),new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(s,B),this,"handleAnalyticsAdStart",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")])},d.prototype._setupDataResolver=function(){var a={},b=this;a.version=function(){return k.getVersion()},a.api_level=function(){return k.getApiLevel()},a.tracking_server=function(){return b._config?b._config.trackingServer:null},a.publisher=function(){return b._config?b._config.publisher:null},a.quiet_mode=function(){return b._config?b._config.quietMode:!1},a.ovp=function(){return b._config?b._config.ovp:null},a.sdk=function(){return b._config?b._config.sdk:null},a.is_primetime=function(){return b._config?b._config.__isPrimetime:!1},a.psdk_version=function(){return b._config?b._config.__psdkVersion:null},a.session_id=function(){return b._channel.request(w)},this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var e=b[d];c=c||{},c[e]=a.hasOwnProperty(e)?a[e].call(this):null}return c}},d.prototype._resumePlaybackIfPossible=function(a){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle&&(this._isVideoIdle=!1,this._resumePlaybackFromIdle()),this._runIdleTimer(!1),this._channel.trigger(new e(sa,a)))},d.prototype._resumePlaybackFromIdle=function(){this._trigger(V),this._filter.clear(),this._channel.trigger(new e(x)),this._trigger(U),this._runReportingTimer(!0),this._runFlushFilterTimer(!0)};var q="adobe-heartbeat",r=q,s="adobe-analytics",t="player",u="nielsen",v="service.clock",w="session_id",x="reset_session_id",y="heartbeat-channel",z="error",A="aa_start",B="sc_ad_start",C="video_load",D="video_unload",E="video_start",F="video_resume",G="video_complete",H="play",I="pause",J="ad_start",K="ad_complete",L="buffer_start",M="buffer_complete",N="seek_start",O="seek_complete",P="chapter_start",Q="chapter_complete",R="bitrate_change",S="track_error",T="video_idle_start",U="video_idle_resume",V="quantum_close",W="heartbeat.reporting",X=W+".tick",Y="heartbeat.idle",Z=Y+".tick",$="reset",_="source",aa="error_id",ba="tracking_server",ca="check_status_server",da="publisher",ea="quiet_mode",fa="ssl",ga="visitor_opt_out",ha="api:aa_start",ia="api:aa_ad_start",ja="api:config",ka="api:update_visitor_optout",la="api:video_load",ma="api:video_unload",na="api:video_start",oa="api:video_complete",pa="api:video_resume",qa="api:ad_start",ra="api:ad_complete",sa="api:play",ta="api:pause",ua="api:buffer_start",va="api:seek_start",wa="api:seek_complete",xa="api:chapter_start",ya="api:chapter_complete",za="api:track_error",Aa="api:track_internal_error",Ba="api:bitrate_change",Ca="api:quantum_end",Da="sourceErrorHeartbeat",Ea="clock:check_status.resume",Fa="clock:reporting.resume",Ga="clock:reporting.pause",Ha="clock:flush_filter.resume",Ia="clock:flush_filter.pause",Ja="clock:idle.resume",Ka="clock:idle.pause",La="clock:check_status.get_settings";c.AdobeHeartbeatPlugin=d}(a.ADB.core,a.ADB.va,b),a.ADB.va.plugins.ah||(a.ADB.va.plugins.ah=b)}(this);

// AdobeAnalyticsPlugin
!function(a){if("undefined"==typeof b)var b={};!function(a,b){"use strict";function c(a,b){this._onFail={fn:a,ctx:b}}var d=a.ErrorInfo;c.prototype.validateFields=function(a,b){if(!a)return this._fail("Data cannot be null");if(b)for(var c=0;c<b.length;c++){var d=b[c];switch(d){case"videoId":if(!a.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof a.videoId)return this._fail("The ID for the main video must be a String.");if(""===a.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!a.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof a.streamType)return this._fail("The stream type for the main video must be a String.");if(""===a.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"playerName":if(!a.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof a.playerName)return this._fail("The player name for the main video must be a String.");if(""===a.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"videoLength":if(!a.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof a.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(a.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"podPlayerName":if(!a.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof a.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===a.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!a.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof a.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(a.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!a.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof a.adId)return this._fail("The ad ID must be a String.");if(""===a.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!a.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof a.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(a.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"adLength":if(!a.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof a.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(a.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+d)}}return!0},c.prototype._fail=function(a){var b=new d("Invalid input data",a);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,b),!1},b.InputDataValidator=c}(a.ADB.va,b),function(a){"use strict";function b(){this.channel=c,this.debugLogging=!1}var c="";a.AdobeAnalyticsPluginConfig=b}(b),function(a){"use strict";function b(){}b.prototype.onError=function(a){},a.AdobeAnalyticsPluginDelegate=b}(b),function(a,b,c,d){"use strict";function e(a,b){if(e.__super__.constructor.call(this,r),!a)throw new Error("The reference to the AppMeasurement object cannot be NULL.");this._appMeasurement=a,this._delegate=b,this._customMetaKeys=[],this._videoMetadata={},this._adMetadata={},this._chapterMetadata={},this._errorInfo=null,this._workQueue=new k(!0,w),this._inputDataValidator=new q(function(a){this._errorInfo=a,this._logger.error(this._logTag,a.getMessage()+" | "+a.getDetails());var b=this;setTimeout(function(){b._trigger(x,a),b._delegate&&b._delegate.onError(b._errorInfo)},0)},this),this._appMeasurement.isReadyToTrack(),this._setupDataResolver()}var f=a.Trigger,g=a.plugin.BasePlugin,h=a.plugin.ParamMapping,i=a.radio.Channel,j=a.radio.Command,k=a.radio.CommandQueue,l=b.ErrorInfo,m=c.md5,n=c.StringUtils,o=c.ObjectUtils,p=d.AdobeAnalyticsPluginConfig,q=d.InputDataValidator;a.extend(e,g),e.prototype.configure=function(a){if(!a)throw new Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof p))throw new Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=a,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")},e.prototype.bootstrap=function(a){e.__super__.bootstrap.call(this,a),this._registerCommands(),this._registerBehaviours()},e.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,[]),e.__super__.setup.call(this)},e.prototype.setVideoMetadata=function(a){this._videoMetadata=o.clone(a)},e.prototype.setAdMetadata=function(a){this._adMetadata=o.clone(a)},e.prototype.setChapterMetadata=function(a){this._chapterMetadata=o.clone(a)},e.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):e.__super__._canProcess.call(this)},e.prototype._cmdVideoLoad=function(a){this._errorInfo=null},e.prototype._cmdVideoStart=function(a){this._logger.debug(this._logTag,"#_cmdVideoStart()"),this._canProcess()&&this._workQueue.addCommand(new j(this._executeOpen,this,[a]))},e.prototype._cmdAdStart=function(a){this._logger.debug(this._logTag,"#_cmdAdStart()"),this._canProcess()&&this._workQueue.addCommand(new j(this._executeOpenAd,this,[a]))},e.prototype._cmdHeartbeatPluginError=function(a){this._errorInfo||(this._errorInfo=new l("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(x,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},e.prototype._resetAppMeasurementContextData=function(){delete this._appMeasurement.contextData["a.contentType"],delete this._appMeasurement.contextData["a.media.name"],delete this._appMeasurement.contextData["a.media.friendlyName"],delete this._appMeasurement.contextData["a.media.length"],delete this._appMeasurement.contextData["a.media.playerName"],delete this._appMeasurement.contextData["a.media.channel"],delete this._appMeasurement.contextData["a.media.view"],delete this._appMeasurement.contextData["a.media.ad.name"],delete this._appMeasurement.contextData["a.media.ad.friendlyName"],delete this._appMeasurement.contextData["a.media.ad.podFriendlyName"],delete this._appMeasurement.contextData["a.media.ad.length"],delete this._appMeasurement.contextData["a.media.ad.playerName"],delete this._appMeasurement.contextData["a.media.ad.pod"],delete this._appMeasurement.contextData["a.media.ad.podPosition"],delete this._appMeasurement.contextData["a.media.ad.podSecond"],delete this._appMeasurement.contextData["a.media.ad.view"];for(var a=0;a<this._customMetaKeys.length;a++){var b=this._customMetaKeys[a];delete this._appMeasurement.contextData[b]}this._customMetaKeys=[]},e.prototype._executeOpen=function(a){if(this._logger.debug(this._logTag,"#_executeOpen(id="+a.videoId+", videoName="+a.videoName+", streamType="+a.streamType+", length="+a.videoLength+", playerName="+a.playerName+", channel="+a.channel+", isPrimetime="+a.isPrimetime+", sessionId="+a.sessionId+")"),this._canProcess()&&this._inputDataValidator.validateFields(a,["videoId","streamType","videoLength","playerName"])){this._resetAppMeasurementContextData();for(var b in a.metaVideo)a.metaVideo.hasOwnProperty(b)&&(this._appMeasurement.contextData[b]=a.metaVideo[b],this._customMetaKeys.push(b));if(a.metaNielsen)for(var b in a.metaNielsen)a.metaNielsen.hasOwnProperty(b)&&(this._appMeasurement.contextData[b]=a.metaNielsen[b],this._customMetaKeys.push(b));this._appMeasurement.contextData["a.contentType"]=a.streamType,this._appMeasurement.contextData["a.media.name"]=a.videoId,this._appMeasurement.contextData["a.media.friendlyName"]=a.videoName||"",this._appMeasurement.contextData["a.media.length"]=Math.floor(a.videoLength)||"0.0",this._appMeasurement.contextData["a.media.playerName"]=a.playerName,this._appMeasurement.contextData["a.media.channel"]=a.channel||"",this._appMeasurement.contextData["a.media.view"]=!0,this._appMeasurement.contextData["a.media.vsid"]=a.sessionId,this._appMeasurement.pev3=y,this._appMeasurement.pe=a.isPrimetime?B:A,this._appMeasurement.track();var c=this;setTimeout(function(){c._trigger(E,a)},0)}},e.prototype._executeOpenAd=function(a){var b=m(a.videoId)+"_"+a.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+a.adId+", streamType="+a.streamType+", length="+a.adLength+", podPlayerName="+a.podPlayerName+", parentId="+a.videoId+", podId="+b+", parentPodPosition="+a.adPosition+", podSecond="+a.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(a,["videoId","streamType","playerName","adId","adLength","podPlayerName","adPosition"])){a.podSecond=null==a.podSecond||isNaN(a.podSecond)?a.playhead:a.podSecond,this._resetAppMeasurementContextData();var c;for(c in a.metaVideo)a.metaVideo.hasOwnProperty(c)&&(this._appMeasurement.contextData[c]=a.metaVideo[c],this._customMetaKeys.push(c));for(c in a.metaAd)a.metaAd.hasOwnProperty(c)&&(this._appMeasurement.contextData[c]=a.metaAd[c],this._customMetaKeys.push(c));if(a.metaNielsen)for(var c in a.metaNielsen)a.metaNielsen.hasOwnProperty(c)&&(this._appMeasurement.contextData[c]=a.metaNielsen[c],this._customMetaKeys.push(c));this._appMeasurement.contextData["a.contentType"]=a.streamType,this._appMeasurement.contextData["a.media.name"]=a.videoId,this._appMeasurement.contextData["a.media.playerName"]=a.playerName,this._appMeasurement.contextData["a.media.channel"]=a.channel||"",this._appMeasurement.contextData["a.media.vsid"]=a.sessionId,this._appMeasurement.contextData["a.media.friendlyName"]=a.videoName||"",this._appMeasurement.contextData["a.media.length"]=Math.floor(a.videoLength)||"0.0",this._appMeasurement.contextData["a.media.ad.name"]=a.adId,this._appMeasurement.contextData["a.media.ad.friendlyName"]=a.adName||"",this._appMeasurement.contextData["a.media.ad.podFriendlyName"]=a.podName||"",this._appMeasurement.contextData["a.media.ad.length"]=Math.floor(a.adLength)||"0.0",this._appMeasurement.contextData["a.media.ad.playerName"]=a.podPlayerName,this._appMeasurement.contextData["a.media.ad.pod"]=b,this._appMeasurement.contextData["a.media.ad.podPosition"]=Math.floor(a.adPosition)||"0.0",this._appMeasurement.contextData["a.media.ad.podSecond"]=Math.floor(a.podSecond)||"0.0",this._appMeasurement.contextData["a.media.ad.view"]=!0,this._appMeasurement.pev3=z,this._appMeasurement.pe=a.isPrimetime?D:C,this._appMeasurement.track();var d=this;setTimeout(function(){d._trigger(F,a)},0)}},e.prototype._setupDataResolver=function(){var a={},b=this;a.rsid=function(){return b._appMeasurement.account},a.tracking_server=function(){return b._appMeasurement.ssl&&b._appMeasurement.trackingServerSecure?b._appMeasurement.trackingServerSecure:b._appMeasurement.trackingServer},a.ssl=function(){return b._appMeasurement.ssl},a.vid=function(){return b._appMeasurement.visitorID},a.aid=function(){return b._appMeasurement.analyticsVisitorID},a.mid=function(){return b._appMeasurement.marketingCloudVisitorID},a.blob=function(){return b._appMeasurement.audienceManagerBlob},a.loc_hint=function(){return b._appMeasurement.audienceManagerLocationHint?parseInt(b._appMeasurement.audienceManagerLocationHint):""},a.customerIDs=function(){var a=b._appMeasurement.visitor.getCustomerIDs(),c={};for(var d in a)if(a.hasOwnProperty(d)){var e=a[d];if("object"==typeof e){for(var f in e)e.hasOwnProperty(f)&&("authState"==f?c[d+".as"]=e[f]:c[d+"."+f]=e[f]);c[d+".as"]||(c[d+".as"]="0")}}return c},a.channel=function(){return b._config?b._config.channel:null},a.meta=function(a){var c=a.split(".");if(c.length<2)return null;var d=c.shift();switch(a=c.join("."),d){case"video":return a==i.WILDCARD?b._videoMetadata:b._videoMetadata[a];case"ad":return a==i.WILDCARD?b._adMetadata:b._adMetadata[a];case"chapter":return a==i.WILDCARD?b._chapterMetadata:b._chapterMetadata[a];default:return null}},a.visitorOptedOut=function(){return void 0==b._appMeasurement.visitorOptedOut?!1:b._appMeasurement.visitorOptedOut},this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var e=b[d];c=c||{},n.startsWith(e,"meta.")?c[e]=a.meta(e.split("meta.")[1]):c[e]=a.hasOwnProperty(e)?a[e].call(this):null}return c}},e.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)},e.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new f(u,G),this,"handleVideoLoad"),this._pluginManager.registerBehaviour(new f(u,H),this,"handleVideoStart",[new h(u,"video.id","videoId"),new h(u,"video.streamType","streamType"),new h(u,"video.name","videoName"),new h(u,"video.length","videoLength"),new h(u,"video.playerName","playerName"),new h(u,"video.streamType","streamType"),new h(v,"is_primetime","isPrimetime"),new h(v,"session_id","sessionId"),new h(s,"channel","channel"),new h(s,"meta.video.*","metaVideo"),new h(t,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(u,I),this,"handleAdStart",[new h(u,"video.id","videoId"),new h(u,"video.streamType","streamType"),new h(u,"video.playhead","playhead"),new h(u,"video.playerName","playerName"),new h(u,"video.name","videoName"),new h(u,"video.length","videoLength"),new h(u,"ad.id","adId"),new h(u,"ad.length","adLength"),new h(u,"ad.position","adPosition"),new h(u,"ad.name","adName"),new h(u,"pod.name","podName"),new h(u,"pod.position","podPosition"),new h(u,"pod.playerName","podPlayerName"),new h(u,"pod.startTime","podSecond"),new h(v,"is_primetime","isPrimetime"),new h(v,"session_id","sessionId"),new h(s,"channel","channel"),new h(s,"meta.video.*","metaVideo"),new h(s,"meta.ad.*","metaAd"),new h(t,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(v,x),this,"handleHeartbeatPluginError")},e.prototype._onAppMeasurementReady=function(){this._workQueue.resume()};var r="adobe-analytics",s=r,t="nielsen",u="player",v="adobe-heartbeat",w=2e3,x="error",y="video",z="videoAd",A="ms_s",B="msp_s",C="msa_s",D="mspa_s",E="aa_start",F="sc_ad_start",G="video_load",H="video_start",I="ad_start";d.AdobeAnalyticsPlugin=e}(a.ADB.core,a.ADB.va,a.ADB.va.utils,b),function(a){"use strict";var b={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",STREAM_FORMAT:"a.media.format"},c={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",CREATIVE_URL:"a.media.ad.creativeURL"};a.VideoMetadataKeys=b,a.AdMetadataKeys=c}(b),a.ADB.va.plugins.aa||(a.ADB.va.plugins.aa=b)}(this);

// MediaHeartbeat
!function(a){!function(a){"use strict";function b(){this.trackingServer=void 0,this.channel=void 0,this.ovp=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!1,this.debugLogging=!1}a.MediaHeartbeatConfig=b,a.MediaHeartbeatConfig.sharedInstance=new b}(a.ADB.va),function(a){"use strict";function b(){this.data={}}var c=a.plugins.videoplayer.VideoInfo,d=a.plugins.videoplayer.AdBreakInfo,e=a.plugins.videoplayer.AdInfo,f=a.plugins.videoplayer.ChapterInfo,g=a.plugins.videoplayer.QoSInfo;b.MEDIAINFO_KEY_NAME="a.name",b.MEDIAINFO_KEY_VIDEOID="a.videoId",b.MEDIAINFO_KEY_ADID="a.adId",b.MEDIAINFO_KEY_LENGTH="a.length",b.MEDIAINFO_KEY_PLAYHEAD="a.playhead",b.MEDIAINFO_KEY_STREAMTYPE="a.streamType",b.MEDIAINFO_KEY_POSITION="a.position",b.MEDIAINFO_KEY_STARTTIME="a.startTime",b.MEDIAINFO_KEY_BITRATE="a.bitrate",b.MEDIAINFO_KEY_FPS="a.fps",b.MEDIAINFO_KEY_DROPPEDFRAMES="a.droppedFrames",b.MEDIAINFO_KEY_STARTUPTIME="a.startupTime",b.MEDIAINFO_KEY_TIMEDMETADATA="a.timedMetadata",b.prototype.setValue=function(a,b){this.data[a]=b},b.prototype.getValue=function(a){return this.data.hasOwnProperty(a)?this.data[a]:null},b.prototype.createVideoInfo=function(){var a=new c;return a.id=null!=this.getValue(b.MEDIAINFO_KEY_VIDEOID)?this.getValue(b.MEDIAINFO_KEY_VIDEOID):"",a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(b.MEDIAINFO_KEY_LENGTH)?this.getValue(b.MEDIAINFO_KEY_LENGTH):0,a.playhead=null!=this.getValue(b.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(b.MEDIAINFO_KEY_PLAYHEAD):0,a.streamType=null!=this.getValue(b.MEDIAINFO_KEY_STREAMTYPE)?this.getValue(b.MEDIAINFO_KEY_STREAMTYPE):"",a},b.prototype.createAdBreakInfo=function(){var a=new d;return a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.position=null!=this.getValue(b.MEDIAINFO_KEY_POSITION)?this.getValue(b.MEDIAINFO_KEY_POSITION):0,a.startTime=null!=this.getValue(b.MEDIAINFO_KEY_STARTTIME)?this.getValue(b.MEDIAINFO_KEY_STARTTIME):0,a},b.prototype.createAdInfo=function(){var a=new e;return a.id=null!=this.getValue(b.MEDIAINFO_KEY_ADID)?this.getValue(b.MEDIAINFO_KEY_ADID):"",a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(b.MEDIAINFO_KEY_LENGTH)?this.getValue(b.MEDIAINFO_KEY_LENGTH):0,a.position=null!=this.getValue(b.MEDIAINFO_KEY_POSITION)?this.getValue(b.MEDIAINFO_KEY_POSITION):0,a},b.prototype.createChapterInfo=function(){var a=new f;return a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(b.MEDIAINFO_KEY_LENGTH)?this.getValue(b.MEDIAINFO_KEY_LENGTH):0,a.startTime=null!=this.getValue(b.MEDIAINFO_KEY_STARTTIME)?this.getValue(b.MEDIAINFO_KEY_STARTTIME):0,a.position=null!=this.getValue(b.MEDIAINFO_KEY_POSITION)?this.getValue(b.MEDIAINFO_KEY_POSITION):0,a},b.prototype.createQoSInfo=function(){var a=new g;return a.bitrate=null!=this.getValue(b.MEDIAINFO_KEY_BITRATE)?this.getValue(b.MEDIAINFO_KEY_BITRATE):0,a.fps=null!=this.getValue(b.MEDIAINFO_KEY_FPS)?this.getValue(b.MEDIAINFO_KEY_FPS):0,a.droppedFrames=null!=this.getValue(b.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(b.MEDIAINFO_KEY_DROPPEDFRAMES):0,a.startupTime=null!=this.getValue(b.MEDIAINFO_KEY_STARTUPTIME)?this.getValue(b.MEDIAINFO_KEY_STARTUPTIME):0,a},a.MediaObject=b}(a.ADB.va),function(a,b){"use strict";function c(a){c.__super__.constructor.call(this),this._heartbeat=a}function d(a){d.__super__.constructor.call(this),this._heartbeat=a}function e(a){e.__super__.constructor.call(this),this._heartbeat=a}function f(a){f.__super__.constructor.call(this),this._heartbeat=a}a.extend(c,b.plugins.aa.AdobeAnalyticsPluginDelegate),c.prototype.onError=function(a){b.MediaHeartbeat._onDelegateError.call(this._heartbeat,a)},a.extend(d,b.plugins.ah.AdobeHeartbeatPluginDelegate),d.prototype.onError=function(a){b.MediaHeartbeat._onDelegateError.call(this._heartbeat,a)},a.extend(e,b.HeartbeatDelegate),e.prototype.onError=function(a){b.MediaHeartbeat._onDelegateError.call(this._heartbeat,a)},a.extend(f,b.plugins.videoplayer.VideoPlayerPluginDelegate),f.prototype.getVideoInfo=function(){return this._heartbeat&&this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),this._heartbeat._videoInfo):null},f.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null},f.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null},f.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?this._heartbeat._chapterInfo:null},f.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var a=this._heartbeat._delegate.getQoSObject();if(a&&"object"==typeof a&&a.setValue)return a.createQoSInfo()}return null},b._MediaAnalyticsPluginDelegate=c,b._MediaHeartbeatPluginDelegate=d,b._ADBMediaHeartbeatDelegate=e,b._MediaHeartbeatVideoPlayerPluginDelegate=f}(a.ADB.core,a.ADB.va),function(a,b){"use strict";function c(){}function d(a){d.__super__.constructor.call(this),this._heartbeat=a}var e=b.MediaHeartbeatConfig;b.plugins.nielsen&&(c.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA="media_nielsen_content_metadata",c.MEDIAHEARTBEAT_NIELSEN_AD_METADATA="media_nielsen_ad_metadata",c.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA="media_nielsen_channel_metadata",e.prototype.nielsenConfigKey=void 0,e.prototype.nielsenAppInfo=void 0,a.extend(d,b.plugins.nielsen.NielsenPluginDelegate),d.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentContentMediaObject){var a=this._heartbeat._currentContentMediaObject.getValue(c.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA);if("object"==typeof a)return a}return null},d.prototype.getAdMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentAdMediaObject){var a=this._heartbeat._currentAdMediaObject.getValue(c.MEDIAHEARTBEAT_NIELSEN_AD_METADATA);if("object"==typeof a)return a}return null},d.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentContentMediaObject){var a=this._heartbeat._currentContentMediaObject.getValue(c.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA);if("object"==typeof a)return a}return null},d.prototype.onError=function(a){this._heartbeat&&b.MediaHeartbeat._onError.call(this._heartbeat,a)},b.MediaHeartbeatNielsen=c,b._MediaHeartbeatNielsenPluginDelegate=d)}(a.ADB.core,a.ADB.va),function(b,c){"use strict";function d(){}function e(b,c,d){if(this._logger=new y,this._plugins=[],this._playerPlugin=null,this._aaPlugin=null,this._ahPlugin=null,this._currentContentMediaObject=void 0,this._currentAdMediaObject=void 0,this._videoInfo=void 0,this._adBreakInfo=void 0,this._adInfo=void 0,this._chapterInfo=void 0,this._state={},this._delegate=b,d)this.appMeasurement=d;else{if(!a.s)return void this._logger.error(X,"Valid AppMeasurement instance required for initialising MediaHeartbeat");this.appMeasurement=a.s}c&&"object"==typeof c&&void 0!=c.trackingServer?this._config=c:this._logger.error(X,"Valid config required for initialising MediaHeartbeat")}function f(a,b){if(a==e.Event.AdBreakStart){if(!t.call(this,W))return void this._logger.error(X,"API call trackEvent:AdBreakStart is unsupported in the current state.");b&&"object"==typeof b&&b.setValue?(this._adBreakInfo=b.createAdBreakInfo(),this._adBreakInfo.playerName=this._config.playerName?this._config.playerName:""):this._logger.error(X,"Invalid AdBreak Info for MediaHeartbeatEvent.AdBreakStart event.")}else{if(!t.call(this,W,!0))return void this._logger.error(X,"API call trackEvent:AdBreakComplete is unsupported in the current state.");this._adBreakInfo=void 0}}function g(a,b,c){if(a==e.Event.AdStart){if(!t.call(this,V))return void this._logger.error(X,"API call trackEvent:AdStart is unsupported in the current state.");if(b&&"object"==typeof b&&b.setValue){this._currentAdMediaObject=b,this._adInfo=b.createAdInfo();var d=b.getValue(e.MediaObjectKey.StandardAdMetadata);if(d&&"object"==typeof d)for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f]);this._aaPlugin&&this._aaPlugin.setAdMetadata(c),this._playerPlugin.trackAdStart()}else this._logger.error(X,"Invalid Ad Info for MediaHeartbeatEvent.AdStart event.")}else if(a==e.Event.AdComplete){if(!t.call(this,V,!0))return void this._logger.error(X,"API call trackEvent:AdComplete is unsupported in the current state.");this._playerPlugin.trackAdComplete(),this._adInfo=null}else{if(!t.call(this,V,!0))return void this._logger.error(X,"API call trackEvent:AdSkip is unsupported in the current state.");this._adInfo=null}}function h(a){if(a==e.Event.SeekStart){if(!t.call(this,T))return void this._logger.error(X,"API call trackEvent:SeekStart is unsupported in the current state.");this._playerPlugin.trackSeekStart()}else{if(!t.call(this,T,!0))return void this._logger.error(X,"API call trackEvent:SeekComplete is unsupported in the current state.");this._playerPlugin.trackSeekComplete()}}function i(a,b,c){if(a==e.Event.ChapterStart){if(!t.call(this,U))return void this._logger.error(X,"API call trackEvent:ChapterStart is unsupported in the current state.");b&&"object"==typeof b&&b.setValue?(this._chapterInfo=b.createChapterInfo(),this._aaPlugin&&this._aaPlugin.setChapterMetadata(c),this._playerPlugin.trackChapterStart()):this._logger.error(X,"Invalid Chapter Info for MediaHeartbeatEvent.ChapterStart event.")}else if(a==e.Event.ChapterComplete){if(!t.call(this,U,!0))return void this._logger.error(X,"API call trackEvent:ChapterComplete is unsupported in the current state.");this._chapterInfo=null,this._playerPlugin.trackChapterComplete()}else{if(!t.call(this,U,!0))return void this._logger.error(X,"API call trackEvent:ChapterSkip is unsupported in the current state.");this._chapterInfo=null}}function j(a){if(a==e.Event.BufferStart){if(!t.call(this,S))return void this._logger.error(X,"API call trackEvent:BufferStart is unsupported in the current state.");this._playerPlugin.trackBufferStart()}else{if(!t.call(this,S,!0))return void this._logger.error(X,"API call trackEvent:BufferComplete is unsupported in the current state.");this._playerPlugin.trackBufferComplete()}}function k(){return w.call(this)?void this._playerPlugin.trackBitrateChange():void this._logger.error(X,"API call trackEvent:BitrateChange is unsupported in the current state.")}function l(a){if(a&&"object"==typeof a&&a.setValue){var b=a.getValue(A.MEDIAINFO_KEY_TIMEDMETADATA);this._playerPlugin&&b&&"string"==typeof b&&this._playerPlugin.trackTimedMetadata(b)}}function m(){this._aaPlugin=new H(this.appMeasurement,new J);var a=new I;a.channel=this._config.channel?this._config.channel:"",a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,this._aaPlugin.configure(a),this._plugins.push(this._aaPlugin)}function n(){this._ahPlugin=new K(new M);var a=new L(this._config.trackingServer,this.appMeasurement.visitor.marketingCloudOrgID);a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,a.ovp=this._config.ovp?this._config.ovp:"",a.ssl=this._config.ssl,a.sdk=this._config.appVersion?this._config.appVersion:"";var b=s.call(this);b&&b.length>0&&(a.__primetime=!0,a.__psdkVersion=b),this._ahPlugin.configure(a),this._plugins.push(this._ahPlugin)}function o(){this._playerPlugin=new E(new G(this));var a=new F;a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,this._playerPlugin.configure(a),this._plugins.push(this._playerPlugin)}function p(){if(c.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo){this._nielsenPlugin=new c.plugins.nielsen.NielsenPlugin(new c._MediaHeartbeatNielsenPluginDelegate(this));var a=new c.plugins.nielsen.NielsenPluginConfig;a.nielsenPluginConfig=c.MediaHeartbeat._debugLogging||this._config.debugLogging,a.appInfo=this._config.nielsenAppInfo,a.configKey=this._config.nielsenConfigKey,this._nielsenPlugin.configure(a),this._plugins.push(this._nielsenPlugin)}}function q(){var a=new C;a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,this._heartbeat=new B(new D(this),this._plugins),this._heartbeat.configure(a)}function r(a){this._logger.error(X,a.getMessage()+" | "+a.getDetails())}function s(){return this._currentContentMediaObject?this._currentContentMediaObject.getValue(Y):null}function t(a,b){if(a!=O&&(!this._state[O]||this._state[R]))return!1;if(a===P&&u.call(this),b?!this._state[a]:this._state[a])return!1;switch(a){case P:this._state[Q]=b;break;case Q:this._state[P]=b;break;case W:if(!b&&this._state[V])return!1;break;case V:if(!b&&!this._state[W])return!1;case U:b||this._state[P]||this.trackPlay()}return this._state[a]=!b,!0}function u(){this._state[T]&&this.trackEvent(e.Event.SeekComplete),this._state[S]&&this.trackEvent(e.Event.BufferComplete)}function v(a){this._state[a]=!1}function w(){return this._state[O]}function x(){this._state={}}var y=b.Logger,z=c.plugins.videoplayer.AssetType,A=c.MediaObject,B=c.Heartbeat,C=c.HeartbeatConfig,D=c._ADBMediaHeartbeatDelegate,E=c.plugins.videoplayer.VideoPlayerPlugin,F=c.plugins.videoplayer.VideoPlayerPluginConfig,G=c._MediaHeartbeatVideoPlayerPluginDelegate,H=c.plugins.aa.AdobeAnalyticsPlugin,I=c.plugins.aa.AdobeAnalyticsPluginConfig,J=c._MediaAnalyticsPluginDelegate,K=c.plugins.ah.AdobeHeartbeatPlugin,L=c.plugins.ah.AdobeHeartbeatPluginConfig,M=c._MediaHeartbeatPluginDelegate;d.prototype.getCurrentPlaybackTime=function(){return null},d.prototype.getQoSObject=function(){return null},e.Event={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",TimedMetadataUpdate:"timedMetadataUpdate"},e.StreamType={VOD:"vod",LIVE:"live",LINEAR:"linear"},e.MediaObjectKey={StandardVideoMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed"},e.VideoMetadataKeys=c.plugins.aa.VideoMetadataKeys,e.AdMetadataKeys=c.plugins.aa.AdMetadataKeys,e.version=function(){return c.Version.getVersion()},e.prototype.trackSessionStart=function(a,b){if(!t.call(this,O))return void this._logger.error(X,"API call trackSessionStart is unsupported in the current state.");if(!a||"object"!=typeof a||!a.setValue)return v.call(this,O),void this._logger.error(X,"Invalid Media Info object");this._currentContentMediaObject=a,this._videoInfo=a.createVideoInfo(),this._videoInfo.playerName=void 0!=this._config.playerName?this._config.playerName:"";var c=a.getValue(e.MediaObjectKey.StandardVideoMetadata);if(c&&"object"==typeof c)for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d]);var f=a.getValue(e.MediaObjectKey.VideoResumed);f&&"boolean"==typeof f&&(this._videoInfo.resumed=a.getValue(e.MediaObjectKey.VideoResumed)),N.call(this),this._playerPlugin&&(this._aaPlugin&&this._aaPlugin.setVideoMetadata(b),this._playerPlugin.trackVideoLoad(),this._playerPlugin.trackSessionStart())},e.prototype.trackPlay=function(){return t.call(this,P)?void this._playerPlugin.trackPlay():void this._logger.error(X,"API call trackPlay is unsupported in the current state.")},e.prototype.trackPause=function(){return t.call(this,Q)?void(this._playerPlugin&&this._playerPlugin.trackPause()):void this._logger.error(X,"API call trackPause is unsupported in the current state.")},e.prototype.trackComplete=function(){return t.call(this,R)?void(this._playerPlugin&&this._playerPlugin.trackComplete(function(){})):void this._logger.error(X,"API call trackComplete is unsupported in the current state.")},e.prototype.trackSessionEnd=function(){return t.call(this,O,!0)?(this._playerPlugin&&this._playerPlugin.trackVideoUnload(),x.call(this),void(this._plugins=[])):(x.call(this),this._plugins=[],void this._logger.error(X,"API call trackSessionEnd is unsupported in the current state."))},e.prototype.trackError=function(a){return w.call(this)?void(this._playerPlugin&&this._playerPlugin.trackVideoPlayerError(a?a:"unknown_error_id")):void this._logger.error(X,"API call trackError is unsupported in the current state.")},e.prototype.trackEvent=function(a,b,c){switch(a){case e.Event.AdBreakStart:case e.Event.AdBreakComplete:f.call(this,a,b);break;case e.Event.AdStart:case e.Event.AdComplete:case e.Event.AdSkip:g.call(this,a,b,c);break;case e.Event.SeekStart:case e.Event.SeekComplete:h.call(this,a);break;case e.Event.ChapterStart:case e.Event.ChapterComplete:case e.Event.ChapterSkip:i.call(this,a,b,c);break;case e.Event.BufferStart:case e.Event.BufferComplete:j.call(this,a);break;case e.Event.BitrateChange:k.call(this);break;case e.Event.TimedMetadataUpdate:l.call(this,b)}};var N=function(){if(!this.appMeasurement||!this.appMeasurement.visitor)throw new Error("appMeasurement.visitor object cannot be NULL.");m.call(this),n.call(this),o.call(this),p.call(this),q.call(this)},O=1,P=2,Q=3,R=4,S=5,T=6,U=7,V=8,W=9;e.createMediaObject=function(a,b,c,d){var f=new A;f.setValue(A.MEDIAINFO_KEY_VIDEOID,b),f.setValue(A.MEDIAINFO_KEY_NAME,a),f.setValue(A.MEDIAINFO_KEY_LENGTH,c),f.setValue(A.MEDIAINFO_KEY_PLAYHEAD,0);var g=z.ASSET_TYPE_VOD;switch(d){case e.StreamType.VOD:g=z.ASSET_TYPE_VOD;break;case e.StreamType.LIVE:g=z.ASSET_TYPE_LIVE;break;case e.StreamType.LINEAR:g=z.ASSET_TYPE_LINEAR}return f.setValue(A.MEDIAINFO_KEY_STREAMTYPE,g),f},e.createAdBreakObject=function(a,b,c){var d=new A;return d.setValue(A.MEDIAINFO_KEY_NAME,a),d.setValue(A.MEDIAINFO_KEY_POSITION,b),d.setValue(A.MEDIAINFO_KEY_STARTUPTIME,c),d},e.createAdObject=function(a,b,c,d){var e=new A;return e.setValue(A.MEDIAINFO_KEY_NAME,a),e.setValue(A.MEDIAINFO_KEY_ADID,b),e.setValue(A.MEDIAINFO_KEY_POSITION,c),e.setValue(A.MEDIAINFO_KEY_LENGTH,d),e},e.createChapterObject=function(a,b,c,d){var e=new A;return e.setValue(A.MEDIAINFO_KEY_NAME,a),e.setValue(A.MEDIAINFO_KEY_POSITION,b),e.setValue(A.MEDIAINFO_KEY_LENGTH,c),e.setValue(A.MEDIAINFO_KEY_STARTTIME,d),e},e.createQoSObject=function(a,b,c,d){var e=new A;return e.setValue(A.MEDIAINFO_KEY_BITRATE,a),e.setValue(A.MEDIAINFO_KEY_FPS,c),e.setValue(A.MEDIAINFO_KEY_DROPPEDFRAMES,d),e.setValue(A.MEDIAINFO_KEY_STARTUPTIME,b),e},e.createTimedMetadataObject=function(a){var b=new A;return b.setValue(A.MEDIAINFO_KEY_TIMEDMETADATA,a),b};var X="MediaHeartbeat",Y="a.__pttvsdkVersion";c.MediaHeartbeat=e,c.MediaHeartbeatDelegate=d,c.MediaHeartbeat.StreamType=e.StreamType,c.MediaHeartbeat.Event=e.Event,c.MediaHeartbeat.version=e.version,c.MediaHeartbeat.createMediaObject=e.createMediaObject,c.MediaHeartbeat.createAdBreakObject=e.createAdBreakObject,c.MediaHeartbeat.createAdObject=e.createAdObject,c.MediaHeartbeat.createChapterObject=e.createChapterObject,c.MediaHeartbeat.createQoSObject=e.createQoSObject,c.MediaHeartbeat.createTimedMetadataObject=e.createTimedMetadataObject,c.MediaHeartbeat._onDelegateError=r,c.MediaHeartbeat._debugLogging=!1}(a.ADB.core,a.ADB.va),a.ADB||(a.ADB={}),a.ADB.core||(a.ADB.core=core),a.ADB.va||(a.ADB.va=va),a.ADB.va.plugins||(a.ADB.va.plugins={})}(this);

</script><script id="hbCustomNbcnews">
/* global $, $t, s */
(function() {
    'use strict';
    //calculated on load
    //statics
    var noValue = 'not available';
    var isAmp = location.search.indexOf('googleamp') != -1;

    var playerStyle = (function() {
        //needs work 
        var style = false;
        switch ($t('DTM_dataLayer.routename', noValue)) {
            case 'show':
            case 'videofront':
                style = 'Front Player';
                break;
            case 'canonical':
                style = 'Canonical';
                break;
            case 'article':
                style = 'Inline';
                break;
            case 'offsite':
                if (isAmp) {
                    style = "AMP Player";
                } else {
                    style = 'Offsite Embedded';
                }
                break;
            default:
                break;
        }
        return style;
    })();

    //formating for publish date
    var formatDate = function(dateStr) {
        //expecting format: 2016-12-08 23:32:02 Z, convert to 12/22/2015
        //also 2016-12-30T23:33:59.000+0000 posible as well.
        if (typeof dateStr !== 'string') {
            return false;
        }
        dateStr = dateStr.split(' ')[0].split('T')[0].split('-');
        var newDate = dateStr[1] + '/' + dateStr[2] + '/' + dateStr[0];
        //be sure its the right format
        return /[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{4}$/.test(newDate) ? newDate : false;
    };
    //expose function for custom values
    window.hbCutomValues = (function() {
        var customBuilder = function(context) {
            var eventDataRaw = context.eventDataRaw;
            var customContextData = context.customContextData;
            $.extend(customContextData, {
                'videoprogram': eventDataRaw.source || 'NBC News',
                'videonetwork': (eventDataRaw.canonicalUrl && eventDataRaw.canonicalUrl.indexOf('msnbc.com') != -1) ? 'msnbc' : 'nbc', //msnbc or nbc
                'videoplayerstyle': playerStyle || noValue,
                'videopublishdate': formatDate(eventDataRaw.pubDate) || noValue,
                'videopagecontentcategory': isAmp ? (document.location.search.split('&')[1] || noValue) : $t('DTM_dataLayer.taxonomy_parent', $t('DTM_dataLayer.taxonomy', 'other')),
                'videopagetype': isAmp ? 'AMP:post' : $t("dataLayer.contentType", s.eVar2 || noValue),
                'videopagestorylines': $t('dataLayer.storyline', noValue),
                'videoplayercount': $t('dataLayer.videoCount', noValue)
            });
            return customContextData;
        };
        customBuilder.appMAccount = function() {
            var appMAccount = window.getAnalyticsAccount(); //use the s_code account reader thing
            //appMAccount = appMAccount === 'msnbcnbcnewscomprod' ? 'nbcunbcnewshbtest' : appMAccount; //(temp) use test suite for prod;
            return appMAccount;
        };
        customBuilder.playerStyle = playerStyle;
        //get referrer pagename if its an embeded amp page.
        customBuilder.pageName = isAmp ? 'nbcnews:AMP:post:' + document.referrer.substr(document.referrer.lastIndexOf('/') + 1).split(/-n[0-9].*$/)[0] : false;

        return customBuilder;
    })();
})();
</script><script id="heartbeatSubscription">
//version 2.19
(function() {
    /*global $t, ADB, console, $ndp, AppMeasurement, visitor*/
    $t('register', 'ahb_adobeAppMeasurmentLoaded');
    var setupHeartbeat = function(s) {
        'use strict';
        //statics
        var noValue = 'not available';
        var playerName = window.otherVideoPlayerTech || 'NDP player'; //at this point, the whole thing shoudl be re-done, but adding a player type global var
        var debugState = window.localStorage && window.localStorage.getItem('jf_test') ? true : false;

        //privates
        var _mediaHeartbeat = null;
        var _appMeasurement = null;
        var _videoData = null; //video data populated in scope by event
        var _adData = null; //video data populated in scope by event
        var _stateInfo = {
            adPosition: 1,
            playheadPosition: 0,
            startupTime: 0,
            manualPlayTime: 0,
            videoCount: 0,
            playState: 'stop',
            videoType: 'VOD Clip',
            inAd: false

        };

        //constructors from adobe for deligate
        var CustomMediaHeartbeatDelegate = new ADB.va.MediaHeartbeatDelegate();
        var MediaHeartbeat = ADB.va.MediaHeartbeat; //mapping to match documentation

        //video info deligate
        CustomMediaHeartbeatDelegate.getCurrentPlaybackTime = function() {
            //playhead will be 0 for ads.
            return Math.round(_stateInfo.playheadPosition / 1000) || 0;
        };

        CustomMediaHeartbeatDelegate.getQoSObject = function() {
            //dont have QOS data right now (<bitrate>, <startuptime>, <fps>, <droppedFrames>)
            return MediaHeartbeat.createQoSObject(0, Math.round(_stateInfo.startupTime), 0, 0);
        };

        var createAMandHBObjects = function() {
            //create new appMeasurementmain and heartbeat instance 
            if (!_mediaHeartbeat) {
                //use DTM values since this may load before the page track is complete
                var appMAccount = window.hbCutomValues && typeof window.hbCutomValues.appMAccount === 'function' && window.hbCutomValues.appMAccount() || ''; //get from site specific function
                // Set-up the AppMeasurement component using values from page version.
                _appMeasurement = new AppMeasurement();
                _appMeasurement.visitor = visitor;
                _appMeasurement.trackingServer = s.trackingServer;
                _appMeasurement.account = appMAccount;
                _appMeasurement.charSet = "UTF-8";
                _appMeasurement.doPlugins = false;
                _appMeasurement.ssl = true;
                $t('track', 'ahb_adobeAppMeasurmentLoaded', {
                    'sc_obj': _appMeasurement
                });

                //Media Heartbeat initialization
                var mediaConfig = new ADB.va.MediaHeartbeatConfig();
                mediaConfig.trackingServer = 'nbcume.hb.omtrdc.net';
                mediaConfig.playerName = playerName;
                mediaConfig.debugLogging = debugState; // set this to false for production apps.
                mediaConfig.ssl = true;
                mediaConfig.appVersion = $ndp && $ndp.__version || 'unknown'; //ndp player version
                mediaConfig.ovp = 'unknown'; //change later
                mediaConfig.channel = (function() {
                    if (window.hbCutomValues && window.hbCutomValues.playerStyle === "Offsite Embedded") {
                        return 'Off-domain';
                    }
                    return 'On-domain';
                })();

                _mediaHeartbeat = new MediaHeartbeat(CustomMediaHeartbeatDelegate, mediaConfig, _appMeasurement);
            }
        };

        var setStartupTime = function(playInitiate) {
            if (!window.performance || _stateInfo.startupTime !== 0) {
                //only set startuptime first play
                return;
            }
            var startupTime = 0;
            if (playInitiate === 'Auto') {
                startupTime = performance.now() / 1000;
            } else {
                startupTime = (performance.now() - _stateInfo.manualPlayTime) / 1000;
            }
            _stateInfo.startupTime = startupTime;
        };

        var convertDuration = function(duration) {
            //if this is an ISO 8601 duration
            var ISO8601 = /^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/;
            if (ISO8601.test(duration)) {
                var h = 0,
                    m = 0,
                    s = 0;
                var matches = ISO8601.exec(duration);
                if (matches[1]) h = Number(matches[1]);
                if (matches[2]) m = Number(matches[2]);
                if (matches[3]) s = Number(matches[3]);
                return h * 3600 + m * 60 + s;
            }
            //else return number
            return duration;
        };

        $t('on', 'ndp_playerManualPlay', function() {
            _stateInfo.manualPlayTime = window.performance && performance.now() || 0;
            if (debugState) {
                console.log('* ndp_playerManualPlay (' + performance.now() + ')');
            }

        });

        //setup events
        $t('on', 'ndp_videoEvent', function(e, data) {
            //populate scope data
            var eventSection = data.eventType.split('_')[1] || '';
            if (eventSection === 'AdEvent') {
                _adData = data; //populate scope data with video data
            } else if (eventSection === 'PlaybackEvent') {
                _videoData = data; //populate scope data with video data
            }

            //if this is a progress event, populate playhead and exit
            if (data.eventType.indexOf('PROGRESS') >= 0) {
                if (data.videoData && data.videoData.playheadPosition !== 0) {
                    //dont update playhead with ad progress
                    if (data.eventType !== 'NDP_AdEvent_PROGRESS') {
                        _stateInfo.playheadPosition = data.videoData.playheadPosition;
                    }
                }

                //let the first AdEvent_PROGRESS event through
                if (!(data.eventType === 'NDP_AdEvent_PROGRESS' && _stateInfo.inAd === false)) {
                    return;
                }
            }

            //if the heartbeat instance wasnt created yet, do it now
            createAMandHBObjects();

            var eventData = _videoData && _videoData.videoData || {};
            var eventDataRaw = eventData.raw || {};

            //set videoType based on guid (VOD, LINEAR, LIVE)
            if (/^lv_/.test(eventDataRaw.guid) || /^nbcnewslive/.test(eventDataRaw.guid)) {
                _stateInfo.videoType = 'Linear';
            } else if (/^nn_netcast_/.test(eventDataRaw.guid)) {
                _stateInfo.videoType = 'VOD Episode';
            } else {
                _stateInfo.videoType = 'VOD Clip';
            }

            var playInitiate = (function() {
                if (eventDataRaw.isContinuousPlay) {
                    return 'Continuous';
                }
                if (!eventDataRaw.autoPlay) {
                    return 'Manual';
                }
                return 'Auto';
            })();

            var playListInfo = (function() {
                var playListInfo = {
                    'id': false,
                    'label': false
                };
                if (eventDataRaw.video_playlists && eventDataRaw.video_playlists[0]) {
                    playListInfo.label = eventDataRaw.video_playlists[0].label || false;
                    playListInfo.id = eventDataRaw.video_playlists[0].playlist_id || false;
                }
                return playListInfo;
            })();

            //had to move this out becuase of the pre-load event firing, and not knowing if ad_Start or content_Start firing
            var startSession = function(customContextData) {
                //start session on first frame

                if (_stateInfo.playState == 'stop') {
                    _stateInfo.playState = 'sessionStarted';
                    var mediaInfo = MediaHeartbeat.createMediaObject(
                        customContextData.videotitle || noValue, //video name
                        customContextData.videoguid || noValue, //video ID
                        (function() {
                            if (_stateInfo.videoType === "Linear") {
                                return -1; //set duration to -1 if its linear
                            } else {
                                return convertDuration(eventDataRaw.duration);
                            }
                        })(), //videoLength
                        (function() {
                            if (_stateInfo.videoType === "Linear") {
                                return MediaHeartbeat.StreamType.LIVE;
                            } else {
                                return MediaHeartbeat.StreamType.VOD; //default VOD
                            }
                        })()
                    );
                    _mediaHeartbeat.trackSessionStart(mediaInfo, customContextData);
                }
            };

            var pageName = window.hbCutomValues && window.hbCutomValues.pageName || s.pageName; //grab pagename from custom

            var customContextData = { //custom context data for calls
                'videocliptype': eventDataRaw.videoType || noValue,
                'videocontentsource': eventDataRaw.source || noValue, //show name / network
                'videocontenttype': 'Video',
                'videodate': s.customTimeParting('d'),
                'videoday': s.customTimeParting('dw'),
                'videoguid': eventDataRaw.guid || noValue,
                'videohour': s.customTimeParting('h'),
                'videoinitiate': playInitiate || noValue, //"Auto" vs. "Manual" vs. "Continuous"
                'videominute': s.customTimeParting('m'), //use customTimepart from scode file
                'videompxid': eventDataRaw.mpxId || noValue,
                'videonetwork': eventDataRaw.newsNetwork || noValue,
                'videopagecontentcategory': noValue, //set remotly
                'videopagename': pageName || noValue,
                'videopagetype': noValue, //set remotly
                'videoplatform': 'Web', //[todo] maybe mobile too?
                'videoplayerstyle': noValue, //set remotly
                'videoplayertech': $ndp && $ndp.playbackAdapter || noValue,
                'videoplayerurl': window.location.href.split('?')[0],
                'videoplaylist': playListInfo.label || noValue,
                'videoplaylistid': playListInfo.id || noValue,
                'videoprogram': eventDataRaw.source || noValue,
                'videopublishdate': noValue,
                'videoscreen': 'Normal', //[TODO] make this also show "Full"
                'videostatus': 'Unrestricted',
                'videosubcat1': noValue, //mpx primary category
                'videosubcat2': noValue,
                'videotitle': eventDataRaw.title || noValue,
                //optionsal values
                'videoadblockerdetection': s.cookieRead("i_abd") || noValue, //use s cookieread
                'videoflashversion': s.eVar88 || noValue, //uses "FlashDetect.raw"
                'videonativesponsor': noValue,
                'videopagestorylines': noValue,
                'videoplayercount': noValue,
                'videoplayertestvalue': window.__DY_VIDEO_TEST__ && window.__DY_VIDEO_TEST__.videoPlayerType || noValue,
                'videoscrollcount': s.eVar86 || noValue,
                'videosessionnumber': s.eVar35 || noValue, //session number count (from adobe)
                'videostreamcount': _stateInfo.videoCount || noValue, //video count (set inside the event)
                'videovideocontenttype': _stateInfo.videoType,
                'videocontentrating': eventDataRaw.sentiment || noValue,
                'videovisitorid': visitor.getMarketingCloudVisitorID() //for testing mostly, visitorID

            };
            //append site specific data from seperate function
            if (window.hbCutomValues) {
                customContextData = window.hbCutomValues({
                    'customContextData': customContextData,
                    'eventDataRaw': eventDataRaw,
                    '_stateInfo': _stateInfo
                });

            }
            if (debugState) {
                console.log('* ndp_videoEvent (' + performance.now() + ') : ' + data.eventType + ' : %O : %O : %O', data, customContextData, JSON.parse(JSON.stringify(_stateInfo)));
            }

            //specific events
            switch (data.eventType) {
                case 'NDP_PlaybackEvent_LOADED':
                    //set videostreamcount, and increment
                    _stateInfo.videoCount = _stateInfo.videoCount + 1;
                    customContextData.videostreamcount = _stateInfo.videoCount;

                    if (_stateInfo.playState !== 'stop') {
                        //if other video is started while in pause, close out last session, and reset values
                        _mediaHeartbeat.trackSessionEnd();
                        _stateInfo.playState = 'stop';
                        _stateInfo.adPosition = 1;
                        _stateInfo.playheadPosition = 0;
                        _stateInfo.inAd = false;
                    }
                    //reload app measurement settings before a videoLoad (to be sure its up to date)
                    _appMeasurement.clearVars();
                    _appMeasurement.pageName = pageName;
                    break;

                case 'NDP_PlaybackEvent_START':
                    //set startup time
                    setStartupTime(playInitiate);

                    startSession(customContextData);

                    if (_stateInfo.adPosition !== 1) { //if just came from an ad, end the adbreak
                        _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdBreakComplete);
                        _stateInfo.adPosition = 1;

                        //do a seek event to force event fire at playback start after ad
                        _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.SeekStart);
                        _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.SeekComplete);
                    }
                    if (_stateInfo.playState !== 'play') {
                        //if first asset after load
                        _stateInfo.playState = 'play';
                        _mediaHeartbeat.trackPlay();
                    }
                    break;

                case 'NDP_PlaybackEvent_PLAY':
                case 'NDP_AdEvent_PLAY':
                    //play was resumed (filter multiple plays)
                    if (_stateInfo.playState === 'pause') {
                        _stateInfo.playState = 'play';
                        _mediaHeartbeat.trackPlay();
                    }
                    break;
                case 'NDP_PlaybackEvent_PAUSE':
                case 'NDP_AdEvent_PAUSE':
                    _stateInfo.playState = 'pause';
                    _mediaHeartbeat.trackPause();
                    break;

                case 'NDP_PlaybackEvent_SEEK':
                    _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.SeekStart);
                    _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.SeekComplete);
                    //track rewind event
                    if (eventData.playheadPosition < _stateInfo.playheadPosition) {
                        _appMeasurement.contextData = customContextData;
                        _appMeasurement.contextData.videoscrub = 'rewind';
                        _appMeasurement.tl(this, 'o', 'Video Rewind', null);
                    }
                    break;

                case 'NDP_PlaybackEvent_COMPLETE':
                    _mediaHeartbeat.trackComplete();
                    _mediaHeartbeat.trackSessionEnd();
                    _stateInfo.playState = 'stop';
                    _stateInfo.playheadPosition = 0;
                    break;

                case 'NDP_AdEvent_START':
                    //move all ad logic to progress
                    //have to use this since content_loaded fires earlier.
                    startSession(customContextData);
                    break;

                case 'NDP_AdEvent_PROGRESS':
                    //set startup time 
                    _stateInfo.inAd = true;
                    setStartupTime(playInitiate);
                    //for ads, its only ever at the beginings for now, so hard coded
                    var adData = _adData && _adData.videoData || {};
                    var adLength = Math.round(adData.totalLength / 1000) || 0;
                    var adBreakInfo = MediaHeartbeat.createAdBreakObject(
                        noValue, //name
                        1, //position 
                        0); //startTime
                    var adInfo = MediaHeartbeat.createAdObject(
                        noValue, //name
                        ('rand_' + (Math.random() * 36 * 100000 | 0).toString(36)), //id (random ID)
                        _stateInfo.adPosition, //position
                        adLength); //length

                    if (_stateInfo.adPosition === 1) { //start adBreak
                        _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdBreakStart, adBreakInfo);
                    }
                    _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdStart, adInfo, customContextData);
                    _stateInfo.adPosition = _stateInfo.adPosition + 1;
                    //do the track play AFTER the ad starts
                    if (_stateInfo.playState !== 'play') {
                        //if first asset after load
                        _stateInfo.playState = 'play';
                        _mediaHeartbeat.trackPlay();
                    }
                    break;

                case 'NDP_AdEvent_COMPLETE':
                    if (_stateInfo.inAd) {
                        _stateInfo.inAd = false;
                        _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdComplete);
                        _stateInfo.playheadPosition = 0;
                    }
                    break;

                default:
                    break;
            }
        });
    };

    //run after adobe is loaded, or if its alrady loaded.
    if ($t('dtm_adobeAppMeasurmentLoaded', 'not loaded') !== 'not loaded') {
        setupHeartbeat(window.s);
    } else {
        $t('on', 'dtm_adobeAppMeasurmentLoaded', function() {
            setupHeartbeat(window.s);
        });
    }
})();
</script><script>
window.disableAutoPlay = true;
window.enableAutoPlaySectionList = ['meet-the-press','nightly-news'];
</script><script>
$t('on', 'dtm_directCall', function(e) {
    //set cookie on autorefresh to be used by pageview
    if ($t(e.type) === 'autoRefresh') {
        window.s && s.cookieWrite('nbc-auto-refresh', true);
    }
});
</script><script>
//DIL library starts. ***Not to be altered**
"function"!==typeof window.DIL&&(window.DIL=function(a,c){var e=[],b,h;a!==Object(a)&&(a={});var g,k,q,m,r,n,x,E,t,A,L,B,C,F;g=a.partner;k=a.containerNSID;q=!!a.disableDestinationPublishingIframe;m=a.iframeAkamaiHTTPS;r=a.mappings;n=a.uuidCookie;x=!0===a.enableErrorReporting;E=a.visitorService;t=a.declaredId;A=!0===a.removeFinishedScriptsAndCallbacks;L=!0===a.delayAllUntilWindowLoad;B=!0===a.disableIDSyncs;C="undefined"===typeof a.secureDataCollection||!0===a.secureDataCollection;F=!0===a.useCORSOnly;
var M,N,I,G,O,P,Q,R;M=!0===a.disableScriptAttachment;N=!0===a.disableDefaultRequest;I=a.afterResultForDefaultRequest;G=a.dpIframeSrc;O=!0===a.testCORS;P=!0===a.useJSONPOnly;Q=a.visitorConstructor;R=!0===a.disableCORS;x&&DIL.errorModule.activate();var T=!0===window._dil_unit_tests;(b=c)&&e.push(b+"");if(!g||"string"!==typeof g)return b="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:b,filename:"dil.js"}),Error(b);b="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";
if(k||"number"===typeof k)k=parseInt(k,10),!isNaN(k)&&0<=k&&(b="");b&&(k=0,e.push(b),b="");h=DIL.getDil(g,k);if(h instanceof DIL&&h.api.getPartner()===g&&h.api.getContainerNSID()===k)return h;if(this instanceof DIL)DIL.registerDil(this,g,k);else return new DIL(a,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+g+" and containerNSID = "+k);var y={IS_HTTPS:C||"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC",
MILLIS_PER_DAY:864E5,DIL_COOKIE_NAME:"AAMC_"+encodeURIComponent(g)+"_"+k,FIRST_PARTY_SYNCS:"AMSYNCS",FIRST_PARTY_SYNCS_ON_PAGE:"AMSYNCSOP"},J={stuffed:{}},v={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],
num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:k+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2E3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(d){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=
!0;var l=this,s,f,a,b;if("function"===typeof d&&"function"===typeof d.getInstance){if(E===Object(E)&&(s=E.namespace)&&"string"===typeof s)f=d.getInstance(s,{idSyncContainerID:k});else{this.releaseType="no namespace";this.releaseRequests();return}if(f===Object(f)&&f instanceof d&&"function"===typeof f.isAllowed&&"function"===typeof f.getMarketingCloudVisitorID&&"function"===typeof f.getCustomerIDs&&"function"===typeof f.isOptedOut){this.VisitorAPI=d;if(!f.isAllowed()){this.releaseType="VisitorAPI not allowed";
this.releaseRequests();return}this.instance=f;a=function(d){"VisitorAPI"!==l.releaseType&&(l.mid=d,l.releaseType="VisitorAPI",l.releaseRequests())};b=f.getMarketingCloudVisitorID(a);if("string"===typeof b&&b.length){a(b);return}setTimeout(function(){"VisitorAPI"!==l.releaseType&&(l.releaseType="timeout",l.releaseRequests())},this.getLoadTimeout());return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(e){this.releaseRequests()}},releaseRequests:function(){this.calledBack=
!0;p.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():null},getMIDQueryString:function(){var d=w.isPopulatedString,l=this.getMarketingCloudVisitorID();d(this.mid)&&this.mid===l||(this.mid=l);return d(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(d){if(d===Object(d)){var l="",s=[],f=[],a,b;for(a in d)d.hasOwnProperty(a)&&
(f[0]=a,b=d[a],b===Object(b)&&(f[1]=b.id||"",f[2]=b.authState||0,s.push(f),f=[]));if(f=s.length)for(d=0;d<f;d++)l+="&d_cid_ic="+u.encodeAndBuildRequest(s[d],"%01");return l}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(d){this.isOptedOut=d;this.isOptedOutCallbackCalled=!0;p.registerRequest()},getLoadTimeout:function(){var d=
this.instance;if(d){if("function"===typeof d.getLoadTimeout)return d.getLoadTimeout();if("undefined"!==typeof d.loadTimeout)return d.loadTimeout}return this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(d,l){var s=w.isPopulatedString,f=encodeURIComponent;if(d===Object(d)&&s(l)){var a=d.dpid,b=d.dpuuid,e=null;if(s(a)&&s(b)){e=f(a)+"$"+f(b);if(!0===this.declaredIdCombos[e])return"setDeclaredId: combo exists for type '"+
l+"'";this.declaredIdCombos[e]=!0;this.declaredId[l]={dpid:a,dpuuid:b};return"setDeclaredId: succeeded for type '"+l+"'"}}return"setDeclaredId: failed for type '"+l+"'"},getDeclaredIdQueryString:function(){var d=this.declaredId.request,l=this.declaredId.init,a=encodeURIComponent,f="";null!==d?f="&d_dpid="+a(d.dpid)+"&d_dpuuid="+a(d.dpuuid):null!==l&&(f="&d_dpid="+a(l.dpid)+"&d_dpuuid="+a(l.dpuuid));return f}},registerRequest:function(d){var l=this.firingQueue;d===Object(d)&&l.push(d);this.firing||
!l.length||L&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,d=l.shift(),d.src=d.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),w.isPopulatedString(d.corsPostData)&&(d.corsPostData=d.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),D.fireRequest(d),this.firstRequestHasFired||
"script"!==d.tag&&"cors"!==d.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(Q||window.Visitor)},requestRemoval:function(d){if(!A)return"removeFinishedScriptsAndCallbacks is not boolean true";var l=this.toRemove,a,f;d===Object(d)&&(a=d.script,f=d.callbackName,(a===Object(a)&&"SCRIPT"===a.nodeName||"no script created"===a)&&"string"===typeof f&&f.length&&l.push(d));if(this.readyToRemove&&l.length){f=l.shift();a=f.script;f=f.callbackName;"no script created"!==a?
(d=a.src,a.parentNode.removeChild(a)):d=a;window[f]=null;try{delete window[f]}catch(b){}this.removed.push({scriptSrc:d,callbackName:f});DIL.variables.scriptsRemoved.push(d);DIL.variables.callbacksRemoved.push(f);return this.requestRemoval()}return"requestRemoval() processed"}};h=function(){var d="http://fast.",l="?d_nsid="+k+"#"+encodeURIComponent(document.location.href);if("string"===typeof G&&G.length)return G+l;y.IS_HTTPS&&(d=!0===m?"https://fast.":"https://");return d+g+".demdex.net/dest5.html"+
l};var z={THROTTLE_START:3E4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:"destination_publishing_iframe_"+g+"_"+k,url:h(),onPagePixels:[],iframeHost:null,getIframeHost:function(d){if("string"===typeof d){var l=d.split("/");if(3<=l.length)return l[0]+"//"+l[2];e.push("getIframeHost: url is malformed: "+d);return d}},iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:y.POST_MESSAGE_ENABLED?15:100,ibsDeleted:[],jsonWaiting:[],jsonProcessed:[],
canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function d(){f=document.createElement("iframe");f.sandbox="allow-scripts allow-same-origin";f.title="Adobe ID Syncing iFrame";f.id=a.id;f.style.cssText="display: none; width: 0; height: 0;";f.src=a.url;a.newIframeCreated=!0;l();document.body.appendChild(f)}function l(){u.addListener(f,"load",function(){f.className="aamIframeLoaded";
a.iframeHasLoaded=!0;a.requestToProcess()})}var a=this,f=document.getElementById(this.id);f?"IFRAME"!==f.nodeName?(this.id+="_2",this.iframeIdChanged=!0,d()):(this.newIframeCreated=!1,"aamIframeLoaded"!==f.className?(this.originalIframeHasLoadedAlready=!1,l()):(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.iframe=f,this.requestToProcess())):d();this.iframe=f},requestToProcess:function(d,l){var a=this;d&&!w.isEmptyObject(d)&&this.jsonWaiting.push([d,l]);if((this.receivedThirdPartyCookiesNotification||
!y.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var f=this.jsonWaiting.shift();this.process(f[0],f[1]);this.requestToProcess()}this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){a.messageSendingInterval=y.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},processSyncOnPage:function(d){var l,a,f;if((l=d.ibs)&&l instanceof Array&&(a=l.length))for(d=
0;d<a;d++)f=l[d],f.syncOnPage&&this.checkFirstPartyCookie(f,"","syncOnPage")},process:function(d,l){var a=encodeURIComponent,f,b,e,c,g,h;l===Object(l)&&(h=u.encodeAndBuildRequest(["",l.dpid||"",l.dpuuid||""],","));if((f=d.dests)&&f instanceof Array&&(b=f.length))for(e=0;e<b;e++)c=f[e],g=[a("dests"),a(c.id||""),a(c.y||""),a(c.c||"")],this.addMessage(g.join("|"));if((f=d.ibs)&&f instanceof Array&&(b=f.length))for(e=0;e<b;e++)c=f[e],g=[a("ibs"),a(c.id||""),a(c.tag||""),u.encodeAndBuildRequest(c.url||
[],","),a(c.ttl||""),"",h,c.fireURLSync?"true":"false"],c.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(g.join("|")):c.fireURLSync&&this.checkFirstPartyCookie(c,g.join("|")));if((f=d.dpcalls)&&f instanceof Array&&(b=f.length))for(e=0;e<b;e++)c=f[e],g=c.callback||{},g=[g.obj||"",g.fn||"",g.key||"",g.tag||"",g.url||""],g=[a("dpm"),a(c.id||""),a(c.tag||""),u.encodeAndBuildRequest(c.url||[],","),a(c.ttl||""),u.encodeAndBuildRequest(g,","),h],this.addMessage(g.join("|"));this.jsonProcessed.push(d)},
checkFirstPartyCookie:function(d,a,s){var f=(s="syncOnPage"===s?!0:!1)?y.FIRST_PARTY_SYNCS_ON_PAGE:y.FIRST_PARTY_SYNCS,b=this.getOnPageSyncData(f),c=!1,e=!1,g=Math.ceil((new Date).getTime()/y.MILLIS_PER_DAY);b?(b=b.split("*"),e=this.pruneSyncData(b,d.id,g),c=e.dataPresent,e=e.dataValid,c&&e||this.fireSync(s,d,a,b,f,g)):(b=[],this.fireSync(s,d,a,b,f,g))},getOnPageSyncData:function(d){var a=p.adms.instance;return a&&"function"===typeof a.idSyncGetOnPageSyncInfo?a.idSyncGetOnPageSyncInfo():u.getDilCookieField(d)},
pruneSyncData:function(d,a,b){var f=!1,e=!1,c,g,h;if(d instanceof Array)for(g=0;g<d.length;g++)c=d[g],h=parseInt(c.split("-")[1],10),c.match("^"+a+"-")?(f=!0,b<h?e=!0:(d.splice(g,1),g--)):b>=h&&(d.splice(g,1),g--);return{dataPresent:f,dataValid:e}},manageSyncsSize:function(d){if(d.join("*").length>this.MAX_SYNCS_LENGTH)for(d.sort(function(d,a){return parseInt(d.split("-")[1],10)-parseInt(a.split("-")[1],10)});d.join("*").length>this.MAX_SYNCS_LENGTH;)d.shift()},fireSync:function(d,a,b,f,e,c){function g(d,
a,l,f){return function(){h.onPagePixels[d]=null;var b=h.getOnPageSyncData(l),e=[];if(b){var b=b.split("*"),c,s,g;c=0;for(s=b.length;c<s;c++)g=b[c],g.match("^"+a.id+"-")||e.push(g)}h.setSyncTrackingData(e,a,l,f)}}var h=this;if(d){if("img"===a.tag){d=a.url;b=y.IS_HTTPS?"https:":"http:";var k,n,t;f=0;for(k=d.length;f<k;f++){n=d[f];t=/^\/\//.test(n);var p=new Image;u.addListener(p,"load",g(this.onPagePixels.length,a,e,c));p.src=(t?b:"")+n;this.onPagePixels.push(p)}}}else this.addMessage(b),this.setSyncTrackingData(f,
a,e,c)},addMessage:function(d){var a=encodeURIComponent,a=x?a("---destpub-debug---"):a("---destpub---");this.messages.push(a+d)},setSyncTrackingData:function(d,a,b,f){d.push(a.id+"-"+(f+Math.ceil(a.ttl/60/24)));this.manageSyncsSize(d);u.setDilCookieField(b,d.join("*"))},sendMessages:function(){var d=this,a;this.messages.length?(a=this.messages.shift(),DIL.xd.postMessage(a,this.url,this.iframe.contentWindow),this.messagesPosted.push(a),setTimeout(function(){d.sendMessages()},this.messageSendingInterval)):
this.sendingMessages=!1},receiveMessage:function(d){var a=/^---destpub-to-parent---/;"string"===typeof d&&a.test(d)&&(a=d.replace(a,"").split("|"),"canSetThirdPartyCookies"===a[0]&&(this.canSetThirdPartyCookies="true"===a[1]?!0:!1,this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(d))}},K={traits:function(d){w.isValidPdata(d)&&(v.sids instanceof Array||(v.sids=[]),u.extendArray(v.sids,d));return this},pixels:function(d){w.isValidPdata(d)&&(v.pdata instanceof
Array||(v.pdata=[]),u.extendArray(v.pdata,d));return this},logs:function(d){w.isValidLogdata(d)&&(v.logdata!==Object(v.logdata)&&(v.logdata={}),u.extendObject(v.logdata,d));return this},customQueryParams:function(d){w.isEmptyObject(d)||u.extendObject(v,d,p.reservedKeys);return this},signals:function(d,a){var b,f=d;if(!w.isEmptyObject(f)){if(a&&"string"===typeof a)for(b in f={},d)d.hasOwnProperty(b)&&(f[a+b]=d[b]);u.extendObject(v,f,p.reservedKeys)}return this},declaredId:function(d){p.declaredId.setDeclaredId(d,
"request");return this},result:function(d){"function"===typeof d&&(v.callback=d);return this},afterResult:function(d){"function"===typeof d&&(v.postCallbackFn=d);return this},useImageRequest:function(){v.useImageRequest=!0;return this},clearData:function(){v={};return this},submit:function(){D.submitRequest(v);v={};return this},getPartner:function(){return g},getContainerNSID:function(){return k},getEventLog:function(){return e},getState:function(){var d={},l={};u.extendObject(d,p,{callbackPrefix:!0,
useJSONP:!0,registerRequest:!0});u.extendObject(l,z,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{initConfig:a,pendingRequest:v,otherRequestInfo:d,destinationPublishingInfo:l}},idSync:function(d){if(B)return"Error: id syncs have been disabled";if(d!==Object(d)||"string"!==typeof d.dpid||!d.dpid.length)return"Error: config or config.dpid is empty";if("string"!==typeof d.url||!d.url.length)return"Error: config.url is empty";var a=d.url,b=d.minutesToLive,f=encodeURIComponent,
c,a=a.replace(/^https:/,"").replace(/^http:/,"");if("undefined"===typeof b)b=20160;else if(b=parseInt(b,10),isNaN(b)||0>=b)return"Error: config.minutesToLive needs to be a positive number";c=u.encodeAndBuildRequest(["",d.dpid,d.dpuuid||""],",");d=["ibs",f(d.dpid),"img",f(a),b,"",c];z.addMessage(d.join("|"));p.firstRequestHasFired&&z.requestToProcess();return"Successfully queued"},aamIdSync:function(d){if(B)return"Error: id syncs have been disabled";if(d!==Object(d)||"string"!==typeof d.dpuuid||!d.dpuuid.length)return"Error: config or config.dpuuid is empty";
d.url="//dpm.demdex.net/ibs:dpid="+d.dpid+"&dpuuid="+d.dpuuid;return this.idSync(d)},passData:function(d){if(w.isEmptyObject(d))return"Error: json is empty or not an object";z.ibsDeleted.push(d.ibs);delete d.ibs;D.defaultCallback(d);return d},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var d=p,a=d.modStatsParams,b=d.platformParams,f;if(!a){a={};for(f in b)b.hasOwnProperty(f)&&!d.nonModStatsParams[f]&&(a[f.replace(/^d_/,"")]=b[f]);d.modStatsParams=a}return a}},
D={corsMetadata:function(){var d="none",a=!0;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?d="XMLHttpRequest":(new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/"))()?d="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(a=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(a=!1));return{corsType:d,corsCookiesEnabled:a}}(),getCORSInstance:function(){return"none"===
this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(d){p.registerRequest(D.createQueuedRequest(d));return!0},createQueuedRequest:function(d){var a=p,b,f=d.callback,c="img",e;if(!w.isEmptyObject(r)){var g,h,n;for(g in r)r.hasOwnProperty(g)&&(h=r[g],null!=h&&""!==h&&g in d&&!(h in d||h in p.reservedKeys)&&(n=d[g],null!=n&&""!==n&&(d[h]=n)))}w.isValidPdata(d.sids)||(d.sids=[]);w.isValidPdata(d.pdata)||(d.pdata=[]);w.isValidLogdata(d.logdata)||(d.logdata={});
d.logdataArray=u.convertObjectToKeyValuePairs(d.logdata,"=",!0);d.logdataArray.push("_ts="+(new Date).getTime());"function"!==typeof f&&(f=this.defaultCallback);a.useJSONP=!0!==d.useImageRequest;a.useJSONP&&(c="script",b=a.callbackPrefix+"_"+k+"_"+(new Date).getTime());a=this.makeRequestSrcData(d,b);P&&!F||!(e=this.getCORSInstance())||(c="cors");return{tag:c,src:a.src,corsSrc:a.corsSrc,internalCallbackName:b,callbackFn:f,postCallbackFn:d.postCallbackFn,useImageRequest:!!d.useImageRequest,requestData:d,
corsInstance:e,corsPostData:a.corsPostData}},defaultCallback:function(d,a){z.processSyncOnPage(d);var b,f,c,e,g,h,k,t,x;if((b=d.stuff)&&b instanceof Array&&(f=b.length))for(c=0;c<f;c++)if((e=b[c])&&e===Object(e)){g=e.cn;h=e.cv;k=e.ttl;if("undefined"===typeof k||""===k)k=Math.floor(u.getMaxCookieExpiresInMinutes()/60/24);t=e.dmn||"."+document.domain.replace(/^www\./,"");x=e.type;g&&(h||"number"===typeof h)&&("var"!==x&&(k=parseInt(k,10))&&!isNaN(k)&&u.setCookie(g,h,1440*k,"/",t,!1),J.stuffed[g]=h)}b=
d.uuid;w.isPopulatedString(b)&&!w.isEmptyObject(n)&&(f=n.path,"string"===typeof f&&f.length||(f="/"),c=parseInt(n.days,10),isNaN(c)&&(c=100),u.setCookie(n.name||"aam_did",b,1440*c,f,n.domain||"."+document.domain.replace(/^www\./,""),!0===n.secure));q||p.abortRequests||z.requestToProcess(d,a)},makeRequestSrcData:function(d,a){d.sids=w.removeEmptyArrayValues(d.sids||[]);d.pdata=w.removeEmptyArrayValues(d.pdata||[]);var b=p,f=b.platformParams,c=u.encodeAndBuildRequest(d.sids,","),e=u.encodeAndBuildRequest(d.pdata,
","),h=(d.logdataArray||[]).join("&");delete d.logdataArray;var n=y.IS_HTTPS?"https://":"http://",t=b.declaredId.getDeclaredIdQueryString(),x=b.adms.instance?b.adms.getCustomerIDsQueryString(b.adms.getCustomerIDs()):"",m;m=[];var r,q,v,A;for(r in d)if(!(r in b.reservedKeys)&&d.hasOwnProperty(r))if(q=d[r],r=encodeURIComponent(r),q instanceof Array)for(v=0,A=q.length;v<A;v++)m.push(r+"="+encodeURIComponent(q[v]));else m.push(r+"="+encodeURIComponent(q));m=m.length?"&"+m.join("&"):"";c="d_nsid="+f.d_nsid+
t+x+(c.length?"&d_sid="+c:"")+(e.length?"&d_px="+e:"")+(h.length?"&d_ld="+encodeURIComponent(h):"");f="&d_rtbd="+f.d_rtbd+"&d_jsonv="+f.d_jsonv+"&d_dst="+f.d_dst;n=n+g+".demdex.net/event";e=b=n+"?"+c+(b.useJSONP?f+"&d_cb="+(a||""):"")+m;2048<b.length&&(b=b.substring(0,2048).substring(0,b.lastIndexOf("&")));return{corsSrc:n+"?"+(O?"testcors=1&d_nsid="+k+"&":"")+"_ts="+(new Date).getTime(),src:b,originalSrc:e,corsPostData:c+f+m,isDeclaredIdCall:""!==t}},fireRequest:function(d){if("img"===d.tag)this.fireImage(d);
else{var a=p.declaredId,a=a.declaredId.request||a.declaredId.init||{},a={dpid:a.dpid||"",dpuuid:a.dpuuid||""};"script"===d.tag?this.fireScript(d,a):"cors"===d.tag&&this.fireCORS(d,a)}},fireImage:function(d){var a=p,c,f;a.abortRequests||(a.firing=!0,c=new Image(0,0),a.sent.push(d),c.onload=function(){a.firing=!1;a.fired.push(d);a.num_of_img_responses++;a.registerRequest()},f=function(f){b="imgAbortOrErrorHandler received the event of type "+f.type;e.push(b);a.abortRequests=!0;a.firing=!1;a.errored.push(d);
a.num_of_img_errors++;a.registerRequest()},c.addEventListener?(c.addEventListener("error",f,!1),c.addEventListener("abort",f,!1)):c.attachEvent&&(c.attachEvent("onerror",f),c.attachEvent("onabort",f)),c.src=d.src)},fireScript:function(d,a){var c=this,f=p,h,k,n=d.src,t=d.postCallbackFn,m="function"===typeof t,r=d.internalCallbackName;f.abortRequests||(f.firing=!0,window[r]=function(c){try{c!==Object(c)&&(c={});B&&(z.ibsDeleted.push(c.ibs),delete c.ibs);var h=d.callbackFn;f.firing=!1;f.fired.push(d);
f.num_of_jsonp_responses++;h(c,a);m&&t(c,a)}catch(s){s.message="DIL jsonp callback caught error with message "+s.message;b=s.message;e.push(b);s.filename=s.filename||"dil.js";s.partner=g;DIL.errorModule.handleError(s);try{h({error:s.name+"|"+s.message},a),m&&t({error:s.name+"|"+s.message},a)}catch(n){}}finally{f.requestRemoval({script:k,callbackName:r}),f.registerRequest()}},M||F?(f.firing=!1,f.requestRemoval({script:"no script created",callbackName:r})):(k=document.createElement("script"),k.addEventListener&&
k.addEventListener("error",function(a){f.requestRemoval({script:k,callbackName:r});b="jsonp script tag error listener received the event of type "+a.type+" with src "+n;c.handleScriptError(b,d)},!1),k.type="text/javascript",k.src=n,h=DIL.variables.scriptNodeList[0],h.parentNode.insertBefore(k,h)),f.sent.push(d),f.declaredId.declaredId.request=null)},fireCORS:function(d,a){var c=this,f=p,h=this.corsMetadata.corsType,k=d.corsSrc,n=d.corsInstance,t=d.corsPostData,r=d.postCallbackFn,m="function"===typeof r;
if(!f.abortRequests&&!R){f.firing=!0;try{n.open("post",k,!0),"XMLHttpRequest"===h&&(n.withCredentials=!0,n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4===this.readyState&&200===this.status)a:{var h;try{if(h=JSON.parse(this.responseText),h!==Object(h)){c.handleCORSError(d,a,"Response is not JSON");break a}}catch(k){c.handleCORSError(d,a,"Error parsing response as JSON");break a}B&&(z.ibsDeleted.push(h.ibs),delete h.ibs);try{var n=d.callbackFn;
f.firing=!1;f.fired.push(d);f.num_of_cors_responses++;n(h,a);m&&r(h,a)}catch(t){t.message="DIL handleCORSResponse caught error with message "+t.message;b=t.message;e.push(b);t.filename=t.filename||"dil.js";t.partner=g;DIL.errorModule.handleError(t);try{n({error:t.name+"|"+t.message},a),m&&r({error:t.name+"|"+t.message},a)}catch(x){}}finally{f.registerRequest()}}}),n.onerror=function(){c.handleCORSError(d,a,"onerror")},n.ontimeout=function(){c.handleCORSError(d,a,"ontimeout")},n.send(t)}catch(x){this.handleCORSError(d,
a,"try-catch")}f.sent.push(d);f.declaredId.declaredId.request=null}},handleCORSError:function(d,a,b){p.num_of_cors_errors++;p.corsErrorSources.push(b);"ontimeout"===b||F||(d.tag="script",this.fireScript(d,a))},handleScriptError:function(d,a){p.num_of_jsonp_errors++;this.handleRequestError(d,a)},handleRequestError:function(d,a){var b=p;e.push(d);b.abortRequests=!0;b.firing=!1;b.errored.push(a);b.registerRequest()}},w={isValidPdata:function(a){return a instanceof Array&&this.removeEmptyArrayValues(a).length?
!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==Object(a))return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeEmptyArrayValues:function(a){for(var b=0,c=a.length,f,e=[],b=0;b<c;b++)f=a[b],"undefined"!==typeof f&&null!==f&&""!==f&&e.push(f);return e},isPopulatedString:function(a){return"string"===typeof a&&a.length}},u={addListener:function(){if(document.addEventListener)return function(a,b,c){a.addEventListener(b,function(a){"function"===
typeof c&&c(a)},!1)};if(document.attachEvent)return function(a,b,c){a.attachEvent("on"+b,function(a){"function"===typeof c&&c(a)})}}(),convertObjectToKeyValuePairs:function(a,b,c){var f=[],e,g;b||(b="=");for(e in a)a.hasOwnProperty(e)&&(g=a[e],"undefined"!==typeof g&&null!==g&&""!==g&&f.push(e+b+(c?encodeURIComponent(g):g)));return f},encodeAndBuildRequest:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)},map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===
a||null===a)throw new TypeError;var c=Object(a),f=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var e=Array(f),g=0;g<f;g++)g in c&&(e[g]=b.call(b,c[g],g,c));return e},filter:function(a,b){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var c=Object(a),f=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var e=[],g=0;g<f;g++)if(g in c){var h=c[g];b.call(b,h,g,c)&&e.push(h)}return e}return a.filter(b)},getCookie:function(a){a+="=";var b=document.cookie.split(";"),
c,f,e;c=0;for(f=b.length;c<f;c++){for(e=b[c];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(a))return decodeURIComponent(e.substring(a.length,e.length))}return null},setCookie:function(a,b,c,f,e,g){var h=new Date;c&&(c*=6E4);document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+(new Date(h.getTime()+c)).toUTCString():"")+(f?";path="+f:"")+(e?";domain="+e:"")+(g?";secure":"")},extendArray:function(a,b){return a instanceof Array&&b instanceof Array?(Array.prototype.push.apply(a,
b),!0):!1},extendObject:function(a,b,c){var f;if(a===Object(a)&&b===Object(b)){for(f in b)!b.hasOwnProperty(f)||!w.isEmptyObject(c)&&f in c||(a[f]=b[f]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return((new Date(y.COOKIE_MAX_EXPIRATION_DATE)).getTime()-(new Date).getTime())/1E3/60},getCookieField:function(a,b){var c=this.getCookie(a),f=decodeURIComponent;if("string"===typeof c){var c=c.split("|"),e,g;e=0;for(g=c.length-1;e<g;e++)if(f(c[e])===b)return f(c[e+1])}return null},getDilCookieField:function(a){return this.getCookieField(y.DIL_COOKIE_NAME,
a)},setCookieField:function(a,b,c){var e=this.getCookie(a),g=!1,h=encodeURIComponent;b=h(b);c=h(c);if("string"===typeof e){var e=e.split("|"),k,h=0;for(k=e.length-1;h<k;h++)if(e[h]===b){e[h+1]=c;g=!0;break}g||(h=e.length,e[h]=b,e[h+1]=c)}else e=[b,c];this.setCookie(a,e.join("|"),this.getMaxCookieExpiresInMinutes(),"/",this.getDomain(),!1)},setDilCookieField:function(a,b){return this.setCookieField(y.DIL_COOKIE_NAME,a,b)},getDomain:function(a){!a&&window.location&&(a=window.location.hostname);if(a)if(/^[0-9.]+$/.test(a))a=
"";else{var b=a.split("."),c=b.length-1,e=c-1;1<c&&2>=b[c].length&&(2===b[c-1].length||0>",DOMAIN_2_CHAR_EXCEPTIONS,".indexOf(","+b[c]+","))&&e--;if(0<e)for(a="";c>=e;)a=b[c]+(a?".":"")+a,c--}return a}};"error"===g&&0===k&&u.addListener(window,"load",function(){DIL.windowLoaded=!0});var S=!1,H=function(){S||(S=!0,p.registerRequest(),U(),q||p.abortRequests||z.attachIframe(),p.readyToRemove=!0,p.requestRemoval())},U=function(){q||setTimeout(function(){N||p.firstRequestHasFired||("function"===typeof I?
K.afterResult(I).submit():K.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)};C=document;"error"!==g&&(DIL.windowLoaded?H():"complete"!==C.readyState&&"loaded"!==C.readyState?u.addListener(window,"load",function(){DIL.windowLoaded=!0;H()}):(DIL.windowLoaded=!0,H()));if("error"!==g)try{DIL.xd.receiveMessage(function(a){z.receiveMessage(a.data)},z.getIframeHost(z.url))}catch(V){}p.declaredId.setDeclaredId(t,"init");p.processVisitorAPI();this.api=K;this.getStuffedVariable=function(a){var b=J.stuffed[a];
b||"number"===typeof b||(b=u.getCookie(a))||"number"===typeof b||(b="");return b};this.validators=w;this.helpers=u;this.constants=y;this.log=e;T&&(this.pendingRequest=v,this.requestController=p,this.setDestinationPublishingUrl=h,this.destinationPublishing=z,this.requestProcs=D,this.variables=J,this.callWindowLoadFunctions=H)},function(){var a=document,c;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",c=function(){a.removeEventListener("DOMContentLoaded",
c,!1);a.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(a){var c;if(a===Object(a))for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])},DIL.extendStaticPropertiesAndMethods({version:"6.9",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(a){this.windowLoaded="function"===typeof a?!!a():"boolean"===typeof a?a:!0},create:function(a){try{return new DIL(a)}catch(c){throw Error("Error in attempt to create DIL instance with DIL.create(): "+
c.message);}},registerDil:function(a,c,e){c=c+"$"+e;c in this.dils||(this.dils[c]=a)},getDil:function(a,c){var e;"string"!==typeof a&&(a="");c||(c=0);e=a+"$"+c;return e in this.dils?this.dils[e]:Error("The DIL instance with partner = "+a+" and containerNSID = "+c+" was not found")},dexGetQSVars:function(a,c,e){c=this.getDil(c,e);return c instanceof this?c.getStuffedVariable(a):""},xd:{postMessage:function(a,c,e){var b=1;c&&(window.postMessage?e.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):
c&&(e.location=c.replace(/#.*$/,"")+"#"+ +new Date+b++ +"&"+a))},receiveMessage:function(a,c){var e;try{if(window.postMessage)if(a&&(e=function(b){if("string"===typeof c&&b.origin!==c||"[object Function]"===Object.prototype.toString.call(c)&&!1===c(b.origin))return!1;a(b)}),window.addEventListener)window[a?"addEventListener":"removeEventListener"]("message",e,!1);else window[a?"attachEvent":"detachEvent"]("onmessage",e)}catch(b){}}}}),DIL.errorModule=function(){var a=DIL.create({partner:"error",containerNSID:0,
disableDestinationPublishingIframe:!0}),c={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},e=!1;return{activate:function(){e=!0},handleError:function(b){if(!e)return"DIL error module has not been activated";b!==Object(b)&&(b={});var h=b.name?(b.name+"").toLowerCase():"",g=[];b={name:h,filename:b.filename?b.filename+"":"",partner:b.partner?b.partner+"":
"no_partner",site:b.site?b.site+"":document.location.href,message:b.message?b.message+"":""};g.push(h in c?c[h]:c.noerrortypedefined);a.api.pixels(g).logs(b).useImageRequest().submit();return"DIL error report sent"},pixelMap:c}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(a,c,e){var b="";c=c||"Error caught in DIL module/submodule: ";a===Object(a)?b=c+(a.message||"err has no message"):(b=c+"err is not a valid object",a={});a.message=b;e instanceof DIL&&(a.partner=e.api.getPartner());
DIL.errorModule.handleError(a);return this.errorMessage=b}}});
DIL.tools.getSearchReferrer=function(a,c){var e=DIL.getDil("error"),b=DIL.tools.decomposeURI(a||document.referrer),h="",g="",k={queryParam:"q"};return(h=e.helpers.filter([c===Object(c)?c:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(a){return!(!a.hasOwnProperty("hostPattern")||!b.hostname.match(a.hostPattern))}).shift())?{valid:!0,name:b.hostname,keywords:(e.helpers.extendObject(k,h),g=k.queryPattern?
(h=(""+b.search).match(k.queryPattern))?h[1]:"":b.uriParams[k.queryParam],decodeURIComponent(g||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}};
DIL.tools.decomposeURI=function(a){var c=DIL.getDil("error"),e=document.createElement("a");e.href=a||document.referrer;return{hash:e.hash,host:e.host.split(":").shift(),hostname:e.hostname,href:e.href,pathname:e.pathname.replace(/^\//,""),protocol:e.protocol,search:e.search,uriParams:function(a,e){c.helpers.map(e.split("&"),function(c){c=c.split("=");a[c.shift()]=c.shift()});return a}({},e.search.replace(/^(\/|\?)?|\/$/g,""))}};
DIL.tools.getMetaTags=function(){var a={},c=document.getElementsByTagName("meta"),e,b,h,g,k;e=0;for(h=arguments.length;e<h;e++)if(g=arguments[e],null!==g)for(b=0;b<c.length;b++)if(k=c[b],k.name===g){a[g]=k.content;break}return a};
DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,e,b){try{var h=this,g={name:"DIL Site Catalyst Module Error"},k=function(a){g.message=a;DIL.errorModule.handleError(g);return a};this.options=b===Object(b)?b:{};this.dil=null;if(c instanceof DIL)this.dil=c;else return k("dilInstance is not a valid instance of DIL");g.partner=c.api.getPartner();if(a!==Object(a))return k("siteCatalystReportingSuite is not an object");window.AppMeasurement_Module_DIL=a.m_DIL=
function(a){var b="function"===typeof a.m_i?a.m_i("DIL"):this;if(b!==Object(b))return k("m is not an object");b.trackVars=h.constructTrackVars(e);b.d=0;b.s=a;b._t=function(){var a,b,c=","+this.trackVars+",",e=this.s,g,r=[];g=[];var m={},q=!1;if(e!==Object(e))return k("Error in m._t function: s is not an object");if(this.d){if("function"===typeof e.foreachVar)e.foreachVar(function(a,b){"undefined"!==typeof b&&(m[a]=b,q=!0)},this.trackVars);else{if(!(e.va_t instanceof Array))return k("Error in m._t function: s.va_t is not an array");
if(e.lightProfileID)(a=e.lightTrackVars)&&(a=","+a+","+e.vl_mr+",");else if(e.pe||e.linkType)a=e.linkTrackVars,e.pe&&(b=e.pe.substring(0,1).toUpperCase()+e.pe.substring(1),e[b]&&(a=e[b].trackVars)),a&&(a=","+a+","+e.vl_l+","+e.vl_l2+",");if(a){b=0;for(r=a.split(",");b<r.length;b++)0<=c.indexOf(","+r[b]+",")&&g.push(r[b]);g.length&&(c=","+g.join(",")+",")}g=0;for(b=e.va_t.length;g<b;g++)a=e.va_t[g],0<=c.indexOf(","+a+",")&&"undefined"!==typeof e[a]&&null!==e[a]&&""!==e[a]&&(m[a]=e[a],q=!0)}h.includeContextData(e,
m).store_populated&&(q=!0);q&&this.d.api.signals(m,"c_").submit()}}};a.loadModule("DIL");a.DIL.d=c;return g.message?g.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(q){return this.handle(q,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(a){var c=[],e,b,h,g,k;if(a===Object(a)){e=a.names;if(e instanceof Array&&(h=e.length))for(b=0;b<h;b++)g=e[b],"string"===typeof g&&g.length&&c.push(g);a=a.iteratedNames;if(a instanceof Array&&
(h=a.length))for(b=0;b<h;b++)if(e=a[b],e===Object(e)&&(g=e.name,k=parseInt(e.maxIndex,10),"string"===typeof g&&g.length&&!isNaN(k)&&0<=k))for(e=0;e<=k;e++)c.push(g+e);if(c.length)return c.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(a,c){var e={},b=!1;if(a.contextData===Object(a.contextData)){var h=a.contextData,g=this.options.replaceContextDataPeriodsWith,
k=this.options.filterFromContextVariables,q={},m,r,n,x;"string"===typeof g&&g.length||(g="_");if(k instanceof Array)for(m=0,r=k.length;m<r;m++)n=k[m],this.dil.validators.isPopulatedString(n)&&(q[n]=!0);for(x in h)!h.hasOwnProperty(x)||q[x]||!(k=h[x])&&"number"!==typeof k||(x=("contextData."+x).replace(/\./g,g),c[x]=k,b=!0)}e.store_populated=b;return e}};
DIL.modules.GA={submitUniversalAnalytics:function(a,c,e){try{var b=a.getAll()[0],h=b[e||"b"].data.keys;a={};var g,k,q,m;g=0;for(k=h.length;g<k;g++)q=h[g],m=b.get(q),"undefined"===typeof m||"function"===typeof m||m===Object(m)||/^_/.test(q)||/^&/.test(q)||(a[q]=m);c.api.signals(a,"c_").submit();return a}catch(r){return"Caught error with message: "+r.message}},dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,
signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,e){try{this.tv=this.arr=this.dil=null;this.errorMessage="";this.signals={};this.hasSignals=!1;var b={name:"DIL GA Module Error"},h="";c instanceof DIL?(this.dil=c,b.partner=this.dil.api.getPartner()):(h="dilInstance is not a valid instance of DIL",b.message=h,DIL.errorModule.handleError(b));a instanceof Array&&a.length?this.arr=a:(h="gaArray is not an array or is empty",b.message=h,DIL.errorModule.handleError(b));
this.tv=this.constructTrackVars(e);this.errorMessage=h}catch(g){this.handle(g,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(a){var c=[],e,b,h,g;if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){h=this.defaultTrackVars;g={};e=0;for(b=h.length;e<b;e++)g[h[e]]=!0;this.defaultTrackVarsObj=g}else g=this.defaultTrackVarsObj;if(a===Object(a)){a=a.names;if(a instanceof Array&&(b=a.length))for(e=0;e<b;e++)h=a[e],"string"===typeof h&&
h.length&&h in g&&c.push(h);if(c.length)return c}return this.defaultTrackVars},constructGAObj:function(a){var c={};a=a instanceof Array?a:this.arr;var e,b,h,g;e=0;for(b=a.length;e<b;e++)h=a[e],h instanceof Array&&h.length&&(h=[],g=a[e],h instanceof Array&&g instanceof Array&&Array.prototype.push.apply(h,g),g=h.shift(),"string"===typeof g&&g.length&&(c[g]instanceof Array||(c[g]=[]),c[g].push(h)));return c},addToSignals:function(a,c){if("string"!==typeof a||""===a||null==c||""===c)return!1;this.signals[a]instanceof
Array||(this.signals[a]=[]);this.signals[a].push(c);return this.hasSignals=!0},constructSignals:function(){var a=this.constructGAObj(),c={_setAccount:function(a){this.addToSignals("c_accountId",a)},_setCustomVar:function(a,b,c){"string"===typeof b&&b.length&&this.addToSignals("c_"+b,c)},_addItem:function(a,b,c,e,g,h){this.addToSignals("c_itemOrderId",a);this.addToSignals("c_itemSku",b);this.addToSignals("c_itemName",c);this.addToSignals("c_itemCategory",e);this.addToSignals("c_itemPrice",g);this.addToSignals("c_itemQuantity",
h)},_addTrans:function(a,b,c,e,g,h,k,m){this.addToSignals("c_transOrderId",a);this.addToSignals("c_transAffiliation",b);this.addToSignals("c_transTotal",c);this.addToSignals("c_transTax",e);this.addToSignals("c_transShipping",g);this.addToSignals("c_transCity",h);this.addToSignals("c_transState",k);this.addToSignals("c_transCountry",m)},_trackSocial:function(a,b,c,e){this.addToSignals("c_socialNetwork",a);this.addToSignals("c_socialAction",b);this.addToSignals("c_socialTarget",c);this.addToSignals("c_socialPagePath",
e)}},e=this.tv,b,h,g,k,q,m;b=0;for(h=e.length;b<h;b++)if(g=e[b],a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&(m=a[g],m instanceof Array))for(k=0,q=m.length;k<q;k++)c[g].apply(this,m[k])},submit:function(){try{if(""!==this.errorMessage)return this.errorMessage;this.constructSignals();return this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present"}catch(a){return this.handle(a,"DIL.modules.GA.submit() caught error with message ",
this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(a,c,e){try{this.callback=this.dil=null,this.errorMessage="",a instanceof DIL?(this.dil=a,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(c)?c:"aam_ga",this.delimiter=this.v(e)?e:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(b){this.handle(b,
"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(a){var c,e,b,h,g,k;k=!1;var q=1;if(a===Object(a)&&(c=a.stuff)&&c instanceof Array&&(e=c.length))for(a=0;a<e;a++)if((b=c[a])&&b===Object(b)&&(h=b.cn,g=b.cv,h===this.cookieName&&this.v(g))){k=!0;break}if(k){c=g.split(this.delimiter);"undefined"===typeof window._gaq&&(window._gaq=[]);b=window._gaq;a=0;for(e=c.length;a<e&&!(k=c[a].split("="),g=k[0],k=k[1],this.v(g)&&this.v(k)&&b.push(["_setCustomVar",
q++,g,k,1]),q>this.LIMIT);a++);this.errorMessage=1<q?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"===typeof this.callback)return this.callback()},submit:function(){try{var a=this;if(""!==this.errorMessage)return this.errorMessage;this.dil.api.afterResult(function(c){a.process(c)}).submit();return"DIL.modules.GA.Stuffer.submit() successful"}catch(c){return this.handle(c,"DIL.modules.GA.Stuffer.submit() caught error with message ",
this.dil)}}}};
DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(a,c,e){try{this.dil=null;this.errorMessage="";this.calledBack=!1;this.optionals=e===Object(e)?e:{};e={name:"DIL Peer39 Module Error"};var b=[],h="";this.isSecurePageButNotEnabled(document.location.protocol)&&(h="Module has not been enabled for a secure page",b.push(h),e.message=h,DIL.errorModule.handleError(e));c instanceof
DIL?(this.dil=c,e.partner=this.dil.api.getPartner()):(h="dilInstance is not a valid instance of DIL",b.push(h),e.message=h,DIL.errorModule.handleError(e));"string"===typeof a&&a.length?this.aid=a:(h="aid is not a string or is empty",b.push(h),e.message=h,DIL.errorModule.handleError(e));this.errorMessage=b.join("\n")}catch(g){this.handle(g,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(a){return"https:"===a&&!0!==this.optionals.enableHTTPS?
!0:!1},constructSignals:function(){var a=this,c=this.constructScript(),e=DIL.variables.scriptNodeList[0];window["afterFinished_"+this.aid]=function(){try{var b=a.processData(p39_KVP_Short("c_p","|").split("|"));b.hasSignals&&a.dil.api.signals(b.signals).submit()}catch(c){}finally{a.calledBack=!0,"function"===typeof a.optionals.afterResult&&a.optionals.afterResult()}};e.parentNode.insertBefore(c,e);this.scriptsSent.push(c);return"Request sent to Peer39"},processData:function(a){var c,e,b,h,g={},k=
!1;this.returnedData.push(a);if(a instanceof Array)for(c=0,e=a.length;c<e;c++)b=a[c].split("="),h=b[0],b=b[1],h&&isFinite(b)&&!isNaN(parseInt(b,10))&&(g[h]instanceof Array||(g[h]=[]),g[h].push(b),k=!0);return{hasSignals:k,signals:g}},constructScript:function(){var a=document.createElement("script"),c=this.optionals,e=c.scriptId,b=c.scriptSrc,c=c.scriptParams;a.id="string"===typeof e&&e.length?e:"peer39ScriptLoader";a.type="text/javascript";"string"===typeof b&&b.length?a.src=b:(a.src=document.location.protocol+
"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"===typeof c&&c.length&&(a.src+="?"+c));return a},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(a){return this.handle(a,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};
//DIL library ends ** Above code not to be altered**

</script><script>
(function() {
    /* globals $t, DIL */
    var setupAAM = function(_scDilObj) {
        //DIL instantiation starts. Configurable section below
        var nbcuDil = DIL.create({
            partner: "nbcu",
            containerNSID: 0,
            uuidCookie: {
                name: 'aam_uuid',
                days: 30
            }

        });
        //replace customObj with any MPS object when data collection is required
        if (typeof window.customObj != 'undefined') {
            var nbcuDilInstance = DIL.getDil('nbcu');
            nbcuDilInstance.api.signals(window.customObj, 'c_');
        }
        //SC Object Data Collection 
        DIL.modules.siteCatalyst.init(_scDilObj, DIL.getDil('nbcu'), {
            names: ['pageName', 'channel', 'campaign', 'products', 'events', 'pe', 'referrer', 'server', 'purchaseID', 'zip', 'state'],
            iteratedNames: [{
                name: 'eVar',
                maxIndex: 75
            }, {
                name: 'prop',
                maxIndex: 75
            }, {
                name: 'pev',
                maxIndex: 3
            }, {
                name: 'hier',
                maxIndex: 4
            }]
        });
    };
    //run after adobe is loaded, or if its alrady loaded.
    if ($t('dtm_adobeAppMeasurmentLoaded', 'not loaded') !== 'not loaded') {
        setupAAM($t('dtm_adobeAppMeasurmentLoaded.sc_obj', {}));
    } else {
        $t('on', 'dtm_adobeAppMeasurmentLoaded', function() {
            setupAAM($t('dtm_adobeAppMeasurmentLoaded.sc_obj', {}));
        });
    }
    //also setup heartbeat instsnce of app measurment
    if ($t('ahb_adobeAppMeasurmentLoaded', 'not loaded') !== 'not loaded') {
        setupAAM($t('ahb_adobeAppMeasurmentLoaded.sc_obj', {}));
    } else {
        $t('on', 'ahb_adobeAppMeasurmentLoaded', function() {
            setupAAM($t('ahb_adobeAppMeasurmentLoaded.sc_obj', {}));
        });
    }
})();
</script>
<script src="//www.nbcnews.com/id/51579771" type="text/javascript"></script><iframe allowtransparency="true" frameborder="0" scrolling="no" src="https://platform.twitter.com/widgets/widget_iframe.ed954039b4da87657c2de914fe37d022.html?origin=http%3A%2F%2Fphotoblog.nbcnews.com" style="display: none;" title="Twitter settings iframe"></iframe><div id="sandcrawler" style="display: none;"><ul><li class="j-home c-home"><a class="vilynx_listened" href="//nbcnews.com" rel="twipsy" title="Back to the home page"></a></li><li class="j-article-title c-article-title"><a href="http://photoblog.nbcnews.com/">Introducing Danica May Camacho, the world's first 7-billionth baby</a></li><li class="j-tracker c-activity" style="display: none;"><a class="c-button vilynx_listened" data-placement="left" href="https://secure.nbcnews.com/_tps/_activity" rel="twipsy" title="Activity tracker">Activity</a><div class="j_popover_content" data-popover-content-widget="j_user_ct_activityMenu"></div></li></ul></div><script bottomviewportoffset="130" divignore=".img-overlay, .img-overlay_video" followscroll="true" forcefullratio="true" forcetoimageparent="true" proactiveload="true" publickey="a5d3c400d9872cc4aa3bb4e9c87c7cab" pulltochange="true" redirect="true" redirectontop="true" redirectwithclick="true" resizetoimage="true" src="https://static.vilynx.com/gallery/vpg.3.6.9.min.js" topviewportoffset="120" type="text/javascript"></script><style type="text/css">.supra-wrapper{max-height:unset !important} .active .playlist_thumb:before{pointer-events: none !important} .vilynx_activeSummary .tease-icon-play, .vilynx_activeSummary .icon-video-play{opacity:0.3} .homepage-top10__image{z-index: 1} .panel-pane a.vilynx_registered:after{pointer-events: none} .panel-section.is-horizontal .playlist_container li{overflow: hidden} @media only screen and (max-width:999px){.vilynx_activeSummary .supra-wrapper{overflow: visible !important} .vilynx_registered video {height:auto !important}}</style><script domain="photoblog.nbcnews.com" limit="6" onpluginload="window.NEWS &amp;&amp; NEWS.vilynxHandler &amp;&amp; NEWS.vilynxHandler.onPluginLoad || function () {}" publickey="a5d3c400d9872cc4aa3bb4e9c87c7cab" src="https://static.vilynx.com/vidrec/vidrec.1.6.3.min.js" type="text/javascript" urlfilterregex="/video/|/watch/" urlsplitchar="-"></script><iframe src="https://static.vilynx.com/gallery/vtrk.html" style="display: none;"></iframe><iframe height="0" id="lsframe" src="http://cdn-gl.imrworldwide.com/novms/html/ls.html" style="display: none;" width="0"></iframe><iframe class="aamIframeLoaded" id="destination_publishing_iframe_nbcuni_0" src="http://fast.nbcuni.demdex.net/dest5.html?d_nsid=0#http%3A%2F%2Fphotoblog.nbcnews.com%2F_news%2F2011%2F10%2F31%2F8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby" style="display: none; width: 0px; height: 0px;"></iframe><iframe class="aamIframeLoaded" id="destination_publishing_iframe_nbcu_0" sandbox="allow-scripts allow-same-origin" src="https://nbcu.demdex.net/dest5.html?d_nsid=0#http%3A%2F%2Fphotoblog.nbcnews.com%2F_news%2F2011%2F10%2F31%2F8558858-introducing-danica-may-camacho-the-worlds-first-7-billionth-baby" style="display: none; width: 0px; height: 0px;" title="Adobe ID Syncing iFrame"></iframe></body></html>