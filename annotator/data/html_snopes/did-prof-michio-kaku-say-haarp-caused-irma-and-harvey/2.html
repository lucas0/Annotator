<html data-reactroot="" lang="en"><head><script src="https://pagead2.googlesyndication.com/pagead/show_companion_ad.js"></script><script src="https://d1z2jf7jlzjs58.cloudfront.net/code/ptrack-v0.9.2-engaged-time-slots-video.js"></script><script src="https://srv-2019-07-14-17.config.parsely.com/config/nbcnews.com"></script><script async="" data-jsonpid="" src="https://cdn-gl.imrworldwide.com/novms/js/2/nlsSDK600.bundle.min.js"></script><script async="" src="//c.amazon-adsystem.com/aax2/apstag.js"></script><script async="" src="https://www.googletagservices.com/tag/js/gpt.js" type="text/javascript"></script><script async="async" src="https://nbcume.sc.omtrdc.net/id?d_visid_ver=1.5.4&amp;callback=s_c_il%5B2%5D._setAnalyticsFields&amp;mcorgid=A8AB776A5245B4220A490D44%40AdobeOrg&amp;mid=12764534815176994022712635978395933786" type="text/javascript"></script><script async="" src="https://sb.scorecardresearch.com/beacon.js"></script><script src="https://cdn-v3.conductrics.com/ac-kANJFqzwHz/v3/agent-api/js/f-MGXQstUBzA/dt-3RxgN1KLu0QvqskKLYBEVyV2EGUVvw?apikey=api-GCNKdGuimYDiuTjQpVpN"></script><script async="" src="https://cdn-gl.imrworldwide.com/conf/P35C41790-24D9-4BCD-9873-48B547719D85.js#name=nlsnInstance&amp;ns=NOLBUNDLE"></script><script async="" src="https://ak.sail-horizon.com/spm/spm.v1.min.js" type="text/javascript"></script><script async="" src="https://squirrelhands.com/v2/0/boxMwgh9Tn_VvjyzIXMiHTGVUrAUX0rhe5mOf3dsNOkrRLxGY_kvtOK00ZP57aIhfWixPqLS3rWBQ"></script><script async="" src="https://connect.facebook.net/signals/config/258438165004812?v=2.8.51&amp;r=stable"></script><script async="" src="https://connect.facebook.net/signals/plugins/inferredEvents.js?v=2.8.51"></script><script async="" src="https://connect.facebook.net/signals/config/514991798612189?v=2.8.51&amp;r=stable"></script><script async="" src="https://connect.facebook.net/en_US/fbevents.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=DC-8168974"></script><script async="async" src="https://dpm.demdex.net/id?d_visid_ver=1.5.4&amp;d_rtbd=json&amp;d_ver=2&amp;d_orgid=A8AB776A5245B4220A490D44%40AdobeOrg&amp;d_nsid=0&amp;d_cb=s_c_il%5B2%5D._setMarketingCloudFields" type="text/javascript"></script><title>Conspiracy Theories Abound as U.S. Military Closes HAARP</title><meta content="#FFFFFF" data-rh="true" name="msapplication-TileColor"/><meta content="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/ms-icon-144x144.png" data-rh="true" name="msapplication-TileImage"/><meta content="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/browserconfig.xml" data-rh="true" name="msapplication-config"/><meta charset="utf-8" data-rh="true"/><meta content="ie=edge" data-rh="true" http-equiv="x-ua-compatible"/><meta content="10150138890205613" data-rh="true" property="fb:app_id"/><meta content="155869377766434" data-rh="true" property="fb:pages"/><meta content="114288853688" data-rh="true" property="fb:pages"/><meta content="273864989376427" data-rh="true" property="fb:pages"/><meta content="25987609066" data-rh="true" property="fb:pages"/><meta content="103708747870" data-rh="true" property="fb:pages"/><meta content="117112876419" data-rh="true" property="fb:pages"/><meta content="493352494017633" data-rh="true" property="fb:pages"/><meta content="143109582453645" data-rh="true" property="fb:pages"/><meta content="153005644864469" data-rh="true" property="fb:pages"/><meta content="598356233569407" data-rh="true" property="fb:pages"/><meta content="62499551911" data-rh="true" property="fb:pages"/><meta content="90692553761" data-rh="true" property="fb:pages"/><meta content="108546889203630" data-rh="true" property="fb:pages"/><meta content="154957517930371" data-rh="true" property="fb:pages"/><meta content="114945745226947" data-rh="true" property="fb:pages"/><meta content="164878620263509" data-rh="true" property="fb:pages"/><meta content="219012311450917" data-rh="true" property="fb:pages"/><meta content="280920811923248" data-rh="true" property="fb:pages"/><meta content="358279854182174" data-rh="true" property="fb:pages"/><meta content="809948162383434" data-rh="true" property="fb:pages"/><meta content="864302923644949" data-rh="true" property="fb:pages"/><meta content="868876563129583" data-rh="true" property="fb:pages"/><meta content="1508175089456029" data-rh="true" property="fb:pages"/><meta content="NBC News" data-rh="true" property="og:site_name"/><meta content="en_US" data-rh="true" property="og:locale"/><meta content="@NBCNews" data-rh="true" name="twitter:site"/><meta content="NBCNews" data-rh="true" name="twitter:creator"/><meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" data-rh="true" name="viewport"/><meta content="The U.S. Air Force has told Congress it intends to shut down HAARP, a controversial Alaska-based research facility that studies the upper atmosphere." data-rh="true" name="description"/><meta content="https://www.nbcnews.com/science/weird-science/conspiracy-theories-abound-u-s-military-closes-haarp-n112576" data-rh="true" property="og:url"/><meta content="Conspiracy Theories Abound as U.S. Military Closes HAARP" data-rh="true" property="og:title"/><meta content="The U.S. Air Force has told Congress it intends to shut down HAARP, a controversial Alaska-based research facility that studies the upper atmosphere." data-rh="true" property="og:description"/><meta content="https://media4.s-nbcnews.com/j/newscms/2014_21/461161/140522-haarp2_95823e74dfad2494bd0e81a36a228c95.nbcnews-fp-1200-630.jpg" data-rh="true" property="og:image"/><meta content="https://media4.s-nbcnews.com/j/newscms/2014_21/461161/140522-haarp2_95823e74dfad2494bd0e81a36a228c95.nbcnews-fp-1200-630.jpg" data-rh="true" property="og:image:secure_url"/><meta content="image/gif" data-rh="true" property="og:image:type"/><meta content="1200" data-rh="true" property="og:image:width"/><meta content="630" data-rh="true" property="og:image:height"/><meta content="article" data-rh="true" property="og:type"/><meta content="https://media4.s-nbcnews.com/j/newscms/2014_21/461161/140522-haarp2_95823e74dfad2494bd0e81a36a228c95.nbcnews-fp-1024-512.jpg" data-rh="true" name="twitter:image:src"/><meta content="https://media4.s-nbcnews.com/j/newscms/2014_21/461161/140522-haarp2_95823e74dfad2494bd0e81a36a228c95.nbcnews-fp-1024-512.jpg" data-rh="true" name="twitter:image"/><meta content="Conspiracy Theories Abound as U.S. Military Closes HAARP" data-rh="true" name="twitter:title"/><meta content="The U.S. Air Force has told Congress it intends to shut down HAARP, a controversial Alaska-based research facility that studies the upper atmosphere." data-rh="true" name="twitter:description"/><meta content="summary_large_image" data-rh="true" name="twitter:card"/><meta content="https://media4.s-nbcnews.com/j/newscms/2014_21/461161/140522-haarp2_95823e74dfad2494bd0e81a36a228c95.social_share_1024x768_scale.jpg" data-rh="true" name="thumbnail"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/favicon.ico" rel="shortcut icon" type="image/x-icon"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon.png" rel="apple-touch-icon"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-precomposed.png" rel="apple-touch-icon-precomposed"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-57x57.png" rel="apple-touch-icon" sizes="57x57"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-60x60.png" rel="apple-touch-icon" sizes="60x60"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-72x72.png" rel="apple-touch-icon" sizes="72x72"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-76x76.png" rel="apple-touch-icon" sizes="76x76"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-114x114.png" rel="apple-touch-icon" sizes="114x114"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-120x120.png" rel="apple-touch-icon" sizes="120x120"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-144x144.png" rel="apple-touch-icon" sizes="144x144"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-152x152.png" rel="apple-touch-icon" sizes="152x152"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/apple-icon-180x180.png" rel="apple-touch-icon" sizes="180x180"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/manifest.json" rel="manifest"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/android-icon-36x36.png" rel="icon" sizes="36x36"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/android-icon-48x48.png" rel="icon" sizes="48x48"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/android-icon-72x72.png" rel="icon" sizes="72x72"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/android-icon-96x96.png" rel="icon" sizes="96x96"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/android-icon-144x144.png" rel="icon" sizes="144x144"/><link data-rh="true" href="https://nodeassets.nbcnews.com/cdnassets/projects/ramen/favicon/nbcnews/all-other-sizes-PNG.ico/android-icon-192x192.png" rel="icon" sizes="192x192"/><link data-rh="true" href="https://nodeassets.nbcnews.com/assets/header-footer/1.0.6/news/header.css" rel="stylesheet"/><link data-rh="true" href="https://www.nbcnews.com/science/weird-science/conspiracy-theories-abound-u-s-military-closes-haarp-n112576" rel="canonical"/><link data-rh="true" href="https://www.nbcnews.com/news/amp/ncna112576" rel="amphtml"/><link data-rh="true" href="https://nodeassets.nbcnews.com/assets/header-footer/1.0.6/news/footer.css" rel="stylesheet"/><link data-rh="true" href="https://nodeassets.nbcnews.com/assets/fonts/shared/fontface.css" rel="stylesheet"/><link data-rh="true" href="https://nodeassets.nbcnews.com/assets/header-footer/1.0.6/icons.css" rel="stylesheet"/><script data-rh="true" type="application/ld+json">{"@context":"http://schema.org/","@type":"Organization","url":"http://www.nbcnews.com","logo":{"@type":"ImageObject","url":"https://sslnodeassets.nbcnews.com/cdnassets/projects/site-images/nbcnews-logo-white.png","width":166,"height":24},"sameAs":["https://twitter.com/nbcnews","https://www.facebook.com/nbcnews","https://plus.google.com/+nbcnews","https://www.instagram.com/nbcnews","https://www.youtube.com/nbcnews"]}</script><script data-rh="true" type="application/ld+json">{"@context":{"@vocab":"http://schema.org","pageType":{"@id":"Text","@type":"@id"},"vertical":{"@id":"Text","@type":"@id"},"subVertical":{"@id":"Text","@type":"@id"},"section":{"@id":"Text","@type":"@id"},"subSection":{"@id":"Text","@type":"@id"},"label":{"@id":"Text","@type":"@id"},"packageId":{"@id":"Text","@type":"@id"},"sponsor":{"@id":"Text","@type":"@id"},"ecommerceEnabled":{"@id":"Text","@type":"@id"},"videoPlayerCount":{"@id":"Text","@type":"@id"}},"@type":"Dataset","url":"https://www.nbcnews.com/science/weird-science/conspiracy-theories-abound-u-s-military-closes-haarp-n112576","pageType":"Article","vertical":"news","subVertical":"","section":"science","subSection":"weird-science","label":"","packageId":"","sponsor":"","ecommerceEnabled":false,"videoPlayerCount":0}</script><script data-rh="true" type="application/ld+json">{"@context":{"@vocab":"http://schema.org","articleId":{"@id":"Text","@type":"@id"},"topics":{"@id":"Text","@type":"@id"}},"@type":"NewsArticle","headline":"Conspiracy Theories Abound as U.S. Military Closes HAARP","url":"https://www.nbcnews.com/science/weird-science/conspiracy-theories-abound-u-s-military-closes-haarp-n112576","thumbnailUrl":"https://media4.s-nbcnews.com/j/newscms/2014_21/461161/140522-haarp2_95823e74dfad2494bd0e81a36a228c95.social_share_1024x768_scale.jpg","alternativeHeadline":"Conspiracy Theories Abound as U.S. Military Closes HAARP","dateCreated":"2014-05-22T23:25:36.000Z","datePublished":"2014-05-22T23:25:36.000Z","dateModified":"2015-06-11T00:00:00.000Z","articleSection":"science","articleId":"ncna112576","identifier":{"@type":"PropertyValue","propertyID":"uid","value":"ncna112576"},"topics":"","image":{"@type":"ImageObject","url":"https://media4.s-nbcnews.com/i/newscms/2014_21/461161/140522-haarp2_95823e74dfad2494bd0e81a36a228c95.jpg","caption":"The 180-antenna HAARP array is spread across a 40-acre site at Gakona, Alaska.","width":2000,"height":1243},"author":[],"publisher":{"@type":"Organization","name":"NBC News","logo":{"@type":"ImageObject","url":"https://nodeassets.nbcnews.com/cdnassets/projects/site-images/nbcnews-logo-white.png","width":166,"height":24}},"description":"The U.S. Air Force has told Congress it intends to shut down HAARP, a controversial Alaska-based research facility that studies the upper atmosphere.","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.nbcnews.com/science/weird-science/conspiracy-theories-abound-u-s-military-closes-haarp-n112576"}}</script><link href="https://nodeassets.nbcnews.com/assets/fonts/shared/fontface.css" rel="stylesheet"/><meta content="width=device-width, initial-scale=1" name="viewport"/><meta content="app-id=319740707" name="apple-itunes-app"/><link charset="UTF-8" href="https://ndassets.s-nbcnews.com/main-774da6731a81d56d50ff.css" media="screen, projection" rel="stylesheet" type="text/css"/><link charset="UTF-8" href="https://ndassets.s-nbcnews.com/print-3cc2ad520bdc21e13dbd.css" media="print" rel="stylesheet" type="text/css"/></head><body><div id="parsely-root" style="display: none;"><span data-parsely-site="nbcnews.com" id="parsely-cfg"></span><script async="" id="parsely-script" src="https://d1z2jf7jlzjs58.cloudfront.net/p.js"></script></div><script src="https://nodeassets.nbcnews.com/assets/header-footer/1.0.6/hfs-header.js"></script><script async="async" class="mps-script" id="mps-gpt-shared" src="https://mps.nbcuni.com/fetch/ext/load-nbcnews-bento.js?nowrite=jq"></script><style type="text/css">.mps-gpt-hidden { display: none; }</style><script async="" src="https://z.moatads.com/nbcuyieldheader7581548001/yi.js" type="text/javascript"></script><script async="" src="https://js-sec.indexww.com/ht/p/185796-203819031605032.js" type="text/javascript"></script><style></style>
<script>var mps=mps||{}; var debugmode=debugmode||{};  mps._loadset=mps._loadset+1||0; mps._components=mps._components||{};
(window.console && console.log("****** [mps] REDIRECTED: false"+" \u2192 "+"mps.nbcuni.com ******"));

mps.pagevars = {"cagsattached":{},"instance":"nbcnews-bento","cags":{"transporter":["false"],"targeting":["news","science","sciencenews","space","weirdscience"],"adunit1":["2620"],"adunit2":["nbcnews"],"adunit3":["science"]},"cat":"conspiracy-theories-abound-u-s-military-closes-haarp-n112576","cats":["science","weird-science","conspiracy-theories-abound-u-s-military-closes-haarp-n112576"],"cid":"ncna112576","dart_cags":{"transporter":["false"],"targeting":["news","science","sciencenews","space","weirdscience"],"":["2620"],"brand":["nbcnews"],"vertical":["science"]},"dart_logo_text":"Sponsored By:","dart_mode":"gpt-asynchronous","dart_sra":0,"fields":null,"freewheel_section":"","hierarchy":"science|weird-science|conspiracy-theories-abound-u-s-military-closes-haarp-n112576","hline":null,"loadmode":false,"modified":"2019-07-11 23:21:03","mpsid":"57306660","mpsurl":"mps.nbcuni.com","path":"\/science\/weird-science\/conspiracy-theories-abound-u-s-military-closes-haarp-n112576","pkg_exclude_cq":0,"ref":"nbcnews.com","responsive":{"large":[1000,1],"medium":[758,1],"0":[0,0]},"subtype":null,"stitle":null,"type":"bentoarticle","dart_lazy_load":0,"disable_initial_load":0,"authuser":0,"turtle":0};
if (typeof mps._cloneObjects == 'function') { mps._cloneObjects(); }
</script>
<script>
typeof(mps.execute_postscribe_js) == "function" && mps.execute_postscribe_js();
</script>
<script>
typeof(mps.execute_pixelman_js) == "function" && mps.execute_pixelman_js();
</script>
<script>
typeof(mps.execute_responsive_js) == "function" && mps.execute_responsive_js();
</script>
<script>
mps.pagevars.omnisects=null;
mps.pagevars.omnitype=null;
</script>
<script>
mps.adunits={"Top Banner":"topbanner","Box Rail":"boxrail","Logo":"sponsorlogo","Native Three Up":"nativethreeup","Box Inline":"boxinline","Interstitial":"interstitial","Gallery Slide":"galleryslide","Box Flex":"boxflex","Fronts Top Banner":"topbanner","Mid Responsive":"midresponsive","Top Box Inline":"topboxinline","Native Ultra Dense":"nativeultradense","No Ads":"noads","Google Amp Article":"amparticle"};
</script>
<script type="text/javascript">if (typeof eTandomAd == "undefined") eTandomAd = "none"; var randomOrd = Math.floor((Math.random()*1000000000)+1);</script>
<script>
typeof(mps.execute_refresh_js) == "function" && mps.execute_refresh_js();
</script>
<script>
typeof(mps.execute_destroy_js) == "function" && mps.execute_destroy_js();
</script>
<script>
mps.datamaps={"kruxids":{"bravo-web":"Hhr_tP1Q","hip2save":"Ibufvl4d","accesshollywood-web":"Hhr_tOrA","test-web":"Ibufvl4d","movies.com":"Hhr_tY6P","allisports-web":"HkZYiE0j","eonline-web":"Hhr_tSwi","fandango-web":"Hhr_tTZO","fandango-mobile":"Jrb1MYL0","g4tv.com":"Hhr_tUnx","golf-web":"Hw-C3YP6","msnbc-web":"Hhr_taot","nbcsports-web":"Hhr_tdxJ","nbc-web":"Hhr_tggh","nbcnews-web":"Hhr_tdFP","breakingnews-web":"IbufgWS-","newsvine-web":"IbufmeEV","oxygen-web":"Hhr_thwe","syfy-web":"Hhr_tkRu","telemundo-web":"Hhr_tlyR","todayshow":"IbuiJ92p","usa-web":"Hhr_tqXM","esquire.com":"IkxxjkiU","golfnow.com":"HxufzCf9","csnbayarea.com":"Hhr_tfdM","csnchicago.com":"Hhr_tfdM","csnmidatlantic.com":"Hhr_tfdM","csnne.com":"Hhr_tfdM","csnnw.com":"Hhr_tfdM","csnphilly.com":"Hhr_tfdM","nhl.com":"Hhr_teSw","recode.net":"JWr8hSVx","nbcbayarea.com":"Hhr_tYbL","nbcchicago.com":"Hhr_tYbL","nbcconnecticut.com":"Hhr_tYbL","nbcdfw.com":"Hhr_tYbL","nbclosangeles.com":"Hhr_tYbL","nbcmiami.com":"Hhr_tYbL","nbcnewyork.com":"Hhr_tYbL","nbcphiladelphia.com":"Hhr_tYbL","nbcsandiego.com":"Hhr_tYbL","necn.com":"Hhr_tYbL","newyorklivetv.com":"Hhr_tYbL","telemundo47.com":"IvFtlWCT","telemundo51.com":"IvFtlWCT","telemundo52.com":"IvFtlWCT","telemundoareadelabahia.com":"IvFtlWCT","telemundochicago.com":"IvFtlWCT","telemundodallas.com":"IvFtlWCT","telemundodenver.com":"IvFtlWCT","telemundohouston.com":"IvFtlWCT","telemundolasvegas.com":"IvFtlWCT","holaciudad.com":"IvFtlWCT","usa-characterarcade":"Hhr_tqXM","nbc-tonightshow":"Hhr_tggh","nbc-snl":"Hhr_tggh","olympics-web":"KglqtuQq","rottentomatoes-web":"KeXIex0r","syfy-blastr":"Hhr_tkRu","syfy-chiller":"Hhr_tkRu","nbcuniverso-web":"Hhr_tlyR","golf-wld":"Hw-C3YP6","deportes-web":"Hhr_tlyR","golffantasy-web":"Hw-C3YP6","nbcboston.com":"Hhr_tYbL","nbcwashington.com":"Hhr_tYbL","telemundoarizona.com":"IvFtlWCT","telemundoboston.com":"IvFtlWCT","telemundo40.com":"IvFtlWCT","telemundosanantonio.com":"IvFtlWCT","telemundopr.com":"IvFtlWCT","telemundo62.com":"IvFtlWCT","nbcnews-bento":"Hhr_tdFP","local-web":"IvFtlWCT","telemundo-secretsalsa":"Hhr_tlyR","movietickets.com":"rjux9f48h","movietickets.ca":"rljypcm0g"},"evidon":{"fandango-web":"pid|ocid"},"remo":{"allisports-web":"nbcsports.com","rotoworld-web":"nbcsports.com","nhl-web":"nbcsports.com","golf-web":"nbcsports.com","nbcsports.stats.com":"nbcsports.com","nbcbayarea.com":"nbcnewyork.com","nbcchicago.com":"nbcnewyork.com","nbcconnecticut.com":"nbcnewyork.com","nbcdfw.com":"nbcnewyork.com","nbclosangeles.com":"nbcnewyork.com","nbcmiami.com":"nbcnewyork.com","nbcnewyork.com":"nbcnewyork.com","nbcphiladelphia.com":"nbcnewyork.com","nbcsandiego.com":"nbcnewyork.com","nbcwashington.com":"nbcnewyork.com","necn.com":"nbcnewyork.com","telemundo.stats.com":"telemundo.com","deportes-web":"telemundo.com","holaciudad.com":"telemundo.com","nbcuniverso-web":"telemundo.com","telemundo-web":"telemundo.com","breakingnews-web":"nbcnews.com","cnbc.com":"nbcnews.com","cnbcprime.com":"nbcnews.com","hip2save":"nbcnews.com","msnbc-web":"nbcnews.com","nbcnews-web":"nbcnews.com","newsvine-web":"nbcnews.com","todayshow":"nbcnews.com","test-web":"rich.run","golf-wld":"nbcsports.com"},"fruits":{},"adobeorg":{"rotoworld.com":"A8AB776A5245B4220A490D44@AdobeOrg","fandango-mobile":"8CF467C25245AE3F0A490D4C@AdobeOrg","cloo.com":"A8AB776A5245B4220A490D44@AdobeOrg","fandango-web":"8CF467C25245AE3F0A490D4C@AdobeOrg","rottentomatoes-web":"8CF467C25245AE3F0A490D4C@AdobeOrg","movies.com":"8CF467C25245AE3F0A490D4C@AdobeOrg","nbcsports-web":"A8AB776A5245B4220A490D44@AdobeOrg","golf-web":"A8AB776A5245B4220A490D44@AdobeOrg","allisports-web":"A8AB776A5245B4220A490D44@AdobeOrg","nbc-web":"A8AB776A5245B4220A490D44@AdobeOrg","nbc-snl":"A8AB776A5245B4220A490D44@AdobeOrg","nbc-tonightshow":"A8AB776A5245B4220A490D44@AdobeOrg","msnbc-web":"A8AB776A5245B4220A490D44@AdobeOrg","nbcnews-web":"A8AB776A5245B4220A490D44@AdobeOrg","today-web":"A8AB776A5245B4220A490D44@AdobeOrg","telemundo-web":"A8AB776A5245B4220A490D44@AdobeOrg","accesshollywood-web":"A8AB776A5245B4220A490D44@AdobeOrg","syfy-blastr":"A8AB776A5245B4220A490D44@AdobeOrg","bravo-web":"A8AB776A5245B4220A490D44@AdobeOrg","oxygen-web":"A8AB776A5245B4220A490D44@AdobeOrg","usa-characterarcade":"A8AB776A5245B4220A490D44@AdobeOrg","syfy-chiller":"A8AB776A5245B4220A490D44@AdobeOrg","nbcuniverso-web":"A8AB776A5245B4220A490D44@AdobeOrg","syfy-web":"A8AB776A5245B4220A490D44@AdobeOrg","usa-web":"A8AB776A5245B4220A490D44@AdobeOrg","golf-wld":"A8AB776A5245B4220A490D44@AdobeOrg","test-product":"A8AB776A5245B4220A490D44@AdobeOrg","nbcfantasy.stats.com":"A8AB776A5245B4220A490D44@AdobeOrg","profootballtalk.nbcsports.com":"A8AB776A5245B4220A490D44@AdobeOrg","rsn-web":"A8AB776A5245B4220A490D44@AdobeOrg","eonline-web":"\t5932F6B45755FB677F000101@AdobeOrg","deportes-web":"A8AB776A5245B4220A490D44@AdobeOrg","newsvine-web":"A8AB776A5245B4220A490D44@AdobeOrg","olympics-web":"A8AB776A5245B4220A490D44@AdobeOrg","nbcnews-bento":"A8AB776A5245B4220A490D44@AdobeOrg","local-web":"A8AB776A5245B4220A490D44@AdobeOrg","tve-web":"A8AB776A5245B4220A490D44@AdobeOrg","telemundo-secretsalsa":"A8AB776A5245B4220A490D44@AdobeOrg","movietickets-web":"8CF467C25245AE3F0A490D4C@AdobeOrg","nbcsports-live":"A8AB776A5245B4220A490D44@AdobeOrg","todayshow":"A8AB776A5245B4220A490D44@AdobeOrg","shopnbc-web":"A8AB776A5245B4220A490D44@AdobeOrg","rotoworld-web":"A8AB776A5245B4220A490D44@AdobeOrg"},"adobesub":{"rotoworld.com":"nbcu.demdex.net","fandango-web":"fandangollc.demdex.net","fandango-mobile":"fandangollc.demdex.net","rottentomatoes.com":"fandangollc.demdex.net","movies.com":"fandangollc.demdex.net","nbcsports-web":"nbcu.demdex.net","golf-web":"nbcu.demdex.net","allisports-web":"nbcu.demdex.net","nbc-web":"nbcu.demdex.net","nbc-snl":"nbcu.demdex.net","nbc-tonightshow":"nbcu.demdex.net","msnbc-web":"nbcu.demdex.net","nbcnews-web":"nbcu.demdex.net","today-web":"nbcu.demdex.net","telemundo-web":"nbcu.demdex.net","accesshollywood-web":"nbcu.demdex.net","syfy-blastr":"nbcu.demdex.net","bravo-web":"nbcu.demdex.net","oxygen-web":"nbcu.demdex.net","usa-characterarcade":"nbcu.demdex.net","syfy-chiller":"nbcu.demdex.net","nbcuniverso-web":"nbcu.demdex.net","syfy-web":"nbcu.demdex.net","usa-web":"nbcu.demdex.net","test-product":"nbcu.demdex.net","profootballtalk.nbcsports.com":"\tnbcu.demdex.net","rsn-web":"nbcu.demdex.net","eonline-web":"nbcu.demdex.net","deportes-web":"nbcu.demdex.net","cloo.com":"nbcu.demdex.net","newsvine-web":"\tnbcu.demdex.net","nbcnews-bento":"nbcu.demdex.net","olympics-web":"nbcu.demdex.net","telemundo-secretsalsa":"nbcu.demdex.net","movietickets-web":"fandangollc.demdex.net","nbcsports-live":"nbcu.demdex.net","tve-web":"nbcu.demdex.net","rottentomatoes-web":"fandangollc.demdex.net","shopnbc-web":"nbcu.demdex.net","rotoworld-web":"nbcu.demdex.net"},"abadmira":{"fandango-web":"24946f8061558922b9d2d7d4bc6420aa2fa4c14dadc4a5736c9f14aa4c74f7dfcbbf7b2f9fedb1c5b9ac87abd2f2fa7db40b51e623e118dc8399bfaa4c47f3","fandango-mobile":"0a5b23e61c65e901fa44bcdf335c329e3a6861673f4b7b64ddd035dfa4e402b86ec5e5fdbabb71c1f57cd5e3afcbcd7c6aa6e63f9169f8a325aeea099c5102","bravo-web":"c543c3684fa11225a01204e0405f9ab31fc709d30a2e01053aae76c2db226ffa350e23f23b0872800620f3591adb90ca7ed81e2bbc064485f561003cd19d","syfy-web":"fddb0b353ff953ba8097328c7241fab507c7a8b18b7852df8552eead184f8e7abcbf4c5164e1bd24d624df3dc1beb7bab29778f20defcdb062c516e25da9","usa-web":"6a5845a990085fa67e4c13c6582b1e9ee622092238e7dc38fc73d3cd30657d34ea14a419e29d3cac99fe2d4f0e721c2288a4a01d31adc751be7c5c50038d","oxygen-web":"3254dcd477c2536813b27c9cf6a83fdf4cb4171f9e60f080261ee6f9456a973691561b6bc79b04aacd7dfc3d359df1274238c70775600c0d9ed2315e62e7","nbc-web":"58cdda8e55837fc2da044da8d56463d23caa243e6ebe462767415e994e8575c1e9de3e7b07b5e08a2959f9d51743b1cd095e93be965462a3934290e407de2d","nbcsports-web":"d315a75b32de11728295e25c72688cebbffb97c68cff8ce4358ee550e92eda67e84f63e5d9b5202a1d2933f57921f7383660cccf114c908f7d48f7de9a07","olympics-web":"b5a1900981006b3ef7a387230ec6cabcbdb69b41bf5ab2589d5586d582b54fd86c6e7f1d50f7b87ef418831ed00cfdd19e906003643ecc476c82b432539846","eonline-web":"687e31dc1fa0846db97eaf7503b8cfc7743bdeee1e63e139e7972fc53173f1bc76dbbb2e7347b6fd0ad327ac3e7dde4d665621cd8196ab80574e27ef2a2d","telemundo-web":"680f4594a7ef8941c3d460420ca9a8f406d759e81397a99b0b05fbae5a267a9e0282e85c1d087787b29847f2af03e252fceb45b8633abdcd3565d884875dd5","msnbc-web":"0b1d8cbabefb875fb82adbfb9caf5a6cad5dc2c7ede56656208858c98efef8134120e587ee107fb9113f5a2c7bd4b600a50f907a27bd2147bc7f228cf4f058","nbcnews-web":"405ff492c0b37410bb6609de1410d2c091f468e4e684464cd8d9f2a1661f0fed65f9a53facf9a476f78a4aaf50a84287bd6b67308ff3cad6abfa5b67dec755","nbcnews":"405ff492c0b37410bb6609de1410d2c091f468e4e684464cd8d9f2a1661f0fed65f9a53facf9a476f78a4aaf50a84287bd6b67308ff3cad6abfa5b67dec755","nbcnews-bento":"c584c66692502b43e602ffed0c2c86879eafcfd7fd5165fe1e5c528fb929ca7a247b8f07669652b063942328767508c5b6cd5d4f2f66b06f87b71c5f820c9e"},"mpartid":{"nbcnews.com":"65ea0b28a73c4c4abd08599774d30799","fandango-web":"X","golf-web":"a9e13c3b9a605742b6bd7c3cddf1b193","fandango-mobile":"X","eonline-web":"13c1572c444c0043bd68e09b734a5374","bravo-web":"4692933e526e744dbb51140cfadd4b53","oxygen-web":"af7ecd589c6b72458822e8ab59420e5c","syfy-web":"48abf51d492ac0489293cbfd12b40d47","nbc-web":"X","usa-web":"1fa2e89d1a05694a86aa86ef62c164db","telemundo-web":"820719afb4fef54fb2fc9e702f6a077b","nbcnewyork.com":"X","nbcsports-web":"9a616cbbe75e894693d53f30106e9cd3","today.com":"3f8eeba44cd1254a897586bb26fa1c4a","msnbc.com":"4c6f61ee9fa74942a781c3ecf77b926e"}};
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>
<script class="mps-pm3-shared">//--[2017-12-01]
//----[LOAD & SET PIXELMAN3]---------------------------------
mps.pm3=mps.pm3||{}; 
mps.pm3._init = function(forceload){
  if(!mps._kvinsert||typeof(__nbcudigitaladops)!='object'||__nbcudigitaladops.version!='3.0') {
    mps._d('[mps:PM3] Init FAILED (libs not enabled)');
    return false;
  }
  if(this.loaded && !forceload) {
    mps._d('[mps:PM3] Init SKIPPED (already loaded)');
    return false;
  }
  this.loaded={}; this.ids={}; this.checkfunc=this.checkfunc||{}; this.callback=this.callback||{};
  this.setLoad = function(name,data) {
    if(!this.loaded||typeof(name)!='string') return false;
    var datajson = typeof(data)=='object' ? JSON.stringify(data) : data;
    var loadedval = [mps._elapsed('',1)]
    if(data!=undefined) loadedval.push(data);
    if(this.loaded[name]) { // name already exists
      this.loaded[name].push(loadedval)
      name = name+'['+this.loaded[name].length+']'
    } else {
      this.loaded[name] = [loadedval];
    }
    mps._d('[mps:PM3] LOADED: '+mps._trim(JSON.stringify(name),'"')+' '+mps._elapsed());
  }
  this.executeItem = function(name,item,loadmultiple) {
    if(!this.loaded || (typeof(item)!='function' && typeof(item)!='string') || (typeof(name)!='string' && !name.length)) {
      mps._d('[mps:PM3] /executeItem/ FAILED ['+name+']',item);
      return false;
    }
    if(typeof(this.checkfunc['executeItem'])=='function') {
      //mps._d('[mps:PM3] /executeitem/ (calling '+'checkfunc)');
      var checkfuncret = this.checkfunc['executeItem'].apply(this,arguments);
      if(checkfuncret===false||checkfuncret===0||checkfuncret=='false'||checkfuncret=='0') {
        mps._d('[mps:PM3] /executeItem/ SKIPPED (using checkfunc): '+name);
        return false;
      }
    }
    if(this.loaded[name] && !loadmultiple) {
      mps._d('[mps:PM3] /executeItem/ SKIPPED (already loaded): ['+name+']');
      return false;
    }
    mps._d('[mps:PM3] /executeItem/ EXECUTE: '+name+' '+mps._elapsed());
    this.setLoad(name,item);
    if(typeof(item)=='function') return item.call(this,name);
    if(typeof(item)=='string') return mps._append((mps._select('body')?'body':'head'),item);
  }
  mps._d('[mps:PM3] Init COMPLETE');
}

//----[SHARED FUNCTIONS]---------------------------------
mps._datamapValue = function(set,site) {
  var site = site||mps.pagevars.instance;
  if(!mps.pagevars) return false
  if(!mps.datamaps || !mps.datamaps[set]) {
    mps._d('[mps/datamaps] WARNING - Data mapping set does not exist: '+set);
    return false;
  }
  var _site = site ? site : mps.pagevars.instance
  // return based on mps site instance or passed site value
  if(_site && _site!='automagic' && mps.datamaps[set][_site]) return mps.datamaps[set][site];
  // return based on domain
  var _subdoms = window.location.host.split('.');
  var _topdom = _subdoms.pop();
  _topdom = _subdoms.pop()+'.'+_topdom;
  _subdoms.reverse();
  if(mps.datamaps[set][_topdom]) return mps.datamaps[set][_topdom];
  var _tmphost = _topdom;
  for(var i=0;i<_subdoms.length;i++) {
    _tmphost = _subdoms[i]+'.'+_tmphost;
    //mps._d("#**** TRYING: "+_tmphost);
    if(mps.datamaps[set][_tmphost]) return mps.datamaps[set][_tmphost];
  }
  mps._d('[mps/datamaps] FAILED - Data mapping value for ['+set+'] does not exist on: '+site);
  return false;
}
mps._getCleanURL = function(url) {
  if(typeof(url)!='string' || !url) return '';
  return url.split('?')[0];
}
//----[INITIALIZE & LOAD]---------------------------------
mps.pm3._init();
</script>
<script class="mps-pm3" data-mps-pm3="kv-admantx">//--[2018-06-01]
mps.pm3 && mps.pm3.executeItem && mps.pm3.executeItem('kv-admantx', function() {
  mps._kvinsert.require('admantx');
  window.admantx_callback = function(data) {
    mps._d('[mps:PM3] Admantx Data: '+JSON.stringify(data));
    if (__nbcudigitaladops_inject && __nbcudigitaladops_inject.dtprm) {
      if (data && data.admants) {
        var adgvals = [];
        if (data.status == "OK") {
          for (var x = 0; x < data.admants.length; x++) {
            //var kv = 'adg=' + data.admants[x] + ';';
            //__nbcudigitaladops_inject.dtprm(kv);
            adgvals.push(data.admants[x]);
          }
        } else {
          //__nbcudigitaladops_inject.dtprm("asg=othererror;")
          adgvals.push('othererror');
        }
        mps._setPageTargeting('adg',adgvals);
        mps._kvinsert.complete('admantx');
      }
    }
  }
  if (mps._kvinsert) {
    mps._loadJS(mps._protocol() + '//' + 'usasync01.admantx.com/admantx/service?request=' + encodeURIComponent('{"decorator":"template.nbc_template","key":"62263fff3cc1d07f85c7f8261a0c8f7dc096b35f59c82a713f20a9db8d562ff2","method":"descriptor","filter":"default","mode":"async","type":"URL","body":"' + document.location.href + '"}'), function() {
      mps._l('[mps:PM3] JS LOADED: Admantx');
    });
  }
});
</script>
<script>//--[2018-11-07] [AEM] Track Ads CORE
  /*---- USAGE ----------------------------------
   mps._queue.trackads.push(function(ev, data) {
      //--[note: ev is either load or render]
      mps._d('Callback: tracksads - '+ev, data);

    })
  ---------------------------------------------*/
mps.trackads = mps.trackads || {};
mps.trackads.init = function() {
  if(mps.trackads._init) return false;
  mps.trackads._init=1;
  mps._queue.gptloaded.push(function() {
    mps.trackads.data = mps.trackads.data || {};
    mps._queue.trackads = mps._queue.trackads || [];
    mps._queue.adload = mps._queue.adload || [];
    mps._queue.adrender = mps._queue.adrender || [];
    // detected display ads - store timing
    mps._lazytimes = mps._lazytimes||{};
    mps._queue.lazyload=mps._queue.lazyload||[];
    mps._queue.lazyload.push(function(slot,loadset) {
      mps._lazytimes[loadset]=mps._lazytimes[loadset]||{}
      mps._lazytimes[loadset][slot] = mps._elapsed('',1);
    });
    // ad calls - store timing
    mps._calltimes = mps._calltimes||{};
    mps._queue.adexecute=mps._queue.adexecute||[];
    mps._queue.adexecute.push(function(slot,loadset) {
      mps._calltimes[loadset]=mps._calltimes[loadset]||{}
      mps._calltimes[loadset][slot] = mps._elapsed('',1);
    });
    mps._queue.adload.push(function(eo) {
      if (typeof(eo) !== 'object' || !eo.slot || !eo.slot.getSlotElementId) return false;
      var slotid = eo.slot.getSlotElementId();
      var _slot = mps._determineSlot(slotid);
      if (!_slot.slotname) return false;
      var slot = _slot.cleanslot,
        loadset = _slot.loadset,
        clone = _slot.cloneset,
        slotname = _slot.slotname;
      if (!mps._adloads[loadset][slot]) return false;
      var loadinfo = mps._adloads[loadset][_slot.slotname]._mps;
      var dataobj = {
        'ad': {
          'loadset': loadset,
          'slot': slot,
          'slotname': slotname,
          'clone': clone,
          'isempty': eo.isEmpty ? 1 : 0,
          'refreshed': loadinfo._refreshed ? loadinfo._refreshed : 0,
          'size': mps._adsizes[slot] ? mps._adsizes[slot] : 0,
          'adunitid': eo.slot.getAdUnitPath ? eo.slot.getAdUnitPath() : '',
          'creativeid': eo.creativeId ? eo.creativeId : (eo.sourceAgnosticCreativeId ? eo.sourceAgnosticCreativeId : 0),
          'advertiserid': eo.advertiserId ? eo.advertiserId : 0
        },
        'context': {
          'mpsid': mps.pagevars.mpsid,
          'site': mps.pagevars.instance,
          'path': mps.pagevars.path,
          'type': mps.pagevars.type ? mps.pagevars.type : 'UNKNOWN',
          'cat': mps.pagevars.cats ? mps.pagevars.cats.join('|') : 'UNKNOWN',
          'cats': mps.pagevars.cats ? mps.pagevars.cats : ['UNKNOWN']
        },
        'timeline': {
          'mpsinit': mps._reqs[loadset].mpsready ? mps._reqs[0].mpsready : 0,
          'detect': (mps._lazytimes && mps._lazytimes[loadset] && mps._lazytimes[loadset][_slot.slotname]) ? mps._lazytimes[loadset][_slot.slotname] : 0,
          'call': mps._calltimes[loadset][_slot.slotname] ? mps._calltimes[loadset][_slot.slotname] : 0,
          'load': loadinfo._elapsed
        },
        'timing': {
          'load': Math.round(loadinfo._elapsed - mps._calltimes[loadset][_slot.slotname])
        }
      };
      if(dataobj.timeline.detect) {
        dataobj.timing.load = Math.round(dataobj.timeline.load - dataobj.timeline.detect);
        // dataobj.timing.detect /* not possible unable to tell when the ad get inserted vs detected */
      }
      if(dataobj.timeline.detect)
      dataobj.context.name = dataobj.context.site + '|' + dataobj.context.type + '|' + dataobj.context.cats[0] + '|' + dataobj.context.mpsid;
      mps.trackads.data[loadset] = mps.trackads.data[loadset] || {};
      mps.trackads.data[loadset][_slot.slotname] = dataobj;
      dataobj.pageload = mps.trackads._randstr;
      mps._queue.render('trackads', 'load', dataobj);
    });
    mps._queue.adrender.push(function(eo) {
      var slotid = eo.slot.getSlotElementId();
      var _slot = mps._determineSlot(slotid);
      if (!_slot.slotname) return false;
      var slot = _slot.cleanslot,
        loadset = _slot.loadset,
        clone = _slot.cloneset,
        slotname = _slot.slotname;
      var slot = _slot.slot, loadset=_slot.loadset, clone=_slot.clone;
      var loadinfo = mps._adloads[loadset][_slot.slotname]._mps;
      var dataobj = mps.trackads.data[loadset][_slot.slotname];
      dataobj.timeline.render = loadinfo._rendered;
      dataobj.timing.render = (loadinfo._rendered-loadinfo._elapsed);
      mps.trackads.data[loadset][_slot.slotname] = dataobj;
      mps._queue.render('trackads','render',dataobj);
    });
    mps._d('[mps/trackAds] handlers intialized');
  });
}

mps.trackads.randomizer = function(a) {
  var b = "abcdefghiklmnopqrstuvwxyz".split("");
  a || (a = Math.floor(Math.random() * b.length));
  for (var c = "", d = 0; d < a; d++) c += b[Math.floor(Math.random() * b.length)];
  return c;
};
mps.trackads._randstr = mps.trackads._randstr||mps.trackads.randomizer(12);
mps.trackads.init();
</script>
<script>//--[2017-03-09] SET AD UNIT ID FOR ABTRACKING
  if(mps.response && mps.response.page && mps.response.page.gpt_adid) {
    mps._ab = mps._ab||{};
    mps._ab._detectadid = "/2620/abtrack/"+mps.response.page.gpt_adid.split('/')[2];
  }
</script>
<script>//--[2016-06-20] ADTEST HANDLER
  mps._dtparamsappend=mps._dtparamsappend||'';  (typeof(mps._get)=='function') && (__qsparam=mps._get('adtest')) && (mps._dtparamsappend += 'adtest='+__qsparam.replace(/W/g, '')+';');
</script>
<script>//--[2017-10-20] TESTING HELPERS
  mps._checkQS=function(qskey){if(typeof qskey!="string"||!qskey)return false;if(mps._get(qskey)!==false||mps._get(qskey.toLowerCase())!==false||mps._get(qskey.toUpperCase())!==false)return true;return false};

//--[2018-10-15] GPT_ADID ALIAS
if (mps.response && mps.response.page) {
  mps.gpt_adid = mps.response.page.gpt_adid;

}

//--[2018-09-10] DISABLEDD
if(mps._checkQS&&mps._checkQS("DISABLEDD")&&mps._detect){mps._d("^[MPS:Detect Display]: Disabled. Remove ?DISABLEDD to enable.");clearInterval(mps._detect.interval);clearInterval(mps._detect.parentint);clearInterval(mps._detect.velocityinterval);"function"===typeof mps._detect.load&&(mps._scroll=window.removeEventListener("scroll",mps._detect.load,{passive:!0}));mps._detect.scroll&&"function"===typeof mps._detect.scroll.calculate&&(mps._scroll=window.removeEventListener("scroll",mps._detect.scroll.calculate,
{passive:!0}));mps._resize=window.removeEventListener("resize",mps._detect.load);mps.response&&mps.response.dart&&mps.response.dart.params&&(mps.response.dart.params.lazy_load_slots=[],mps.response.dart.params.lazy_load=0);var detectviewport=mps._detect.viewport;mps.lazyload={};mps._detect.load=null;mps._detect={};mps._detect.viewport=detectviewport;mps._detect.getATFPadding=function(){return!1};mps._detect.detectionelement=mps._detect.detectionelement||{}};

//--[2018-05-07] KILLADS
if(mps._checkQS&&mps._checkQS("KILLADS")){mps._d("[mps] KILL AD EXECUTIONS");if(mps.response&&mps.response.dart&&("object"===typeof mps.response.dart.adunits||"object"===typeof mps.response.dart.params.adunits)){for(var i in mps.response.dart.adunits)mps.response.dart.adunits[i].data='<script data-mps-slot="'+i+'">mps._d("[mps] KILL AD: '+i+'")\x3c/script>';for(i in mps.response.dart.params.adunits)mps.response.dart.params.adunits[i].html='<script data-mps-slot="'+i+'">mps._d("[mps] KILL AD: '+i+
'")\x3c/script>'}mps.cloneAd=function(){return!1}};
</script>
<script>
  //--[2019-03-15] Add Instance Redirect Indicator (using mpscall.IRSOURCE)
  mps._ready(function() {
    typeof mpscall === 'object' && mpscall.IRSOURCE && mpscall.IRSOURCE != mps.pagevars.mpsurl && mps._append("body", '<style>#mps-indicator-ir{background:#227cb9d9;-webkit-border-radius:6;-moz-border-radius:6;border-radius:6px;font-family:Calibri,Arial,sans-serif;color:#fff;font-size:1.3em;padding:3px 6px;border:3px solid #a0e1ffcc;text-decoration:none;position:fixed;bottom:8px;right:6px;z-index:2147483646!important}#mps-indicator-ir:hover{background:#1491e4;text-decoration:none;cursor:pointer;}</style><button id="mps-indicator-ir" onclick="mps._remove(\'#mps-indicator-ir\');"><b>&rarr;</b> ' + mps.pagevars.mpsurl + "</button>")
  });
</script>
<script>//--[2017-05-04] Defines customObj for AAM DIL (load before DIL code)
//--For sites without Pixelman Replacement (@TODO REMOVE ME)
mps._datamapValue=function(a,d){d=d||mps.pagevars.instance;if(!mps.pagevars)return!1;if(!mps.datamaps||!mps.datamaps[a])return mps._d("[mps/datamaps] WARNING - Data mapping set does not exist: "+a),!1;var b=d?d:mps.pagevars.instance;if(b&&"automagic"!=b&&mps.datamaps[a][b])return mps.datamaps[a][d];var b=window.location.host.split("."),c=b.pop(),c=b.pop()+"."+c;b.reverse();if(mps.datamaps[a][c])return mps.datamaps[a][c];for(var e=0;e<b.length;e++)if(c=b[e]+"."+c,mps.datamaps[a][c])return mps.datamaps[a][c];mps._d("[mps/datamaps] FAILED - Data mapping value for ["+a+"] does not exist on: "+d);return!1};

mps.aam=mps.aam||{}; mps.aam.customObject=mps.aam.customObject||{}; mps.aam._loaded=mps.aam._loaded||{}; mps.aam._loaded.customobj=0;

mps.aam.customObject.INIT = function(){
  /*--[ CONFIGURATION ]------------------------------------------------*/
  mps.aam.customObject._scripts = {
    'example': mps._protocol()+'//site.com/example.js',
  }

  mps.aam.customObject._opts = {
    'visitornamespace':'A8AB776A5245B4220A490D44@AdobeOrg',
  }

  this._visitorns = mps._datamapValue('adobeorg');
  if(this._visitorns) mps.aam.customObject._opts.visitornamespace = this._visitorns;

  mps.aam.customObject._conf = {
    'missingval':'UNKNOWN',
    'rootpage':{'type':'home','cat':'home'},
    'cleanregex':/[^-a-z0-9_~. \s]/ig,
    'maxlength':25,
  }

  mps.aam.customObject.site = mps.pagevars.instance;
  mps.aam.customObject.brand = mps.pagevars.instance.split('-')[0];
  mps.aam.customObject.platform = mps.pagevars.instance.split('-')[1];
  if(!mps.aam.customObject.platform) delete mps.aam.customObject.platform;

  mps.aam.customObject._status = 0;
  if(typeof(mps.aam.customObject.opts=='object')) mps._merge(mps.aam.customObject._opts,mps.aam.customObject.opts)
  if(typeof(mps.aam.customObject.conf=='object')) mps._merge(mps.aam.customObject._conf,mps.aam.customObject.conf)
  this.cd={}; this._data={};

  mps.aam.customObject.defineData = function() {
    this._data.cid = mps.pagevars.cid;
    this._data.cat = mps.pagevars.cats;
    this._data.type = mps.pagevars.type;
    this._data.mpspath = mps._trim(mps.pagevars.path,'/').split('/');
    this._data.pathsegs = mps._trim(window.location.pathname,'/').split('/');
    this._data.hostsegs = window.location.host.split('.');
    // handle path prefix format
    if(this._data.mpspath[0].indexOf(':')>-1) {
      var _seg = this._data.mpspath[0].split(':');
      this._data.pathprefix = _seg[0];
      if(_seg[1]=='') {
        this._data.mpspath.shift();
      } else {
        this._data.mpspath[0] = _seg[1];
      }
    }
    this._data.pageinfo={}
    if(this._data.mpspath===0) {
      this._data.pageinfo.home=1;
      if(this._data.cat.length===0) this._data.cat.push(this._conf.rootpage.cat);
      if(this._data.type=='') this._data.type=this._conf.rootpage.cat(type);
    }
    this._l('executed: defineData');
    return this._data;
  }

  mps.aam.customObject.setData = function(){
    // set page data variables
    var _urlsegs = mps._trim(window.location.pathname,'/').split('/'); _urlsegs.unshift(window.location.host);
    this.cd['page_uri'] = mps._trim(_urlsegs.join('/'),'/');
    var _refsegs = mps._trim(document.referrer,'/').replace('http://','').replace('https://','').split('?')[0].split('/'); 
    if(_refsegs[0] && _refsegs[0]!=_urlsegs[0]) this.cd['page_refhost'] = _refsegs[0];

    // set nbcu data variables
    this.cd['nbcu_brand'] = mps.aam.customObject.brand;
    this.cd['nbcu_platform'] = mps.aam.customObject.platform||'';
    this.cd['nbcu-'+mps.aam.customObject.brand+'-contenttype'] = mps.pagevars.type ? mps.pagevars.type : 'page';
    this.cd['nbcu_cleantitle'] = mps.aam.customObject._clean(window.document.title,50).replace(/\s\s+/g,' ');

    // set mps data variables
    this.cd['mps_contentid'] = this._data.cid;
    this.cd['mps_path'] = mps.pagevars.path;
    if(this._data.cat) this.cd['mps-'+mps.aam.customObject.brand+'-cats'] = this._data.cat.join('|');
    for(var i=0; i<this._data.cat.length; i++) {
      this.cd['mps-'+mps.aam.customObject.brand+'-cat'+(i+1)] = this._data.cat[i];
    }
    if(mps.pagevars.dart_mode) this.cd['mps_admode'] = mps.pagevars.dart_mode;
    if(mps._ext && mps._ext._insertedads) this.cd['mps_adsinserted'] = mps._ext._insertedads;
    if(mps.pagevars.dart_lazy_load) this.cd['mps_adlazyload'] = mps.pagevars.dart_lazy_load;
    if(mps._ab && mps._ab.run && typeof(adBlockEnabled)!='undefined') this.cd['mps_adblock'] = adBlockEnabled ? 1 : 0;
    if(typeof(mps.pagevars.cags)=='object') {
      for(var i in mps.pagevars.cags) {
        this.cd['mps_cag-'+mps.aam.customObject.brand+'-'+i] = mps.pagevars.cags[i];
      }
    }
    if(typeof(mps.pagevars.fields)=='object') {
      for(var i in mps.pagevars.fields) {
        this.cd['mps_field-'+mps.aam.customObject.brand+'-'+i] = mps.pagevars.fields[i];
      }
    }
    if(mps.pagevars.freewheel_section) this.cd['mps_fwssid'] = mps.pagevars.freewheel_section;
    if(typeof(mps._loadset)=='number') this.cd['mps_loadset'] = mps._loadset;
    if(mps.response && mps.response.page) {
      if(mps.response.page.gpt_adid) this.cd['mps_adunitid'] = mps.response.page.gpt_adid;
      if(mps.response.page.package) this.cd['mps_packageid'] = mps.response.page.package;
    }
    this.cd['pagename'] = mps.aam.customObject.cd['nbcu_brand']+'|'+mps.aam.customObject.cd['nbcu-'+mps.aam.customObject.brand+'-contenttype']+'|'+mps.aam.customObject.cd['mps-'+mps.aam.customObject.brand+'-cat1']+'|'+mps.aam.customObject.cd['mps_contentid']+'|'+this.cd['nbcu_cleantitle'];
    this._l('executed: setData');
    return this.cd;
  }
  mps.aam.customObject.customObj=mps.aam.customObject.customObj||{}; mps.aam.customObject.customObj[mps._loadset]={};
  mps.aam.customObject._applyData = function(usearrays) {
    var _set={};
    // merge mps.data if previously set
    if(typeof(mps.data)=='object' && mps._keys(mps.data).length>0) this.cd = mps._merge(this.cd, mps.data)
    for(var i in this.cd) {
      var _cdval = this.cd[i];
      var _isarr = 0;
      if(typeof(_cdval)=='boolean') _cdval=_cdval+0;
      if(typeof(_cdval)=='number') _cdval=_cdval.toString();
      if(Object.prototype.toString.call(this.cd[i])==='[object Array]') {
        _cdval.sort();
        _isarr = 1;
        if(!usearrays) _cdval=_cdval.join(',');
      }
      if(typeof(_cdval)!='string' && !_isarr) {
        this._l('(skipped applyData: '+i+')');
        continue;
      }
      _set[i] = _cdval;
      this.customObj[mps._loadset][i] = _cdval;
    }
    this._l('executed: applyData');
  }
  mps.aam.customObject._status = 1;
  this._l('Applied & Set Custom Object');
  return mps.aam.customObject._status;
}

/*--[ INTERNAL ]------------------------------------------------*/
mps.aam.customObject._clean=function(str,maxlength,nospaces,lowercase){
  if(typeof(maxlength)=='undefined' && this._conf && this._conf.maxlength>0) maxlength = this._conf.maxlength;
  if(typeof(str)=='boolean') str=str+0;
  if(typeof(str)=='number') str=str.toString();
  if(typeof(str)!='string') return '';
  str = str.replace(this._conf.cleanregex,'');
  if(nospaces) str=str.replace(' ','');
  if(maxlength) str=str.substring(0,maxlength);
  if(lowercase) str.toLowerCase();
  return str;
}
mps.aam.customObject._getQS=function(){var a;(window.onpopstate=function(){var b,c=/\+/g,d=/([^&=]+)=?([^&]*)/g,e=window.location.search.substring(1);for(a={};b=d.exec(e);)a[decodeURIComponent(b[1].replace(c," "))]=decodeURIComponent(b[2].replace(c," "))})();return a};
mps.aam.customObject._l=function(msg,label){
  if(typeof(msg)=='boolean') msg=msg+0;
  if(typeof(msg)=='number') msg=msg.toString();
  if(typeof(msg)=='object') msg=JSON.stringify(msg);
  if(typeof(msg)!='string') msg='<'+typeof(msg)+'>';
  if((typeof(label)!='string'||label.length==0)&&mps.aam.customObject._l.label) label = mps.aam.customObject._l.label;
  if(typeof(label)!='string') label='';
  mps._d(label+' '+msg+' '+mps._elapsed());
  return msg;
};
mps.aam.customObject._l.label = '[mps/aam]';

/*--[ EXECUTION ]------------------------------------------------*/
mps.aam.customObject.EXECUTE = function(){
  try {
    this.defineData();
    this.setData();
    if(typeof(mps.aam.brandCustomObject)=='function') mps.aam.brandCustomObject();
    this._applyData(true);
    this._l('Custom Object: '+JSON.stringify(this.customObj[mps._loadset]));
    mps.aam._loaded.customobj = mps._elapsed('',false);
    return this.customObj[mps._loadset];
  } catch(e) {
    mps._d('[mps/aam] ERROR: Custom Object Execution',e)
    return {};
  }
}
window._customObj=window._customObj||{};
if(mps.aam.customObject.INIT()) {
  window.customObj = window._customObj[mps._loadset] = mps.aam.customObject.EXECUTE();
}
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><script>mps._components = {'head' : ["1-{@head}-PM","{@head}-PM-KV-admantx","{@head}-trackads-core","{@head}0-SHARED-HEAD","{@head}:adobe-customobj"],'bodyheader' : ["{@bodyheader}-trackads-wavefront","{@bodyheader}-xfinity-targeting"],'bodyfooter' : ["{@bodyfooter}-mpsready-fallback"]}</script><script async="" src="https://usasync01.admantx.com/admantx/service?request=%7B%22decorator%22%3A%22template.nbc_template%22%2C%22key%22%3A%2262263fff3cc1d07f85c7f8261a0c8f7dc096b35f59c82a713f20a9db8d562ff2%22%2C%22method%22%3A%22descriptor%22%2C%22filter%22%3A%22default%22%2C%22mode%22%3A%22async%22%2C%22type%22%3A%22URL%22%2C%22body%22%3A%22https%3A%2F%2Fwww.nbcnews.com%2Fscience%2Fweird-science%2Fconspiracy-theories-abound-u-s-military-closes-haarp-n112576%22%7D" type="text/javascript"></script><script src="https://native.sharethrough.com/assets/sfp.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.min.js" type="text/javascript"></script><link as="script" href="https://adservice.google.ie/adsid/integrator.js?domain=www.nbcnews.com" rel="preload"/><script src="https://adservice.google.ie/adsid/integrator.js?domain=www.nbcnews.com" type="text/javascript"></script><link as="script" href="https://adservice.google.com/adsid/integrator.js?domain=www.nbcnews.com" rel="preload"/><script src="https://adservice.google.com/adsid/integrator.js?domain=www.nbcnews.com" type="text/javascript"></script><script async="" src="https://securepubads.g.doubleclick.net/gpt/pubads_impl_2019071103.js"></script><style type="text/css">.vilynx_fading:not([vilynx-fadingid]):not([data-vilynx-fadingid]) {
  opacity: 1 !important;
  visibility: visible;
}
.vilynx_registered .vilynx_wrapperImg {
  height: 100%;
  width: 100%;
  transition: opacity 0.35s linear;
  position: relative;
  z-index: 1;
  object-fit: cover;
}
.vilynx_registered .vilynx_wrapperImg.vilynx-hide {
  opacity: 0;
  visibility: hidden;
}
.vilynx_registered .vilynx_wrapperImg.vilynx_fading {
  opacity: 0 !important;
}
.vilynx_registered div:not(vilynx_img).vilynx_fading:not([vilynx-fadingid]):not([data-vilynx-fadingid]) {
  opacity: 1 !important;
  visibility: visible;
}
.vilynx_registered .supra-wrapper video {
  position: absolute;
  top: 0;
  left: 0;
  z-index: -5;
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.vilynx_registered .supra-wrapper {
  overflow: hidden;
  position: absolute;
  z-index: 1;
  width: 100%;
}
.vilynx_registered .supra-wrapper.vilynx-hide {
  opacity: 0;
  visibility: hidden;
}
.vilynx_registered.vilynx_disabled .supra-wrapper {
  opacity: 0;
  visibility: hidden;
}
.vilynx_registered .redirectWrapper {
  display: table;
  position: absolute;
  left: 0;
  top: 0;
  background-color: rgba(0, 0, 0, 0.5);
  height: 100% !important;
  width: 100%;
  text-align: center;
  z-index: 1000;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.35s linear !important;
}
.vilynx_registered .redirectWrapper .redirectCenter {
  display: table-cell;
  vertical-align: middle;
}
.vilynx_registered .redirectWrapper .redirectCenter .text {
  max-width: 100%;
  margin-bottom: 10px;
  font-family: sans-serif;
  color: white;
}
.vilynx_registered .redirectWrapper .redirectCenter .counter {
  max-width: 100%;
  font-family: sans-serif;
  color: white;
}
.vilynx_registered .redirectWrapper.cta.hideCtaIcon .counter {
  display: none;
}
.vilynx_registered .redirectWrapper.cta .redirectCenter .text {
  margin-bottom: 8px;
  font-weight: 100;
}
.vilynx_registered .redirectWrapper.cta .counter {
  position: relative;
  display: block;
  content: '';
  width: 35px;
  height: 35px;
  border-radius: 50%;
  border: 2px solid #FFF;
  text-indent: -1000px;
  left: 50%;
  margin-left: -20px;
}
.vilynx_registered .redirectWrapper.cta .counter:before {
  display: block;
  content: '';
  position: absolute;
  width: 0;
  height: 0;
  border-top: 10px solid transparent;
  border-bottom: 10px solid transparent;
  border-left: 18px solid white;
  left: 50%;
  margin-left: -7px;
  top: 50%;
  margin-top: -10px;
}
.vilynx_gif {
  display: block;
  position: absolute;
  top: 0;
  width: 100%;
  z-index: 20;
}
[data-vilynx-fadingid],
[vilynx-fadingid] {
  transition: opacity 0.35s linear;
}
.vilynx_fading[data-vilynx-fadingid],
.vilynx_fading[vilynx-fadingid] {
  opacity: 0;
}
@media only screen and (max-device-width: 736px) {
  .vilynx_registered img {
    transition: none;
  }
}
</style><div class="z-5" id="modal-root"></div><div id="content"><div class="container___2vv8Q" data-reactroot=""><div class="gridGuides grid___3ZRoB"><div class="gridColumns___1zOp6"><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div><div class="gridColumn___2gt7t"></div></div></div><div class="bannerAd___ch9G0 ad-container topbannerAd triggerClass"><div class="adBackground___1YXUJ" style="height:0px"></div><div class="ad dn-print" data-test="ad__container"><div data-active-tab="true" data-enigma="true" data-render-on-view="true" data-sizes="[[[1000,1],[[728,90],[970,66],[970,90],[970,250],[1900,400]]],[[758,1],[[728,90],[970,66],[970,90],[970,250],[1900,400]]],[[0,0],[[1900,400]]]]" data-slot="topbanner" data-targeting="{}"><div id="div-mps-ad-topbanner-1"></div></div></div></div><div class="db-m dn" style="height:0px"></div><script>var _HFS = { version: "1.0.6", host: "https://nodeassets.nbcnews.com/assets/header-footer", social: "nbcnews" }</script><script>/* eslint-disable */
(function () {
  var hd = (window._HFS && window._HFS.host) || !1;
  if (hd !== !1 && typeof window.HTMLPictureElement === 'undefined') {
    var srcScript = document.createElement('script');
    document.head.appendChild(srcScript);
    srcScript.src = hd.concat('picturefill.min.js');
  }
})();
</script><div class="headerWrapper___jR_b8" id="hfs-header"><nav class="hfsh show-global init vertical"><div class="global"><div class="global-insert js-global-nav-insert"></div><ul class="global-list"><li class="global-list-item"><a class="vilynx_listened" href="https://www.nbcnews.com">News</a></li><li class="global-list-item"><a class="vilynx_listened" href="https://www.nbcnews.com/now">NBC News NOW</a></li><li class="global-list-item"><a class="vilynx_listened" href="https://www.nbcnews.com/nightly-news">Nightly News</a></li><li class="global-list-item"><a class="vilynx_listened" href="https://www.nbcnews.com/meet-the-press">Meet the Press</a></li><li class="global-list-item"><a class="vilynx_listened" href="https://www.nbcnews.com/dateline">Dateline</a></li><li class="global-list-item secondary"><a class="vilynx_listened" href="https://www.msnbc.com">MSNBC</a></li><li class="global-list-item secondary"><a class="vilynx_listened" href="https://www.today.com">TODAY</a></li></ul><button class="search-icon js-search-open"><span class="hfs-i hfs-i-search"></span></button></div><div class="local h-h"><div class="logo-wrap h-h"><a class="vilynx_listened" href="https://www.nbcnews.com"><span class="logo h-h"><svg class="peacock" height="39" viewbox="578 62 67 39" width="67" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><path d="M579.074 90.58c1.717-4.494 6.472-6.08 10.697-3.37l18.29 12.754h-22.18c-4.62 0-8.252-4.23-6.8-9.385"></path><path class="feather" d="M579.074 90.58c1.717-4.494 6.472-6.08 10.697-3.37l18.29 12.754h-22.18c-4.62 0-8.252-4.23-6.8-9.385"></path><path class="feather" d="M597.563 75.863l9.442 21.613-19.478-13.35c-4.887-3.24-3.896-8.79-1.19-11.237 3.83-3.24 9.245-2.12 11.226 2.97"></path><path class="feather" d="M610.57 70.93l-3.433 24.19-9.772-23c-2.113-5.75 2.64-9.516 5.81-9.583 3.632-.396 8.188 2.38 7.396 8.394"></path><path class="feather" d="M625.494 72.103l-9.707 23.067-3.102-20.82c-.265-3.17 1.716-3.237 2.443-3.832-.133-.463-1.124-.463-1.124-.463h-1.848c-.198-5.42 4.028-7.8 7.462-7.535 3.697.132 7.856 4.428 5.876 9.583"></path><path class="feather" d="M635.338 84.167L615.86 97.584l9.177-21.348c2.775-6.742 9.245-5.42 11.556-2.842 2.51 2.51 3.235 7.6-1.255 10.773"></path><path class="feather" d="M637.448 99.9h-22.515l18.29-12.756c4.49-2.975 9.244-.266 10.498 3.635 1.327 4.36-1.65 9.12-6.27 9.12"></path></g></svg><div class="brand"><span class="hfs-i hfs-i-vertical-news"></span></div></span></a></div><div class="js-sponsor-wrap"><div class="ad-container v-hidden v-visible-l h-100 justify-center items-center dn"><span class="sponsorText___3WjUH">Sponsored By</span><div class="ad dib lh-none dn-print" data-test="ad__container"><div data-active-tab="true" data-enigma="true" data-refresh-interval="0" data-render-on-view="true" data-sizes="[[[1000,1],[88,31]],[[758,1],[]],[[0,0],[]]]" data-slot="sponsorlogo" data-targeting="{}"><div id="div-mps-ad-sponsorlogo-10"></div></div></div></div></div><div class="local-wrap"><div class="shortcuts h-h"><ul class="shortcuts-list h-lh"><li class="shortcuts-list-item"><a class="vilynx_listened" href="https://www.nbcnews.com/politics">Politics</a></li><li class="shortcuts-list-item"><a class="vilynx_listened" href="https://www.nbcnews.com/us-news">U.S. News</a></li><li class="shortcuts-list-item"><a class="vilynx_listened" href="https://www.nbcnews.com/business">Business</a></li><li class="shortcuts-list-item"><a class="vilynx_listened" href="https://www.nbcnews.com/world">World</a></li><li class="shortcuts-list-item"><a class="vilynx_listened" href="https://www.nbcnews.com/the-thread">Tech &amp; Media</a></li><li class="shortcuts-list-item"><a class="vilynx_listened" href="https://www.nbcnews.com/think">THINK</a></li><li class="shortcuts-list-item"><a href="https://www.nbcsports.com/?cid=eref:nbcnews:text">Sports</a></li></ul></div><div class="headline-wrap h-h"><div class="headline-title h-h"><h2 class="headline-title-text h-lh js-headline-text">Conspiracy Theories Abound as U.S. Military Closes HAARP</h2></div><div class="share-list share-shared h-h"><div class="share-inner"><ul class="share-ul h-h"><li class="share-li share-txt">Share this</li><li class="share-li share-li-facebook"><a class="js-hfs-share" data-key="facebook" data-template="https://www.facebook.com/sharer/sharer.php?u=URL&amp;cid=article_share_facebook" data-track-event="mbt_navbar_share" data-track-key="platform" data-track-value="facebook" href="https://www.facebook.com/sharer/sharer.php?u=null&amp;cid=article_share_facebook" target="_blank"><span class="hfs-i hfs-i-share-facebook share-icon"></span></a></li><li class="share-li share-li-twitter"><a class="js-hfs-share" data-key="twitter" data-template="https://twitter.com/intent/tweet?text=HEADLINE&amp;via=VIA&amp;url=URL&amp;original_referer=URL&amp;cid=article_share_twitter" data-track-event="mbt_navbar_share" data-track-key="platform" data-track-value="twitter" href="https://twitter.com/intent/tweet?text=&amp;via=nbcnews&amp;url=null&amp;original_referer=URL&amp;cid=article_share_twitter" target="_blank"><span class="hfs-i hfs-i-share-twitter share-icon"></span></a></li><li class="share-li share-li-email"><a class="js-hfs-share" data-key="email" data-template="mailto:?subject=HEADLINE&amp;body=URL" data-track-event="mbt_navbar_share" data-track-key="platform" data-track-value="email" href="https://www.nbcnews.com/science/weird-science/conspiracy-theories-abound-u-s-military-closes-haarp-n112576/mailto:?subject=&amp;body=null" target="_blank"><span class="hfs-i hfs-i-share-email share-icon"></span></a></li><li class="share-li share-li-sms dn-l"><a class="js-hfs-share" data-key="sms" data-template="sms:?body=HEADLINE via VIA - URL" data-track-event="mbt_navbar_share" data-track-key="platform" data-track-value="sms" href="https://www.nbcnews.com/science/weird-science/conspiracy-theories-abound-u-s-military-closes-haarp-n112576/sms:?body= via nbcnews - null" target="_blank"><span class="hfs-i hfs-i-share-sms share-icon"></span></a></li><li class="share-li"><button class="share-ex h-h h-w js-share-toggle"><span class="share-dot"></span><svg class="share-cl" viewbox="0 0 20 20"><line x1="0" x2="20" y1="0" y2="20"></line><line x1="0" x2="20" y1="20" y2="0"></line></svg></button></li></ul></div></div></div></div><button class="hamburger h-h h-w js-menu-toggle"><span></span><span></span><span></span></button></div><div class="menu js-menu-selector" style="height: calc(100vh - 80px)"><button class="overlay js-menu-toggle"></button><section class="inner"><div class="menu-logo-wrapper"><a class="menu-logo vilynx_listened" href="https://www.nbcnews.com"><span class="hfs-i hfs-i-peacock"></span><span class="hfs-i hfs-i-vertical-news"></span></a></div><div class="search-wrap-inline"><form action="https://www.nbcnews.com/search" class="search-form js-search-form" method="GET"><label class="search-label" for="q" id="search_label">Search</label><div class="search-inner"><input aria-labelledby="search_label" class="search-input js-search-input" id="q" name="q" placeholder="Search NBC News" type="search"/><button class="search-button"><span class="search-button-icon hfs-i hfs-i-search"></span></button></div></form></div><div class="layout"><div class="menu-section menu-section-main"><h3 class="menu-section-heading">Sections</h3><ul class="menu-list"><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/us-news"><span class="menu-list-item-title">U.S. News</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/politics"><span class="menu-list-item-title">Politics</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/news/world"><span class="menu-list-item-title">World</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/local"><span class="menu-list-item-title">Local</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/business"><span class="menu-list-item-title">Business</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/health"><span class="menu-list-item-title">Health</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/investigations"><span class="menu-list-item-title">Investigations</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/culture-matters"><span class="menu-list-item-title">Culture Matters</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/science"><span class="menu-list-item-title">Science</span></a></li><li class="menu-list-item"><a class="menu-list-item-link" href="https://www.nbcsports.com/?cid=eref:nbcnews:text"><span class="menu-list-item-title">Sports</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/tech-media"><span class="menu-list-item-title">Tech &amp; Media</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/trump-effect"><span class="menu-list-item-title">Trump Effect</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/in-focus"><span class="menu-list-item-title">In Focus</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/russia-investigation"><span class="menu-list-item-title">Russia Investigation</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/photos"><span class="menu-list-item-title">Photos</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/weather"><span class="menu-list-item-title">Weather</span></a></li></ul></div><div class="menu-section menu-section-tv"><h3 class="menu-section-heading">TV</h3><ul class="menu-list"><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.today.com"><span class="menu-list-item-title">Today</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.msnbc.com"><span class="menu-list-item-title">MSNBC</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/nightly-news"><span class="menu-list-item-title">Nightly News</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/meet-the-press"><span class="menu-list-item-title">Meet The Press</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/dateline"><span class="menu-list-item-title">Dateline</span></a></li></ul></div><div class="menu-section menu-section-featured"><h3 class="menu-section-heading">Featured</h3><ul class="menu-list"><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/now"><span class="menu-list-item-title">NBC NEWS NOW</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/think"><span class="menu-list-item-title">THINK</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/mach"><span class="menu-list-item-title">MACH</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/better"><span class="menu-list-item-title">BETTER</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/nightly-films"><span class="menu-list-item-title">NIGHTLY FILMS</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/leftfield"><span class="menu-list-item-title">NBC LEFT FIELD</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/news/asian-america"><span class="menu-list-item-title">ASIAN AMERICA</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/news/latino"><span class="menu-list-item-title">NBC LATINO</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/news/nbcblk"><span class="menu-list-item-title">NBCBLK</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/feature/nbc-out"><span class="menu-list-item-title">NBC OUT</span></a></li><li class="menu-list-item"><a class="menu-list-item-link" href="https://www.snapchat.com/add/Stay-Tuned/8367265869"><span class="menu-list-item-title">STAY TUNED</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/specials"><span class="menu-list-item-title">SPECIAL FEATURES</span></a></li></ul></div><div class="menu-section menu-section-more"><h3 class="menu-section-heading">More from NBC</h3><ul class="menu-list"><li class="menu-list-item"><a class="menu-list-item-link" href="https://www.cnbc.com"><span class="menu-list-item-title">CNBC</span></a></li><li class="menu-list-item"><a class="menu-list-item-link" href="https://www.nbc.com"><span class="menu-list-item-title">NBC.COM</span></a></li><li class="menu-list-item"><a class="menu-list-item-link" href="https://www.nbclearn.com"><span class="menu-list-item-title">NBC LEARN</span></a></li><li class="menu-list-item"><a class="menu-list-item-link" href="http://www.nbcpeacockproductions.com"><span class="menu-list-item-title">Peacock Productions</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://veterans.nbcnews.com"><span class="menu-list-item-title">Next Steps for Vets</span></a></li><li class="menu-list-item"><a class="menu-list-item-link" href="https://www.parenttoolkit.com"><span class="menu-list-item-title">Parent Toolkit</span></a></li><li class="menu-list-item"><a class="menu-list-item-link" href="https://www.nbcnewsarchivesxpress.com"><span class="menu-list-item-title">NBC Archives</span></a></li><li class="menu-list-item"><a class="menu-list-item-link vilynx_listened" href="https://www.nbcnews.com/know-your-value"><span class="menu-list-item-title">Know Your Value</span></a></li></ul></div></div><div class="menu-section menu-section-social"><h3 class="menu-section-heading">Follow NBC News</h3><ul class="menu-list"><li class="menu-list-item" data-track-event="mbt_navbar_follow" data-track-key="platform" data-track-value="facebook"><a class="menu-list-item-link" href="https://www.facebook.com/NBCNews" rel="noopener noreferrer" target="_blank"><span class="hfs-i hfs-i-share-facebook"></span></a></li><li class="menu-list-item" data-track-event="mbt_navbar_follow" data-track-key="platform" data-track-value="twitter"><a class="menu-list-item-link" href="https://twitter.com/nbcnews" rel="noopener noreferrer" target="_blank"><span class="hfs-i hfs-i-share-twitter"></span></a></li><li class="menu-list-item" data-track-event="mbt_navbar_follow" data-track-key="platform" data-track-value="email"><a class="menu-list-item-link vilynx_listened" href="https://secure.nbcnews.com/_tps/accounts/newsletters" rel="noopener noreferrer" target="_blank"><span class="hfs-i hfs-i-share-email"></span></a></li></ul></div></section></div><div class="search-overlay" tabindex="0"><button class="search-close js-search-close"><span class="search-overlay-icon hfs-i hfs-i-close"></span></button><div class="search-wrap-overlay"><form action="https://www.nbcnews.com/search" class="search-form js-search-form" method="GET"><label class="search-label" for="q" id="search_label">Search</label><div class="search-inner"><input aria-labelledby="search_label" class="search-input js-search-input" id="q" name="q" placeholder="Search NBC News" type="search"/><button class="search-button"><span class="search-button-icon hfs-i hfs-i-search"></span></button></div></form></div></div><div class="share-drop share-shared js-share-selector"><div class="share-inner"><ul class="share-ul"><li class="share-li dn-l"><a class="share-a js-hfs-share" data-key="facebook" data-template="https://www.facebook.com/sharer/sharer.php?u=URL&amp;cid=article_share_facebook" data-track-event="mbt_navbar_share" data-track-key="platform" data-track-value="facebook" href="https://www.facebook.com/sharer/sharer.php?u=null&amp;cid=article_share_facebook" target="_blank"><span class="hfs-i hfs-i-share-facebook share-icon"></span><span>Facebook</span></a></li><li class="share-li dn-l"><a class="share-a js-hfs-share" data-key="twitter" data-template="https://twitter.com/intent/tweet?text=HEADLINE&amp;via=VIA&amp;url=URL&amp;original_referer=URL&amp;cid=article_share_twitter" data-track-event="mbt_navbar_share" data-track-key="platform" data-track-value="twitter" href="https://twitter.com/intent/tweet?text=&amp;via=nbcnews&amp;url=null&amp;original_referer=URL&amp;cid=article_share_twitter" target="_blank"><span class="hfs-i hfs-i-share-twitter share-icon"></span><span>Twitter</span></a></li><li class="share-li dn-l"><a class="share-a js-hfs-share" data-key="email" data-template="mailto:?subject=HEADLINE&amp;body=URL" data-track-event="mbt_navbar_share" data-track-key="platform" data-track-value="email" href="https://www.nbcnews.com/science/weird-science/conspiracy-theories-abound-u-s-military-closes-haarp-n112576/mailto:?subject=&amp;body=null" target="_blank"><span class="hfs-i hfs-i-share-email share-icon"></span><span>Email</span></a></li><li class="share-li dn-l"><a class="share-a js-hfs-share" data-key="sms" data-template="sms:?body=HEADLINE via VIA - URL" data-track-event="mbt_navbar_share" data-track-key="platform" data-track-value="sms" href="https://www.nbcnews.com/science/weird-science/conspiracy-theories-abound-u-s-military-closes-haarp-n112576/sms:?body= via nbcnews - null" target="_blank"><span class="hfs-i hfs-i-share-sms share-icon"></span><span>SMS</span></a></li><li class="share-li"><a class="share-a js-hfs-share" data-key="print" data-template="javascript:if(window.print)window.print()" data-track-event="mbt_navbar_share" data-track-key="platform" data-track-value="print" href="https://www.nbcnews.com/science/weird-science/conspiracy-theories-abound-u-s-military-closes-haarp-n112576/javascript:if(window.print)window.print()" target="_blank"><span class="hfs-i hfs-i-share-print share-icon"></span><span>Print</span></a></li><li class="share-li"><a class="share-a js-hfs-share" data-key="whatsapp" data-template="https://api.whatsapp.com/send?phone=&amp;text=HEADLINE&amp;cid=article_share_whatsapp" data-track-event="mbt_navbar_share" data-track-key="platform" data-track-value="whatsapp" href="https://api.whatsapp.com/send?phone=&amp;text=&amp;cid=article_share_whatsapp" target="_blank"><span class="hfs-i hfs-i-share-whatsapp share-icon"></span><span>Whatsapp</span></a></li><li class="share-li"><a class="share-a js-hfs-share" data-key="reddit" data-template="http://www.reddit.com/submit?url=URL&amp;title=HEADLINE&amp;cid=article_share_reddit" data-track-event="mbt_navbar_share" data-track-key="platform" data-track-value="reddit" href="http://www.reddit.com/submit?url=null&amp;title=&amp;cid=article_share_reddit" target="_blank"><span class="hfs-i hfs-i-share-reddit share-icon"></span><span>Reddit</span></a></li><li class="share-li"><a class="share-a js-hfs-share" data-key="pocket" data-template="https://getpocket.com/save?url=URL&amp;title=HEADLINE&amp;cid=article_share_pocket" data-track-event="mbt_navbar_share" data-track-key="platform" data-track-value="pocket" href="https://getpocket.com/save?url=null&amp;title=&amp;cid=article_share_pocket" target="_blank"><span class="hfs-i hfs-i-share-pocket share-icon"></span><span>Pocket</span></a></li><li class="share-li"><a class="share-a js-hfs-share" data-key="flipboard" data-template="https://share.flipboard.com/bookmarklet/popout?v=2&amp;title=HEADLINE&amp;url=URL&amp;cid=article_share_flipboard" data-track-event="mbt_navbar_share" data-track-key="platform" data-track-value="flipboard" href="https://share.flipboard.com/bookmarklet/popout?v=2&amp;title=&amp;url=null&amp;cid=article_share_flipboard" target="_blank"><span class="hfs-i hfs-i-share-flipboard share-icon"></span><span>Flipboard</span></a></li><li class="share-li"><a class="share-a js-hfs-share" data-key="pinterest" data-template="http://pinterest.com/pin/create/link/?url=URL&amp;cid=article_share_pinterest" data-track-event="mbt_navbar_share" data-track-key="platform" data-track-value="pinterest" href="http://pinterest.com/pin/create/link/?url=null&amp;cid=article_share_pinterest" target="_blank"><span class="hfs-i hfs-i-share-pinterest share-icon"></span><span>Pinterest</span></a></li><li class="share-li"><a class="share-a js-hfs-share" data-key="linkedin" data-template="https://www.linkedin.com/shareArticle?mini=true&amp;url=URL&amp;title=HEADLINE&amp;cid=article_share_linkedin" data-track-event="mbt_navbar_share" data-track-key="platform" data-track-value="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=null&amp;title=&amp;cid=article_share_linkedin" target="_blank"><span class="hfs-i hfs-i-share-linkedin share-icon"></span><span>Linkedin</span></a></li></ul></div></div></nav><div class="hfsh-spacer"></div></div><div class="bg-knockout-primary"><div><div><div class="article___3NFbq article"><section class="articleHero container___2r2e1 standard___2w0ZP"><header class="header___ivcmX relative mh5 mh0-print" data-test="article-hero__header"><aside><h2 class="unibrow articleTitleSection taxterm___3ynvJ f2 founders-mono ttu ls-tight fw4 relative z-3"><a class="vilynx_disabled vilynx_listened" href="https://www.nbcnews.com/science/weird-science"><span>Weird Science</span></a></h2></aside><div class="articleHero___37q3K"><h1 class="headline___CuovH f8 f9-m fw3 mb3 mt0 f10-xl founders-cond lh-none" data-test="article-hero__headline">Conspiracy Theories Abound as U.S. Military Closes HAARP</h1></div></header><div class="heroMediaHolder___1X_U1 mb8"><div class="heroMediaContainer___a869h"><figure class="hero___1ex_0"><picture class="mainImg___TvWaS"><source media="(min-width: 1240px)" srcset="https://media4.s-nbcnews.com/j/newscms/2014_21/461161/140522-haarp2_95823e74dfad2494bd0e81a36a228c95.fit-2000w.jpg"><source media="(min-width: 1000px)" srcset="https://media4.s-nbcnews.com/j/newscms/2014_21/461161/140522-haarp2_95823e74dfad2494bd0e81a36a228c95.fit-1240w.jpg"><source media="(min-width: 758px)" srcset="https://media4.s-nbcnews.com/j/newscms/2014_21/461161/140522-haarp2_95823e74dfad2494bd0e81a36a228c95.fit-1000w.jpg"><img alt="Image: HAARP" src="https://media4.s-nbcnews.com/j/newscms/2014_21/461161/140522-haarp2_95823e74dfad2494bd0e81a36a228c95.fit-760w.jpg"/></source></source></source></picture></figure></div><figcaption class="caption___fMPAB f3 lh-copy grey-100 publico-txt caption___uXf1A mt4"><span class="mr3">The 180-antenna HAARP array is spread across a 40-acre site at Gakona, Alaska.</span><span class="f2 ls-tight gray-80 ws-tight founders-mono dib">Michael Kleiman / USAF</span></figcaption></div></section><article class="articleBody" data-taboola-target="read-more"><div class="gridContainer___3alrm"><div class="ad dn-print" data-test="ad__container"><div data-active-tab="true" data-enigma="true" data-refresh-interval="0" data-render-on-view="true" data-sizes="[[[0,0],[[4,4]]]]" data-slot="interstitial" data-targeting="{}"><div id="div-mps-ad-interstitial-2"></div></div></div><div class="section___2arDM"><div class="body___2BbXy publico-txt f4 f5-m lh-copy gray-100 hoverLinks___1w7cf"></div></div><div class="section___2arDM lastSection___2KSdE"><div class="body___2BbXy publico-txt f4 f5-m lh-copy gray-100 hoverLinks___1w7cf" data-test="articleBody"><div class="tabletNewsletter___Av6eE"><div class="container___jsHMh news___34TC8 dn-print" data-test="newsletter-signup"><div class="borderTop___3KbzM"></div><div></div><div class="signupBackground___27LhS"><h2 class="signupTitle___15fvr">Breaking News Emails</h2><div class="signupForeground___2FAE6"><div class="signupMessage___3ctJh">Get breaking news alerts and special reports. The news and stories that matter, delivered weekday mornings.</div><a class="buttonLinkAnimation___1QDfO signupButton___Vnoko founders-cond lh-none f4 fs-normal ls-normal pv6 vilynx_listened" href="https://www.nbcnews.com/newsletters/breakingnews" target="_blank">SUBSCRIBE</a></div></div></div></div><section class="mb7"><div class="mb1 founders-mono f2 lh-copy gray-80 ls-tight"><time class="relative z-1" content="2014-05-22T23:25:36.000Z" data-test="timestamp__datePublished" datetime="Thu May 22 2014 23:25:36 GMT+0000 (UTC)" itemprop="datePublished">May 23, 2014, 12:25 AM GMT+1</time><meta content="2014-05-22T23:25:36.000Z" data-test="timestamp__datePublished--meta" itemprop="datePublished"/></div></section><div class="bodyContent___1eruQ"><p class="endmarkEnabled">The U.S. Air Force has notified Congress that it intends to shut down HAARP, a controversial Alaska-based research facility that studies an energetic and active region of the upper atmosphere.</p><p class="endmarkEnabled">Conspiracy theorists are abuzz about the news, given that HAARP (short for High Frequency Active Auroral Research Program) has long been the center of wild speculation that the program is designed to <a href="http://www.livescience.com/22131-wild-weather-control-ideas.html">control the weather</a>  or worse. In 2010, Venezuelan leader Huge Chavez claimed that HAARP or a program like it <a href="http://www.livescience.com/8071-chavez-tectonic-weapon-caused-haiti-quake.html">triggered the Haiti earthquake</a>.</p><div class="ad tc tl-m ad-container boxinlineAd dn-print" data-test="ad__container"><div data-active-tab="true" data-enigma="true" data-offset-viewport="50" data-render-on-view="true" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-slot="boxinline" data-targeting="{}"><div id="div-mps-ad-boxinline-3"></div></div></div><div id="taboolaReadMoreBelow"></div><p class="endmarkEnabled">For the record, the Haitian quake of 2010 was caused by the slippage of a <a href="http://www.livescience.com/8469-haiti-quake-caused-previously-unknown-fault.html">previously unmapped fault</a> along the border of the Caribbean and North American tectonic plates.</p><p class="endmarkEnabled">HAARP is a research program designed to analyze the ionosphere, a portion of the upper atmosphere that stretches from about 53 miles (85 kilometers) above the surface of the Earth to 370 miles (600 kilometers) up. The program has been funded by the Air Force, the Navy, the University of Alaska and the Defense Advanced Research Projects Agency, or DARPA. [<a href="http://www.livescience.com/11375-top-ten-conspiracy-theories.html">Top 10 Conspiracy Theories</a>]</p><p class="endmarkEnabled"><strong>Why HAARP exists</strong></p><p class="endmarkEnabled">The U.S. military is interested in the ionosphere because this portion of the atmosphere plays a role in transmitting radio signals. HAARP sends radio beams into the ionosphere to study the responses from it  one of the few ways to accurately measure this inaccessible part of the atmosphere.</p><div class="ad tc tl-m ad-container boxinlineAd dn-print" data-test="ad__container"><div data-active-tab="true" data-enigma="true" data-offset-viewport="50" data-render-on-view="true" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-slot="boxinline" data-targeting="{}"><div id="div-mps-ad-boxinline-4"></div></div></div><p class="endmarkEnabled">HAARP operates out of the HAARP Research Station in Gakona, Alaska, where it has a high-power radio frequency transmitter that can perturb a small portion of the ionosphere. Other instruments are then used to measure the perturbations.</p><figure class="medium___16lj6"><div class="lazyload-placeholder" style="height:50px"></div><figcaption class="caption___fMPAB f3 lh-copy grey-100 publico-txt caption___1mNth mt4"><span class="mr3">Images from the HAARP camera show speckle-like artificial optical emissions superimposed on the background natural aurora only during frames when the transmitter was on. The experiment was conducted on March 10, 2004.</span><span class="f2 ls-tight gray-80 ws-tight founders-mono dib">USAF</span></figcaption></figure><p class="endmarkEnabled">The goal of the program is to understand the physics of the ionosphere, which is constantly responding to influences from the sun. Solar flares can send solar particles racing toward Earth, occasionally <a href="http://www.livescience.com/34537-extreme-solar-storms-electrical-grids.html">disrupting communications and the electrical grid</a>. If scientists could better understand what happens in the ionosphere, they might be able to mitigate some of these problems.</p><p class="endmarkEnabled">But the Air Force is no longer interested in maintaining HAARP, according to David Walker, the Air Force deputy assistant secretary for science, technology and engineering.</p><p class="endmarkEnabled">At a Senate hearing on May 14, Walker said the Air Force has no interest in maintaining the site, and is moving in another direction in ionospheric research.</p><div class="ad tc tl-m ad-container boxinlineAd dn-print" data-test="ad__container"><div data-active-tab="true" data-enigma="true" data-offset-viewport="50" data-render-on-view="true" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-slot="boxinline" data-targeting="{}"><div id="div-mps-ad-boxinline-5"></div></div></div><section class="related related--recommendedContent related___2RfEH dn-print related" data-test="related"><div class="inner___He6NE"><div class="related__boxes related__boxes--recommendedContent todayboxes___jjC-0"><div class="todayboxesinner___3pDup"></div><div class="todayboxesbottom___2F78Y"></div></div><div class="background___3J1WX"></div><div class="related__title related__title--recommendedContent titleWrapper___1JWkE"><h4 class="title___15PLX">Recommended</h4></div><div class="related__items related__items--recommendedContent items___3G8l3" id="recommended"><div class="relatedItem relatedItem___bedt5"><div class="relatedItem__thumb thumbnailWrapper___1M3cr"><a class="link___3qfFk pictureLink___3TXZA vilynx_disabled vilynx_listened" href="https://www.nbcnews.com/video/watch-live-radar-tracks-hurricane-barry-as-it-heads-towards-gulf-coast-63700037861?icid=recommended"><div class="lazyload-placeholder" style="height: 50px;"></div></a><span class="eyebrow___1iBD9"><a class="label___3cWwg" href="https://www.nbcnews.com/video"><span>video</span></a><a class="vilynx_disabled vilynx_listened" href="https://www.nbcnews.com/video/watch-live-radar-tracks-hurricane-barry-as-it-heads-towards-gulf-coast-63700037861?icid=recommended"></a></span></div><div class="relatedItem__title infoWrapper___1l_Lr"><h3 class="title___142QR"><a class="" href="https://www.nbcnews.com/video"><span class="eyebrow___1iBD9">video</span></a><a class="link___3qfFk vilynx_disabled vilynx_listened" href="https://www.nbcnews.com/video/watch-live-radar-tracks-hurricane-barry-as-it-heads-towards-gulf-coast-63700037861?icid=recommended">Watch Live: Tracking Tropical Storm Barry as it heads towards Gulf Coast</a></h3></div></div><div class="relatedItem relatedItem___bedt5"><div class="relatedItem__thumb thumbnailWrapper___1M3cr"><a class="link___3qfFk pictureLink___3TXZA vilynx_disabled vilynx_listened" href="https://www.nbcnews.com/news/us-news/no-shower-no-shower-migrants-shout-pence-visits-texas-detention-n1029426?icid=recommended"><div class="lazyload-placeholder" style="height: 50px;"></div></a><span class="eyebrow___1iBD9"><a class="label___3cWwg vilynx_listened" href="https://www.nbcnews.com/us-news"><span>U.S. news</span></a><a class="vilynx_disabled vilynx_listened" href="https://www.nbcnews.com/news/us-news/no-shower-no-shower-migrants-shout-pence-visits-texas-detention-n1029426?icid=recommended"></a></span></div><div class="relatedItem__title infoWrapper___1l_Lr"><h3 class="title___142QR"><a class="vilynx_listened" href="https://www.nbcnews.com/us-news"><span class="eyebrow___1iBD9">U.S. news</span></a><a class="link___3qfFk vilynx_disabled vilynx_listened" href="https://www.nbcnews.com/news/us-news/no-shower-no-shower-migrants-shout-pence-visits-texas-detention-n1029426?icid=recommended">'No shower, no shower!': Migrants' shouts greet Pence as he visits Texas detention centers</a></h3></div></div></div></div></section><p class="endmarkEnabled"><strong>Politics and conspiracy</strong></p><p class="endmarkEnabled">The Air Force's plan to destroy HAARP has detractors.</p><p class="endmarkEnabled">"While the Air Force neither wants nor appreciates the unique value of HAARP, users from several federal agencies, laboratories and universities, and friendly nations such as Canada, Britain, Taiwan, South Korea, Sweden and Norway, are eager to use its unique resources, which would further spread American influence and leadership," Dennis Papadopoulos, a professor of physics and astronomy at the University of Maryland, wrote in an opinion piece in <a href="http://news.techmedianetwork.com/articles/65746/While%20the%20Air%20Force%20neither%20wants%20nor%20appreciates%20the%20unique%20value%20of%20HAARP,%20users%20from%20several%20federal%20agencies,%20laboratories%20and%20universities,%20and%20friendly%20nations%20such%20as%20Canada,%20Britain,%20Taiwan,%20South%20Korea,%20Sweden%20and%20Norway,%20are%20eager%20to%20use%20its%20unique%20resources,%20which%20would%20further%20spread%20American%20influence%20and%20leadership.">the Alaska Dispatch</a>.</p><p class="endmarkEnabled">HAARP cost more than $290 million to build, much of it earmarked by late Sen. Ted Stevens, R-Alaska, who had great influence over the U.S. defense budget during his time in Congress. The site was host to numerous projects over the years, including the creation of the <a href="http://www.livescience.com/124-artificial-neon-sky-show-created.html">first artificially produced aurora in 2005</a>. The site's generators now require remediation to meet the environmental standards set in the Clean Air Act, an expense no one seems keen to take on.</p><div class="ad tc tl-m ad-container boxinlineAd dn-print" data-test="ad__container"><div data-active-tab="true" data-enigma="true" data-offset-viewport="50" data-render-on-view="true" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-slot="boxinline" data-targeting="{}"><div id="div-mps-ad-boxinline-6"></div></div></div><p class="endmarkEnabled">Conspiracy theorists think HAARP's purpose is far more sinister than meets the eye. The program has been blamed for everything from global warming to natural disasters to mysterious humming noises in the sky.</p><p class="endmarkEnabled">Name a natural phenomenon, and someone probably suspects HAARP of being behind it. Online, conspiracy theorists suggest that HAARP was to blame for the 2011 earthquake and tsunami in Japan; the Moore, Oklahoma, tornado of 2013; a landslide in 2006 in the Philippines; and many more natural disasters. Other conspiracy theories hold that HAARP controls people's minds or is capable of altering the very fabric of reality.</p><p class="endmarkEnabled">These theories have yet to subside, even though very little has been going on at HAARP over the past year. In May 2013, the site shut down during a change in operations contractors. At the time, the HAARP program manager told reporters that the site was temporarily closed and locked, with only one DARPA project left to wrap up by early 2014.</p><a class="scrollLink vilynx_disabled" href="https://www.nbcnews.com/science/weird-science/conspiracy-theories-abound-u-s-military-closes-haarp-n112576#anchor-strongStephaniePappasLiveSciencestrong" id="anchor-strongStephaniePappasLiveSciencestrong"><h3 class=""><strong> Stephanie Pappas, LiveScience</strong></h3></a><p class="endmarkEnabled"><em>Follow Stephanie Pappas on </em><a href="https://twitter.com/sipappas"><em>Twitter</em></a><em> and </em><a href="https://plus.google.com/101831066787121148004/posts"><em>Google+</em></a><em>. Follow LiveScience on </em><a href="https://twitter.com/LiveScience"><em>Twitter</em></a><em>, </em><a href="http://www.facebook.com/#!/livescience"><em>Facebook</em></a><em> and </em><a href="https://plus.google.com/101164570444913213957/posts"><em>Google+</em></a><em>. Original article on <a href="http://www.livescience.com/45829-haarp-shutdown.html">LiveScience</a>.</em></p><div class="ad tc tl-m ad-container boxinlineAd dn-print" data-test="ad__container"><div data-active-tab="true" data-enigma="true" data-offset-viewport="50" data-render-on-view="true" data-sizes="[[[1000,1],[]],[[758,1],[[300,250],[700,50],[5,5],[728,90],[360,360]]],[[0,0],[[300,250],[700,50],[5,5],[360,360]]]]" data-slot="boxinline" data-targeting="{}"><div id="div-mps-ad-boxinline-7"></div></div></div><ul class=""><li><a href="http://www.livescience.com/11345-top-ten-unexplained-phenomena.html">Spooky! The Top 10 Unexplained Phenomena</a></li><li><a href="http://www.livescience.com/15842-northern-lights-aurora-photos.html">Aurora Photos: Northern Lights Dazzle</a></li><li><a href="http://www.livescience.com/29572-earth-atmosphere-layers-atmospheric-pressure-infographic.html">Infographic: Earth's Atmosphere Top to Bottom</a></li></ul></div></div><div class="rightRail___IGUOf HFSBumped"><div class="ad rightRailAd___35GWq tc tl-m ad-container dn-print" data-test="ad__container"><div data-active-tab="true" data-enigma="true" data-offset="10" data-render-on-view="true" data-sizes="[[[1000,1],[[300,250],[300,600],[360,360],[360,720]]],[[758,1],[]],[[0,0],[]]]" data-slot="boxflex" data-targeting="{}"><div id="div-mps-ad-boxflex-8"></div></div></div></div></div><div class="ad midresponsiveAd___3hmNF ad-container dn-print" data-test="ad__container"><div data-active-tab="true" data-enigma="true" data-offset="300" data-refresh-interval="0" data-render-on-view="true" data-sizes="[[[1000,1],[[700,1],[5,5]]],[[758,1],[]],[[0,0],[]]]" data-slot="midresponsive" data-targeting="{}"><div id="div-mps-ad-midresponsive-9"></div></div></div></div></article></div></div></div></div><div id="hfs-footer"><footer class="hfsf"><div class="home"><a class="vilynx_listened" href="https://www.nbcnews.com"><span class="hfs-i hfs-i-peacock"></span></a></div><nav class="links"><ul><li><a class="vilynx_listened" href="https://www.nbcnews.com/pages/about-nbc-news-digital">About</a></li><li><a class="vilynx_listened" href="https://www.nbcnews.com/pages/contact-us">Contact</a></li><li><a href="https://www.nbcunicareers.com">Careers</a></li><li><a href="https://www.nbcuniversal.com/privacy">Privacy policy</a></li><li><a class="vilynx_listened" href="https://www.nbcnews.com/pages/terms-of-service">Terms of Service</a></li><li><a class="vilynx_listened" href="https://www.nbcnews.com/pages/sitemap">NBCNews.COM Site Map</a></li><li><a href="https://together.nbcuni.com">Advertise</a></li><li class="adchoices"><a href="https://info.evidon.com/pub_info/1195?v=1">AdChoices</a></li></ul></nav><div class="copy"><p>2019 NBC UNIVERSAL</p><ul class="brands"><li><a class="vilynx_listened" href="https://www.nbcnews.com"><span class="hfs-i hfs-i-logo-news"></span></a></li><li><a class="vilynx_listened" href="https://www.msnbc.com"><span class="hfs-i hfs-i-logo-msnbc"></span></a></li><li><a class="vilynx_listened" href="https://www.today.com"><span class="hfs-i hfs-i-logo-today"></span></a></li></ul></div></footer></div></div></div><script src="//assets.adobedtm.com/launch-EN03682f66064449c8b87d78eae3e2fc57.min.js"></script><script>

/*!******************
Tracking Service $t
Version: 2.4.1
Built: 2017-08-24T19:35:07.994Z
*********************/
!function(e,t){var n=function(){var n=function(e){return"function"==typeof n[e]?n[e].apply(n,Array.prototype.slice.call(arguments,1)):arguments.length>0?n.get.apply(n,arguments):n.list.apply(n,arguments)},r=function(e,t){n.errorLog.push(e),(!t||n.debug>=1)&&i("$t error - "+e)},i=e.console?function(){e.console.log.apply(e.console,arguments)}:function(){},o=function(e,t){e=e||{};for(var n in t)"object"==typeof t[n]?e[n]=o(e[n],t[n]):e[n]=t[n];return e},s=function(e,t){var i=!1;return/^[^a-zA-Z_$]|[^0-9a-zA-Z_$]/.test(e)&&(i="validation: "+e+" is not a valid variable name"),t||void 0===n.eventLog[e]||(i="validation: "+e+" is already registered"),!i||(r(i),!1)},a={exp:36e5,key:"ts_data.",save:function(t,n,r){var i=(new Date).getTime(),o={eventData:n,timestamp:i};i=r?i+r:i+this.exp;var s=/\w+\.\w+$/.exec(e.location.hostname);return this.cookie.set({name:this.key+t,value:JSON.stringify(o),path:"/",expires:new Date(i),domain:s}),n},load:function(e){var t=null;return!!(t=this.cookie.get(this.key+e))&&(t=JSON.parse(t),(new Date).getTime()<t.timestamp?t.eventData:void 0)},listEvents:function(){var e,t=[];e=this.cookie.keys();for(var n in e)isNaN(n)||(n=e[n]),-1!=n.indexOf(this.key)&&t.push(n.split(this.key)[1]);return t},cookie:{get:function(e){var n=t.cookie.split(e+"=");return 2===n.length&&decodeURI(n.pop().split(";").shift())},set:function(e){var n=e.name+"="+encodeURI(e.value)+";";e.expires&&(n+="expires="+e.expires.toUTCString()+";"),n+=e.path?"path="+e.path+";":"",n+=e.domain?"domain="+e.domain+";":"",n+=e.secure?"secure;":"",n+=e.httpOnly?"httpOnly;":"",t.cookie=n},keys:function(){var e=[],n=t.cookie;if(""===n)return e;for(var r=n.split("; "),i=r.length;i--;){var o=r[i].split("=");e[i]=o[0]}return e}}},c={listeners:{},trigger:function(e,t,i){if(this.listeners[t]&&this.listeners[t].length>0)for(var o=0;this.listeners[t][o];o++){var s=this.listeners[t][o];try{s.apply(n,[{type:t},i])}catch(e){r("Cant execute callback for: "+t+". "+e.stack)}}},bind:function(e,t,n){void 0===this.listeners[t]&&(this.listeners[t]=[]),this.listeners[t].push(n)}},f=function(t){if(t=t.split("."),void 0!==e[t[0]]){for(var n=e[t[0]],i=1;t.length>i;i++){if(null===n||void 0===n[t[i]])return r("TRAM convert - undefined - "+t.join().replace(/,/g,"."),!0),!1;n=n[t[i]]}return!function(e){if("object"==typeof e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}return!1}(n)&&n||!1}return r("TRAM convert - missing root obj - "+t[0],!0),!1},l={},v={uniqueKey:"$t_nbc_crossEvent",srcUrl:[e.location.protocol,"//",e.location.host,e.location.pathname].join(""),listen:function(){var t=this.uniqueKey,r=this.srcUrl,i=e.addEventListener?"addEventListener":"attachEvent",o=function(e){try{return JSON.parse(e)}catch(e){return null}};(0,e[i])("attachEvent"==i?"onmessage":"message",function(i){if("string"==typeof i.data&&i.data.substring(0,t.length)===t){var s=o(i.data.replace(t,""));s&&s.action&&s.srcUrl!==r&&("track"!==s.action[0]&&"register"!==s.action[0]||(n.apply(n,s.action),parent!==e&&parent.postMessage(i.data,"*")))}},!1)},send:function(e){var t=this.uniqueKey,n={action:e,srcUrl:this.srcUrl};parent.postMessage(t+JSON.stringify(n),"*")}},u={};return n.version="2.4.1",n.debug=0,n.errorLog=[],n.eventLog={},n.track=function(t,n,s){if(void 0!==this.eventLog[t]){if("object"!=typeof s&&(s={}),n=n||!0,this.eventLog[t]=n,s.persistent){var f=!1;s.expires&&(f=1e3*s.expires),a.save(t,n,f)}if(0!==t.indexOf("_")&&c.trigger(this,"eventTracked",{eventType:t,eventData:n}),u[t]&&u[t].remote){if("object"==typeof n&&!n.$t_remote){var l=[e.location.protocol,"//",e.location.host,e.location.pathname].join("");o(n,{$t_remote:l})}v.send(["track",t,n])}return c.trigger(this,t,n),(1==this.debug&&0!==t.indexOf("_")||2==this.debug)&&i("*Tracking service: "+t+" triggered"),!0}return r("unable to track: "+t),!1},n.register=function(e,t){"object"!=typeof t&&(t={}),t=u[e[f]]=o(u[e[f]]||{},t);for(var n="",i=a.listEvents(),c={},f=0;i[f];f++)c[i[f]]=!0;for("string"==typeof e&&(e=[e]),f=0;e[f];f++){if(!0===c[e[f]])return!0;s(e[f],t.allowDuplicate)?(this.eventLog[e[f]]=null,t.remote&&v.send(["register",e[f],t])):n+=e[f]+","}return!n||(r("could not register: "+n),!1)},n.registeredEvents=function(e){var t=!1,r=[];0===(e=e||"").indexOf("_")&&(t=!0,e=e.substr(1));for(var i in n.eventLog)-1==i.indexOf(e)||0===i.indexOf("_")&&!t||r.push(i);return r},n.bindTrack=function(e){c.bind(this,"eventTracked",e)},n.on=function(e,t){"string"==typeof e&&(e=[e]);for(var n=0;e[n];n++)c.bind(this,e[n],t)},n.load=function(e,t,n){void 0===l[e]?"string"==typeof t?(l[e]={},l[e].info={ref:t,options:n}):r("TRAM load - object reference must be string"):r("TRAM load - object name taken")},n.get=function(e,t){var r=e.split(".")[0];if(t=void 0!==t?t:"",n.eventLog[r]||l[r]){n.eventLog[r]&&(e="$t."+e,r="$t"),e=e.replace(r,l[r].info.ref);var i=f(e);return i||t}return t},n.list=function(e){if(e)n.eventLog[e]?(i(e+" : event info"),i(n.eventLog[e])):l[e]?void 0!==window[l[e].info.ref.split(".")[0]]?(i(e+" : "+l[e].info.ref),i(f(l[e].info.ref))):i(e+" : "+l[e].info.ref+" : Not present"):i(e+" :  Empty or not defined");else{i("%cversion: %s","font-weight:bold;",n.version),i("%cevents:","font-weight:bold;");for(var t in n.eventLog)if(0!==t.indexOf("_")||2==n.debug){var r=u[t]&&u[t].remote?"(remote)":"";n.eventLog[t]?i("%c* %s %s fired %O","color:#B80;",t,r,n.eventLog[t]):(r=u[t]&&u[t].remote?"(remote)":"",i("%s %s",t,r))}i("%cTRAM objects:","font-weight:bold;");for(var o in l)i("%s : %s : %O",o,l[o].info.ref,f(l[o].info.ref));n.errorLog.length>0&&i("%clog: %O","font-weight:bold;",n.errorLog)}},function(){var e=a.listEvents();if(!e)return!1;for(var t=0;e[t];t++){var r=a.load(e[t]);r&&(n.eventLog[e[t]]=r)}}(),n.load("$t","$t.eventLog"),v.listen(),n};if(void 0!==e.$t){if(!parseFloat(e.$t.version)>0){var r=e.$t("getSaves");e.$t=n();for(var i=0;r[i];i++)e.$t.apply(e.$t,r[i])}}else e.$t=n()}(window,document);
  
//load data layers
$t('load','jsonLd','jsonLd');


</script><script>

window.parseJsonLd = function() {
    var safeParse = function(JSONstring) {
        try {
            return JSON.parse(JSONstring);
        } catch (e) {
            return { '@type':'error','errorObj': e };
        }
    };
    var rawJsonLd = document.querySelectorAll('script[type="application/ld+json"]');
    window.jsonLd = {};
    for (var i = 0; rawJsonLd[i]; i++) {
        var entryParsed = safeParse(rawJsonLd[i].innerHTML);
        var type = entryParsed['@type'] || 'unknown';
        window.jsonLd[type] = window.jsonLd[type] || [];
        window.jsonLd[type].push(entryParsed);
    }
};
window.parseJsonLd();


</script><script>

/************************** App measurment code and suppliments v2.0*************************/

/************************** PLUGINS SECTION *************************/

/*
Copyright (c) Copyright (c) 2007, Carl S. Yestrau All rights reserved.
Code licensed under the BSD License: http://www.featureblend.com/license.txt
Version: 1.0.4
*/
window.FlashDetect = new function(){var r=this;r.installed=!1,r.raw="",r.major=-1,r.minor=-1,r.revision=-1,r.revisionStr="";var n=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(r){return e(r)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(r){var n="6,0,21";try{r.AllowScriptAccess="always",n=e(r)}catch(i){}return n}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(r){return e(r)}}],e=function(r){var n=-1;try{n=r.GetVariable("$version")}catch(i){}return n},a=function(r){var n=-1;try{n=new ActiveXObject(r)}catch(i){n={activeXError:!0}}return n},t=function(r){var n=r.split(",");return{raw:r,major:parseInt(n[0].split(" ")[1],10),minor:parseInt(n[1],10),revision:parseInt(n[2],10),revisionStr:n[2]}},o=function(r){var n=r.split(/ +/),i=n[2].split(/\./),e=n[3];return{raw:r,major:parseInt(i[0],10),minor:parseInt(i[1],10),revisionStr:e,revision:s(e)}},s=function(n){return parseInt(n.replace(/[a-zA-Z]/g,""),10)||r.revision};r.majorAtLeast=function(n){return r.major>=n},r.minorAtLeast=function(n){return r.minor>=n},r.revisionAtLeast=function(n){return r.revision>=n},r.versionAtLeast=function(){var n=[r.major,r.minor,r.revision],e=Math.min(n.length,arguments.length);for(i=0;e>i;i++){if(n[i]>=arguments[i]){if(e>i+1&&n[i]==arguments[i])continue;return!0}return!1}},r.FlashDetect=function(){if(navigator.plugins&&navigator.plugins.length>0){var i="application/x-shockwave-flash",e=navigator.mimeTypes;if(e&&e[i]&&e[i].enabledPlugin&&e[i].enabledPlugin.description){var s=e[i].enabledPlugin.description,v=o(s);r.raw=v.raw,r.major=v.major,r.minor=v.minor,r.revisionStr=v.revisionStr,r.revision=v.revision,r.installed=!0}}else if(-1==navigator.appVersion.indexOf("Mac")&&window.execScript)for(var s=-1,c=0;c<n.length&&-1==s;c++){var l=a(n[c].name);if(!l.activeXError&&(r.installed=!0,s=n[c].version(l),-1!=s)){var v=t(s);r.raw=v.raw,r.major=v.major,r.minor=v.minor,r.revision=v.revision,r.revisionStr=v.revisionStr}}}()};FlashDetect.JS_RELEASE="1.0.4";

/*
 Start ActivityMap Module
*/
function AppMeasurement_Module_ActivityMap(f){function g(a,d){var b,c,n;if(a&&d&&(b=e.c[d]||(e.c[d]=d.split(","))))for(n=0;n<b.length&&(c=b[n++]);)if(-1<a.indexOf(c))return null;p=1;return a}function q(a,d,b,c,e){var g,h;if(a.dataset&&(h=a.dataset[d]))g=h;else if(a.getAttribute)if(h=a.getAttribute("data-"+b))g=h;else if(h=a.getAttribute(b))g=h;if(!g&&f.useForcedLinkTracking&&e&&(g="",d=a.onclick?""+a.onclick:"")){b=d.indexOf(c);var l,k;if(0<=b){for(b+=10;b<d.length&&0<="= \t\r\n".indexOf(d.charAt(b));)b++;
if(b<d.length){h=b;for(l=k=0;h<d.length&&(";"!=d.charAt(h)||l);)l?d.charAt(h)!=l||k?k="\\"==d.charAt(h)?!k:0:l=0:(l=d.charAt(h),'"'!=l&&"'"!=l&&(l=0)),h++;if(d=d.substring(b,h))a.e=new Function("s","var e;try{s.w."+c+"="+d+"}catch(e){}"),a.e(f)}}}return g||e&&f.w[c]}function r(a,d,b){var c;return(c=e[d](a,b))&&(p?(p=0,c):g(k(c),e[d+"Exclusions"]))}function s(a,d,b){var c;if(a&&!(1===(c=a.nodeType)&&(c=a.nodeName)&&(c=c.toUpperCase())&&t[c])&&(1===a.nodeType&&(c=a.nodeValue)&&(d[d.length]=c),b.a||
b.t||b.s||!a.getAttribute||((c=a.getAttribute("alt"))?b.a=c:(c=a.getAttribute("title"))?b.t=c:"IMG"==(""+a.nodeName).toUpperCase()&&(c=a.getAttribute("src")||a.src)&&(b.s=c)),(c=a.childNodes)&&c.length))for(a=0;a<c.length;a++)s(c[a],d,b)}function k(a){if(null==a||void 0==a)return a;try{return a.replace(RegExp("^[\\s\\n\\f\\r\\t\t-\r \u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]+","mg"),"").replace(RegExp("[\\s\\n\\f\\r\\t\t-\r \u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]+$",
"mg"),"").replace(RegExp("[\\s\\n\\f\\r\\t\t-\r \u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]{1,}","mg")," ").substring(0,254)}catch(d){}}var e=this;e.s=f;var m=window;m.s_c_in||(m.s_c_il=[],m.s_c_in=0);e._il=m.s_c_il;e._in=m.s_c_in;e._il[e._in]=e;m.s_c_in++;e._c="s_m";e.c={};var p=0,t={SCRIPT:1,STYLE:1,LINK:1,CANVAS:1};e._g=function(){var a,d,b,c=f.contextData,e=f.linkObject;(a=f.pageName||f.pageURL)&&(d=r(e,"link",f.linkName))&&(b=r(e,"region"))&&(c["a.activitymap.page"]=a.substring(0,
255),c["a.activitymap.link"]=128<d.length?d.substring(0,128):d,c["a.activitymap.region"]=127<b.length?b.substring(0,127):b,c["a.activitymap.pageIDType"]=f.pageName?1:0)};e.link=function(a,d){var b;if(d)b=g(k(d),e.linkExclusions);else if((b=a)&&!(b=q(a,"sObjectId","s-object-id","s_objectID",1))){var c,f;(f=g(k(a.innerText||a.textContent),e.linkExclusions))||(s(a,c=[],b={a:void 0,t:void 0,s:void 0}),(f=g(k(c.join(""))))||(f=g(k(b.a?b.a:b.t?b.t:b.s?b.s:void 0)))||!(c=(c=a.tagName)&&c.toUpperCase?c.toUpperCase():
"")||("INPUT"==c||"SUBMIT"==c&&a.value?f=g(k(a.value)):"IMAGE"==c&&a.src&&(f=g(k(a.src)))));b=f}return b};e.region=function(a){for(var d,b=e.regionIDAttribute||"id";a&&(a=a.parentNode);){if(d=q(a,b,b,b))return d;if("BODY"==a.nodeName)return"BODY"}}}
/* End ActivityMap Module */
/*
 ============== DO NOT ALTER ANYTHING BELOW THIS LINE ! ===============

AppMeasurement for JavaScript version: 1.7.0
Copyright 1996-2016 Adobe, Inc. All Rights Reserved
More info available at http://www.adobe.com/marketing-cloud.html
*/
function AppMeasurement(){var a=this;a.version="1.7.0";var k=window;k.s_c_in||(k.s_c_il=[],k.s_c_in=0);a._il=k.s_c_il;a._in=k.s_c_in;a._il[a._in]=a;k.s_c_in++;a._c="s_c";var q=k.AppMeasurement.Jb;q||(q=null);var r=k,n,t;try{for(n=r.parent,t=r.location;n&&n.location&&t&&""+n.location!=""+t&&r.location&&""+n.location!=""+r.location&&n.location.host==t.host;)r=n,n=r.parent}catch(u){}a.yb=function(a){try{console.log(a)}catch(b){}};a.Ha=function(a){return""+parseInt(a)==""+a};a.replace=function(a,b,d){return!a||
0>a.indexOf(b)?a:a.split(b).join(d)};a.escape=function(c){var b,d;if(!c)return c;c=encodeURIComponent(c);for(b=0;7>b;b++)d="+~!*()'".substring(b,b+1),0<=c.indexOf(d)&&(c=a.replace(c,d,"%"+d.charCodeAt(0).toString(16).toUpperCase()));return c};a.unescape=function(c){if(!c)return c;c=0<=c.indexOf("+")?a.replace(c,"+"," "):c;try{return decodeURIComponent(c)}catch(b){}return unescape(c)};a.pb=function(){var c=k.location.hostname,b=a.fpCookieDomainPeriods,d;b||(b=a.cookieDomainPeriods);if(c&&!a.cookieDomain&&
!/^[0-9.]+$/.test(c)&&(b=b?parseInt(b):2,b=2<b?b:2,d=c.lastIndexOf("."),0<=d)){for(;0<=d&&1<b;)d=c.lastIndexOf(".",d-1),b--;a.cookieDomain=0<d?c.substring(d):c}return a.cookieDomain};a.c_r=a.cookieRead=function(c){c=a.escape(c);var b=" "+a.d.cookie,d=b.indexOf(" "+c+"="),f=0>d?d:b.indexOf(";",d);c=0>d?"":a.unescape(b.substring(d+2+c.length,0>f?b.length:f));return"[[B]]"!=c?c:""};a.c_w=a.cookieWrite=function(c,b,d){var f=a.pb(),e=a.cookieLifetime,g;b=""+b;e=e?(""+e).toUpperCase():"";d&&"SESSION"!=
e&&"NONE"!=e&&((g=""!=b?parseInt(e?e:0):-60)?(d=new Date,d.setTime(d.getTime()+1E3*g)):1==d&&(d=new Date,g=d.getYear(),d.setYear(g+5+(1900>g?1900:0))));return c&&"NONE"!=e?(a.d.cookie=a.escape(c)+"="+a.escape(""!=b?b:"[[B]]")+"; path=/;"+(d&&"SESSION"!=e?" expires="+d.toGMTString()+";":"")+(f?" domain="+f+";":""),a.cookieRead(c)==b):0};a.K=[];a.ha=function(c,b,d){if(a.Aa)return 0;a.maxDelay||(a.maxDelay=250);var f=0,e=(new Date).getTime()+a.maxDelay,g=a.d.visibilityState,m=["webkitvisibilitychange",
"visibilitychange"];g||(g=a.d.webkitVisibilityState);if(g&&"prerender"==g){if(!a.ia)for(a.ia=1,d=0;d<m.length;d++)a.d.addEventListener(m[d],function(){var b=a.d.visibilityState;b||(b=a.d.webkitVisibilityState);"visible"==b&&(a.ia=0,a.delayReady())});f=1;e=0}else d||a.p("_d")&&(f=1);f&&(a.K.push({m:c,a:b,t:e}),a.ia||setTimeout(a.delayReady,a.maxDelay));return f};a.delayReady=function(){var c=(new Date).getTime(),b=0,d;for(a.p("_d")?b=1:a.va();0<a.K.length;){d=a.K.shift();if(b&&!d.t&&d.t>c){a.K.unshift(d);
setTimeout(a.delayReady,parseInt(a.maxDelay/2));break}a.Aa=1;a[d.m].apply(a,d.a);a.Aa=0}};a.setAccount=a.sa=function(c){var b,d;if(!a.ha("setAccount",arguments))if(a.account=c,a.allAccounts)for(b=a.allAccounts.concat(c.split(",")),a.allAccounts=[],b.sort(),d=0;d<b.length;d++)0!=d&&b[d-1]==b[d]||a.allAccounts.push(b[d]);else a.allAccounts=c.split(",")};a.foreachVar=function(c,b){var d,f,e,g,m="";e=f="";if(a.lightProfileID)d=a.O,(m=a.lightTrackVars)&&(m=","+m+","+a.ma.join(",")+",");else{d=a.g;if(a.pe||
a.linkType)m=a.linkTrackVars,f=a.linkTrackEvents,a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(m=a[e].Hb,f=a[e].Gb));m&&(m=","+m+","+a.G.join(",")+",");f&&m&&(m+=",events,")}b&&(b=","+b+",");for(f=0;f<d.length;f++)e=d[f],(g=a[e])&&(!m||0<=m.indexOf(","+e+","))&&(!b||0<=b.indexOf(","+e+","))&&c(e,g)};a.r=function(c,b,d,f,e){var g="",m,p,k,w,n=0;"contextData"==c&&(c="c");if(b){for(m in b)if(!(Object.prototype[m]||e&&m.substring(0,e.length)!=e)&&b[m]&&(!d||0<=d.indexOf(","+(f?f+
".":"")+m+","))){k=!1;if(n)for(p=0;p<n.length;p++)m.substring(0,n[p].length)==n[p]&&(k=!0);if(!k&&(""==g&&(g+="&"+c+"."),p=b[m],e&&(m=m.substring(e.length)),0<m.length))if(k=m.indexOf("."),0<k)p=m.substring(0,k),k=(e?e:"")+p+".",n||(n=[]),n.push(k),g+=a.r(p,b,d,f,k);else if("boolean"==typeof p&&(p=p?"true":"false"),p){if("retrieveLightData"==f&&0>e.indexOf(".contextData."))switch(k=m.substring(0,4),w=m.substring(4),m){case "transactionID":m="xact";break;case "channel":m="ch";break;case "campaign":m=
"v0";break;default:a.Ha(w)&&("prop"==k?m="c"+w:"eVar"==k?m="v"+w:"list"==k?m="l"+w:"hier"==k&&(m="h"+w,p=p.substring(0,255)))}g+="&"+a.escape(m)+"="+a.escape(p)}}""!=g&&(g+="&."+c)}return g};a.usePostbacks=0;a.sb=function(){var c="",b,d,f,e,g,m,p,k,n="",r="",s=e="";if(a.lightProfileID)b=a.O,(n=a.lightTrackVars)&&(n=","+n+","+a.ma.join(",")+",");else{b=a.g;if(a.pe||a.linkType)n=a.linkTrackVars,r=a.linkTrackEvents,a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(n=a[e].Hb,r=a[e].Gb));
n&&(n=","+n+","+a.G.join(",")+",");r&&(r=","+r+",",n&&(n+=",events,"));a.events2&&(s+=(""!=s?",":"")+a.events2)}if(a.visitor&&1.5<=parseFloat(a.visitor.version)&&a.visitor.getCustomerIDs){e=q;if(g=a.visitor.getCustomerIDs())for(d in g)Object.prototype[d]||(f=g[d],e||(e={}),f.id&&(e[d+".id"]=f.id),f.authState&&(e[d+".as"]=f.authState));e&&(c+=a.r("cid",e))}a.AudienceManagement&&a.AudienceManagement.isReady()&&(c+=a.r("d",a.AudienceManagement.getEventCallConfigParams()));for(d=0;d<b.length;d++){e=b[d];
g=a[e];f=e.substring(0,4);m=e.substring(4);!g&&"events"==e&&s&&(g=s,s="");if(g&&(!n||0<=n.indexOf(","+e+","))){switch(e){case "supplementalDataID":e="sdid";break;case "timestamp":e="ts";break;case "dynamicVariablePrefix":e="D";break;case "visitorID":e="vid";break;case "marketingCloudVisitorID":e="mid";break;case "analyticsVisitorID":e="aid";break;case "audienceManagerLocationHint":e="aamlh";break;case "audienceManagerBlob":e="aamb";break;case "authState":e="as";break;case "pageURL":e="g";255<g.length&&
(a.pageURLRest=g.substring(255),g=g.substring(0,255));break;case "pageURLRest":e="-g";break;case "referrer":e="r";break;case "vmk":case "visitorMigrationKey":e="vmt";break;case "visitorMigrationServer":e="vmf";a.ssl&&a.visitorMigrationServerSecure&&(g="");break;case "visitorMigrationServerSecure":e="vmf";!a.ssl&&a.visitorMigrationServer&&(g="");break;case "charSet":e="ce";break;case "visitorNamespace":e="ns";break;case "cookieDomainPeriods":e="cdp";break;case "cookieLifetime":e="cl";break;case "variableProvider":e=
"vvp";break;case "currencyCode":e="cc";break;case "channel":e="ch";break;case "transactionID":e="xact";break;case "campaign":e="v0";break;case "latitude":e="lat";break;case "longitude":e="lon";break;case "resolution":e="s";break;case "colorDepth":e="c";break;case "javascriptVersion":e="j";break;case "javaEnabled":e="v";break;case "cookiesEnabled":e="k";break;case "browserWidth":e="bw";break;case "browserHeight":e="bh";break;case "connectionType":e="ct";break;case "homepage":e="hp";break;case "events":s&&
(g+=(""!=g?",":"")+s);if(r)for(m=g.split(","),g="",f=0;f<m.length;f++)p=m[f],k=p.indexOf("="),0<=k&&(p=p.substring(0,k)),k=p.indexOf(":"),0<=k&&(p=p.substring(0,k)),0<=r.indexOf(","+p+",")&&(g+=(g?",":"")+m[f]);break;case "events2":g="";break;case "contextData":c+=a.r("c",a[e],n,e);g="";break;case "lightProfileID":e="mtp";break;case "lightStoreForSeconds":e="mtss";a.lightProfileID||(g="");break;case "lightIncrementBy":e="mti";a.lightProfileID||(g="");break;case "retrieveLightProfiles":e="mtsr";break;
case "deleteLightProfiles":e="mtsd";break;case "retrieveLightData":a.retrieveLightProfiles&&(c+=a.r("mts",a[e],n,e));g="";break;default:a.Ha(m)&&("prop"==f?e="c"+m:"eVar"==f?e="v"+m:"list"==f?e="l"+m:"hier"==f&&(e="h"+m,g=g.substring(0,255)))}g&&(c+="&"+e+"="+("pev"!=e.substring(0,3)?a.escape(g):g))}"pev3"==e&&a.e&&(c+=a.e)}return c};a.D=function(a){var b=a.tagName;if("undefined"!=""+a.Mb||"undefined"!=""+a.Cb&&"HTML"!=(""+a.Cb).toUpperCase())return"";b=b&&b.toUpperCase?b.toUpperCase():"";"SHAPE"==
b&&(b="");b&&(("INPUT"==b||"BUTTON"==b)&&a.type&&a.type.toUpperCase?b=a.type.toUpperCase():!b&&a.href&&(b="A"));return b};a.Da=function(a){var b=a.href?a.href:"",d,f,e;d=b.indexOf(":");f=b.indexOf("?");e=b.indexOf("/");b&&(0>d||0<=f&&d>f||0<=e&&d>e)&&(f=a.protocol&&1<a.protocol.length?a.protocol:l.protocol?l.protocol:"",d=l.pathname.lastIndexOf("/"),b=(f?f+"//":"")+(a.host?a.host:l.host?l.host:"")+("/"!=h.substring(0,1)?l.pathname.substring(0,0>d?0:d)+"/":"")+b);return b};a.L=function(c){var b=a.D(c),
d,f,e="",g=0;return b&&(d=c.protocol,f=c.onclick,!c.href||"A"!=b&&"AREA"!=b||f&&d&&!(0>d.toLowerCase().indexOf("javascript"))?f?(e=a.replace(a.replace(a.replace(a.replace(""+f,"\r",""),"\n",""),"\t","")," ",""),g=2):"INPUT"==b||"SUBMIT"==b?(c.value?e=c.value:c.innerText?e=c.innerText:c.textContent&&(e=c.textContent),g=3):"IMAGE"==b&&c.src&&(e=c.src):e=a.Da(c),e)?{id:e.substring(0,100),type:g}:0};a.Kb=function(c){for(var b=a.D(c),d=a.L(c);c&&!d&&"BODY"!=b;)if(c=c.parentElement?c.parentElement:c.parentNode)b=
a.D(c),d=a.L(c);d&&"BODY"!=b||(c=0);c&&(b=c.onclick?""+c.onclick:"",0<=b.indexOf(".tl(")||0<=b.indexOf(".trackLink("))&&(c=0);return c};a.Bb=function(){var c,b,d=a.linkObject,f=a.linkType,e=a.linkURL,g,m;a.na=1;d||(a.na=0,d=a.clickObject);if(d){c=a.D(d);for(b=a.L(d);d&&!b&&"BODY"!=c;)if(d=d.parentElement?d.parentElement:d.parentNode)c=a.D(d),b=a.L(d);b&&"BODY"!=c||(d=0);if(d&&!a.linkObject){var p=d.onclick?""+d.onclick:"";if(0<=p.indexOf(".tl(")||0<=p.indexOf(".trackLink("))d=0}}else a.na=1;!e&&d&&
(e=a.Da(d));e&&!a.linkLeaveQueryString&&(g=e.indexOf("?"),0<=g&&(e=e.substring(0,g)));if(!f&&e){var n=0,r=0,q;if(a.trackDownloadLinks&&a.linkDownloadFileTypes)for(p=e.toLowerCase(),g=p.indexOf("?"),m=p.indexOf("#"),0<=g?0<=m&&m<g&&(g=m):g=m,0<=g&&(p=p.substring(0,g)),g=a.linkDownloadFileTypes.toLowerCase().split(","),m=0;m<g.length;m++)(q=g[m])&&p.substring(p.length-(q.length+1))=="."+q&&(f="d");if(a.trackExternalLinks&&!f&&(p=e.toLowerCase(),a.Ga(p)&&(a.linkInternalFilters||(a.linkInternalFilters=
k.location.hostname),g=0,a.linkExternalFilters?(g=a.linkExternalFilters.toLowerCase().split(","),n=1):a.linkInternalFilters&&(g=a.linkInternalFilters.toLowerCase().split(",")),g))){for(m=0;m<g.length;m++)q=g[m],0<=p.indexOf(q)&&(r=1);r?n&&(f="e"):n||(f="e")}}a.linkObject=d;a.linkURL=e;a.linkType=f;if(a.trackClickMap||a.trackInlineStats)a.e="",d&&(f=a.pageName,e=1,d=d.sourceIndex,f||(f=a.pageURL,e=0),k.s_objectID&&(b.id=k.s_objectID,d=b.type=1),f&&b&&b.id&&c&&(a.e="&pid="+a.escape(f.substring(0,255))+
(e?"&pidt="+e:"")+"&oid="+a.escape(b.id.substring(0,100))+(b.type?"&oidt="+b.type:"")+"&ot="+c+(d?"&oi="+d:"")))};a.tb=function(){var c=a.na,b=a.linkType,d=a.linkURL,f=a.linkName;b&&(d||f)&&(b=b.toLowerCase(),"d"!=b&&"e"!=b&&(b="o"),a.pe="lnk_"+b,a.pev1=d?a.escape(d):"",a.pev2=f?a.escape(f):"",c=1);a.abort&&(c=0);if(a.trackClickMap||a.trackInlineStats||a.ActivityMap){var b={},d=0,e=a.cookieRead("s_sq"),g=e?e.split("&"):0,m,p,k,e=0;if(g)for(m=0;m<g.length;m++)p=g[m].split("="),f=a.unescape(p[0]).split(","),
p=a.unescape(p[1]),b[p]=f;f=a.account.split(",");m={};for(k in a.contextData)k&&!Object.prototype[k]&&"a.activitymap."==k.substring(0,14)&&(m[k]=a.contextData[k],a.contextData[k]="");a.e=a.r("c",m)+(a.e?a.e:"");if(c||a.e){c&&!a.e&&(e=1);for(p in b)if(!Object.prototype[p])for(k=0;k<f.length;k++)for(e&&(g=b[p].join(","),g==a.account&&(a.e+=("&"!=p.charAt(0)?"&":"")+p,b[p]=[],d=1)),m=0;m<b[p].length;m++)g=b[p][m],g==f[k]&&(e&&(a.e+="&u="+a.escape(g)+("&"!=p.charAt(0)?"&":"")+p+"&u=0"),b[p].splice(m,
1),d=1);c||(d=1);if(d){e="";m=2;!c&&a.e&&(e=a.escape(f.join(","))+"="+a.escape(a.e),m=1);for(p in b)!Object.prototype[p]&&0<m&&0<b[p].length&&(e+=(e?"&":"")+a.escape(b[p].join(","))+"="+a.escape(p),m--);a.cookieWrite("s_sq",e)}}}return c};a.ub=function(){if(!a.Fb){var c=new Date,b=r.location,d,f,e=f=d="",g="",m="",k="1.2",n=a.cookieWrite("s_cc","true",0)?"Y":"N",q="",s="";if(c.setUTCDate&&(k="1.3",(0).toPrecision&&(k="1.5",c=[],c.forEach))){k="1.6";f=0;d={};try{f=new Iterator(d),f.next&&(k="1.7",
c.reduce&&(k="1.8",k.trim&&(k="1.8.1",Date.parse&&(k="1.8.2",Object.create&&(k="1.8.5")))))}catch(t){}}d=screen.width+"x"+screen.height;e=navigator.javaEnabled()?"Y":"N";f=screen.pixelDepth?screen.pixelDepth:screen.colorDepth;g=a.w.innerWidth?a.w.innerWidth:a.d.documentElement.offsetWidth;m=a.w.innerHeight?a.w.innerHeight:a.d.documentElement.offsetHeight;try{a.b.addBehavior("#default#homePage"),q=a.b.Lb(b)?"Y":"N"}catch(u){}try{a.b.addBehavior("#default#clientCaps"),s=a.b.connectionType}catch(x){}a.resolution=
d;a.colorDepth=f;a.javascriptVersion=k;a.javaEnabled=e;a.cookiesEnabled=n;a.browserWidth=g;a.browserHeight=m;a.connectionType=s;a.homepage=q;a.Fb=1}};a.P={};a.loadModule=function(c,b){var d=a.P[c];if(!d){d=k["AppMeasurement_Module_"+c]?new k["AppMeasurement_Module_"+c](a):{};a.P[c]=a[c]=d;d.Xa=function(){return d.ab};d.bb=function(b){if(d.ab=b)a[c+"_onLoad"]=b,a.ha(c+"_onLoad",[a,d],1)||b(a,d)};try{Object.defineProperty?Object.defineProperty(d,"onLoad",{get:d.Xa,set:d.bb}):d._olc=1}catch(f){d._olc=
1}}b&&(a[c+"_onLoad"]=b,a.ha(c+"_onLoad",[a,d],1)||b(a,d))};a.p=function(c){var b,d;for(b in a.P)if(!Object.prototype[b]&&(d=a.P[b])&&(d._olc&&d.onLoad&&(d._olc=0,d.onLoad(a,d)),d[c]&&d[c]()))return 1;return 0};a.wb=function(){var c=Math.floor(1E13*Math.random()),b=a.visitorSampling,d=a.visitorSamplingGroup,d="s_vsn_"+(a.visitorNamespace?a.visitorNamespace:a.account)+(d?"_"+d:""),f=a.cookieRead(d);if(b){f&&(f=parseInt(f));if(!f){if(!a.cookieWrite(d,c))return 0;f=c}if(f%1E4>v)return 0}return 1};a.Q=
function(c,b){var d,f,e,g,m,k;for(d=0;2>d;d++)for(f=0<d?a.wa:a.g,e=0;e<f.length;e++)if(g=f[e],(m=c[g])||c["!"+g]){if(!b&&("contextData"==g||"retrieveLightData"==g)&&a[g])for(k in a[g])m[k]||(m[k]=a[g][k]);a[g]=m}};a.Qa=function(c,b){var d,f,e,g;for(d=0;2>d;d++)for(f=0<d?a.wa:a.g,e=0;e<f.length;e++)g=f[e],c[g]=a[g],b||c[g]||(c["!"+g]=1)};a.ob=function(a){var b,d,f,e,g,k=0,p,n="",q="";if(a&&255<a.length&&(b=""+a,d=b.indexOf("?"),0<d&&(p=b.substring(d+1),b=b.substring(0,d),e=b.toLowerCase(),f=0,"http://"==
e.substring(0,7)?f+=7:"https://"==e.substring(0,8)&&(f+=8),d=e.indexOf("/",f),0<d&&(e=e.substring(f,d),g=b.substring(d),b=b.substring(0,d),0<=e.indexOf("google")?k=",q,ie,start,search_key,word,kw,cd,":0<=e.indexOf("yahoo.co")&&(k=",p,ei,"),k&&p)))){if((a=p.split("&"))&&1<a.length){for(f=0;f<a.length;f++)e=a[f],d=e.indexOf("="),0<d&&0<=k.indexOf(","+e.substring(0,d)+",")?n+=(n?"&":"")+e:q+=(q?"&":"")+e;n&&q?p=n+"&"+q:q=""}d=253-(p.length-q.length)-b.length;a=b+(0<d?g.substring(0,d):"")+"?"+p}return a};
a.Wa=function(c){var b=a.d.visibilityState,d=["webkitvisibilitychange","visibilitychange"];b||(b=a.d.webkitVisibilityState);if(b&&"prerender"==b){if(c)for(b=0;b<d.length;b++)a.d.addEventListener(d[b],function(){var b=a.d.visibilityState;b||(b=a.d.webkitVisibilityState);"visible"==b&&c()});return!1}return!0};a.da=!1;a.I=!1;a.eb=function(){a.I=!0;a.j()};a.ba=!1;a.U=!1;a.$a=function(c){a.marketingCloudVisitorID=c;a.U=!0;a.j()};a.ea=!1;a.V=!1;a.fb=function(c){a.visitorOptedOut=c;a.V=!0;a.j()};a.Y=!1;
a.R=!1;a.Sa=function(c){a.analyticsVisitorID=c;a.R=!0;a.j()};a.aa=!1;a.T=!1;a.Ua=function(c){a.audienceManagerLocationHint=c;a.T=!0;a.j()};a.Z=!1;a.S=!1;a.Ta=function(c){a.audienceManagerBlob=c;a.S=!0;a.j()};a.Va=function(c){a.maxDelay||(a.maxDelay=250);return a.p("_d")?(c&&setTimeout(function(){c()},a.maxDelay),!1):!0};a.ca=!1;a.H=!1;a.va=function(){a.H=!0;a.j()};a.isReadyToTrack=function(){var c=!0,b=a.visitor,d,f,e;a.da||a.I||(a.Wa(a.eb)?a.I=!0:a.da=!0);if(a.da&&!a.I)return!1;b&&b.isAllowed()&&
(a.ba||a.marketingCloudVisitorID||!b.getMarketingCloudVisitorID||(a.ba=!0,a.marketingCloudVisitorID=b.getMarketingCloudVisitorID([a,a.$a]),a.marketingCloudVisitorID&&(a.U=!0)),a.ea||a.visitorOptedOut||!b.isOptedOut||(a.ea=!0,a.visitorOptedOut=b.isOptedOut([a,a.fb]),a.visitorOptedOut!=q&&(a.V=!0)),a.Y||a.analyticsVisitorID||!b.getAnalyticsVisitorID||(a.Y=!0,a.analyticsVisitorID=b.getAnalyticsVisitorID([a,a.Sa]),a.analyticsVisitorID&&(a.R=!0)),a.aa||a.audienceManagerLocationHint||!b.getAudienceManagerLocationHint||
(a.aa=!0,a.audienceManagerLocationHint=b.getAudienceManagerLocationHint([a,a.Ua]),a.audienceManagerLocationHint&&(a.T=!0)),a.Z||a.audienceManagerBlob||!b.getAudienceManagerBlob||(a.Z=!0,a.audienceManagerBlob=b.getAudienceManagerBlob([a,a.Ta]),a.audienceManagerBlob&&(a.S=!0)),c=a.ba&&!a.U&&!a.marketingCloudVisitorID,b=a.Y&&!a.R&&!a.analyticsVisitorID,d=a.aa&&!a.T&&!a.audienceManagerLocationHint,f=a.Z&&!a.S&&!a.audienceManagerBlob,e=a.ea&&!a.V,c=c||b||d||f||e?!1:!0);a.ca||a.H||(a.Va(a.va)?a.H=!0:a.ca=
!0);a.ca&&!a.H&&(c=!1);return c};a.o=q;a.u=0;a.callbackWhenReadyToTrack=function(c,b,d){var f;f={};f.jb=c;f.ib=b;f.gb=d;a.o==q&&(a.o=[]);a.o.push(f);0==a.u&&(a.u=setInterval(a.j,100))};a.j=function(){var c;if(a.isReadyToTrack()&&(a.cb(),a.o!=q))for(;0<a.o.length;)c=a.o.shift(),c.ib.apply(c.jb,c.gb)};a.cb=function(){a.u&&(clearInterval(a.u),a.u=0)};a.Ya=function(c){var b,d,f=q,e=q;if(!a.isReadyToTrack()){b=[];if(c!=q)for(d in f={},c)f[d]=c[d];e={};a.Qa(e,!0);b.push(f);b.push(e);a.callbackWhenReadyToTrack(a,
a.track,b);return!0}return!1};a.qb=function(){var c=a.cookieRead("s_fid"),b="",d="",f;f=8;var e=4;if(!c||0>c.indexOf("-")){for(c=0;16>c;c++)f=Math.floor(Math.random()*f),b+="0123456789ABCDEF".substring(f,f+1),f=Math.floor(Math.random()*e),d+="0123456789ABCDEF".substring(f,f+1),f=e=16;c=b+"-"+d}a.cookieWrite("s_fid",c,1)||(c=0);return c};a.t=a.track=function(c,b){var d,f=new Date,e="s"+Math.floor(f.getTime()/108E5)%10+Math.floor(1E13*Math.random()),g=f.getYear(),g="t="+a.escape(f.getDate()+"/"+f.getMonth()+
"/"+(1900>g?g+1900:g)+" "+f.getHours()+":"+f.getMinutes()+":"+f.getSeconds()+" "+f.getDay()+" "+f.getTimezoneOffset());a.visitor&&(a.visitor.getAuthState&&(a.authState=a.visitor.getAuthState()),!a.supplementalDataID&&a.visitor.getSupplementalDataID&&(a.supplementalDataID=a.visitor.getSupplementalDataID("AppMeasurement:"+a._in,a.expectSupplementalData?!1:!0)));a.p("_s");a.Ya(c)||(b&&a.Q(b),c&&(d={},a.Qa(d,0),a.Q(c)),a.wb()&&!a.visitorOptedOut&&(a.analyticsVisitorID||a.marketingCloudVisitorID||(a.fid=
a.qb()),a.Bb(),a.usePlugins&&a.doPlugins&&a.doPlugins(a),a.account&&(a.abort||(a.trackOffline&&!a.timestamp&&(a.timestamp=Math.floor(f.getTime()/1E3)),f=k.location,a.pageURL||(a.pageURL=f.href?f.href:f),a.referrer||a.Ra||(a.referrer=r.document.referrer),a.Ra=1,a.referrer=a.ob(a.referrer),a.p("_g")),a.tb()&&!a.abort&&(a.ub(),g+=a.sb(),a.Ab(e,g),a.p("_t"),a.referrer=""))),c&&a.Q(d,1));a.abort=a.supplementalDataID=a.timestamp=a.pageURLRest=a.linkObject=a.clickObject=a.linkURL=a.linkName=a.linkType=k.s_objectID=
a.pe=a.pev1=a.pev2=a.pev3=a.e=a.lightProfileID=0};a.tl=a.trackLink=function(c,b,d,f,e){a.linkObject=c;a.linkType=b;a.linkName=d;e&&(a.l=c,a.A=e);return a.track(f)};a.trackLight=function(c,b,d,f){a.lightProfileID=c;a.lightStoreForSeconds=b;a.lightIncrementBy=d;return a.track(f)};a.clearVars=function(){var c,b;for(c=0;c<a.g.length;c++)if(b=a.g[c],"prop"==b.substring(0,4)||"eVar"==b.substring(0,4)||"hier"==b.substring(0,4)||"list"==b.substring(0,4)||"channel"==b||"events"==b||"eventList"==b||"products"==
b||"productList"==b||"purchaseID"==b||"transactionID"==b||"state"==b||"zip"==b||"campaign"==b)a[b]=void 0};a.tagContainerMarker="";a.Ab=function(c,b){var d,f=a.trackingServer;d="";var e=a.dc,g="sc.",k=a.visitorNamespace;f?a.trackingServerSecure&&a.ssl&&(f=a.trackingServerSecure):(k||(k=a.account,f=k.indexOf(","),0<=f&&(k=k.substring(0,f)),k=k.replace(/[^A-Za-z0-9]/g,"")),d||(d="2o7.net"),e=e?(""+e).toLowerCase():"d1","2o7.net"==d&&("d1"==e?e="112":"d2"==e&&(e="122"),g=""),f=k+"."+e+"."+g+d);d=a.ssl?
"https://":"http://";e=a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks;d+=f+"/b/ss/"+a.account+"/"+(a.mobile?"5.":"")+(e?"10":"1")+"/JS-"+a.version+(a.Eb?"T":"")+(a.tagContainerMarker?"-"+a.tagContainerMarker:"")+"/"+c+"?AQB=1&ndh=1&pf=1&"+(e?"callback=s_c_il["+a._in+"].doPostbacks&et=1&":"")+b+"&AQE=1";a.mb(d);a.ja()};a.Pa=/{(%?)(.*?)(%?)}/;a.Ib=RegExp(a.Pa.source,"g");a.nb=function(c){if("object"==typeof c.dests)for(var b=0;b<c.dests.length;++b)if(o=c.dests[b],"string"==
typeof o.c&&"aa."==o.id.substr(0,3))for(var d=o.c.match(a.Ib),b=0;b<d.length;++b){match=d[b];var f=match.match(a.Pa),e="";"%"==f[1]&&"timezone_offset"==f[2]?e=(new Date).getTimezoneOffset():"%"==f[1]&&"timestampz"==f[2]&&(e=a.rb());o.c=o.c.replace(match,a.escape(e))}};a.rb=function(){var c=new Date,b=new Date(6E4*Math.abs(c.getTimezoneOffset()));return a.k(4,c.getFullYear())+"-"+a.k(2,c.getMonth()+1)+"-"+a.k(2,c.getDate())+"T"+a.k(2,c.getHours())+":"+a.k(2,c.getMinutes())+":"+a.k(2,c.getSeconds())+
(0<c.getTimezoneOffset()?"-":"+")+a.k(2,b.getUTCHours())+":"+a.k(2,b.getUTCMinutes())};a.k=function(a,b){return(Array(a+1).join(0)+b).slice(-a)};a.ra={};a.doPostbacks=function(c){if("object"==typeof c)if(a.nb(c),"object"==typeof a.AudienceManagement&&"function"==typeof a.AudienceManagement.isReady&&a.AudienceManagement.isReady()&&"function"==typeof a.AudienceManagement.passData)a.AudienceManagement.passData(c);else if("object"==typeof c&&"object"==typeof c.dests)for(var b=0;b<c.dests.length;++b)dest=
c.dests[b],"object"==typeof dest&&"string"==typeof dest.c&&"string"==typeof dest.id&&"aa."==dest.id.substr(0,3)&&(a.ra[dest.id]=new Image,a.ra[dest.id].alt="",a.ra[dest.id].src=dest.c)};a.mb=function(c){a.i||a.vb();a.i.push(c);a.la=a.C();a.Na()};a.vb=function(){a.i=a.xb();a.i||(a.i=[])};a.xb=function(){var c,b;if(a.qa()){try{(b=k.localStorage.getItem(a.oa()))&&(c=k.JSON.parse(b))}catch(d){}return c}};a.qa=function(){var c=!0;a.trackOffline&&a.offlineFilename&&k.localStorage&&k.JSON||(c=!1);return c};
a.Ea=function(){var c=0;a.i&&(c=a.i.length);a.q&&c++;return c};a.ja=function(){if(a.q&&(a.B&&a.B.complete&&a.B.F&&a.B.ua(),a.q))return;a.Fa=q;if(a.pa)a.la>a.N&&a.La(a.i),a.ta(500);else{var c=a.hb();if(0<c)a.ta(c);else if(c=a.Ba())a.q=1,a.zb(c),a.Db(c)}};a.ta=function(c){a.Fa||(c||(c=0),a.Fa=setTimeout(a.ja,c))};a.hb=function(){var c;if(!a.trackOffline||0>=a.offlineThrottleDelay)return 0;c=a.C()-a.Ka;return a.offlineThrottleDelay<c?0:a.offlineThrottleDelay-c};a.Ba=function(){if(0<a.i.length)return a.i.shift()};
a.zb=function(c){if(a.debugTracking){var b="AppMeasurement Debug: "+c;c=c.split("&");var d;for(d=0;d<c.length;d++)b+="\n\t"+a.unescape(c[d]);a.yb(b)}};a.Za=function(){return a.marketingCloudVisitorID||a.analyticsVisitorID};a.X=!1;var s;try{s=JSON.parse('{"x":"y"}')}catch(x){s=null}s&&"y"==s.x?(a.X=!0,a.W=function(a){return JSON.parse(a)}):k.$&&k.$.parseJSON?(a.W=function(a){return k.$.parseJSON(a)},a.X=!0):a.W=function(){return null};a.Db=function(c){var b,d,f;a.Za()&&2047<c.length&&("undefined"!=
typeof XMLHttpRequest&&(b=new XMLHttpRequest,"withCredentials"in b?d=1:b=0),b||"undefined"==typeof XDomainRequest||(b=new XDomainRequest,d=2),b&&(a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks)&&(a.X?b.xa=!0:b=0));!b&&a.Oa&&(c=c.substring(0,2047));!b&&a.d.createElement&&(0!=a.usePostbacks||a.AudienceManagement&&a.AudienceManagement.isReady())&&(b=a.d.createElement("SCRIPT"))&&"async"in b&&((f=(f=a.d.getElementsByTagName("HEAD"))&&f[0]?f[0]:a.d.body)?(b.type="text/javascript",
b.setAttribute("async","async"),d=3):b=0);b||(b=new Image,b.alt="",b.abort||"undefined"===typeof k.InstallTrigger||(b.abort=function(){b.src=q}));b.za=function(){try{b.F&&(clearTimeout(b.F),b.F=0)}catch(a){}};b.onload=b.ua=function(){b.za();a.lb();a.fa();a.q=0;a.ja();if(b.xa){b.xa=!1;try{a.doPostbacks(a.W(b.responseText))}catch(c){}}};b.onabort=b.onerror=b.Ca=function(){b.za();(a.trackOffline||a.pa)&&a.q&&a.i.unshift(a.kb);a.q=0;a.la>a.N&&a.La(a.i);a.fa();a.ta(500)};b.onreadystatechange=function(){4==
b.readyState&&(200==b.status?b.ua():b.Ca())};a.Ka=a.C();if(1==d||2==d){var e=c.indexOf("?");f=c.substring(0,e);e=c.substring(e+1);e=e.replace(/&callback=[a-zA-Z0-9_.\[\]]+/,"");1==d?(b.open("POST",f,!0),b.send(e)):2==d&&(b.open("POST",f),b.send(e))}else if(b.src=c,3==d){if(a.Ia)try{f.removeChild(a.Ia)}catch(g){}f.firstChild?f.insertBefore(b,f.firstChild):f.appendChild(b);a.Ia=a.B}b.F=setTimeout(function(){b.F&&(b.complete?b.ua():(a.trackOffline&&b.abort&&b.abort(),b.Ca()))},5E3);a.kb=c;a.B=k["s_i_"+
a.replace(a.account,",","_")]=b;if(a.useForcedLinkTracking&&a.J||a.A)a.forcedLinkTrackingTimeout||(a.forcedLinkTrackingTimeout=250),a.ga=setTimeout(a.fa,a.forcedLinkTrackingTimeout)};a.lb=function(){if(a.qa()&&!(a.Ja>a.N))try{k.localStorage.removeItem(a.oa()),a.Ja=a.C()}catch(c){}};a.La=function(c){if(a.qa()){a.Na();try{k.localStorage.setItem(a.oa(),k.JSON.stringify(c)),a.N=a.C()}catch(b){}}};a.Na=function(){if(a.trackOffline){if(!a.offlineLimit||0>=a.offlineLimit)a.offlineLimit=10;for(;a.i.length>
a.offlineLimit;)a.Ba()}};a.forceOffline=function(){a.pa=!0};a.forceOnline=function(){a.pa=!1};a.oa=function(){return a.offlineFilename+"-"+a.visitorNamespace+a.account};a.C=function(){return(new Date).getTime()};a.Ga=function(a){a=a.toLowerCase();return 0!=a.indexOf("#")&&0!=a.indexOf("about:")&&0!=a.indexOf("opera:")&&0!=a.indexOf("javascript:")?!0:!1};a.setTagContainer=function(c){var b,d,f;a.Eb=c;for(b=0;b<a._il.length;b++)if((d=a._il[b])&&"s_l"==d._c&&d.tagContainerName==c){a.Q(d);if(d.lmq)for(b=
0;b<d.lmq.length;b++)f=d.lmq[b],a.loadModule(f.n);if(d.ml)for(f in d.ml)if(a[f])for(b in c=a[f],f=d.ml[f],f)!Object.prototype[b]&&("function"!=typeof f[b]||0>(""+f[b]).indexOf("s_c_il"))&&(c[b]=f[b]);if(d.mmq)for(b=0;b<d.mmq.length;b++)f=d.mmq[b],a[f.m]&&(c=a[f.m],c[f.f]&&"function"==typeof c[f.f]&&(f.a?c[f.f].apply(c,f.a):c[f.f].apply(c)));if(d.tq)for(b=0;b<d.tq.length;b++)a.track(d.tq[b]);d.s=a;break}};a.Util={urlEncode:a.escape,urlDecode:a.unescape,cookieRead:a.cookieRead,cookieWrite:a.cookieWrite,
getQueryParam:function(c,b,d){var f;b||(b=a.pageURL?a.pageURL:k.location);d||(d="&");return c&&b&&(b=""+b,f=b.indexOf("?"),0<=f&&(b=d+b.substring(f+1)+d,f=b.indexOf(d+c+"="),0<=f&&(b=b.substring(f+d.length+c.length+1),f=b.indexOf(d),0<=f&&(b=b.substring(0,f)),0<b.length)))?a.unescape(b):""}};a.G="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" ");
a.g=a.G.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" "));a.ma="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" ");a.O=a.ma.slice(0);a.wa="account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData usePostbacks AudienceManagement".split(" ");
for(n=0;250>=n;n++)76>n&&(a.g.push("prop"+n),a.O.push("prop"+n)),a.g.push("eVar"+n),a.O.push("eVar"+n),6>n&&a.g.push("hier"+n),4>n&&a.g.push("list"+n);n="pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest".split(" ");a.g=a.g.concat(n);a.G=a.G.concat(n);a.ssl=0<=k.location.protocol.toLowerCase().indexOf("https");a.charSet="UTF-8";a.contextData={};a.offlineThrottleDelay=0;a.offlineFilename=
"AppMeasurement.offline";a.Ka=0;a.la=0;a.N=0;a.Ja=0;a.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx";a.w=k;a.d=k.document;try{if(a.Oa=!1,navigator){var y=navigator.userAgent;if("Microsoft Internet Explorer"==navigator.appName||0<=y.indexOf("MSIE ")||0<=y.indexOf("Trident/")&&0<=y.indexOf("Windows NT 6"))a.Oa=!0}}catch(z){}a.fa=function(){a.ga&&(k.clearTimeout(a.ga),a.ga=q);a.l&&a.J&&a.l.dispatchEvent(a.J);a.A&&("function"==typeof a.A?a.A():a.l&&a.l.href&&(a.d.location=
a.l.href));a.l=a.J=a.A=0};a.Ma=function(){a.b=a.d.body;a.b?(a.v=function(c){var b,d,f,e,g;if(!(a.d&&a.d.getElementById("cppXYctnr")||c&&c["s_fe_"+a._in])){if(a.ya)if(a.useForcedLinkTracking)a.b.removeEventListener("click",a.v,!1);else{a.b.removeEventListener("click",a.v,!0);a.ya=a.useForcedLinkTracking=0;return}else a.useForcedLinkTracking=0;a.clickObject=c.srcElement?c.srcElement:c.target;try{if(!a.clickObject||a.M&&a.M==a.clickObject||!(a.clickObject.tagName||a.clickObject.parentElement||a.clickObject.parentNode))a.clickObject=
0;else{var m=a.M=a.clickObject;a.ka&&(clearTimeout(a.ka),a.ka=0);a.ka=setTimeout(function(){a.M==m&&(a.M=0)},1E4);f=a.Ea();a.track();if(f<a.Ea()&&a.useForcedLinkTracking&&c.target){for(e=c.target;e&&e!=a.b&&"A"!=e.tagName.toUpperCase()&&"AREA"!=e.tagName.toUpperCase();)e=e.parentNode;if(e&&(g=e.href,a.Ga(g)||(g=0),d=e.target,c.target.dispatchEvent&&g&&(!d||"_self"==d||"_top"==d||"_parent"==d||k.name&&d==k.name))){try{b=a.d.createEvent("MouseEvents")}catch(n){b=new k.MouseEvent}if(b){try{b.initMouseEvent("click",
c.bubbles,c.cancelable,c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget)}catch(q){b=0}b&&(b["s_fe_"+a._in]=b.s_fe=1,c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation(),c.preventDefault(),a.l=c.target,a.J=b)}}}}}catch(r){a.clickObject=0}}},a.b&&a.b.attachEvent?a.b.attachEvent("onclick",a.v):a.b&&a.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&a.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&
k.MouseEvent)&&(a.ya=1,a.useForcedLinkTracking=1,a.b.addEventListener("click",a.v,!0)),a.b.addEventListener("click",a.v,!1))):setTimeout(a.Ma,30)};a.Ma();a.loadModule("ActivityMap")}
function s_gi(a){var k,q=window.s_c_il,r,n,t=a.split(","),u,s,x=0;if(q)for(r=0;!x&&r<q.length;){k=q[r];if("s_c"==k._c&&(k.account||k.oun))if(k.account&&k.account==a)x=1;else for(n=k.account?k.account:k.oun,n=k.allAccounts?k.allAccounts:n.split(","),u=0;u<t.length;u++)for(s=0;s<n.length;s++)t[u]==n[s]&&(x=1);r++}x||(k=new AppMeasurement);k.setAccount?k.setAccount(a):k.sa&&k.sa(a);return k}AppMeasurement.getInstance=s_gi;window.s_objectID||(window.s_objectID=0);
function s_pgicq(){var a=window,k=a.s_giq,q,r,n;if(k)for(q=0;q<k.length;q++)r=k[q],n=s_gi(r.oun),n.setAccount(r.un),n.setTagContainer(r.tagContainerName);a.s_giq=0}s_pgicq();
/*
 ============== DO NOT ALTER ANYTHING BELOW THIS LINE ! ============

 Adobe Visitor API for JavaScript version: 1.5.4
 Copyright 1996-2015 Adobe, Inc. All Rights Reserved
 More info available at http://www.omniture.com
*/
function Visitor(m,t){if(!m)throw"Visitor requires Adobe Marketing Cloud Org ID";var a=this;a.version="1.5.4";var l=window,i=l.Visitor;i.version=a.version;l.s_c_in||(l.s_c_il=[],l.s_c_in=0);a._c="Visitor";a._il=l.s_c_il;a._in=l.s_c_in;a._il[a._in]=a;l.s_c_in++;a.pa={Ka:[]};var o=l.document,h=i.Ma;h||(h=null);var z=i.Na;z||(z=void 0);var j=i.ja;j||(j=!0);var k=i.La;k||(k=!1);a.S=function(a){var c=0,b,e;if(a)for(b=0;b<a.length;b++)e=a.charCodeAt(b),c=(c<<5)-c+e,c&=c;return c};a.r=function(a){var c=
"0123456789",b="",e="",f,g=8,n=10,h=10;if(1==a){c+="ABCDEF";for(a=0;16>a;a++)f=Math.floor(Math.random()*g),b+=c.substring(f,f+1),f=Math.floor(Math.random()*g),e+=c.substring(f,f+1),g=16;return b+"-"+e}for(a=0;19>a;a++)f=Math.floor(Math.random()*n),b+=c.substring(f,f+1),0==a&&9==f?n=3:(1==a||2==a)&&10!=n&&2>f?n=10:2<a&&(n=10),f=Math.floor(Math.random()*h),e+=c.substring(f,f+1),0==a&&9==f?h=3:(1==a||2==a)&&10!=h&&2>f?h=10:2<a&&(h=10);return b+e};a.ma=function(){var a;!a&&l.location&&(a=l.location.hostname);
if(a)if(/^[0-9.]+$/.test(a))a="";else{var c=a.split("."),b=c.length-1,e=b-1;1<b&&2>=c[b].length&&(2==c[b-1].length||0>",ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,be,bf,bg,bh,bi,bj,bm,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,cl,cm,cn,co,cr,cu,cv,cw,cx,cz,de,dj,dk,dm,do,dz,ec,ee,eg,es,et,eu,fi,fm,fo,fr,ga,gb,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,im,in,io,iq,ir,is,it,je,jo,jp,kg,ki,km,kn,kp,kr,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,na,nc,ne,nf,ng,nl,no,nr,nu,nz,om,pa,pe,pf,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,rs,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sx,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,yt,".indexOf(","+
c[b]+","))&&e--;if(0<e)for(a="";b>=e;)a=c[b]+(a?".":"")+a,b--}return a};a.cookieRead=function(a){var a=encodeURIComponent(a),c=(";"+o.cookie).split(" ").join(";"),b=c.indexOf(";"+a+"="),e=0>b?b:c.indexOf(";",b+1);return 0>b?"":decodeURIComponent(c.substring(b+2+a.length,0>e?c.length:e))};a.cookieWrite=function(d,c,b){var e=a.cookieLifetime,f,c=""+c,e=e?(""+e).toUpperCase():"";b&&"SESSION"!=e&&"NONE"!=e?(f=""!=c?parseInt(e?e:0,10):-60)?(b=new Date,b.setTime(b.getTime()+1E3*f)):1==b&&(b=new Date,f=
b.getYear(),b.setYear(f+2+(1900>f?1900:0))):b=0;return d&&"NONE"!=e?(o.cookie=encodeURIComponent(d)+"="+encodeURIComponent(c)+"; path=/;"+(b?" expires="+b.toGMTString()+";":"")+(a.cookieDomain?" domain="+a.cookieDomain+";":""),a.cookieRead(d)==c):0};a.g=h;a.A=function(a,c){try{"function"==typeof a?a.apply(l,c):a[1].apply(a[0],c)}catch(b){}};a.ra=function(d,c){c&&(a.g==h&&(a.g={}),a.g[d]==z&&(a.g[d]=[]),a.g[d].push(c))};a.m=function(d,c){if(a.g!=h){var b=a.g[d];if(b)for(;0<b.length;)a.A(b.shift(),
c)}};a.j=h;a.oa=function(d,c,b){var e=0,f=0,g;if(c&&o){for(g=0;!e&&2>g;){try{e=(e=o.getElementsByTagName(0<g?"HEAD":"head"))&&0<e.length?e[0]:0}catch(n){e=0}g++}if(!e)try{o.body&&(e=o.body)}catch(j){e=0}if(e)for(g=0;!f&&2>g;){try{f=o.createElement(0<g?"SCRIPT":"script")}catch(i){f=0}g++}}!c||!e||!f?b&&b():(f.type="text/javascript",f.setAttribute("async","async"),f.src=c,e.firstChild?e.insertBefore(f,e.firstChild):e.appendChild(f),a.pa.Ka.push(c),b&&(a.j==h&&(a.j={}),a.j[d]=setTimeout(b,a.loadTimeout)))};
a.ka=function(d){a.j!=h&&a.j[d]&&(clearTimeout(a.j[d]),a.j[d]=0)};a.T=k;a.U=k;a.isAllowed=function(){if(!a.T&&(a.T=j,a.cookieRead(a.cookieName)||a.cookieWrite(a.cookieName,"T",1)))a.U=j;return a.U};a.a=h;a.d=h;var B=i.$a;B||(B="MC");var r=i.fb;r||(r="MCMID");var C=i.ab;C||(C="MCCIDH");var D=i.eb;D||(D="MCSYNCS");var F=i.bb;F||(F="MCIDTS");var x=i.cb;x||(x="MCOPTOUT");var A=i.Ya;A||(A="A");var p=i.Va;p||(p="MCAID");var y=i.Za;y||(y="AAM");var w=i.Xa;w||(w="MCAAMLH");var q=i.Wa;q||(q="MCAAMB");var s=
i.gb;s||(s="NONE");a.C=0;a.R=function(){if(!a.C){var d=a.version;a.audienceManagerServer&&(d+="|"+a.audienceManagerServer);a.audienceManagerServerSecure&&(d+="|"+a.audienceManagerServerSecure);a.C=a.S(d)}return a.C};a.V=k;a.f=function(){if(!a.V){a.V=j;var d=a.R(),c=k,b=a.cookieRead(a.cookieName),e,f,g,n,i=new Date;a.a==h&&(a.a={});if(b&&"T"!=b){b=b.split("|");b[0].match(/^[\-0-9]+$/)&&(parseInt(b[0],10)!=d&&(c=j),b.shift());1==b.length%2&&b.pop();for(d=0;d<b.length;d+=2)if(e=b[d].split("-"),f=e[0],
g=b[d+1],1<e.length?(n=parseInt(e[1],10),e=0<e[1].indexOf("s")):(n=0,e=k),c&&(f==C&&(g=""),0<n&&(n=i.getTime()/1E3-60)),f&&g&&(a.c(f,g,1),0<n&&(a.a["expire"+f]=n+(e?"s":""),i.getTime()>=1E3*n||e&&!a.cookieRead(a.sessionCookieName))))a.d||(a.d={}),a.d[f]=j}if(!a.b(p)&&(b=a.cookieRead("s_vi")))b=b.split("|"),1<b.length&&0<=b[0].indexOf("v1")&&(g=b[1],d=g.indexOf("["),0<=d&&(g=g.substring(0,d)),g&&g.match(/^[0-9a-fA-F\-]+$/)&&a.c(p,g))}};a.ta=function(){var d=a.R(),c,b;for(c in a.a)!Object.prototype[c]&&
a.a[c]&&"expire"!=c.substring(0,6)&&(b=a.a[c],d+=(d?"|":"")+c+(a.a["expire"+c]?"-"+a.a["expire"+c]:"")+"|"+b);a.cookieWrite(a.cookieName,d,1)};a.b=function(d,c){return a.a!=h&&(c||!a.d||!a.d[d])?a.a[d]:h};a.c=function(d,c,b){a.a==h&&(a.a={});a.a[d]=c;b||a.ta()};a.na=function(d,c){var b=a.b(d,c);return b?b.split("*"):h};a.sa=function(d,c,b){a.c(d,c?c.join("*"):"",b)};a.Sa=function(d,c){var b=a.na(d,c);if(b){var e={},f;for(f=0;f<b.length;f+=2)e[b[f]]=b[f+1];return e}return h};a.Ua=function(d,c,b){var e=
h,f;if(c)for(f in e=[],c)Object.prototype[f]||(e.push(f),e.push(c[f]));a.sa(d,e,b)};a.k=function(d,c,b){var e=new Date;e.setTime(e.getTime()+1E3*c);a.a==h&&(a.a={});a.a["expire"+d]=Math.floor(e.getTime()/1E3)+(b?"s":"");0>c?(a.d||(a.d={}),a.d[d]=j):a.d&&(a.d[d]=k);b&&(a.cookieRead(a.sessionCookieName)||a.cookieWrite(a.sessionCookieName,"1"))};a.Q=function(a){if(a&&("object"==typeof a&&(a=a.d_mid?a.d_mid:a.visitorID?a.visitorID:a.id?a.id:a.uuid?a.uuid:""+a),a&&(a=a.toUpperCase(),"NOTARGET"==a&&(a=
s)),!a||a!=s&&!a.match(/^[0-9a-fA-F\-]+$/)))a="";return a};a.i=function(d,c){a.ka(d);a.h!=h&&(a.h[d]=k);if(d==B){var b=a.b(r);if(!b){b="object"==typeof c&&c.mid?c.mid:a.Q(c);if(!b){if(a.v){a.getAnalyticsVisitorID(h,k,j);return}b=a.r()}a.c(r,b)}if(!b||b==s)b="";"object"==typeof c&&((c.d_region||c.dcs_region||c.d_blob||c.blob)&&a.i(y,c),a.v&&c.mid&&a.i(A,{id:c.id}));a.m(r,[b])}if(d==y&&"object"==typeof c){b=604800;c.id_sync_ttl!=z&&c.id_sync_ttl&&(b=parseInt(c.id_sync_ttl,10));var e=a.b(w);e||((e=c.d_region)||
(e=c.dcs_region),e&&(a.k(w,b),a.c(w,e)));e||(e="");a.m(w,[e]);e=a.b(q);if(c.d_blob||c.blob)(e=c.d_blob)||(e=c.blob),a.k(q,b),a.c(q,e);e||(e="");a.m(q,[e]);!c.error_msg&&a.t&&a.c(C,a.t)}if(d==A){b=a.b(p);b||((b=a.Q(c))?a.k(q,-1):b=s,a.c(p,b));if(!b||b==s)b="";a.m(p,[b])}a.idSyncDisableSyncs?u.ba=j:(u.ba=k,b={},b.ibs=c.ibs,b.subdomain=c.subdomain,u.Ia(b));c===Object(c)&&(b=s,c.d_optout&&c.d_optout instanceof Array&&(b=c.d_optout.join(",")),e=parseInt(c.d_ottl,10),isNaN(e)&&(e=7200),a.k(x,e,!0),a.c(x,
b),a.m(x,[b]))};a.h=h;a.n=function(d,c,b,e){var f="",g;if(a.isAllowed()&&(a.f(),f=a.b(d),!f&&(d==r||d==x?g=B:d==w||d==q?g=y:d==p&&(g=A),g))){if(c&&(a.h==h||!a.h[g]))a.h==h&&(a.h={}),a.h[g]=j,a.oa(g,c,function(){if(!a.b(d)){var b="";d==r?b=a.r():g==y&&(b={error_msg:"timeout"});a.i(g,b)}});a.ra(d,b);c||a.i(g,{id:s});return""}if((d==r||d==p)&&f==s)f="",e=j;b&&e&&a.A(b,[f]);return f};a._setMarketingCloudFields=function(d){a.f();a.i(B,d)};a.setMarketingCloudVisitorID=function(d){a._setMarketingCloudFields(d)};
a.v=k;a.getMarketingCloudVisitorID=function(d,c){if(a.isAllowed()){a.marketingCloudServer&&0>a.marketingCloudServer.indexOf(".demdex.net")&&(a.v=j);var b=a.s("_setMarketingCloudFields");return a.n(r,b,d,c)}return""};a.qa=function(){a.getAudienceManagerBlob()};i.AuthState={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2};a.q={};a.P=k;a.t="";a.setCustomerIDs=function(d){if(a.isAllowed()&&d){a.f();var c,b;for(c in d)if(!Object.prototype[c]&&(b=d[c]))if("object"==typeof b){var e={};b.id&&(e.id=b.id);b.authState!=
z&&(e.authState=b.authState);a.q[c]=e}else a.q[c]={id:b};var d=a.getCustomerIDs(),e=a.b(C),f="";e||(e=0);for(c in d)Object.prototype[c]||(b=d[c],f+=(f?"|":"")+c+"|"+(b.id?b.id:"")+(b.authState?b.authState:""));a.t=a.S(f);a.t!=e&&(a.P=j,a.qa())}};a.getCustomerIDs=function(){a.f();var d={},c,b;for(c in a.q)Object.prototype[c]||(b=a.q[c],d[c]||(d[c]={}),b.id&&(d[c].id=b.id),d[c].authState=b.authState!=z?b.authState:i.AuthState.UNKNOWN);return d};a._setAnalyticsFields=function(d){a.f();a.i(A,d)};a.setAnalyticsVisitorID=
function(d){a._setAnalyticsFields(d)};a.getAnalyticsVisitorID=function(d,c,b){if(a.isAllowed()){var e="";b||(e=a.getMarketingCloudVisitorID(function(){a.getAnalyticsVisitorID(d,j)}));if(e||b){var f=b?a.marketingCloudServer:a.trackingServer,g="";a.loadSSL&&(b?a.marketingCloudServerSecure&&(f=a.marketingCloudServerSecure):a.trackingServerSecure&&(f=a.trackingServerSecure));f&&(g="http"+(a.loadSSL?"s":"")+"://"+f+"/id?d_visid_ver="+a.version+"&callback=s_c_il%5B"+a._in+"%5D._set"+(b?"MarketingCloud":
"Analytics")+"Fields&mcorgid="+encodeURIComponent(a.marketingCloudOrgID)+(e?"&mid="+e:"")+(a.idSyncDisable3rdPartySyncing?"&d_coppa=true":""));return a.n(b?r:p,g,d,c)}}return""};a._setAudienceManagerFields=function(d){a.f();a.i(y,d)};a.s=function(d){var c=a.audienceManagerServer,b="",e=a.b(r),f=a.b(q,j),g=a.b(p),g=g&&g!=s?"&d_cid_ic=AVID%01"+encodeURIComponent(g):"";a.loadSSL&&a.audienceManagerServerSecure&&(c=a.audienceManagerServerSecure);if(c){var b=a.getCustomerIDs(),h,i;if(b)for(h in b)Object.prototype[h]||
(i=b[h],g+="&d_cid_ic="+encodeURIComponent(h)+"%01"+encodeURIComponent(i.id?i.id:"")+(i.authState?"%01"+i.authState:""));d||(d="_setAudienceManagerFields");b="http"+(a.loadSSL?"s":"")+"://"+c+"/id?d_visid_ver="+a.version+"&d_rtbd=json&d_ver=2"+(!e&&a.v?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(a.marketingCloudOrgID)+"&d_nsid="+(a.idSyncContainerID||0)+(e?"&d_mid="+e:"")+(a.idSyncDisable3rdPartySyncing?"&d_coppa=true":"")+(f?"&d_blob="+encodeURIComponent(f):"")+g+"&d_cb=s_c_il%5B"+a._in+"%5D."+
d}return b};a.getAudienceManagerLocationHint=function(d,c){if(a.isAllowed()&&a.getMarketingCloudVisitorID(function(){a.getAudienceManagerLocationHint(d,j)})){var b=a.b(p);b||(b=a.getAnalyticsVisitorID(function(){a.getAudienceManagerLocationHint(d,j)}));if(b)return b=a.s(),a.n(w,b,d,c)}return""};a.getAudienceManagerBlob=function(d,c){if(a.isAllowed()&&a.getMarketingCloudVisitorID(function(){a.getAudienceManagerBlob(d,j)})){var b=a.b(p);b||(b=a.getAnalyticsVisitorID(function(){a.getAudienceManagerBlob(d,
j)}));if(b)return b=a.s(),a.P&&a.k(q,-1),a.n(q,b,d,c)}return""};a.o="";a.u={};a.D="";a.F={};a.getSupplementalDataID=function(d,c){!a.o&&!c&&(a.o=a.r(1));var b=a.o;a.D&&!a.F[d]?(b=a.D,a.F[d]=j):b&&(a.u[d]&&(a.D=a.o,a.F=a.u,a.o=b=!c?a.r(1):"",a.u={}),b&&(a.u[d]=j));return b};i.OptOut={GLOBAL:"global"};a.getOptOut=function(d,c){if(a.isAllowed()){var b=a.s("_setMarketingCloudFields");return a.n(x,b,d,c)}return""};a.isOptedOut=function(d,c,b){return a.isAllowed()?(c||(c=i.OptOut.GLOBAL),(b=a.getOptOut(function(b){a.A(d,
[b==i.OptOut.GLOBAL||0<=b.indexOf(c)])},b))?b==i.OptOut.GLOBAL||0<=b.indexOf(c):h):k};var v={l:!!l.postMessage,ha:1,O:864E5};a.Oa=v;a.X={postMessage:function(a,c,b){var e=1;c&&(v.l?b.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(b.location=c.replace(/#.*$/,"")+"#"+ +new Date+e++ +"&"+a))},K:function(a,c){var b;try{if(v.l)if(a&&(b=function(b){if("string"===typeof c&&b.origin!==c||"[object Function]"===Object.prototype.toString.call(c)&&!1===c(b.origin))return!1;a(b)}),window.addEventListener)window[a?
"addEventListener":"removeEventListener"]("message",b,!1);else window[a?"attachEvent":"detachEvent"]("onmessage",b)}catch(e){}}};var G={Y:function(){if(o.addEventListener)return function(a,c,b){a.addEventListener(c,function(a){"function"===typeof b&&b(a)},k)};if(o.attachEvent)return function(a,c,b){a.attachEvent("on"+c,function(a){"function"===typeof b&&b(a)})}}(),map:function(a,c){if(Array.prototype.map)return a.map(c);if(void 0===a||a===h)throw new TypeError;var b=Object(a),e=b.length>>>0;if("function"!==
typeof c)throw new TypeError;for(var f=Array(e),g=0;g<e;g++)g in b&&(f[g]=c.call(c,b[g],g,b));return f},za:function(a,c){return this.map(a,function(a){return encodeURIComponent(a)}).join(c)}};a.Ta=G;var u={ia:3E4,N:649,fa:k,id:h,I:h,aa:function(a){if("string"===typeof a)return a=a.split("/"),a[0]+"//"+a[2]},e:h,url:h,Aa:function(){var d="http://fast.",c="?d_nsid="+a.idSyncContainerID+"#"+encodeURIComponent(o.location.href);this.e||(this.e="nosubdomainreturned");a.loadSSL&&(d=a.idSyncSSLUseAkamai?
"https://fast.":"https://");d=d+this.e+".demdex.net/dest5.html"+c;this.I=this.aa(d);this.id="destination_publishing_iframe_"+this.e+"_"+a.idSyncContainerID;return d},va:function(){var d="?d_nsid="+a.idSyncContainerID+"#"+encodeURIComponent(o.location.href);"string"===typeof a.B&&a.B.length&&(this.id="destination_publishing_iframe_"+(new Date).getTime()+"_"+a.idSyncContainerID,this.I=this.aa(a.B),this.url=a.B+d)},ba:h,H:k,M:k,w:h,hb:h,Ga:h,ib:h,L:k,z:[],Ea:[],Fa:[],ca:v.l?15:100,J:[],Ca:[],$:j,da:k,
Z:function(){function a(){e=document.createElement("iframe");e.id=b.id;e.style.cssText="display: none; width: 0; height: 0;";e.src=b.url;b.Ga=j;c();document.body.appendChild(e)}function c(){G.Y(e,"load",function(){e.className="aamIframeLoaded";b.w=j;b.p()})}this.M=j;var b=this,e=document.getElementById(this.id);e?"IFRAME"!==e.nodeName?(this.id+="_2",a()):"aamIframeLoaded"!==e.className?c():(this.w=j,this.p()):a();this.Ba=e},p:function(d){var c=this;d===Object(d)&&this.J.push(d);if((this.da||!v.l||
this.w)&&this.J.length)this.Ha(this.J.shift()),this.p();!a.idSyncDisableSyncs&&this.w&&this.z.length&&!this.L&&(this.fa||(this.fa=j,setTimeout(function(){c.ca=v.l?15:150},this.ia)),this.L=j,this.ea())},Ha:function(a){var c=encodeURIComponent,b,e,f,g,h;if((b=a.ibs)&&b instanceof Array&&(e=b.length))for(f=0;f<e;f++)g=b[f],h=[c("ibs"),c(g.id||""),c(g.tag||""),G.za(g.url||[],","),c(g.ttl||""),"","",g.fireURLSync?"true":"false"],this.$?this.G(h.join("|")):g.fireURLSync&&this.wa(g,h.join("|"));this.Ca.push(a)},
wa:function(d,c){a.f();var b=a.b(D),e=k,f=k,g=Math.ceil((new Date).getTime()/v.O);if(b){if(b=b.split("*"),f=this.Ja(b,d.id,g),e=f.xa,f=f.ya,!e||!f)this.G(c),b.push(d.id+"-"+(g+Math.ceil(d.ttl/60/24))),this.Da(b),a.c(D,b.join("*"))}else this.G(c),a.c(D,d.id+"-"+(g+Math.ceil(d.ttl/60/24)))},Ja:function(a,c,b){var e=k,f=k,g,h,i;for(h=0;h<a.length;h++)g=a[h],i=parseInt(g.split("-")[1],10),g.match("^"+c+"-")?(e=j,b<i?f=j:(a.splice(h,1),h--)):b>=i&&(a.splice(h,1),h--);return{xa:e,ya:f}},Da:function(a){if(a.join("*").length>
this.N)for(a.sort(function(a,b){return parseInt(a.split("-")[1],10)-parseInt(b.split("-")[1],10)});a.join("*").length>this.N;)a.shift()},G:function(d){var c=encodeURIComponent;this.z.push((a.Qa?c("---destpub-debug---"):c("---destpub---"))+d)},ea:function(){var d=this,c;this.z.length?(c=this.z.shift(),a.X.postMessage(c,this.url,this.Ba.contentWindow),this.Ea.push(c),setTimeout(function(){d.ea()},this.ca)):this.L=k},K:function(a){var c=/^---destpub-to-parent---/;"string"===typeof a&&c.test(a)&&(c=a.replace(c,
"").split("|"),"canSetThirdPartyCookies"===c[0]&&(this.$="true"===c[1]?j:k,this.da=j,this.p()),this.Fa.push(a))},Ia:function(d){this.url===h&&(this.e="string"===typeof a.W&&a.W.length?a.W:d.subdomain||"",this.url=this.Aa());d.ibs instanceof Array&&d.ibs.length&&(this.H=j);if(!a.idSyncDisable3rdPartySyncing&&(this.H||a.la)&&this.e&&"nosubdomainreturned"!==this.e&&!this.M)(i.ga||"complete"===o.readyState||"loaded"===o.readyState)&&this.Z();"function"===typeof a.idSyncIDCallResult?a.idSyncIDCallResult(d):
this.p(d);"function"===typeof a.idSyncAfterIDCallResult&&a.idSyncAfterIDCallResult(d)},ua:function(d,c){return a.Ra||!d||c-d>v.ha}};a.Pa=u;0>m.indexOf("@")&&(m+="@AdobeOrg");a.marketingCloudOrgID=m;a.cookieName="AMCV_"+m;a.sessionCookieName="AMCVS_"+m;a.cookieDomain=a.ma();a.cookieDomain==l.location.hostname&&(a.cookieDomain="");a.loadSSL=0<=l.location.protocol.toLowerCase().indexOf("https");a.loadTimeout=500;a.marketingCloudServer=a.audienceManagerServer="dpm.demdex.net";if(t&&"object"==typeof t){for(var E in t)!Object.prototype[E]&&
(a[E]=t[E]);a.idSyncContainerID=a.idSyncContainerID||0;a.f();E=a.b(F);var H=Math.ceil((new Date).getTime()/v.O);!a.idSyncDisableSyncs&&u.ua(E,H)&&(a.k(q,-1),a.c(F,H));a.getMarketingCloudVisitorID();a.getAudienceManagerLocationHint();a.getAudienceManagerBlob()}if(!a.idSyncDisableSyncs){u.va();G.Y(window,"load",function(){var d=u;i.ga=j;!a.idSyncDisable3rdPartySyncing&&(d.H||a.la)&&d.e&&"nosubdomainreturned"!==d.e&&d.url&&!d.M&&d.Z()});try{a.X.K(function(a){u.K(a.data)},u.I)}catch(I){}}}
Visitor.getInstance=function(m,t){var a,l=window.s_c_il,i;0>m.indexOf("@")&&(m+="@AdobeOrg");if(l)for(i=0;i<l.length;i++)if((a=l[i])&&"Visitor"==a._c&&a.marketingCloudOrgID==m)return a;return new Visitor(m,t)};(function(){function m(){t.ga=a}var t=window.Visitor,a=t.ja;a||(a=!0);window.addEventListener?window.addEventListener("load",m):window.attachEvent&&window.attachEvent("onload",m)})();


</script><script>
/* mbt app measurement config */
/* globals Visitor, visitor, AppMeasurement, $t, s, _satellite, FlashDetect */

$t('register', 'dtm_adobeAppMeasurmentLoaded');

window.s = new AppMeasurement();

//custom added variables
s.continuousView = 0;
s.noValue = 'not available';
s.topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];

/* Link Tracking Config */
s.trackingServer = 'nbcume.sc.omtrdc.net';
s.trackingServerSecure = s.trackingServer;
s.trackDownloadLinks = true;
s.trackExternalLinks = true;
s.trackInlineStats = true;
s.linkDownloadFileTypes = 'exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx';
s.linkLeaveQueryString = true;
s.linkTrackVars = 'None';
s.linkTrackEvents = 'None';
s.linkInternalFilters = s.topLevelDomain + ',javascript:,mailto:,facebook.com/sharrer,twitter.com/intent'; // jshint ignore:line

/* settings for actifity map */
s.ActivityMap.regionIDAttribute = 'class';

/* setup visitor API */
window.visitor = new Visitor('A8AB776A5245B4220A490D44@AdobeOrg', { trackingServer: s.trackingServer });
s.visitor = visitor;

//account settings per vertical/brand
s.verticalSettings = {
    today: {
        stageAccount: 'nbcutodaycomdev',
        prodAccount: 'nbcutodaycomprod',
        visitorNamespace: 'nbcuniversal'
    },
    news: {
        stageAccount: 'nbcunbcnewscomdev',
        prodAccount: 'msnbcnbcnewscomprod',
        visitorNamespace: 'msnbc'
    },
    msnbc: {
        stageAccount: 'nbcumsnbccomdev',
        prodAccount: 'msnbcdotcom',
        visitorNamespace: 'msnbc'
    }
};

(function applyVerticalSettings() {
    // default to news
    var brand = 'news';
    var isStaging = document.location.hostname.match(/([a-z0-9])+[^.]/)[0] === 'staging';

    if (s.topLevelDomain === 'today.com') {
        //getting brand from URL for now for today
        brand = 'today';
    } else if (s.topLevelDomain === 'msnbc.com') {
        brand = 'msnbc';
    }
    // set all values in vertical settings to s obj
    for (var setting in s.verticalSettings[brand]) {
        s[setting] = s.verticalSettings[brand][setting];
    }

    //switch account based on DTM stage
    s.account = (function() {
        if (_satellite && _satellite.buildInfo && _satellite.buildInfo.environment === 'production') {
            return s.prodAccount;
        }
        return s.stageAccount;
    })();
})();

/* the plugin section is basicaly global values that are interprated right before the image request is sent */
function s_doPlugins(s) {

    //campaign tracking
    s.campaign = s.custGetQS("cid");

    //urls change, so this sets them on track.
    s.pageURL = document.location.href;

    //extend global values (values upstream take presidence)
    s.contextData = s.extendArray({
        //defaults
        'news.adblock': s.cookieRead('i_abd') || s.notValue,
        'news.date': s.customTimeParting('d'),
        'news.day': s.customTimeParting('dw'), // day of the week
        'news.flashversion': (function() {
            //report flash version using Flash Detect library
            if (typeof FlashDetect === "undefined") {
                return s.notValue;
            } else {
                return FlashDetect.raw || "no flash";
            }
        })(),
        'news.hour': s.customTimeParting('h'),
        'news.kruxid': localStorage.getItem('kxuser'),
        'news.minute': s.customTimeParting('m'),
        'news.omnitureid': s.marketingCloudVisitorID,
        'news.pagename': s.pageName,
        'news.pageurl': document.location.href,
        'news.previouspage': (function() {
            var prevPage = !s.abort && s.getPreviousValue(s.pageName, 'prevVal_pn');
            return prevPage ? prevPage : 'not available';
        })(),
        'news.referrer': document.referrer ? document.referrer : 'no referrer url',
        'news.scrollcount': (function() {
            // increment a pageCount for continuous consumption pageviews
            if (!s.linkType && !s.clickObject && !s.abort) {
                s.continuousView += 1;
            }
            return s.continuousView;
        })(),
        'news.server': s.topLevelDomain,
        'news.sessionnumber': s.getVisitNum(),
        'news.timezone': s.customTimeParting('tz'),
        'news.xfinityheader': s.cookieRead("P7"),
        'news.uiexperiment': s.custGetQS("icid"),
        'news.uxexperiment': (function() {
            //example 2147483647~rv=8~id=b7c90f942ae0282250a0418fbf11f00a~rn=MSNBC_Video_Player_vs._Bento%20B'
            var cookieName = (function() {
                if (s.topLevelDomain === 'nbcnews.com') {
                    return 'akaas_NBCNews';
                }
                if (s.topLevelDomain === 'msnbc.com') {
                    return 'akaas_MSNBC';
                }
                if (s.topLevelDomain === 'today.com') {
                    return 'akaas_TODAY';
                }
            })();
            var returnString = false;
            var value = s.cookieRead(cookieName).split('~');
            if (value.length >= 2) {
                returnString = value[1];
            }
            return returnString;
        })(),
        'news.homepagecurtain': (function() {
            var cookieName = 'curtainEnd';
            var validDate = function(d) { return d && d.getTime && !isNaN(d.getTime()); };
            var cookieVal = s.cookieRead(cookieName);
            var curDate = cookieVal && new Date(parseInt(cookieVal));
            var now = new Date();
            if (!cookieVal || !validDate(curDate)) {
                return s.noValue;
            } else if (now <= curDate) {
                return 'yes';
            } else {
                return 'no';
            }
        })()
    }, s.contextData);

    //add the demdex context var
    var demDexCookie = s.Util.cookieRead('aam_uuid') || s.Util.cookieRead('aam_did');
    s.contextData['tve.did'] = demDexCookie ? demDexCookie : 'demdex cookie not set';

    //set linkTrackVars to all contextData;
    s.linkTrackVars = false;
    for (var key in s.contextData) {
        key = 'contextData.' + key;
        s.linkTrackVars = s.linkTrackVars ? s.linkTrackVars + ',' + key : key;
    }
}

/* Plugin Config */
s.usePlugins = true;
s.doPlugins = s_doPlugins;

/* plugins and helpers (ignore lint for plugins)*/
/* jshint ignore:start */

/*
 * extend arrays recursively
 * by Jeremy F.
 */
s.extendArray = function(defaults, options) { defaults = defaults || {}; for (var prop in options) { if (typeof options[prop] === 'object') { defaults[prop] = s.extendArray(defaults[prop], options[prop]); } else { defaults[prop] = options[prop]; } } return defaults; };

/*
 * Custom getQuerySting to use window.location V1.0 from MDN
 * by Jeremy F.
 */

s.custGetQS = function(key) { return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]" + escape(key).replace(/[\.\+\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1")); }

/* custom time parting function */
s.customTimeParting = function(value) {
    var d = new Date();
    var da = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    switch (value) {
        case 'm':
            return ("0" + d.getHours()).slice(-2) + ":" + ("0" + d.getMinutes()).slice(-2);
        case 'h':
            return d.getHours() + ":00";
        case 'dw':
            return da[d.getDay()];
        case 'd':
            return (d.getMonth() + 1) + "/" + d.getDate() + "/" + d.getFullYear();
        case 'tz':
            return d.getTimezoneOffset() / 60 * -1;
        default:
            return "";
    }
}

/*
 * Plugin: getPreviousValue_v1.0 - return previous value of designated
 *   variable (requires split utility)
 */
s.getPreviousValue = new Function("v", "c", "el", "" + "var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el" + "){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i" + "){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t)" + ":s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?" + "s.c_w(c,v,t):s.c_w(c,'no value',t);return r}");
/*
 * Utility Function: split v1.5 (JS 1.0 compatible)
 */
s.split = new Function("l", "d", "" + "var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x" + "++]=l.substring(0,i);l=l.substring(i+d.length);}return a");

s.getVisitNum = new Function("" + "var s\x3dthis,e\x3dnew Date(),cval,cvisit,ct\x3de.getTime(),c\x3d's_vnum',c2\x3d's" + "_invisit';e.setTime(ct+30*24*60*60*1000);cval\x3ds.c_r(c);if(cval){var" + " i\x3dcval.indexOf('\x26vn\x3d'),str\x3dcval.substring(i+4,cval.length),k;}cvis" + "it\x3ds.c_r(c2);if(cvisit){if(str){e.setTime(ct+30*60*1000);s.c_w(c2,'" +
    "true',e);return str;}else return 'unknown visit number';}else{if(st" + "r){str++;k\x3dcval.substring(0,i);e.setTime(k);s.c_w(c,k+'\x26vn\x3d'+str,e)" + ";e.setTime(ct+30*60*1000);s.c_w(c2,'true',e);return str;}else{s.c_w" + "(c,ct+30*24*60*60*1000+'\x26vn\x3d1',e);e.setTime(ct+30*60*1000);s.c_w(c2" + ",'true',e);return 1;}}");
/* jshint ignore:end */

//track that its all been loaded;
$t('track', 'dtm_adobeAppMeasurmentLoaded', { 'sc_obj': s });

</script><script>

/* version 1.3 */
/*global $t */
(function() {
    var subscribeTsEventsToNdpPlayer = function(ndpPlayer, playerBrand) {
        //set stub and make local instance of global
        var $ndp = window.$ndp || {
            events: {}
        };

        //register $t event
        $t('register', 'ndp_videoEvent', {
            'remote': false
        }); //not remote for now

        //handle ndp events
        var tsVideoEventBind = function(e) {
            //accounts for multi-video player where all events are on all players
            var activePlayerId = e.payload && e.payload.playerId;
            if ((ndpPlayer.id() === e.playerId) || !e.playerId) { //no event playerID if its old version

                var eventName = e.type && e.type[0] || '';
                //could explicitly map data here, but sending it all is more versatile
                var videoData = e.payload && e.payload.asset || {};
                //add lengths for ads to videoData to standardize
                videoData.totalLength = e.payload && Math.round(e.payload.totalLength) || 0;
                videoData.playheadPosition = e.payload && Math.round(e.payload.playheadPosition) || 0;

                $t('track', 'ndp_videoEvent', {
                    'eventIds': {
                        'playerId': ndpPlayer.id(),
                        'activePlayerId': activePlayerId,
                        'eventPlayerId': e.playerId
                    },
                    'eventType': eventName,
                    'videoData': videoData,
                    'playerBrand': playerBrand
                });
            }

        };
        // subscribe to all ndp events, based on $ndp.events "sections"
        var eventSections = ['AdEvent', 'PlaybackEvent'];
        for (var i = 0; eventSections[i]; i++) {
            for (var eventValue in $ndp.events[eventSections[i]]) {
                if (typeof $ndp.events[eventSections[i]] !== 'undefined' && typeof $ndp.events[eventSections[i]][eventValue] === 'object' && typeof $ndp.events[eventSections[i]][eventValue][0] === 'string') {
                    ndpPlayer.on($ndp.events[eventSections[i]][eventValue], tsVideoEventBind);
                }
            }
        }
    };
    if ($t('ndp_playerInit.playerObj')) {
        subscribeTsEventsToNdpPlayer($t('ndp_playerInit.playerObj'), $t('ndp_playerInit.brand'));
    } else {
        $t('on', 'ndp_playerInit', function(e, data) {
            subscribeTsEventsToNdpPlayer(data.playerObj, data.brand);
        });
    }
})();


</script><script>

/* globals $t */
(function() {
    var ranSimplereach = false;
    $t('on', 'dtm_pageView', function(e, data) {
        var pageIndex = $t(e.type + '.index', '0');
        var articleIndex = $t('jsonLd.Dataset', []).reduce(function(acum, curE, curI) {
            var pageType = curE.pageType && curE.pageType.toLowerCase();
            if (curI <= pageIndex && pageType === 'article') {
                return acum + 1;
            } else {
                return acum;
            }
        }, -1);
        var trackView = data.trackView !== false; //this will default all to true if not false
        var nativeSponsor = $t('jsonLd.Dataset.' + pageIndex + '.sponsor', false);
        var isWWW = document.location.hostname.match(/([a-z0-9])+[^.]/)[0] === 'www';
        var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];
        var brand = topLevelDomain.split('.')[0];

        if (nativeSponsor && trackView && !ranSimplereach) {
            window.__reach_config = {
                pid: (isWWW ? '58642e4d736b79ecca00151c' : '000000000000000000000000'),
                title: $t('jsonLd.NewsArticle.' + articleIndex + '.headline'),
                url: $t('jsonLd.NewsArticle.' + articleIndex + '.url'),
                date: $t('jsonLd.NewsArticle.' + articleIndex + '.datePublished'), //UTC or any ISO8601 date
                authors: [nativeSponsor, brand],
                channels: [$t('jsonLd.Dataset.' + pageIndex + '.vertical'), $t('jsonLd.Dataset' + pageIndex + '.section'), $t('jsonLd.Dataset.' + pageIndex + '.subSection')],
                tags: [$t('jsonLd.NewsArticle.' + articleIndex + '.articleId'), 'article'],
                article_id: [$t('jsonLd.NewsArticle.' + articleIndex + '.articleId')],
                ignore_errors: false
            };
            if (window.SPR && window.SPR.Reach) {
                window.SPR.Reach.collect(window.__reach_config);
            } else {
                (function() {
                    var s = document.createElement('script');
                    s.async = true;
                    s.type = 'text/javascript';
                    s.src = document.location.protocol + '//d8rk54i4mohrb.cloudfront.net/js/reach.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
                })();
            }
            ranSimplereach = true;
        } else if (trackView && ranSimplereach && window.SPR) {
            window.SPR.stop();
            ranSimplereach = false;
        }
    });
})();


</script><script>

(function () {
    /*global $t */
    var loadedScripts = {};
    var loadScript = function (address, id) {
        if (address && !loadedScripts[address]) {
            var t = document.createElement('script'); t.async = !0;
            t.src = address;
            if (id) {
                t.id = id;
            }
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(t, s);
            loadedScripts[address] = true;
        }
    };

    var skimlinkAddresses = {
        'nbcnews.com': 'https://s.skimresources.com/js/96128X1573856.skimlinks.js',
        'today.com': 'https://s.skimresources.com/js/96128X1550925.skimlinks.js'
    };

    $t('on', 'dtm_pageView', function (e, data) {
        var trackView = data.trackView !== false; //this will default all to true if not false
        var pageIndex = $t(e.type + '.index', 0);
        var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];

        //Tracks only ECommerce.
        if (trackView && $t('jsonLd.Dataset.' + pageIndex + '.ecommerceEnabled', false)) {
            loadScript(skimlinkAddresses[topLevelDomain]);
        }
    });
})();


</script><script>
/* globals s, $t */
(function () {
    var showList = {
        'msnbc': { //show should be signaled by the site, but for now we just have a list
            'firstlook': true,//msnbc shows(scraped from nav)
            'morning-joe': true,
            'msnbc-live-hallie-jackson': true,
            'velshi-ruhle': true,
            'andrea-mitchell': true,
            'craig-melvin': true,
            'msnbc-live-katy-tur': true,
            'msnbc-live-with-ali-velshi': true,
            'deadline-white-house': true,
            'mtp-daily': true,
            'msnbc-live-ari-melber': true,
            'hardball': true,
            'all': true,
            'rachel-maddow-show': true,
            'the-last-word': true,
            '11th-hour-with-brian-williams': true,
            'originals': true,
            'your-business': true,
            'hugh-hewitt': true,
            'politicsnation': true,
            'am-joy': true,
            'weekends-with-alex': true,
            'kasiedc': true
        },
        'nbcnews': {
            'nightly-news': true,//nbcnews shows
            'meet-the-press': true,
            'dateline': true
        },
        'today': {
            'on-the-show': true, //today shows
            'megyn-kelly-today': true,
            'klgandhoda': true,
            'weekend-today': true,
            'sunday-today': true,
            'originals': true
        }
    };
    var brand = function () {
        //would be better is this wasnt based on domain
        if (s.topLevelDomain === 'today.com') {
            return 'today';
        } else if (s.topLevelDomain === 'msnbc.com') {
            return 'msnbc';
        } else {
            return 'nbcnews';
        }
    };
    var convertDate = function (dateString) {
        //input: 2015-06-04T14:40:45.000+0000, output: 2015-06-04 14:40:45 Z
        var dateObj = new Date(dateString);
        if (dateObj.toString() !== 'Invalid Date') {
            return dateObj.toISOString().replace('T', ' ').replace('.000Z', ' Z');
        } else {
            return dateString;
        }
    };

    var checkIfEmbeddedVideo = function () {
        var i, embeddedVideoPaths = [
            /\/embedded-video\//,
            /^\/playmaker\/embed/
        ];
        for (i = 0; (embeddedVideoPaths[i]); i++) {
            if (document.location.pathname.search(embeddedVideoPaths[i]) != -1) {
                return true;
            }
        }
        return false;
    };

    $t('on', 'dtm_pageView', function (e, data) {

        var slug = function () {
            var slug = $t(e.type + '.url').match(/[^/]+(?=\/$|$)/g) || '';
            return slug.toString();
        };
        var pageIndex = $t(e.type + '.index', '0');
        var trackView = data.trackView !== false; //this will default all to true if not false

        var contentType = (function () {
            //if its native content, its just native
            if (pageIndex === -1) {
                //if there is an arror loading metadata, page index is -1
                return 'error';
            }
            if ($t('jsonLd.Dataset.' + pageIndex + '.sponsor', false)) {
                return 'native';
            }
            var pageType = $t('jsonLd.Dataset.' + pageIndex + '.pageType', '').toLowerCase(); //only considers the most recent page for now
            if (document.location.pathname.indexOf('/card/') != -1) { //override for legacy card pages
                pageType = 'card';
            }
            //make pagetype for embedded videos
            if (checkIfEmbeddedVideo()) {
                pageType = 'embedded';
            }
            switch (pageType) {
                case 'article':
                    if (document.location.pathname.indexOf('/live-blog/') != -1) { //override for liveblog, this should be represented bby the dataset later
                        return 'liveblog';
                    } else {
                        return 'post';
                    }
                case 'card':
                    return 'card';
                case 'gallery':
                    return 'gallery';
                case 'front':
                    if ($t(e.type + '.url') === '/') {
                        return 'cover';
                    } else if ($t(e.type + '.initiator') === 'transporter') {
                        return 'inline vertical';
                    } else {
                        return 'vertical';
                    }
                case 'subfront': //i think 'SubFront' is gone?
                case 'sectionfront':
                    if (showList[brand()][slug()]) {
                        return 'show';
                    } else {
                        return 'subvertical';
                    }
                case 'video':
                    return 'canonical video';
                case 'embedded':
                    return 'embedded video';
                case 'notfound':
                case 'internalservererror':
                    return 'error';
                default:
                    return s.noValue;
            }
        })();

        //adobe values - clear before each pageview
        s.clearVars();

        s.pageName = (function () {
            var pn = brand() + ':';
            if (contentType === 'subvertical') {
                //subvertical is weird
                pn += $t('jsonLd.Dataset.' + pageIndex + '.vertical', s.noValue) + ':' + contentType + ':' + slug();
            } else if (contentType === 'inline vertical') {
                //urls dont change, so slug is not right
                pn += contentType + ':' + $t('jsonLd.Dataset.' + pageIndex + '.vertical', s.noValue);
            } else if (contentType === 'cover' && $t('jsonLd.Dataset.' + pageIndex + '.vertical', s.noValue) === 'news') {
                //Temporary change to identify bento cover in Omniture
                pn += contentType + ':new';
            } else {
                pn += contentType + (slug() ? (':' + slug()) : '');
            }
            return pn;
        })();
        s.contextData = {
            'news.contenttype': contentType,
            'news.contentcategory': (function () { // section
                if ($t('jsonLd.Dataset.' + pageIndex + '.pageType', '').toLowerCase() === 'front') {
                    return contentType;
                } else {
                    return $t('jsonLd.Dataset.' + pageIndex + '.section', s.noValue);
                }
            })(),
            'news.subcat1': $t('jsonLd.Dataset.' + pageIndex + '.subSection', s.noValue),
            //'news.breakingnews':s.noValue, // 'True' on TODAY, URL on NBCNews
            //'news.contentsource':s.noValue,
            'news.nativesponsor': $t('jsonLd.Dataset.' + pageIndex + '.sponsor', s.noValue),
            'news.subverticalname': $t('jsonLd.Dataset.' + pageIndex + '.subVertical', s.noValue),
            'news.templatename': $t('jsonLd.Dataset.' + pageIndex + '.packageId', s.noValue),
            'news.verticalname': $t('jsonLd.Dataset.' + pageIndex + '.vertical', s.noValue),
            'news.ecommerceenabled': $t('jsonLd.Dataset.' + pageIndex + '.ecommerceEnabled'),
            //test for ldjson loading multiple times from react-helmet
            'news.jsonld': $t('jsonLd.Dataset', []).length
        };

        // switch on contentType 
        switch (contentType) {
            case 'post':
            case 'liveblog':
            case 'card':
                //article index for multi-type content
                var articleIndex = $t('jsonLd.Dataset', []).reduce(function (acum, curE, curI) {
                    var pageType = curE.pageType && curE.pageType.toLowerCase();
                    if (curI <= pageIndex && pageType === 'article') {
                        return acum + 1;
                    } else {
                        return acum;
                    }

                }, -1);
                articleIndex = articleIndex === -1 ? 0 : articleIndex;
                s.contextData = s.extendArray(s.contextData, {
                    'news.docid': $t('jsonLd.NewsArticle.' + articleIndex + '.identifier.value', s.noValue),
                    //'news.videoplayercount': $t('jsonLd.NewsArticle.' + articleIndex + '.video', []).length || s.noValue, //ldjson video removed for now
                    'news.videoplayercount': $t('jsonLd.Dataset.' + pageIndex + '.videoPlayerCount', s.noValue),
                    'news.origpagepublishdate': convertDate($t('jsonLd.NewsArticle.' + articleIndex + '.datePublished', s.noValue)),
                    'news.shortsummary': $t('jsonLd.NewsArticle.' + articleIndex + '.description', s.noValue),
                    'news.show': s.noValue, //[TODO] need this from video objects
                    'news.storylines': s.noValue, //[TODO] need this from video objects
                    'news.modpagepublishdate': convertDate($t('jsonLd.NewsArticle.' + articleIndex + '.dateModified', s.noValue)), // 2017-08-17T16:40:53.000Z
                    'news.author': $t('jsonLd.NewsArticle.' + articleIndex + '.author.0.name', s.noValue),
                    'news.headline': $t('jsonLd.NewsArticle.' + articleIndex + '.headline', s.noValue),
                    'news.label': $t('jsonLd.Dataset.' + articleIndex + '.label', s.noValue)
                });
                break;
            case 'inline vertical':
            case 'vertical':
                break;
            case 'subvertical':
                break;
            case 'show':
                s.contextData = s.extendArray(s.contextData, {
                    'news.subverticalname': s.noValue, //subvertical is wrong in the template 
                    'news.contentcategory': $t('jsonLd.Dataset.' + pageIndex + '.section', slug()) //using slug as show name
                });
                break;
            case 'gallery':
                // indexing set to 0, non dynamic
                s.contextData = s.extendArray(s.contextData, {
                    'news.docid': $t('jsonLd.imageGallery.0.identifier.value', s.noValue),
                    'news.origpagepublishdate': convertDate($t('jsonLd.imageGallery.0.dateModified', s.noValue)),
                    'news.shortsummary': $t('jsonLd.imageGallery.0.description', s.noValue), // [TODO] not sure if this is headline?
                    'news.modpagepublishdate': convertDate($t('jsonLd.imageGallery.0.dateModified', s.noValue)), // 2017-08-17T16:40:53.000Z
                    'news.author': $t('jsonLd.imageGallery.0.author.0.name', s.noValue),
                    'news.slideshowname': $t('jsonLd.imageGallery.0.headline', s.noValue),
                    'news.headline': $t('jsonLd.imageGallery.0.headline', s.noValue)
                });
                break;
            case 'canonical video':
                // indexing set to 0, non dynamic
                s.contextData = s.extendArray(s.contextData, {
                    'news.contentcategory': 'video', //section is hard coded
                    'news.modpagepublishdate': convertDate($t('jsonLd.NewsArticle.0.dateModified', s.noValue)), // 2017-08-17T16:40:53.000Z
                    'news.origpagepublishdate': convertDate($t('jsonLd.NewsArticle.0.datePublished', s.noValue))
                });
                break;
        }
        //track paegview, or only set pageview values
        if (trackView) {
            s.t();
        }
    });
})();
</script><script>

//DIL library starts. ***Not to be altered**
"function"!==typeof window.DIL&&(window.DIL=function(a,c){var e=[],b,h;a!==Object(a)&&(a={});var g,k,q,m,r,n,x,E,t,A,L,B,C,F;g=a.partner;k=a.containerNSID;q=!!a.disableDestinationPublishingIframe;m=a.iframeAkamaiHTTPS;r=a.mappings;n=a.uuidCookie;x=!0===a.enableErrorReporting;E=a.visitorService;t=a.declaredId;A=!0===a.removeFinishedScriptsAndCallbacks;L=!0===a.delayAllUntilWindowLoad;B=!0===a.disableIDSyncs;C="undefined"===typeof a.secureDataCollection||!0===a.secureDataCollection;F=!0===a.useCORSOnly;
var M,N,I,G,O,P,Q,R;M=!0===a.disableScriptAttachment;N=!0===a.disableDefaultRequest;I=a.afterResultForDefaultRequest;G=a.dpIframeSrc;O=!0===a.testCORS;P=!0===a.useJSONPOnly;Q=a.visitorConstructor;R=!0===a.disableCORS;x&&DIL.errorModule.activate();var T=!0===window._dil_unit_tests;(b=c)&&e.push(b+"");if(!g||"string"!==typeof g)return b="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:b,filename:"dil.js"}),Error(b);b="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";
if(k||"number"===typeof k)k=parseInt(k,10),!isNaN(k)&&0<=k&&(b="");b&&(k=0,e.push(b),b="");h=DIL.getDil(g,k);if(h instanceof DIL&&h.api.getPartner()===g&&h.api.getContainerNSID()===k)return h;if(this instanceof DIL)DIL.registerDil(this,g,k);else return new DIL(a,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+g+" and containerNSID = "+k);var y={IS_HTTPS:C||"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC",
MILLIS_PER_DAY:864E5,DIL_COOKIE_NAME:"AAMC_"+encodeURIComponent(g)+"_"+k,FIRST_PARTY_SYNCS:"AMSYNCS",FIRST_PARTY_SYNCS_ON_PAGE:"AMSYNCSOP"},J={stuffed:{}},v={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],
num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:k+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2E3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(d){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=
!0;var l=this,s,f,a,b;if("function"===typeof d&&"function"===typeof d.getInstance){if(E===Object(E)&&(s=E.namespace)&&"string"===typeof s)f=d.getInstance(s,{idSyncContainerID:k});else{this.releaseType="no namespace";this.releaseRequests();return}if(f===Object(f)&&f instanceof d&&"function"===typeof f.isAllowed&&"function"===typeof f.getMarketingCloudVisitorID&&"function"===typeof f.getCustomerIDs&&"function"===typeof f.isOptedOut){this.VisitorAPI=d;if(!f.isAllowed()){this.releaseType="VisitorAPI not allowed";
this.releaseRequests();return}this.instance=f;a=function(d){"VisitorAPI"!==l.releaseType&&(l.mid=d,l.releaseType="VisitorAPI",l.releaseRequests())};b=f.getMarketingCloudVisitorID(a);if("string"===typeof b&&b.length){a(b);return}setTimeout(function(){"VisitorAPI"!==l.releaseType&&(l.releaseType="timeout",l.releaseRequests())},this.getLoadTimeout());return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(e){this.releaseRequests()}},releaseRequests:function(){this.calledBack=
!0;p.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():null},getMIDQueryString:function(){var d=w.isPopulatedString,l=this.getMarketingCloudVisitorID();d(this.mid)&&this.mid===l||(this.mid=l);return d(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(d){if(d===Object(d)){var l="",s=[],f=[],a,b;for(a in d)d.hasOwnProperty(a)&&
(f[0]=a,b=d[a],b===Object(b)&&(f[1]=b.id||"",f[2]=b.authState||0,s.push(f),f=[]));if(f=s.length)for(d=0;d<f;d++)l+="&d_cid_ic="+u.encodeAndBuildRequest(s[d],"%01");return l}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(d){this.isOptedOut=d;this.isOptedOutCallbackCalled=!0;p.registerRequest()},getLoadTimeout:function(){var d=
this.instance;if(d){if("function"===typeof d.getLoadTimeout)return d.getLoadTimeout();if("undefined"!==typeof d.loadTimeout)return d.loadTimeout}return this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(d,l){var s=w.isPopulatedString,f=encodeURIComponent;if(d===Object(d)&&s(l)){var a=d.dpid,b=d.dpuuid,e=null;if(s(a)&&s(b)){e=f(a)+"$"+f(b);if(!0===this.declaredIdCombos[e])return"setDeclaredId: combo exists for type '"+
l+"'";this.declaredIdCombos[e]=!0;this.declaredId[l]={dpid:a,dpuuid:b};return"setDeclaredId: succeeded for type '"+l+"'"}}return"setDeclaredId: failed for type '"+l+"'"},getDeclaredIdQueryString:function(){var d=this.declaredId.request,l=this.declaredId.init,a=encodeURIComponent,f="";null!==d?f="&d_dpid="+a(d.dpid)+"&d_dpuuid="+a(d.dpuuid):null!==l&&(f="&d_dpid="+a(l.dpid)+"&d_dpuuid="+a(l.dpuuid));return f}},registerRequest:function(d){var l=this.firingQueue;d===Object(d)&&l.push(d);this.firing||
!l.length||L&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,d=l.shift(),d.src=d.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),w.isPopulatedString(d.corsPostData)&&(d.corsPostData=d.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),D.fireRequest(d),this.firstRequestHasFired||
"script"!==d.tag&&"cors"!==d.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(Q||window.Visitor)},requestRemoval:function(d){if(!A)return"removeFinishedScriptsAndCallbacks is not boolean true";var l=this.toRemove,a,f;d===Object(d)&&(a=d.script,f=d.callbackName,(a===Object(a)&&"SCRIPT"===a.nodeName||"no script created"===a)&&"string"===typeof f&&f.length&&l.push(d));if(this.readyToRemove&&l.length){f=l.shift();a=f.script;f=f.callbackName;"no script created"!==a?
(d=a.src,a.parentNode.removeChild(a)):d=a;window[f]=null;try{delete window[f]}catch(b){}this.removed.push({scriptSrc:d,callbackName:f});DIL.variables.scriptsRemoved.push(d);DIL.variables.callbacksRemoved.push(f);return this.requestRemoval()}return"requestRemoval() processed"}};h=function(){var d="http://fast.",l="?d_nsid="+k+"#"+encodeURIComponent(document.location.href);if("string"===typeof G&&G.length)return G+l;y.IS_HTTPS&&(d=!0===m?"https://fast.":"https://");return d+g+".demdex.net/dest5.html"+
l};var z={THROTTLE_START:3E4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:"destination_publishing_iframe_"+g+"_"+k,url:h(),onPagePixels:[],iframeHost:null,getIframeHost:function(d){if("string"===typeof d){var l=d.split("/");if(3<=l.length)return l[0]+"//"+l[2];e.push("getIframeHost: url is malformed: "+d);return d}},iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:y.POST_MESSAGE_ENABLED?15:100,ibsDeleted:[],jsonWaiting:[],jsonProcessed:[],
canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function d(){f=document.createElement("iframe");f.sandbox="allow-scripts allow-same-origin";f.title="Adobe ID Syncing iFrame";f.id=a.id;f.style.cssText="display: none; width: 0; height: 0;";f.src=a.url;a.newIframeCreated=!0;l();document.body.appendChild(f)}function l(){u.addListener(f,"load",function(){f.className="aamIframeLoaded";
a.iframeHasLoaded=!0;a.requestToProcess()})}var a=this,f=document.getElementById(this.id);f?"IFRAME"!==f.nodeName?(this.id+="_2",this.iframeIdChanged=!0,d()):(this.newIframeCreated=!1,"aamIframeLoaded"!==f.className?(this.originalIframeHasLoadedAlready=!1,l()):(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.iframe=f,this.requestToProcess())):d();this.iframe=f},requestToProcess:function(d,l){var a=this;d&&!w.isEmptyObject(d)&&this.jsonWaiting.push([d,l]);if((this.receivedThirdPartyCookiesNotification||
!y.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var f=this.jsonWaiting.shift();this.process(f[0],f[1]);this.requestToProcess()}this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){a.messageSendingInterval=y.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},processSyncOnPage:function(d){var l,a,f;if((l=d.ibs)&&l instanceof Array&&(a=l.length))for(d=
0;d<a;d++)f=l[d],f.syncOnPage&&this.checkFirstPartyCookie(f,"","syncOnPage")},process:function(d,l){var a=encodeURIComponent,f,b,e,c,g,h;l===Object(l)&&(h=u.encodeAndBuildRequest(["",l.dpid||"",l.dpuuid||""],","));if((f=d.dests)&&f instanceof Array&&(b=f.length))for(e=0;e<b;e++)c=f[e],g=[a("dests"),a(c.id||""),a(c.y||""),a(c.c||"")],this.addMessage(g.join("|"));if((f=d.ibs)&&f instanceof Array&&(b=f.length))for(e=0;e<b;e++)c=f[e],g=[a("ibs"),a(c.id||""),a(c.tag||""),u.encodeAndBuildRequest(c.url||
[],","),a(c.ttl||""),"",h,c.fireURLSync?"true":"false"],c.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(g.join("|")):c.fireURLSync&&this.checkFirstPartyCookie(c,g.join("|")));if((f=d.dpcalls)&&f instanceof Array&&(b=f.length))for(e=0;e<b;e++)c=f[e],g=c.callback||{},g=[g.obj||"",g.fn||"",g.key||"",g.tag||"",g.url||""],g=[a("dpm"),a(c.id||""),a(c.tag||""),u.encodeAndBuildRequest(c.url||[],","),a(c.ttl||""),u.encodeAndBuildRequest(g,","),h],this.addMessage(g.join("|"));this.jsonProcessed.push(d)},
checkFirstPartyCookie:function(d,a,s){var f=(s="syncOnPage"===s?!0:!1)?y.FIRST_PARTY_SYNCS_ON_PAGE:y.FIRST_PARTY_SYNCS,b=this.getOnPageSyncData(f),c=!1,e=!1,g=Math.ceil((new Date).getTime()/y.MILLIS_PER_DAY);b?(b=b.split("*"),e=this.pruneSyncData(b,d.id,g),c=e.dataPresent,e=e.dataValid,c&&e||this.fireSync(s,d,a,b,f,g)):(b=[],this.fireSync(s,d,a,b,f,g))},getOnPageSyncData:function(d){var a=p.adms.instance;return a&&"function"===typeof a.idSyncGetOnPageSyncInfo?a.idSyncGetOnPageSyncInfo():u.getDilCookieField(d)},
pruneSyncData:function(d,a,b){var f=!1,e=!1,c,g,h;if(d instanceof Array)for(g=0;g<d.length;g++)c=d[g],h=parseInt(c.split("-")[1],10),c.match("^"+a+"-")?(f=!0,b<h?e=!0:(d.splice(g,1),g--)):b>=h&&(d.splice(g,1),g--);return{dataPresent:f,dataValid:e}},manageSyncsSize:function(d){if(d.join("*").length>this.MAX_SYNCS_LENGTH)for(d.sort(function(d,a){return parseInt(d.split("-")[1],10)-parseInt(a.split("-")[1],10)});d.join("*").length>this.MAX_SYNCS_LENGTH;)d.shift()},fireSync:function(d,a,b,f,e,c){function g(d,
a,l,f){return function(){h.onPagePixels[d]=null;var b=h.getOnPageSyncData(l),e=[];if(b){var b=b.split("*"),c,s,g;c=0;for(s=b.length;c<s;c++)g=b[c],g.match("^"+a.id+"-")||e.push(g)}h.setSyncTrackingData(e,a,l,f)}}var h=this;if(d){if("img"===a.tag){d=a.url;b=y.IS_HTTPS?"https:":"http:";var k,n,t;f=0;for(k=d.length;f<k;f++){n=d[f];t=/^\/\//.test(n);var p=new Image;u.addListener(p,"load",g(this.onPagePixels.length,a,e,c));p.src=(t?b:"")+n;this.onPagePixels.push(p)}}}else this.addMessage(b),this.setSyncTrackingData(f,
a,e,c)},addMessage:function(d){var a=encodeURIComponent,a=x?a("---destpub-debug---"):a("---destpub---");this.messages.push(a+d)},setSyncTrackingData:function(d,a,b,f){d.push(a.id+"-"+(f+Math.ceil(a.ttl/60/24)));this.manageSyncsSize(d);u.setDilCookieField(b,d.join("*"))},sendMessages:function(){var d=this,a;this.messages.length?(a=this.messages.shift(),DIL.xd.postMessage(a,this.url,this.iframe.contentWindow),this.messagesPosted.push(a),setTimeout(function(){d.sendMessages()},this.messageSendingInterval)):
this.sendingMessages=!1},receiveMessage:function(d){var a=/^---destpub-to-parent---/;"string"===typeof d&&a.test(d)&&(a=d.replace(a,"").split("|"),"canSetThirdPartyCookies"===a[0]&&(this.canSetThirdPartyCookies="true"===a[1]?!0:!1,this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(d))}},K={traits:function(d){w.isValidPdata(d)&&(v.sids instanceof Array||(v.sids=[]),u.extendArray(v.sids,d));return this},pixels:function(d){w.isValidPdata(d)&&(v.pdata instanceof
Array||(v.pdata=[]),u.extendArray(v.pdata,d));return this},logs:function(d){w.isValidLogdata(d)&&(v.logdata!==Object(v.logdata)&&(v.logdata={}),u.extendObject(v.logdata,d));return this},customQueryParams:function(d){w.isEmptyObject(d)||u.extendObject(v,d,p.reservedKeys);return this},signals:function(d,a){var b,f=d;if(!w.isEmptyObject(f)){if(a&&"string"===typeof a)for(b in f={},d)d.hasOwnProperty(b)&&(f[a+b]=d[b]);u.extendObject(v,f,p.reservedKeys)}return this},declaredId:function(d){p.declaredId.setDeclaredId(d,
"request");return this},result:function(d){"function"===typeof d&&(v.callback=d);return this},afterResult:function(d){"function"===typeof d&&(v.postCallbackFn=d);return this},useImageRequest:function(){v.useImageRequest=!0;return this},clearData:function(){v={};return this},submit:function(){D.submitRequest(v);v={};return this},getPartner:function(){return g},getContainerNSID:function(){return k},getEventLog:function(){return e},getState:function(){var d={},l={};u.extendObject(d,p,{callbackPrefix:!0,
useJSONP:!0,registerRequest:!0});u.extendObject(l,z,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{initConfig:a,pendingRequest:v,otherRequestInfo:d,destinationPublishingInfo:l}},idSync:function(d){if(B)return"Error: id syncs have been disabled";if(d!==Object(d)||"string"!==typeof d.dpid||!d.dpid.length)return"Error: config or config.dpid is empty";if("string"!==typeof d.url||!d.url.length)return"Error: config.url is empty";var a=d.url,b=d.minutesToLive,f=encodeURIComponent,
c,a=a.replace(/^https:/,"").replace(/^http:/,"");if("undefined"===typeof b)b=20160;else if(b=parseInt(b,10),isNaN(b)||0>=b)return"Error: config.minutesToLive needs to be a positive number";c=u.encodeAndBuildRequest(["",d.dpid,d.dpuuid||""],",");d=["ibs",f(d.dpid),"img",f(a),b,"",c];z.addMessage(d.join("|"));p.firstRequestHasFired&&z.requestToProcess();return"Successfully queued"},aamIdSync:function(d){if(B)return"Error: id syncs have been disabled";if(d!==Object(d)||"string"!==typeof d.dpuuid||!d.dpuuid.length)return"Error: config or config.dpuuid is empty";
d.url="//dpm.demdex.net/ibs:dpid="+d.dpid+"&dpuuid="+d.dpuuid;return this.idSync(d)},passData:function(d){if(w.isEmptyObject(d))return"Error: json is empty or not an object";z.ibsDeleted.push(d.ibs);delete d.ibs;D.defaultCallback(d);return d},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var d=p,a=d.modStatsParams,b=d.platformParams,f;if(!a){a={};for(f in b)b.hasOwnProperty(f)&&!d.nonModStatsParams[f]&&(a[f.replace(/^d_/,"")]=b[f]);d.modStatsParams=a}return a}},
D={corsMetadata:function(){var d="none",a=!0;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?d="XMLHttpRequest":(new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/"))()?d="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(a=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(a=!1));return{corsType:d,corsCookiesEnabled:a}}(),getCORSInstance:function(){return"none"===
this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(d){p.registerRequest(D.createQueuedRequest(d));return!0},createQueuedRequest:function(d){var a=p,b,f=d.callback,c="img",e;if(!w.isEmptyObject(r)){var g,h,n;for(g in r)r.hasOwnProperty(g)&&(h=r[g],null!=h&&""!==h&&g in d&&!(h in d||h in p.reservedKeys)&&(n=d[g],null!=n&&""!==n&&(d[h]=n)))}w.isValidPdata(d.sids)||(d.sids=[]);w.isValidPdata(d.pdata)||(d.pdata=[]);w.isValidLogdata(d.logdata)||(d.logdata={});
d.logdataArray=u.convertObjectToKeyValuePairs(d.logdata,"=",!0);d.logdataArray.push("_ts="+(new Date).getTime());"function"!==typeof f&&(f=this.defaultCallback);a.useJSONP=!0!==d.useImageRequest;a.useJSONP&&(c="script",b=a.callbackPrefix+"_"+k+"_"+(new Date).getTime());a=this.makeRequestSrcData(d,b);P&&!F||!(e=this.getCORSInstance())||(c="cors");return{tag:c,src:a.src,corsSrc:a.corsSrc,internalCallbackName:b,callbackFn:f,postCallbackFn:d.postCallbackFn,useImageRequest:!!d.useImageRequest,requestData:d,
corsInstance:e,corsPostData:a.corsPostData}},defaultCallback:function(d,a){z.processSyncOnPage(d);var b,f,c,e,g,h,k,t,x;if((b=d.stuff)&&b instanceof Array&&(f=b.length))for(c=0;c<f;c++)if((e=b[c])&&e===Object(e)){g=e.cn;h=e.cv;k=e.ttl;if("undefined"===typeof k||""===k)k=Math.floor(u.getMaxCookieExpiresInMinutes()/60/24);t=e.dmn||"."+document.domain.replace(/^www\./,"");x=e.type;g&&(h||"number"===typeof h)&&("var"!==x&&(k=parseInt(k,10))&&!isNaN(k)&&u.setCookie(g,h,1440*k,"/",t,!1),J.stuffed[g]=h)}b=
d.uuid;w.isPopulatedString(b)&&!w.isEmptyObject(n)&&(f=n.path,"string"===typeof f&&f.length||(f="/"),c=parseInt(n.days,10),isNaN(c)&&(c=100),u.setCookie(n.name||"aam_did",b,1440*c,f,n.domain||"."+document.domain.replace(/^www\./,""),!0===n.secure));q||p.abortRequests||z.requestToProcess(d,a)},makeRequestSrcData:function(d,a){d.sids=w.removeEmptyArrayValues(d.sids||[]);d.pdata=w.removeEmptyArrayValues(d.pdata||[]);var b=p,f=b.platformParams,c=u.encodeAndBuildRequest(d.sids,","),e=u.encodeAndBuildRequest(d.pdata,
","),h=(d.logdataArray||[]).join("&");delete d.logdataArray;var n=y.IS_HTTPS?"https://":"http://",t=b.declaredId.getDeclaredIdQueryString(),x=b.adms.instance?b.adms.getCustomerIDsQueryString(b.adms.getCustomerIDs()):"",m;m=[];var r,q,v,A;for(r in d)if(!(r in b.reservedKeys)&&d.hasOwnProperty(r))if(q=d[r],r=encodeURIComponent(r),q instanceof Array)for(v=0,A=q.length;v<A;v++)m.push(r+"="+encodeURIComponent(q[v]));else m.push(r+"="+encodeURIComponent(q));m=m.length?"&"+m.join("&"):"";c="d_nsid="+f.d_nsid+
t+x+(c.length?"&d_sid="+c:"")+(e.length?"&d_px="+e:"")+(h.length?"&d_ld="+encodeURIComponent(h):"");f="&d_rtbd="+f.d_rtbd+"&d_jsonv="+f.d_jsonv+"&d_dst="+f.d_dst;n=n+g+".demdex.net/event";e=b=n+"?"+c+(b.useJSONP?f+"&d_cb="+(a||""):"")+m;2048<b.length&&(b=b.substring(0,2048).substring(0,b.lastIndexOf("&")));return{corsSrc:n+"?"+(O?"testcors=1&d_nsid="+k+"&":"")+"_ts="+(new Date).getTime(),src:b,originalSrc:e,corsPostData:c+f+m,isDeclaredIdCall:""!==t}},fireRequest:function(d){if("img"===d.tag)this.fireImage(d);
else{var a=p.declaredId,a=a.declaredId.request||a.declaredId.init||{},a={dpid:a.dpid||"",dpuuid:a.dpuuid||""};"script"===d.tag?this.fireScript(d,a):"cors"===d.tag&&this.fireCORS(d,a)}},fireImage:function(d){var a=p,c,f;a.abortRequests||(a.firing=!0,c=new Image(0,0),a.sent.push(d),c.onload=function(){a.firing=!1;a.fired.push(d);a.num_of_img_responses++;a.registerRequest()},f=function(f){b="imgAbortOrErrorHandler received the event of type "+f.type;e.push(b);a.abortRequests=!0;a.firing=!1;a.errored.push(d);
a.num_of_img_errors++;a.registerRequest()},c.addEventListener?(c.addEventListener("error",f,!1),c.addEventListener("abort",f,!1)):c.attachEvent&&(c.attachEvent("onerror",f),c.attachEvent("onabort",f)),c.src=d.src)},fireScript:function(d,a){var c=this,f=p,h,k,n=d.src,t=d.postCallbackFn,m="function"===typeof t,r=d.internalCallbackName;f.abortRequests||(f.firing=!0,window[r]=function(c){try{c!==Object(c)&&(c={});B&&(z.ibsDeleted.push(c.ibs),delete c.ibs);var h=d.callbackFn;f.firing=!1;f.fired.push(d);
f.num_of_jsonp_responses++;h(c,a);m&&t(c,a)}catch(s){s.message="DIL jsonp callback caught error with message "+s.message;b=s.message;e.push(b);s.filename=s.filename||"dil.js";s.partner=g;DIL.errorModule.handleError(s);try{h({error:s.name+"|"+s.message},a),m&&t({error:s.name+"|"+s.message},a)}catch(n){}}finally{f.requestRemoval({script:k,callbackName:r}),f.registerRequest()}},M||F?(f.firing=!1,f.requestRemoval({script:"no script created",callbackName:r})):(k=document.createElement("script"),k.addEventListener&&
k.addEventListener("error",function(a){f.requestRemoval({script:k,callbackName:r});b="jsonp script tag error listener received the event of type "+a.type+" with src "+n;c.handleScriptError(b,d)},!1),k.type="text/javascript",k.src=n,h=DIL.variables.scriptNodeList[0],h.parentNode.insertBefore(k,h)),f.sent.push(d),f.declaredId.declaredId.request=null)},fireCORS:function(d,a){var c=this,f=p,h=this.corsMetadata.corsType,k=d.corsSrc,n=d.corsInstance,t=d.corsPostData,r=d.postCallbackFn,m="function"===typeof r;
if(!f.abortRequests&&!R){f.firing=!0;try{n.open("post",k,!0),"XMLHttpRequest"===h&&(n.withCredentials=!0,n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4===this.readyState&&200===this.status)a:{var h;try{if(h=JSON.parse(this.responseText),h!==Object(h)){c.handleCORSError(d,a,"Response is not JSON");break a}}catch(k){c.handleCORSError(d,a,"Error parsing response as JSON");break a}B&&(z.ibsDeleted.push(h.ibs),delete h.ibs);try{var n=d.callbackFn;
f.firing=!1;f.fired.push(d);f.num_of_cors_responses++;n(h,a);m&&r(h,a)}catch(t){t.message="DIL handleCORSResponse caught error with message "+t.message;b=t.message;e.push(b);t.filename=t.filename||"dil.js";t.partner=g;DIL.errorModule.handleError(t);try{n({error:t.name+"|"+t.message},a),m&&r({error:t.name+"|"+t.message},a)}catch(x){}}finally{f.registerRequest()}}}),n.onerror=function(){c.handleCORSError(d,a,"onerror")},n.ontimeout=function(){c.handleCORSError(d,a,"ontimeout")},n.send(t)}catch(x){this.handleCORSError(d,
a,"try-catch")}f.sent.push(d);f.declaredId.declaredId.request=null}},handleCORSError:function(d,a,b){p.num_of_cors_errors++;p.corsErrorSources.push(b);"ontimeout"===b||F||(d.tag="script",this.fireScript(d,a))},handleScriptError:function(d,a){p.num_of_jsonp_errors++;this.handleRequestError(d,a)},handleRequestError:function(d,a){var b=p;e.push(d);b.abortRequests=!0;b.firing=!1;b.errored.push(a);b.registerRequest()}},w={isValidPdata:function(a){return a instanceof Array&&this.removeEmptyArrayValues(a).length?
!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==Object(a))return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeEmptyArrayValues:function(a){for(var b=0,c=a.length,f,e=[],b=0;b<c;b++)f=a[b],"undefined"!==typeof f&&null!==f&&""!==f&&e.push(f);return e},isPopulatedString:function(a){return"string"===typeof a&&a.length}},u={addListener:function(){if(document.addEventListener)return function(a,b,c){a.addEventListener(b,function(a){"function"===
typeof c&&c(a)},!1)};if(document.attachEvent)return function(a,b,c){a.attachEvent("on"+b,function(a){"function"===typeof c&&c(a)})}}(),convertObjectToKeyValuePairs:function(a,b,c){var f=[],e,g;b||(b="=");for(e in a)a.hasOwnProperty(e)&&(g=a[e],"undefined"!==typeof g&&null!==g&&""!==g&&f.push(e+b+(c?encodeURIComponent(g):g)));return f},encodeAndBuildRequest:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)},map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===
a||null===a)throw new TypeError;var c=Object(a),f=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var e=Array(f),g=0;g<f;g++)g in c&&(e[g]=b.call(b,c[g],g,c));return e},filter:function(a,b){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var c=Object(a),f=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var e=[],g=0;g<f;g++)if(g in c){var h=c[g];b.call(b,h,g,c)&&e.push(h)}return e}return a.filter(b)},getCookie:function(a){a+="=";var b=document.cookie.split(";"),
c,f,e;c=0;for(f=b.length;c<f;c++){for(e=b[c];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(a))return decodeURIComponent(e.substring(a.length,e.length))}return null},setCookie:function(a,b,c,f,e,g){var h=new Date;c&&(c*=6E4);document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+(new Date(h.getTime()+c)).toUTCString():"")+(f?";path="+f:"")+(e?";domain="+e:"")+(g?";secure":"")},extendArray:function(a,b){return a instanceof Array&&b instanceof Array?(Array.prototype.push.apply(a,
b),!0):!1},extendObject:function(a,b,c){var f;if(a===Object(a)&&b===Object(b)){for(f in b)!b.hasOwnProperty(f)||!w.isEmptyObject(c)&&f in c||(a[f]=b[f]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return((new Date(y.COOKIE_MAX_EXPIRATION_DATE)).getTime()-(new Date).getTime())/1E3/60},getCookieField:function(a,b){var c=this.getCookie(a),f=decodeURIComponent;if("string"===typeof c){var c=c.split("|"),e,g;e=0;for(g=c.length-1;e<g;e++)if(f(c[e])===b)return f(c[e+1])}return null},getDilCookieField:function(a){return this.getCookieField(y.DIL_COOKIE_NAME,
a)},setCookieField:function(a,b,c){var e=this.getCookie(a),g=!1,h=encodeURIComponent;b=h(b);c=h(c);if("string"===typeof e){var e=e.split("|"),k,h=0;for(k=e.length-1;h<k;h++)if(e[h]===b){e[h+1]=c;g=!0;break}g||(h=e.length,e[h]=b,e[h+1]=c)}else e=[b,c];this.setCookie(a,e.join("|"),this.getMaxCookieExpiresInMinutes(),"/",this.getDomain(),!1)},setDilCookieField:function(a,b){return this.setCookieField(y.DIL_COOKIE_NAME,a,b)},getDomain:function(a){!a&&window.location&&(a=window.location.hostname);if(a)if(/^[0-9.]+$/.test(a))a=
"";else{var b=a.split("."),c=b.length-1,e=c-1;1<c&&2>=b[c].length&&(2===b[c-1].length||0>",DOMAIN_2_CHAR_EXCEPTIONS,".indexOf(","+b[c]+","))&&e--;if(0<e)for(a="";c>=e;)a=b[c]+(a?".":"")+a,c--}return a}};"error"===g&&0===k&&u.addListener(window,"load",function(){DIL.windowLoaded=!0});var S=!1,H=function(){S||(S=!0,p.registerRequest(),U(),q||p.abortRequests||z.attachIframe(),p.readyToRemove=!0,p.requestRemoval())},U=function(){q||setTimeout(function(){N||p.firstRequestHasFired||("function"===typeof I?
K.afterResult(I).submit():K.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)};C=document;"error"!==g&&(DIL.windowLoaded?H():"complete"!==C.readyState&&"loaded"!==C.readyState?u.addListener(window,"load",function(){DIL.windowLoaded=!0;H()}):(DIL.windowLoaded=!0,H()));if("error"!==g)try{DIL.xd.receiveMessage(function(a){z.receiveMessage(a.data)},z.getIframeHost(z.url))}catch(V){}p.declaredId.setDeclaredId(t,"init");p.processVisitorAPI();this.api=K;this.getStuffedVariable=function(a){var b=J.stuffed[a];
b||"number"===typeof b||(b=u.getCookie(a))||"number"===typeof b||(b="");return b};this.validators=w;this.helpers=u;this.constants=y;this.log=e;T&&(this.pendingRequest=v,this.requestController=p,this.setDestinationPublishingUrl=h,this.destinationPublishing=z,this.requestProcs=D,this.variables=J,this.callWindowLoadFunctions=H)},function(){var a=document,c;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",c=function(){a.removeEventListener("DOMContentLoaded",
c,!1);a.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(a){var c;if(a===Object(a))for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])},DIL.extendStaticPropertiesAndMethods({version:"6.9",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(a){this.windowLoaded="function"===typeof a?!!a():"boolean"===typeof a?a:!0},create:function(a){try{return new DIL(a)}catch(c){throw Error("Error in attempt to create DIL instance with DIL.create(): "+
c.message);}},registerDil:function(a,c,e){c=c+"$"+e;c in this.dils||(this.dils[c]=a)},getDil:function(a,c){var e;"string"!==typeof a&&(a="");c||(c=0);e=a+"$"+c;return e in this.dils?this.dils[e]:Error("The DIL instance with partner = "+a+" and containerNSID = "+c+" was not found")},dexGetQSVars:function(a,c,e){c=this.getDil(c,e);return c instanceof this?c.getStuffedVariable(a):""},xd:{postMessage:function(a,c,e){var b=1;c&&(window.postMessage?e.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):
c&&(e.location=c.replace(/#.*$/,"")+"#"+ +new Date+b++ +"&"+a))},receiveMessage:function(a,c){var e;try{if(window.postMessage)if(a&&(e=function(b){if("string"===typeof c&&b.origin!==c||"[object Function]"===Object.prototype.toString.call(c)&&!1===c(b.origin))return!1;a(b)}),window.addEventListener)window[a?"addEventListener":"removeEventListener"]("message",e,!1);else window[a?"attachEvent":"detachEvent"]("onmessage",e)}catch(b){}}}}),DIL.errorModule=function(){var a=DIL.create({partner:"error",containerNSID:0,
disableDestinationPublishingIframe:!0}),c={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},e=!1;return{activate:function(){e=!0},handleError:function(b){if(!e)return"DIL error module has not been activated";b!==Object(b)&&(b={});var h=b.name?(b.name+"").toLowerCase():"",g=[];b={name:h,filename:b.filename?b.filename+"":"",partner:b.partner?b.partner+"":
"no_partner",site:b.site?b.site+"":document.location.href,message:b.message?b.message+"":""};g.push(h in c?c[h]:c.noerrortypedefined);a.api.pixels(g).logs(b).useImageRequest().submit();return"DIL error report sent"},pixelMap:c}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(a,c,e){var b="";c=c||"Error caught in DIL module/submodule: ";a===Object(a)?b=c+(a.message||"err has no message"):(b=c+"err is not a valid object",a={});a.message=b;e instanceof DIL&&(a.partner=e.api.getPartner());
DIL.errorModule.handleError(a);return this.errorMessage=b}}});
DIL.tools.getSearchReferrer=function(a,c){var e=DIL.getDil("error"),b=DIL.tools.decomposeURI(a||document.referrer),h="",g="",k={queryParam:"q"};return(h=e.helpers.filter([c===Object(c)?c:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(a){return!(!a.hasOwnProperty("hostPattern")||!b.hostname.match(a.hostPattern))}).shift())?{valid:!0,name:b.hostname,keywords:(e.helpers.extendObject(k,h),g=k.queryPattern?
(h=(""+b.search).match(k.queryPattern))?h[1]:"":b.uriParams[k.queryParam],decodeURIComponent(g||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}};
DIL.tools.decomposeURI=function(a){var c=DIL.getDil("error"),e=document.createElement("a");e.href=a||document.referrer;return{hash:e.hash,host:e.host.split(":").shift(),hostname:e.hostname,href:e.href,pathname:e.pathname.replace(/^\//,""),protocol:e.protocol,search:e.search,uriParams:function(a,e){c.helpers.map(e.split("&"),function(c){c=c.split("=");a[c.shift()]=c.shift()});return a}({},e.search.replace(/^(\/|\?)?|\/$/g,""))}};
DIL.tools.getMetaTags=function(){var a={},c=document.getElementsByTagName("meta"),e,b,h,g,k;e=0;for(h=arguments.length;e<h;e++)if(g=arguments[e],null!==g)for(b=0;b<c.length;b++)if(k=c[b],k.name===g){a[g]=k.content;break}return a};
DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,e,b){try{var h=this,g={name:"DIL Site Catalyst Module Error"},k=function(a){g.message=a;DIL.errorModule.handleError(g);return a};this.options=b===Object(b)?b:{};this.dil=null;if(c instanceof DIL)this.dil=c;else return k("dilInstance is not a valid instance of DIL");g.partner=c.api.getPartner();if(a!==Object(a))return k("siteCatalystReportingSuite is not an object");window.AppMeasurement_Module_DIL=a.m_DIL=
function(a){var b="function"===typeof a.m_i?a.m_i("DIL"):this;if(b!==Object(b))return k("m is not an object");b.trackVars=h.constructTrackVars(e);b.d=0;b.s=a;b._t=function(){var a,b,c=","+this.trackVars+",",e=this.s,g,r=[];g=[];var m={},q=!1;if(e!==Object(e))return k("Error in m._t function: s is not an object");if(this.d){if("function"===typeof e.foreachVar)e.foreachVar(function(a,b){"undefined"!==typeof b&&(m[a]=b,q=!0)},this.trackVars);else{if(!(e.va_t instanceof Array))return k("Error in m._t function: s.va_t is not an array");
if(e.lightProfileID)(a=e.lightTrackVars)&&(a=","+a+","+e.vl_mr+",");else if(e.pe||e.linkType)a=e.linkTrackVars,e.pe&&(b=e.pe.substring(0,1).toUpperCase()+e.pe.substring(1),e[b]&&(a=e[b].trackVars)),a&&(a=","+a+","+e.vl_l+","+e.vl_l2+",");if(a){b=0;for(r=a.split(",");b<r.length;b++)0<=c.indexOf(","+r[b]+",")&&g.push(r[b]);g.length&&(c=","+g.join(",")+",")}g=0;for(b=e.va_t.length;g<b;g++)a=e.va_t[g],0<=c.indexOf(","+a+",")&&"undefined"!==typeof e[a]&&null!==e[a]&&""!==e[a]&&(m[a]=e[a],q=!0)}h.includeContextData(e,
m).store_populated&&(q=!0);q&&this.d.api.signals(m,"c_").submit()}}};a.loadModule("DIL");a.DIL.d=c;return g.message?g.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(q){return this.handle(q,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(a){var c=[],e,b,h,g,k;if(a===Object(a)){e=a.names;if(e instanceof Array&&(h=e.length))for(b=0;b<h;b++)g=e[b],"string"===typeof g&&g.length&&c.push(g);a=a.iteratedNames;if(a instanceof Array&&
(h=a.length))for(b=0;b<h;b++)if(e=a[b],e===Object(e)&&(g=e.name,k=parseInt(e.maxIndex,10),"string"===typeof g&&g.length&&!isNaN(k)&&0<=k))for(e=0;e<=k;e++)c.push(g+e);if(c.length)return c.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(a,c){var e={},b=!1;if(a.contextData===Object(a.contextData)){var h=a.contextData,g=this.options.replaceContextDataPeriodsWith,
k=this.options.filterFromContextVariables,q={},m,r,n,x;"string"===typeof g&&g.length||(g="_");if(k instanceof Array)for(m=0,r=k.length;m<r;m++)n=k[m],this.dil.validators.isPopulatedString(n)&&(q[n]=!0);for(x in h)!h.hasOwnProperty(x)||q[x]||!(k=h[x])&&"number"!==typeof k||(x=("contextData."+x).replace(/\./g,g),c[x]=k,b=!0)}e.store_populated=b;return e}};
DIL.modules.GA={submitUniversalAnalytics:function(a,c,e){try{var b=a.getAll()[0],h=b[e||"b"].data.keys;a={};var g,k,q,m;g=0;for(k=h.length;g<k;g++)q=h[g],m=b.get(q),"undefined"===typeof m||"function"===typeof m||m===Object(m)||/^_/.test(q)||/^&/.test(q)||(a[q]=m);c.api.signals(a,"c_").submit();return a}catch(r){return"Caught error with message: "+r.message}},dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,
signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,e){try{this.tv=this.arr=this.dil=null;this.errorMessage="";this.signals={};this.hasSignals=!1;var b={name:"DIL GA Module Error"},h="";c instanceof DIL?(this.dil=c,b.partner=this.dil.api.getPartner()):(h="dilInstance is not a valid instance of DIL",b.message=h,DIL.errorModule.handleError(b));a instanceof Array&&a.length?this.arr=a:(h="gaArray is not an array or is empty",b.message=h,DIL.errorModule.handleError(b));
this.tv=this.constructTrackVars(e);this.errorMessage=h}catch(g){this.handle(g,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(a){var c=[],e,b,h,g;if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){h=this.defaultTrackVars;g={};e=0;for(b=h.length;e<b;e++)g[h[e]]=!0;this.defaultTrackVarsObj=g}else g=this.defaultTrackVarsObj;if(a===Object(a)){a=a.names;if(a instanceof Array&&(b=a.length))for(e=0;e<b;e++)h=a[e],"string"===typeof h&&
h.length&&h in g&&c.push(h);if(c.length)return c}return this.defaultTrackVars},constructGAObj:function(a){var c={};a=a instanceof Array?a:this.arr;var e,b,h,g;e=0;for(b=a.length;e<b;e++)h=a[e],h instanceof Array&&h.length&&(h=[],g=a[e],h instanceof Array&&g instanceof Array&&Array.prototype.push.apply(h,g),g=h.shift(),"string"===typeof g&&g.length&&(c[g]instanceof Array||(c[g]=[]),c[g].push(h)));return c},addToSignals:function(a,c){if("string"!==typeof a||""===a||null==c||""===c)return!1;this.signals[a]instanceof
Array||(this.signals[a]=[]);this.signals[a].push(c);return this.hasSignals=!0},constructSignals:function(){var a=this.constructGAObj(),c={_setAccount:function(a){this.addToSignals("c_accountId",a)},_setCustomVar:function(a,b,c){"string"===typeof b&&b.length&&this.addToSignals("c_"+b,c)},_addItem:function(a,b,c,e,g,h){this.addToSignals("c_itemOrderId",a);this.addToSignals("c_itemSku",b);this.addToSignals("c_itemName",c);this.addToSignals("c_itemCategory",e);this.addToSignals("c_itemPrice",g);this.addToSignals("c_itemQuantity",
h)},_addTrans:function(a,b,c,e,g,h,k,m){this.addToSignals("c_transOrderId",a);this.addToSignals("c_transAffiliation",b);this.addToSignals("c_transTotal",c);this.addToSignals("c_transTax",e);this.addToSignals("c_transShipping",g);this.addToSignals("c_transCity",h);this.addToSignals("c_transState",k);this.addToSignals("c_transCountry",m)},_trackSocial:function(a,b,c,e){this.addToSignals("c_socialNetwork",a);this.addToSignals("c_socialAction",b);this.addToSignals("c_socialTarget",c);this.addToSignals("c_socialPagePath",
e)}},e=this.tv,b,h,g,k,q,m;b=0;for(h=e.length;b<h;b++)if(g=e[b],a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&(m=a[g],m instanceof Array))for(k=0,q=m.length;k<q;k++)c[g].apply(this,m[k])},submit:function(){try{if(""!==this.errorMessage)return this.errorMessage;this.constructSignals();return this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present"}catch(a){return this.handle(a,"DIL.modules.GA.submit() caught error with message ",
this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(a,c,e){try{this.callback=this.dil=null,this.errorMessage="",a instanceof DIL?(this.dil=a,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(c)?c:"aam_ga",this.delimiter=this.v(e)?e:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(b){this.handle(b,
"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(a){var c,e,b,h,g,k;k=!1;var q=1;if(a===Object(a)&&(c=a.stuff)&&c instanceof Array&&(e=c.length))for(a=0;a<e;a++)if((b=c[a])&&b===Object(b)&&(h=b.cn,g=b.cv,h===this.cookieName&&this.v(g))){k=!0;break}if(k){c=g.split(this.delimiter);"undefined"===typeof window._gaq&&(window._gaq=[]);b=window._gaq;a=0;for(e=c.length;a<e&&!(k=c[a].split("="),g=k[0],k=k[1],this.v(g)&&this.v(k)&&b.push(["_setCustomVar",
q++,g,k,1]),q>this.LIMIT);a++);this.errorMessage=1<q?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"===typeof this.callback)return this.callback()},submit:function(){try{var a=this;if(""!==this.errorMessage)return this.errorMessage;this.dil.api.afterResult(function(c){a.process(c)}).submit();return"DIL.modules.GA.Stuffer.submit() successful"}catch(c){return this.handle(c,"DIL.modules.GA.Stuffer.submit() caught error with message ",
this.dil)}}}};
DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(a,c,e){try{this.dil=null;this.errorMessage="";this.calledBack=!1;this.optionals=e===Object(e)?e:{};e={name:"DIL Peer39 Module Error"};var b=[],h="";this.isSecurePageButNotEnabled(document.location.protocol)&&(h="Module has not been enabled for a secure page",b.push(h),e.message=h,DIL.errorModule.handleError(e));c instanceof
DIL?(this.dil=c,e.partner=this.dil.api.getPartner()):(h="dilInstance is not a valid instance of DIL",b.push(h),e.message=h,DIL.errorModule.handleError(e));"string"===typeof a&&a.length?this.aid=a:(h="aid is not a string or is empty",b.push(h),e.message=h,DIL.errorModule.handleError(e));this.errorMessage=b.join("\n")}catch(g){this.handle(g,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(a){return"https:"===a&&!0!==this.optionals.enableHTTPS?
!0:!1},constructSignals:function(){var a=this,c=this.constructScript(),e=DIL.variables.scriptNodeList[0];window["afterFinished_"+this.aid]=function(){try{var b=a.processData(p39_KVP_Short("c_p","|").split("|"));b.hasSignals&&a.dil.api.signals(b.signals).submit()}catch(c){}finally{a.calledBack=!0,"function"===typeof a.optionals.afterResult&&a.optionals.afterResult()}};e.parentNode.insertBefore(c,e);this.scriptsSent.push(c);return"Request sent to Peer39"},processData:function(a){var c,e,b,h,g={},k=
!1;this.returnedData.push(a);if(a instanceof Array)for(c=0,e=a.length;c<e;c++)b=a[c].split("="),h=b[0],b=b[1],h&&isFinite(b)&&!isNaN(parseInt(b,10))&&(g[h]instanceof Array||(g[h]=[]),g[h].push(b),k=!0);return{hasSignals:k,signals:g}},constructScript:function(){var a=document.createElement("script"),c=this.optionals,e=c.scriptId,b=c.scriptSrc,c=c.scriptParams;a.id="string"===typeof e&&e.length?e:"peer39ScriptLoader";a.type="text/javascript";"string"===typeof b&&b.length?a.src=b:(a.src=document.location.protocol+
"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"===typeof c&&c.length&&(a.src+="?"+c));return a},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(a){return this.handle(a,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};
//DIL library ends ** Above code not to be altered**


</script><script>

(function() {
    /* globals $t, DIL */
    var setupAAM = function(_scDilObj) {
        //DIL instantiation starts. Configurable section below
        var nbcuDil = DIL.create({
            partner: "nbcu",
            containerNSID: 0,
            uuidCookie: {
                name: 'aam_uuid',
                days: 30
            }

        });
        //replace customObj with any MPS object when data collection is required
        if (typeof window.customObj != 'undefined') {
            var nbcuDilInstance = DIL.getDil('nbcu');
            nbcuDilInstance.api.signals(window.customObj, 'c_');
        }
        //SC Object Data Collection 
        DIL.modules.siteCatalyst.init(_scDilObj, DIL.getDil('nbcu'), {
            names: ['pageName', 'channel', 'campaign', 'products', 'events', 'pe', 'referrer', 'server', 'purchaseID', 'zip', 'state'],
            iteratedNames: [{
                name: 'eVar',
                maxIndex: 75
            }, {
                name: 'prop',
                maxIndex: 75
            }, {
                name: 'pev',
                maxIndex: 3
            }, {
                name: 'hier',
                maxIndex: 4
            }]
        });
    };
    //run after adobe is loaded, or if its alrady loaded.
    if ($t('dtm_adobeAppMeasurmentLoaded', 'not loaded') !== 'not loaded') {
        setupAAM($t('dtm_adobeAppMeasurmentLoaded.sc_obj', {}));
    } else {
        $t('on', 'dtm_adobeAppMeasurmentLoaded', function() {
            setupAAM($t('dtm_adobeAppMeasurmentLoaded.sc_obj', {}));
        });
    }
    //also setup heartbeat instsnce of app measurment
    if ($t('ahb_adobeAppMeasurmentLoaded', 'not loaded') !== 'not loaded') {
        setupAAM($t('ahb_adobeAppMeasurmentLoaded.sc_obj', {}));
    } else {
        $t('on', 'ahb_adobeAppMeasurmentLoaded', function() {
            setupAAM($t('ahb_adobeAppMeasurmentLoaded.sc_obj', {}));
        });
    }
})();


</script><script>

/* globals $t, s */
$t('on', 'mbt_video_drawer_click', function(e) {
    var isCountinuousPlay = $t("mbt_video_drawer_click.video.isContinuousPlay", false);
    if(isCountinuousPlay) {
        //Continuous play event is not tracked at the moment
        //Could be used in the future to track using this flag
        return;
    }
    var index = parseInt($t(e.type + '.index', 0)) + 1;
    var actionContextData = {
        'news.linkmoduledetail': 'video drawer',
        'news.linkmoduletype': index,
        'news.videoplaylist': $t(e.type + '.playlist.headline.primary', s.noValue),
        'news.videoplaylistid': $t(e.type + '.playlist.id', s.noValue)
    };
    s.contextData = s.extendArray(s.contextData, actionContextData);

    //track action
    s.tl(true, 'o', 'video drawer click');

    //cleanup values after action
    for (var item in actionContextData) {
        delete s.contextData[item];
    }
});


</script><script>

/* globals $t, s */
$t('on', 'mbt_curtain_closeClick', function() {
    var actionContextData = {
        'news.linkmoduledetail': 'Close',
        'news.linkmoduletype': 'Homepage Curtain'
    };
    s.contextData = s.extendArray(s.contextData, actionContextData);

    //track action
    s.tl(true, 'o', 'curtain close click');

    //cleanup values after action
    for (var item in actionContextData) {
        delete s.contextData[item];
    }
});
$t('on', 'mbt_curtain_scrollPast', function() {
    var actionContextData = {
        'news.belowcurtain': 'true',
    };
    s.contextData = s.extendArray(s.contextData, actionContextData);

    //track action
    s.tl(true, 'o', 'scrolled past curtain');

    //cleanup values after action
    for (var item in actionContextData) {
        delete s.contextData[item];
    }
});


</script><script>

/*globals $t */
(function () {
    var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];
    var sites = {
        'today.com': {
            'view': 'DC-8168974/today0/today0+standard',
            'play': 'DC-8168974/today0/today00+standard'
        },
        'nbcnews.com': {
            'view': 'DC-8168974/nbcvi0/nbcne0+standard',
            'play': 'DC-8168974/nbcvi0/nbcne00+standard'
        },
        'msnbc.com': {
            'view': 'DC-8168974/msnbc0/msnbc0+standard',
            'play': 'DC-8168974/msnbc0/msnbc00+standard'
        }
    };
    var siteEvents = sites[topLevelDomain] || { 'view': '', 'play': '' };

    // add global script
    var loadScript = function (script) {
        var s = document.createElement('script'),
            el = document.getElementsByTagName('script')[0];
        s.async = true;
        s.src = (document.location.protocol == 'https:' ? 'https://' : 'http://') + script;
        el.parentNode.insertBefore(s, el);
    };
    loadScript('www.googletagmanager.com/gtag/js?id=DC-8168974');

    window.dataLayer = window.dataLayer || []; //that name is to generic to have global scope
    function gtag() { window.dataLayer.push(arguments); }

    gtag('js', new Date());
    gtag('config', 'DC-8168974');

    var customEvent = function (sendTo) {
        gtag('event', 'conversion', {
            'allow_custom_scripts': true,
            'send_to': sendTo
        });
    };

    //on pageload
    customEvent(siteEvents.view);

    //on video start
    $t('on', 'ndp_videoEvent', function (e, data) {
        if(data.eventType === 'NDP_PlaybackEvent_START') {
            customEvent(siteEvents.play);
        }
    });
})();


</script><script>

(function() {
    var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];
    var rootElement = document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0];
    var topDiv = document.createElement('div');
    var insideSpan = document.createElement('span');
    insideSpan.setAttribute('data-parsely-site', topLevelDomain)
    insideSpan.id = 'parsely-cfg';
    topDiv.id = 'parsely-root';
    topDiv.style = 'display: none';
    topDiv.appendChild(insideSpan);
    rootElement.appendChild(topDiv)
})();

(function(s, p, d) {
    var h = d.location.protocol,
        i = p + "-" + s,
        e = d.getElementById(i),
        r = d.getElementById(p + "-root"),
        u = h === "https:" ? "d1z2jf7jlzjs58.cloudfront.net" : "static." + p + ".com";
    if (e) return;
    if(d.location.pathname.indexOf("embedded-video") >= 0) {
        var notrackScr = d.createElement(s);
        notrackScr.innerText = "PARSELY = { autotrack: false };";
        r.appendChild(notrackScr);
    }
    e = d.createElement(s);
    e.id = i;
    e.async = true;
    e.src = h + "//" + u + "/p.js";
    r.appendChild(e);
})("script", "parsely", document);


</script><script>

/* globals $t, PARSELY, s */
(function() {
    $t('on', 'dtm_pageView', function(e, data) {
        var pageIndex = $t(e.type + '.index', '0');
        var trackPage = (function() {
            var trackView = data.trackView !== false; //this will default all to true if not false
            // it looks like metadata is replaced instead of added to the page now, so must use omniture count instead
            var notFirst = s && s.contextData && s.contextData['news.scrollcount'] > 1;
            var inlineFront = notFirst && ($t('jsonLd.Dataset.' + pageIndex + '.pageType', '').toLowerCase() === 'front');

            return trackView && notFirst && !inlineFront;
        })();

        if (trackPage && window.PARSELY && window.PARSELY.beacon) {
            PARSELY.beacon.trackPageView({
                url: [location.protocol, '//', location.host, location.pathname].join(''), // URL to be tracked
                urlref: document.referrer, // Referring URL
                js: 1 // flag indicating this is dynamic
            });
        }
    });
})();


</script><script>

(function() {
    // neilson
    var canonicalUrl = document.URL;
    var d = new Image(1, 1);
    d.onerror = d.onload = function() {
        d.onerror = d.onload = null;
    };
    d.src = ["//secure-us.imrworldwide.com/cgi-bin/m?ci=us-505401h&cg=0&cc=1&si=", escape(canonicalUrl), "&rp=", escape(document.referrer), "&ts=compact&rnd=", (new Date()).getTime()].join('');
})();


</script><script>

/* globals $t, s */
(function() {
    var inSlideshow = false;
    var prevSlide = -1;
    $t('on', 'mbt_gallery_scroll', function(e) {
        var adSlide = $t(e.type + '.adSlide');
        if (!adSlide) {
            prevSlide = $t(e.type + '.prevSlideNumber') != -1 ? $t(e.type + '.prevSlideNumber') : prevSlide;
            var curSlide = $t(e.type + '.slideNumber', 0);
            var action = '';

            var totalSlides = $t(e.type + '.totalSlides', 0);
            s.events = '';
            if (inSlideshow === false) {
                //start
                action = 'Start,';
                inSlideshow = true;
            }
            if (inSlideshow !== 'done' & curSlide === totalSlides) {
                action = 'Complete,';
                inSlideshow = 'done';
            }
            if (prevSlide < curSlide) {
                //scroll down
                action += 'Swipe Down';
            } else if (prevSlide > curSlide) {
                //scroll up
                action += 'Swipe Up';
            }

            var actionContextData = {
                'news.slideshowaction': action, //"Start", "Swipe Up", "Swipe Down", "Swipe Right", "Swipe Left", "Complete"
                'news.slideshowname': $t('jsonLd.imageGallery.0.headline', s.noValue),
                'news.slideshownumber': curSlide
            };
            s.contextData = s.extendArray(s.contextData, actionContextData);

            //track action
            s.tl(true, 'o', 'slideshow action');

            //cleanup values after action
            for (var item in actionContextData) {
                delete s.contextData[item];
            }
        }
    });
})();


</script><script>

/* globals $t, s */
(function() {
    $t('on', 'mbt_navbar_topicClick', function(e) {
        var actionContextData = {
            'news.linkmoduledetail': 'Hamburger Link',
            'news.linkmoduletype': $t(e.type + '.topic', s.noValue)
        };
        s.contextData = s.extendArray(s.contextData, actionContextData);

        //track action
        s.tl(true, 'o', 'hamburger link click');

        //cleanup values after action
        for (var item in actionContextData) {
            delete s.contextData[item];
        }
    });
    $t('on', 'mbt_navbar_hamburgerClick', function(e, data) {
        if (data.isOpen) {
            var actionContextData = {
                'news.linkmoduledetail': 'Hamburger',
                'news.linkmoduletype': 'Hamburger Expand'
            };
            s.contextData = s.extendArray(s.contextData, actionContextData);

            //track action
            s.tl(true, 'o', 'hamburger expand');

            //cleanup values after action
            for (var item in actionContextData) {
                delete s.contextData[item];
            }
        }
    });
    $t('on', 'mbt_navbar_follow', function(e) {
        var actionContextData = {
            'news.linkmoduledetail': 'Hamburger',
            'news.linkmoduletype': 'Hamburger Follow',
            'news.socialplatform': $t(e.type + '.platform', s.noValue)
        };
        s.contextData = s.extendArray(s.contextData, actionContextData);

        //track action
        s.tl(true, 'o', 'hamburger follow');

        //cleanup values after action
        for (var item in actionContextData) {
            delete s.contextData[item];
        }
    });
    $t('on', 'mbt_navbar_share', function(e) {
        var actionContextData = {
            'news.linkmoduledetail': 'Article Share Bar',
            'news.linkmoduletype': 'Article',
            'news.socialplatform': $t(e.type + '.platform', s.noValue)
        };
        s.contextData = s.extendArray(s.contextData, actionContextData);

        //track action
        s.tl(true, 'o', 'article share');

        //cleanup values after action
        for (var item in actionContextData) {
            delete s.contextData[item];
        }
    });
    $t('on', 'mbt_navbar_shareClick', function(e, data) {
        if (data.isOpen) {
            var actionContextData = {
                'news.linkmoduledetail': 'Article Share Bar',
                'news.linkmoduletype': 'Expand',
            };
            s.contextData = s.extendArray(s.contextData, actionContextData);

            //track action
            s.tl(true, 'o', 'article share expand');

            //cleanup values after action
            for (var item in actionContextData) {
                delete s.contextData[item];
            }
        }
    });
})();


</script><script>

/* globals $t, s */
$t('on', 'mbt_video_socialShare', function (e) {
    var actionContextData = {
        'news.linkmoduledetail': 'Video',
        'news.linkmoduletype': 'Video Share Bar',
        'news.socialplatform': $t(e.type + '.platform', s.noValue)
    };
    s.contextData = s.extendArray(s.contextData, actionContextData);

    //track action
    s.tl(true, 'o', 'video share');

    //cleanup values after action
    for (var item in actionContextData) {
        delete s.contextData[item];
    }
});


</script><script>

/* globals $t, s */
$t('on', 'nv_newsletter_subscribe', function(e) {
    var actionContextData = {
        'news.newsletteraction': 'Subscribe', //"Subscribe", "Unsubscribe"
        'news.newsletterid': $t(e.type + '.id', $t(e.type + '.key', '')),
        'news.newslettertouchpoint': $t(e.type + '.placement', '')
    };
    s.contextData = s.extendArray(s.contextData, actionContextData);

    //track action
    s.tl(true, 'o', 'newsletter_subscribe');

    //cleanup values after action
    for (var item in actionContextData) {
        delete s.contextData[item];
    }
});


</script><script>

$t('on','nv_newsletter_subscribe',function(e, data){
	window.DY && window.DY.API('event',{name:'newsletter_subscribed', properties:{id:data.id}});
});


</script><script>


/* globals $t, s */
(function() {
    window.dtm_pageview = window.dtm_pageview || {};
    window.dtm_pageview.viewedPages = window.dtm_pageview.viewedPages || {}; //list of URLS already tracked (make it exposed, so )
    var viewedPages = window.dtm_pageview.viewedPages; //keep it simple, so its shorter
    var pageTries = {
        default:{timeout: 100, tries: 5}
    };

    $t('on', 'mbt_transporter_loadPage', function() {
        // reload ldjson
        // this should be when it is parsed, but loadPage is early from when the meta data is actualy available on the page.
        window.parseJsonLd();
    });

    $t('on', 'mbt_transporter_nav', function(e,data) {
        // try to re-parse ldjson until it is a match with the nav data, then trigger pageview
        // this is becuase the metadata loads late on the page vs the nav event. it is most likely a prolem with the <helmut> component
        pageTries[$t(e.type + '.url', 'na')] = {
            tries : pageTries.default.tries,
            timer : setTimeout(function(){
                var trackView = data.trackView !== false; //this will default all to true if not false
                var url = $t(e.type + '.url', 'na');
                window.parseJsonLd(); // parse again to get jsonld changes
                var index = (function() {
                    //this figures out index by compring urls, instead of relying on the provided one.
                    var i;
                    var dataset = $t('jsonLd.Dataset', []);
                    for (i = 0; dataset[i]; i++) {
                        if (dataset[i].url && dataset[i].url.match(new RegExp(url + '$' , 'g') )) {
                            return i;
                        }
                    }
                    return -1; //if no index from loop, default to -1 for no metadata;
                })();
                if(index != -1 || pageTries[url].tries <= 0){
                    //check to see if thise page has been tracked already (only one pageview per URL)
                    // also exclude liveblog views from transporter
                    if (viewedPages[$t(e.type + '.url')] || $t(e.type + '.type') === 'liveBlog') {
                        trackView = false;
                    } else {
                        viewedPages[$t(e.type + '.url', 'na')] = true;
                        trackView = true;
                    }
                    $t('track', 'dtm_pageView', {
                        initiator: 'transporter',
                        index: index, // $t(e.type + '.index', index) just use the searched index, to know if there is metadata
                        url: $t(e.type + '.url', ''),
                        trackView: trackView
                    });
                    clearTimeout(pageTries[url].timer);
                }
                pageTries[url].tries--;
            },pageTries.default.timeout)
        };
    });

    $t('on', 'mbt_transporter_scrolled_percentage', function(e) {
        var actionContextData = {
            'news.pagescrollpercent': $t(e.type + '.percent', s.noValue)
        };
        s.contextData = s.extendArray(s.contextData, actionContextData);

        //track action
        s.tl(true, 'o', 'percent scrolled');

        //cleanup values after action
        for (var item in actionContextData) {
            delete s.contextData[item];
        }
    });
})();


</script><script>

/* globals $t, s */
$t('on', 'mbt_moreloader_click', function() {
    var actionContextData = {
        'news.linkmoduledetail': 'Button',
        'news.linkmoduletype': 'Load More'
    };
    s.contextData = s.extendArray(s.contextData, actionContextData);

    //track action
    s.tl(true, 'o', 'load more link click');

    //cleanup values after action
    for (var item in actionContextData) {
        delete s.contextData[item];
    }
});


</script><script>

/* globals $t, s */
$t('on', 'mbt_router_pageView', function(e) {
    if (s & s.pageURL != $t(e.type + '.url', '')) {
        setTimeout(function() {
            window.parseJsonLd();
            $t('track', 'dtm_pageView', {
                initiator: 'router',
                index: $t(e.type + '.index', 0),
                url: $t(e.type + '.url')
            });
        }, 1);
    }
});


</script><script>

(function(){
    /*global $t, fbq */
    !function (f, b, e, v, n, t, s) {
        if (f.fbq) return; n = f.fbq = function () { n.callMethod ? n.callMethod.apply(n, arguments) : n.queue.push(arguments) };
        if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
        n.queue = []; t = b.createElement(e); t.async = !0;
        t.src = v; s = b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t, s)
    }(window, document, 'script', 'https://connect.facebook.net/en_US/fbevents.js');

    var pixelIds = {
        'newsletter':'514991798612189',
        'ecommerce':'258438165004812'
    };

    for (var pixel in pixelIds) {
        fbq('init', pixelIds[pixel]);
    }

    $t('on', 'dtm_pageView', function (e, data) {
        var trackView = data.trackView !== false; //this will default all to true if not false
        var pageIndex = $t(e.type + '.index', 0);
        //Tracks all page views.
        if (trackView) {
            fbq('track', 'PageView', {});
        
            //Tracks only ECommerce.
            if ($t('jsonLd.Dataset.' + pageIndex + '.ecommerceEnabled',false)) {
                fbq('trackSingle', pixelIds.ecommerce, 'ViewContent', {});
            }
        }
    });

    $t('on', 'mbt_ecommerce_shop_button', function() {
        fbq('trackSingle', pixelIds.ecommerce , 'Lead', {});
    });

    //Promo - FB Pixel to track newsletter mach+better
    $t('on', 'nv_newsletter_subscribe', function (e, data) {
        if (data.id === 1 || data.id === 2) {
            var fbTackingCode = data.id === 1 ? 'MACHNewsletterBento' : 'BETTERNewsletterBento';
            fbq('trackSingleCustom', '514991798612189', fbTackingCode, {});
        }
    });
})();


</script><script>

// subscribe directly to video element events instead of NDP events for android, but only when ndp isnt working
/* global $t */
(function () {
    var isAndroid = navigator.userAgent.toLowerCase().indexOf("android") > -1; //&& ua.indexOf("mobile");
    var debugState = window.localStorage && window.localStorage.getItem('jf_test') ? true : false;
    var oneSecond = 1000;
    var props = {
        isBroken: false,
        previousEvent: '',
        initSubscribes: 0
    };

    if(isAndroid) {
      $t('on', 'ndp_videoEvent', function (e, data) {
          if (data.initiator != 'androidFix') {
              props.previousEvent = data.eventType;
          }
      });

      $t('on', 'ndp_playerInit', function (e, data) {
          props.initSubscribes++;//only subscribe on one init
          var ndp = data.playerObj;
          // var videoElem = ndp.location().querySelector('video');
          var videoElem = document.querySelector('video[id^="ndp_video"]');

          var spoofNdpEvent = function (eventType, videoElem) {
              if (props.isBroken) {
                  var playheadPosition = Math.round((videoElem.currentTime || 0) * oneSecond);
                  var totalLength = Math.round((videoElem.duration || 0) * oneSecond);
                  var videoData = ndp.mediaAsset() || {};
                  videoData.playheadPosition = playheadPosition;
                  videoData.totalLength = totalLength;
                  $t('track', 'ndp_videoEvent', {
                      eventType: eventType,
                      videoData: videoData,
                      playerBrand: 'mbt',
                      initiator: 'androidFix'
                  });
              }
          };
          var logEvent = function (event) {
              if (debugState) {
                  console.log('* ndp_htmlEvent (' + performance.now() + ') : ' + event + ' : %O', JSON.parse(JSON.stringify(props)));
              }
          };

          if (videoElem && props.initSubscribes <= 1) {
              videoElem.addEventListener('timeupdate', function () {
                  logEvent('timeupdate');
                  //figure out if the player is broken based on event order
                  if (!props.isBroken && (props.previousEvent === 'NDP_PlaybackEvent_LOADED' || props.previousEvent === 'NDP_AdEvent_COMPLETE')) {
                      props.isBroken = true;
                  }
                  if (props.isBroken && props.previousEvent === 'NDP_PlaybackEvent_START') {
                      props.isBroken = false;
                  }

                  spoofNdpEvent('NDP_PlaybackEvent_PROGRESS', videoElem);
              });

              videoElem.addEventListener('play', function () {
                  logEvent('play');
                  spoofNdpEvent('NDP_PlaybackEvent_START', videoElem);
              });

              videoElem.addEventListener('ended', function () {
                  logEvent('ended');
                  spoofNdpEvent('NDP_PlaybackEvent_COMPLETE', videoElem);
              });

          }
      });
    }
})();


</script><script>

/* globals $t, s */
$t('on', 'ndp_playerStick', function() {
    var actionContextData = {
        'news.pageevents': 'Video docked'
    };
    s.contextData = s.extendArray(s.contextData, actionContextData);

    //track action
    s.tl(true, 'o', 'Video docked');

    //cleanup values after action
    for (var item in actionContextData) {
        delete s.contextData[item];
    }
});


</script><script>

/* globals $t, s */
$t('on', 'inlineVideoFullyInView', function() {
    var actionContextData = {
        'news.pageevents': 'inlineVideoFullyInView'
    };
    s.contextData = s.extendArray(s.contextData, actionContextData);

    //track action
    s.tl(true, 'o', 'Inline video fully in view');

    //cleanup values after action
    for (var item in actionContextData) {
        delete s.contextData[item];
    }
});


</script><script>

//hey this is new
(function () {
    var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];
    var sites = {
        'today.com': 'https://toecircle.com/v2/0/ipsM8e8wJUWinFx5kEFjVWpjMFpK28xoSgcEIKpRDHUaCTEBPwVlhZFKrdnaGsGmLCljctjBbCa',
        'nbcnews.com': 'https://squirrelhands.com/v2/0/boxMwgh9Tn_VvjyzIXMiHTGVUrAUX0rhe5mOf3dsNOkrRLxGY_kvtOK00ZP57aIhfWixPqLS3rWBQ',
        'msnbc.com': 'https://womanear.com/v2/0/wxz8HLrRO684hLbYEBrFfoEkAITVboSzNDwZSaqEMleNpLSJeu3dJsU6iZY0RvnpF7mSfAJJ1wrbQ'
    };
    if(sites[topLevelDomain]){
        !function(t,o,e){e=t.createElement(o),t=t.getElementsByTagName(o)[0],e.async=1,e.src=sites[topLevelDomain],t.parentNode.insertBefore(e,t)}(document,"script"),function(t,o){t[o]=t[o]||function(){(t[o].q=t[o].q||[]).push(arguments)}}(document,window,"script","admiral");!function(t,n,e,o){function r(t){try{return t=localStorage.getItem("v4ac1eiZr0"),t&&t.split(",")[4]>0}catch(n){}return!1}function c(){var o=r();if(o){var c=t[n].pubads();typeof c.setTargeting===e&&c.setTargeting("admiral-engaged","true")}}o=t[n]=t[n]||{},o.cmd=o.cmd||[],typeof o.pubads===e?c():typeof o.cmd.unshift===e?o.cmd.unshift(c):o.cmd.push(c)}(window,"googletag","function");
    }
})();


</script><script>

/* globals $t */
(function() {
    var ranNudge = false;
    $t('on', 'dtm_pageView', function(e, data) {
        var pageIndex = $t(e.type + '.index', '0');
        var trackView = data.trackView !== false; //this will default all to true if not false
        var nativeSponsor = $t('jsonLd.Dataset.' + pageIndex + '.sponsor', false);

        if (nativeSponsor && trackView && !ranNudge) {
            (function() {
                var s = document.createElement('script');
                s.async = true;
                s.type = 'text/javascript';
                s.src = document.location.protocol + '//cdn.ndg.io/ndg-9356170532.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
            })();
            ranNudge = true;
        }
    });
})();


</script><script>

/*
 * video heartbeats - 2.0.1 - 2016-08-22
 * Copyright (c) 2016 Adobe Systems, Inc. All Rights Reserved.
 */

// Heartbeat core
!function(a){if("undefined"==typeof b)var b={};if("undefined"==typeof c)var c={};if("undefined"==typeof d)var d={};if(d.radio||(d.radio={}),d.plugin||(d.plugin={}),"undefined"==typeof e)var e={};e.clock||(e.clock={}),function(a){"use strict";function b(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function c(a,b){return a<<b|a>>>32-b}function d(a,d,e,f,g,h){return b(c(b(b(d,a),b(f,h)),g),e)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,c){a[c>>5]|=128<<c%32,a[(c+64>>>9<<4)+14]=c;var d,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(d=0;d<a.length;d+=16)i=m,j=n,k=o,l=p,m=e(m,n,o,p,a[d],7,-680876936),p=e(p,m,n,o,a[d+1],12,-389564586),o=e(o,p,m,n,a[d+2],17,606105819),n=e(n,o,p,m,a[d+3],22,-1044525330),m=e(m,n,o,p,a[d+4],7,-176418897),p=e(p,m,n,o,a[d+5],12,1200080426),o=e(o,p,m,n,a[d+6],17,-1473231341),n=e(n,o,p,m,a[d+7],22,-45705983),m=e(m,n,o,p,a[d+8],7,1770035416),p=e(p,m,n,o,a[d+9],12,-1958414417),o=e(o,p,m,n,a[d+10],17,-42063),n=e(n,o,p,m,a[d+11],22,-1990404162),m=e(m,n,o,p,a[d+12],7,1804603682),p=e(p,m,n,o,a[d+13],12,-40341101),o=e(o,p,m,n,a[d+14],17,-1502002290),n=e(n,o,p,m,a[d+15],22,1236535329),m=f(m,n,o,p,a[d+1],5,-165796510),p=f(p,m,n,o,a[d+6],9,-1069501632),o=f(o,p,m,n,a[d+11],14,643717713),n=f(n,o,p,m,a[d],20,-373897302),m=f(m,n,o,p,a[d+5],5,-701558691),p=f(p,m,n,o,a[d+10],9,38016083),o=f(o,p,m,n,a[d+15],14,-660478335),n=f(n,o,p,m,a[d+4],20,-405537848),m=f(m,n,o,p,a[d+9],5,568446438),p=f(p,m,n,o,a[d+14],9,-1019803690),o=f(o,p,m,n,a[d+3],14,-187363961),n=f(n,o,p,m,a[d+8],20,1163531501),m=f(m,n,o,p,a[d+13],5,-1444681467),p=f(p,m,n,o,a[d+2],9,-51403784),o=f(o,p,m,n,a[d+7],14,1735328473),n=f(n,o,p,m,a[d+12],20,-1926607734),m=g(m,n,o,p,a[d+5],4,-378558),p=g(p,m,n,o,a[d+8],11,-2022574463),o=g(o,p,m,n,a[d+11],16,1839030562),n=g(n,o,p,m,a[d+14],23,-35309556),m=g(m,n,o,p,a[d+1],4,-1530992060),p=g(p,m,n,o,a[d+4],11,1272893353),o=g(o,p,m,n,a[d+7],16,-155497632),n=g(n,o,p,m,a[d+10],23,-1094730640),m=g(m,n,o,p,a[d+13],4,681279174),p=g(p,m,n,o,a[d],11,-358537222),o=g(o,p,m,n,a[d+3],16,-722521979),n=g(n,o,p,m,a[d+6],23,76029189),m=g(m,n,o,p,a[d+9],4,-640364487),p=g(p,m,n,o,a[d+12],11,-421815835),o=g(o,p,m,n,a[d+15],16,530742520),n=g(n,o,p,m,a[d+2],23,-995338651),m=h(m,n,o,p,a[d],6,-198630844),p=h(p,m,n,o,a[d+7],10,1126891415),o=h(o,p,m,n,a[d+14],15,-1416354905),n=h(n,o,p,m,a[d+5],21,-57434055),m=h(m,n,o,p,a[d+12],6,1700485571),p=h(p,m,n,o,a[d+3],10,-1894986606),o=h(o,p,m,n,a[d+10],15,-1051523),n=h(n,o,p,m,a[d+1],21,-2054922799),m=h(m,n,o,p,a[d+8],6,1873313359),p=h(p,m,n,o,a[d+15],10,-30611744),o=h(o,p,m,n,a[d+6],15,-1560198380),n=h(n,o,p,m,a[d+13],21,1309151649),m=h(m,n,o,p,a[d+4],6,-145523070),p=h(p,m,n,o,a[d+11],10,-1120210379),o=h(o,p,m,n,a[d+2],15,718787259),n=h(n,o,p,m,a[d+9],21,-343485551),m=b(m,i),n=b(n,j),o=b(o,k),p=b(p,l);return[m,n,o,p]}function j(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function k(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function l(a){return j(i(k(a),8*a.length))}function m(a,b){var c,d,e=k(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=i(e,8*a.length)),c=0;16>c;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=i(f.concat(k(b)),512+8*b.length),j(i(g.concat(d),640))}function n(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function o(a){return unescape(encodeURIComponent(a))}function p(a){return l(o(a))}function q(a){return n(p(a))}function r(a,b){return m(o(a),o(b))}function s(a,b){return n(r(a,b))}function t(a,b,c){return b?c?r(b,a):s(b,a):c?p(a):q(a)}a.md5=t}(b),function(a){"use strict";var b={};b.startsWith=function(a,b){return 0==a.indexOf(b)},a.StringUtils=b}(b),function(a){"use strict";var b={};b.clone=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},b.merge=function(a,c){var d=b.clone(a);for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);return d},a.ObjectUtils=b}(b),function(a){"use strict";function b(a,b,c){this.fn=a,this.ctx=b,this.params=c}b.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)},a.radio.Command=b}(d),function(a){"use strict";function b(a,b){this._queue=[],this._lastTs=0,this._isSuspended="undefined"!=typeof a?a:!1,this._delay="undefined"!=typeof b?b:0}b.prototype.addCommand=function(a){this._queue.push(a),this._drain()},b.prototype.cancelAllCommands=function(){this._queue=[]},b.prototype.isEmpty=function(){return 0===this._queue.length},b.prototype.suspend=function(){this._isSuspended=!0},b.prototype.resume=function(){this._isSuspended=!1,this._drain()},b.prototype.flush=function(){this._isSuspended=!1;for(var a=0;a<this._queue.length;a++){var b=this._queue[a];b.run()}this._queue=[]},b.prototype._drain=function(){if(!this._isSuspended&&!this._drainInProgress){this._drainInProgress=!0;var a=this;!function b(){var c=a._queue.shift();c?a._runCommand(c,function(){a._isSuspended||b()}):a._drainInProgress=!1}()}},b.prototype._runCommand=function(a,b){function c(){a.run(),null!=b&&b.call(d)}var d=this;if(0==this._lastTs)c();else{var e=(new Date).getTime(),f=e-this._lastTs;this._lastTs=e,f<this._delay?setTimeout(c,this._delay-f):c()}},a.radio.CommandQueue=b}(d),function(a){"use strict";function b(a,b){if(this._name=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._listeners={},this._requests={},this._commands={},this._isShutDown=!1}function c(a,c){if(a===c)return!0;for(var d=(a||"").split(b.SEPARATOR),e=(c||"").split(b.SEPARATOR),f=!0,g=0;g<d.length;g++)f=f&&(d[g]===b.WILDCARD||d[g]===e[g]);return f}b.WILDCARD="*",b.SEPARATOR=":",b.prototype.toString=function(){return"<channel: "+this._name+">"},b.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(d,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)},b.prototype.on=function(a,b,c){this._isShutDown||(this._listeners[a]||(this._listeners[a]=[]),this._listeners[a].push({fn:b,ctx:c}))},b.prototype.off=function(a,b,c){if(!this._isShutDown){if(b="function"==typeof b?b:null,!a&&null==b&&!c)return void(this._listeners={});if(a)this._removeListener(a,b,c);else for(a in this._listeners)this._listeners.hasOwnProperty(a)&&this._removeListener(a,b,c)}},b.prototype.trigger=function(a){if(!this._isShutDown)for(var b in this._listeners)if(this._listeners.hasOwnProperty(b)&&c(b,a.name))for(var d=this._listeners[b].slice(0),e=0;e<d.length;e++){var f=d[e];f.fn.call(f.ctx,a)}},b.prototype.comply=function(a,b,c){this._isShutDown||(this._commands[a]={cmd:b,ctx:c})},b.prototype.command=function(a,b){if(!this._isShutDown){var c=this._commands[a];return c?void c.cmd.call(c.ctx,b):void this._logger.warn(d,"#command > No command handler for: "+a)}},b.prototype.reply=function(a,b,c){this._isShutDown||(this._requests[a]={fn:b,ctx:c})},b.prototype.request=function(a){if(!this._isShutDown){var b=this._requests[a];return b?b.fn.call(b.ctx):(this._logger.warn(d,"#request > No request handler for: "+a),null)}},b.prototype._removeListener=function(a,b,c){b="function"==typeof b?b:null;var d=this._listeners[a];if(d){if(!d.length||null==b&&!c)return void delete this._listeners[a];for(var e=0;e<d.length;e++){var f=d[e];null!==b&&b!==f.fn||c&&c!==f.ctx||this._listeners[a].splice(e,1)}}};var d="radio::Channel";a.radio.Channel=b}(d),function(a){"use strict";function b(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._channels={}}var c=a.radio.Channel;b.prototype.channel=function(a){return this._channels[a]||(this._channels[a]=new c(a,this._logger)),this._channels[a]},b.prototype.shutdown=function(){for(var a in this._channels)this._channels.hasOwnProperty(a)&&this._channels[a].shutdown()},a.radio.Radio=b}(d),function(a){"use strict";function b(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a}a.extend=b}(d),function(a){"use strict";function b(){}b.prototype.write=function(a){throw new Error("Implementation error: Method must be overridden.")},a.ILogWriter=b}(d),function(a){"use strict";function b(){}b.prototype.write=function(a){window.console&&window.console.log&&window.console.log(a)},a.LogWriter=b}(d,c),function(a){"use strict";function b(){}b.prototype.setLogWriter=function(a){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getEnabled=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.debug=function(a,b){throw new Error("Implementation error: Method must be overridden.")},b.prototype.info=function(a,b){throw new Error("Implementation error: Method must be overridden.")},b.prototype.warn=function(a,b){throw new Error("Implementation error: Method must be overridden.")},b.prototype.error=function(a,b){throw new Error("Implementation error: Method must be overridden.")},a.ILogger=b}(d),function(a){"use strict";function b(){this._logWriter=new d}function c(a){return 10>a?"00"+a:100>a?"0"+a:""+a}var d=a.LogWriter;b.prototype.setLogWriter=function(a){if(!a)throw new Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=a,this._enabled=!1},b.prototype.getLogWriter=function(){return this._logWriter},b.prototype.getEnabled=function(){return this._enabled},b.prototype.enable=function(){this._enabled=!0},b.prototype.disable=function(){this._enabled=!1},b.prototype.debug=function(a,b){this._log(a,f,b)},b.prototype.info=function(a,b){this._log(a,e,b)},b.prototype.warn=function(a,b){this._log(a,g,b)},b.prototype.error=function(a,b){this._log(a,h,b)},b.prototype._log=function(a,b,d){if(b==h||this._enabled){var e="",f=new Date;e+="["+f.toTimeString()+"."+c(f.getMilliseconds())+"] ["+b+"] ",e+="["+a+"] "+d,this._logWriter.write(e)}};var e="INFO",f="DEBUG",g="WARN",h="ERROR";a.Logger=b}(d),function(a){"use strict";function b(a,b){this._pluginName=a,this._eventName=b}var c=a.radio.Channel;b.prototype.getPluginName=function(){return this._pluginName},b.prototype.getEventName=function(){return this._eventName},b.prototype.getName=function(){return this._pluginName+c.SEPARATOR+this._eventName},a.Trigger=b}(d),function(a){"use strict";function b(a,b){this.name=a,this.data=b}b.SUCCESS="success",b.ERROR="error",b.createFromTrigger=function(a){return new b(a.getName())},a.Event=b}(d),function(a){"use strict";function b(){this._events={}}b.prototype.addEventListener=function(a,b,c){a&&b&&(c=c||window,this._events[a]=this._events[a]||[],this._events[a].push({cb:b,ctx:c}))},b.prototype.removeEventListener=function(a,b,c){if(a&&b){c=c||window;var d,e,f=!1;for(e in this._events)if(a===e){f=!0;break}if(f){for(d=this._events[e].length-1;d>=0;d--){var g=this._events[e][d];b===g.cb&&c===g.ctx&&this._events[e].splice(d,1)}this._events[e].length||delete this._events[e]}}},b.prototype.dispatchEvent=function(a){if(a.name){var b,c;for(b in this._events)if(this._events.hasOwnProperty(b)&&a.name===b){var d=this._events[b],e=d.slice(0),f=e.length;for(c=0;f>c;c++)e[c].cb.call(e[c].ctx,a);break}}},b.prototype.removeAllListeners=function(a){if(a){var b,c;for(c in this._events)if(this._events.hasOwnProperty(c)){for(b=this._events[c].length-1;b>=0;b--){var d=this._events[c][b];d.ctx===a&&this._events[c].splice(b,1)}this._events[c].length||delete this._events[c]}}else this._events={}},a.EventDispatcher=b}(d),function(a){"use strict";function b(){}function c(a,b){this.url=a||null,this.method=b,this._xmlhttp=null}function d(){d.__super__.constructor.call(this),this._connection=null}var e=a.Event,f=a.EventDispatcher;b.GET="GET",d.RESPONSE="response",d.INSTANCE="instance",a.extend(d,f),d.prototype.close=function(){this.removeAllListeners(null)},d.prototype.load=function(a){a&&a.method&&a.url&&(a._xmlhttp=this._createCORSRequest(a),a._xmlhttp?a._xmlhttp.send():this._loadImage(a))},d.prototype._createCORSRequest=function(a){var b=null;if("undefined"!=typeof window.XMLHttpRequest){var c=new window.XMLHttpRequest;"withCredentials"in c&&(b=c,b.open(a.method,a.url,!0))}if(null==b&&"undefined"!=typeof window.XDomainRequest&&(b=new window.XDomainRequest,b.open(a.method,a.url)),b){var f={};f[d.INSTANCE]=this;var g=this;b.onload=function(){return b.status&&parseInt(b.status,10)>=400?this.onerror():(f[d.RESPONSE]=b.responseText,void g.dispatchEvent(new e(e.SUCCESS,f)))},b.onerror=function(){g.dispatchEvent(new e(e.ERROR,f))}}return b},d.prototype._loadImage=function(a){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=a.url;var b={};b[d.RESPONSE]="",b[d.INSTANCE]=this,this.dispatchEvent(new e(e.SUCCESS,b))},a.URLRequestMethod=b,a.URLRequest=c,a.URLLoader=d}(d),function(a){"use strict";var b="js",c="2.0.1.88",d="c8c0b1",e=4,f={};f.getVersion=function(){return b+"-"+c+"-"+d},f.getMajor=function(){return f.getNumberAtPosition(0)},f.getMinor=function(){return f.getNumberAtPosition(1)},f.getMicro=function(){return f.getNumberAtPosition(2)},f.getPatch=function(){return f.getNumberAtPosition(3)},f.getBuild=function(){return d},f.getApiLevel=function(){return e},f.getNumberAtPosition=function(a){return c.split(".")[a]},a.Version=f}(c),function(a){"use strict";function b(a,b){this._message=a,this._details=b}b.prototype.getMessage=function(){return this._message},b.prototype.getDetails=function(){return this._details},a.ErrorInfo=b}(c),function(a){"use strict";function b(){this.debugLogging=!1}a.HeartbeatConfig=b}(c),function(a){"use strict";function b(){}b.prototype.onError=function(a){},a.HeartbeatDelegate=b}(c),function(a){"use strict";function b(){}b.prototype.configure=function(a){throw new Error("Implementation error: Method must be overridden.")},b.prototype.bootstrap=function(a){throw new Error("Implementation error: Method must be overridden.")},b.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.resolveData=function(a){throw new Error("Implementation error: Method must be overridden.")},a.plugin.IPlugin=b}(d),function(a){"use strict";function b(a,b,c,d){this.trigger=a,this.action=c,this.plugin=b,this._paramMappings={},this.mergeParams(d)}var c=a.plugin.ParamMapping;b.prototype.mergeParams=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b];this._paramMappings[c.getKeyName()]=c}},b.prototype.getParams=function(){var a=[];for(var b in this._paramMappings)this._paramMappings.hasOwnProperty(b)&&a.push(this._paramMappings[b]);return a},b.prototype.addParam=function(a){this._paramMappings[a.getKeyName()]=a},b.prototype.removeParam=function(a,b){var d=new c(a,b);this._paramMappings.hasOwnProperty(d.getKeyName())&&delete this._paramMappings[d.getKeyName()]},a.plugin.Behaviour=b}(d),function(a){"use strict";function b(a,b,d){this._pluginName=a,this._key=b,this._paramName=d||a+c.SEPARATOR+b}var c=a.radio.Channel;b.prototype.getPluginName=function(){return this._pluginName},b.prototype.getKey=function(){return this._key},b.prototype.getKeyName=function(){return this._pluginName+c.SEPARATOR+this._key},b.prototype.getParamName=function(){return this._paramName},a.plugin.ParamMapping=b}(d),function(a){"use strict";function b(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._plugins={},this._behaviours={},this._radio=new d(this._logger),this._dataChannel=this._radio.channel(g),this._ctrlChannel=this._radio.channel(h)}var c=a.Event,d=a.radio.Radio,e=a.radio.Channel,f=a.plugin.Behaviour;b.ERROR="error",b.prototype.addPlugin=function(a){var b=a.getName();this._plugins[b]&&this._logger.warn(i,"#addPlugin > Replacing plugin: "+b),this._plugins[b]=a,a.bootstrap(this)},b.prototype.setupPlugins=function(){for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].setup()},b.prototype.pluginExists=function(a){return!!this._plugins[a]},b.prototype.isPluginInitialized=function(a){return this._plugins[a]&&this._plugins[a].isInitialized()},b.prototype.on=function(a,b,c,d){this._dataChannel.on(a+e.SEPARATOR+b,c,d)},b.prototype.off=function(a,b,c,d){var f=a&&b?a+e.SEPARATOR+b:null;this._dataChannel.off(f,c,d)},b.prototype.trigger=function(a){var b=a.name,c=this._behaviours[b];if(c){var d,e,f,g,h,i={},j={};for(d=0;d<c.length;d++)if(f=c[d],g=f.getParams())for(e=0;e<g.length;e++)h=g[e],i[h.getPluginName()]=i[h.getPluginName()]||[],h.key in i[h.getPluginName()]||i[h.getPluginName()].push(h.getKey());for(var k in i)i.hasOwnProperty(k)&&(j[k]=this.request(k,i[k]));for(d=0;d<c.length;d++){f=c[d];var l={_behaviour:f,_eventData:a.data||{}};if(g=f.getParams()){for(e=0;e<g.length;e++)h=g[e],l[h.getParamName()]=j[h.getPluginName()]?j[h.getPluginName()][h.getKey()]:null;this.command(f.plugin.getName(),f.action,l)}}}this._dataChannel.trigger(a)},b.prototype.request=function(a,b){var c=this._plugins[a];return c&&b&&0!=b.length?c.resolveData(b):null},b.prototype.raise=function(a){this._errorInfo=a;var d=new c(b.ERROR,a);this._ctrlChannel.trigger(d)},b.prototype.getErrorInfo=function(){return this._errorInfo},b.prototype.destroy=function(){this._radio.shutdown();for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].destroy()},b.prototype.comply=function(a,b,c){this._dataChannel.comply(a.getName()+e.SEPARATOR+b,c,a)},b.prototype.command=function(a,b,c){this._dataChannel.command(a+e.SEPARATOR+b,c)},b.prototype.registerBehaviour=function(a,b,c,d){var e=a.getName(),g=new f(a,b,c,d);this._behaviours[e]=this._behaviours[e]||[],this._behaviours[e].push(g)};var g="data_channel",h="ctrl_channel",i="plugin::PluginManager";a.plugin.PluginManager=b}(d),function(a,b){"use strict";function c(a){this._name=a,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this._logTag="plugin::"+this.getName(),this._logger=new d}var d=a.Logger,e=a.Trigger,f=a.Event,g=b.ErrorInfo;c.INITIALIZED="initialized",c.prototype.configure=function(a){},c.prototype.bootstrap=function(a){this._pluginManager=a,this._isDestroyed&&this._pluginManager.raise(new g("Invalid state.","Plugin already destroyed."))},c.prototype.setup=function(){this._trigger(c.INITIALIZED),this._isInitialized=!0},c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},c.prototype.enable=function(){this._isEnabled=!0,this._enabled()},c.prototype.disable=function(){this._isEnabled=!1,this._disabled()},c.prototype.getName=function(){return this._name},c.prototype.getLogger=function(){return this._logger},c.prototype.isInitialized=function(){return this._isInitialized},c.prototype.resolveData=function(a){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,a);var b=null;if(a)for(var c=0;c<a.length;c++){var d=a[c];this._dataResolver.hasOwnProperty(d)&&(b=b||{},"function"==typeof this._dataResolver[d]?b[d]=this._dataResolver[d].call(this):b[d]=this._dataResolver[d])}return b},c.prototype.toString=function(){return"<plugin: "+this._name+">"},c.prototype._enabled=function(){},c.prototype._disabled=function(){},c.prototype._teardown=function(){},c.prototype._canProcess=function(){return this._isEnabled?this._isDestroyed?(this._logger.error(this._logTag,"Plugin destroyed."),!1):!0:(this._logger.error(this._logTag,"Plugin disabled."),!1)},c.prototype._trigger=function(a,b){var c=f.createFromTrigger(new e(this.getName(),a));c.data=b,this._pluginManager.trigger(c)},a.plugin.BasePlugin=c}(d,c),function(a){"use strict";function b(a,b,c){this.name=a,this.interval=b,this.isActive=!1,this.repeatCount="undefined"!=typeof c?c:e,this._nextTickTimestamp=0,this.reset()}function c(a,b){if(!a)throw new Error("Reference to the ClockService object cannot be NULL");if(this._service=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._isDestroyed=!1,this._timers={};var c=this;this._clock=window.setInterval(function(){c._onTick()},1e3*f)}b.prototype.reset=function(){this.tick=0,this._createdTimestamp=(new Date).getTime(),this._updateNextTickTimestamp()},b.prototype.shouldTick=function(){var a=(new Date).getTime();return a>this._nextTickTimestamp-f/2?(this.tick++,this._updateNextTickTimestamp(),!0):!1},b.prototype._updateNextTickTimestamp=function(){this._nextTickTimestamp=this._createdTimestamp+1e3*this.interval*(this.tick+1)},c.prototype.createTimer=function(a,c,d){this._timers[a]=new b(a,c,d)},c.prototype.destroyTimer=function(a){delete this._timers[a]},c.prototype.resumeTimer=function(a,b){b="undefined"!=typeof b?b:!1,this._logger.debug(d,"#resumeTimer(name="+a+", reset="+b+")");var c=this._timers[a];c&&(c.isActive=!0,b&&c.reset())},c.prototype.pauseTimer=function(a,b){b="undefined"!=typeof b?b:!1,this._logger.debug(d,"#pauseTimer(name="+a+", reset="+b+")");var c=this._timers[a];c&&(c.isActive=!1,b&&c.reset())},c.prototype.isTimerPaused=function(a){var b=this._timers[a];return b?!b.isActive:!1},c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))},c.prototype._onTick=function(){for(var a in this._timers)if(this._timers.hasOwnProperty(a)){var b=this._timers[a];b.isActive&&b.shouldTick()&&(b.interval>1&&this._logger.debug(d,"#_onTick() > "+b.name+"("+b.tick+" | "+b.repeatCount+")"),0!=b.repeatCount?(this._service.onTick(b.name,b.interval,b.tick),b.repeatCount!=e&&b.repeatCount--):this.destroyTimer(b.name))}};var d="service.clock::TimerManager",e=-1,f=.25;a.clock.TimerDescriptor=b,a.clock.TimerManager=c}(e),function(a,b,c){"use strict";function d(a){if(d.__super__.constructor.call(this,h),!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._timerManager=new e(this,this._logger),this._setupDataResolver()}var e=c.clock.TimerManager,f=b.StringUtils,g=a.plugin.BasePlugin;a.extend(d,g),d.prototype.bootstrap=function(a){d.__super__.bootstrap.call(this,a),this._pluginManager.comply(this,i,this._cmdCreate),this._pluginManager.comply(this,k,this._cmdResume),this._pluginManager.comply(this,j,this._cmdPause),this._pluginManager.comply(this,l,this._cmdDestroy)},d.prototype._teardown=function(){this._timerManager.destroy()},d.prototype._cmdCreate=function(a){var b=a[o]||s;this._timerManager.createTimer(a[m],a[n],b)},d.prototype._cmdPause=function(a){this._timerManager.pauseTimer(a[m],!!a[q])},d.prototype._cmdResume=function(a){this._timerManager.resumeTimer(a[m],!!a[q])},d.prototype._cmdDestroy=function(a){this._timerManager.destroyTimer(a[m])},d.prototype.onTick=function(a,b,c){a+=".tick";var d={};d[m]=a,d[n]=b,d[p]=c,this._trigger(a,d)},d.prototype._setupDataResolver=function(){var a={},b=this._timerManager;a[r]=function(a){return b.isTimerPaused(a)},this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var e=b[d];if(c=c||{},f.startsWith(e,r)){var g=e.split(r+".");g.length>0&&(c[e]=a[r].call(this,g[1]))}}return c}};var h="service.clock",i="create",j="pause",k="resume",l="destroy",m="name",n="interval",o="repeat_count",p="tick",q="reset",r="is_paused",s=-1;c.clock.ClockService=d}(d,b,e),function(a,b,c){"use strict";function d(a,b){if(this._logger=new e,this._pluginManager=new f(this._logger),this._pluginManager.addPlugin(new g(this._logger)),b)for(var c=0;c<b.length;c++)this._pluginManager.addPlugin(b[c]);this._pluginManager.setupPlugins(),this._isDestroyed=!1}var e=a.Logger,f=a.plugin.PluginManager,g=b.clock.ClockService;d.prototype.configure=function(a){if(!a)throw new Error("Configuration object cannot be NULL.");a.debugLogging?this._logger.enable():this._logger.disable(),this._isDestroyed&&this._logger.error(h,"Instance is destroyed.")},d.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var h="Heartbeat";c.Heartbeat=d}(d,e,c),a.ADB||(a.ADB={}),a.ADB.core||(a.ADB.core=d),a.ADB.va||(a.ADB.va=c),a.ADB.va.utils||(a.ADB.va.utils=b),a.ADB.va.plugins||(a.ADB.va.plugins={})}(this);

// VideoPlayerPlugin
!function(a){if("undefined"==typeof b)var b={};!function(a){"use strict";var b={};b.ASSET_TYPE_VOD="vod",b.ASSET_TYPE_LIVE="live",b.ASSET_TYPE_LINEAR="linear",a.AssetType=b}(b),function(a){"use strict";function b(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}b.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime},a.AdBreakInfo=b}(b),function(a){"use strict";function b(){this.id=null,this.name=null,this.length=null,this.position=null}b.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position},a.AdInfo=b}(b),function(a){"use strict";function b(){this.name=null,this.length=null,this.position=null,this.startTime=null}b.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime},a.ChapterInfo=b}(b),function(a){"use strict";function b(){this.bitrate=null,this.fps=null,this.droppedFrames=null,this.startupTime=null}b.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime},a.QoSInfo=b}(b),function(a){"use strict";function b(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.streamType=null,this.resumed=!1}b.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", streamType="+this.streamType+", resumed="+this.resumed},a.VideoInfo=b}(b),function(a){"use strict";function b(){this.debugLogging=!1}a.VideoPlayerPluginConfig=b}(b),function(a){"use strict";function b(){}b.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getAdBreakInfo=function(){return null},b.prototype.getAdInfo=function(){return null},b.prototype.getChapterInfo=function(){return null},b.prototype.getQoSInfo=function(){return null},a.VideoPlayerPluginDelegate=b}(b),function(a,b){"use strict";function c(a){if(c.__super__.constructor.call(this,h),!a)throw new Error("PlayerPlugin delegate cannot be NULL.");this._delegate=a,this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._isTrackingAd=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._videoIdle=!1,this._setupDataResolver()}var d=a.plugin.ParamMapping,e=a.Trigger,f=a.plugin.BasePlugin,g=b.VideoPlayerPluginConfig;a.extend(c,f),c.prototype.configure=function(a){if(!a)throw new Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof g))throw new Error("Expected config data to be instance of VideoPlayerPluginConfig.");a.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure(debugLogging="+a.debugLogging+")")},c.prototype.bootstrap=function(a){c.__super__.bootstrap.call(this,a),this._registerCommands(),this._registerBehaviours()},c.prototype._cmdVideoIdleStart=function(a){this._logger.info(this._logTag,"#_cmdVideoIdleStart()"),this._videoIdle=!0},c.prototype._cmdVideoIdleResume=function(a){this._logger.info(this._logTag,"#_cmdVideoIdleResume()"),this._videoIdle&&(this._trigger(o),this._trigger(p),a.isInChapter&&this._trigger(A),a.isInAd&&(this._trigger(u),this._isTrackingAd=!0)),this._videoIdle=!1},c.prototype.trackSessionStart=function(){if(this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session.");if(this._isTrackingSessionStarted)return void this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started.");this._trigger(o),this._isTrackingSessionStarted=!0;var a=this._dataResolver(["video.resumed"]);a.hasOwnProperty("video.resumed")&&a["video.resumed"]&&this._trigger(p)}},c.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()"),this._canProcess()&&(this._trigger(m),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)},c.prototype.trackVideoUnload=function(){if(this._logger.info(this._logTag,"#trackVideoUnload()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session.");this._stopPlayheadTimer(),this._trigger(n),this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._videoIdle=!1}},c.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()"),this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&(this._trigger(s),this._startPlayheadTimer())},c.prototype.trackPause=function(){if(this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")){this._stopPlayheadTimer();var a={};a[H]=!1,this._trigger(t,a)}},c.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&(this._stopPlayheadTimer(),this._trigger(w))},c.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&(this._trigger(x),this._startPlayheadTimer())},c.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&(this._stopPlayheadTimer(),this._trigger(y))},c.prototype.trackSeekComplete=function(){if(this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekComplete")){this._trigger(z),this._startPlayheadTimer();var a=this._dataResolver(["ad.isInAd"]);this._isTrackingAd=a.hasOwnProperty("ad.isInAd")&&a["ad.isInAd"]}},c.prototype.trackComplete=function(a){if(this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")){var b={};b[G]=a,this._stopPlayheadTimer(),this._trigger(q,b)}},c.prototype.trackTimedMetadata=function(a){this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(r,a)},c.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()"),this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(A)},c.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"trackChapterComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&this._trigger(B)},c.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&(this._trigger(u),this._isTrackingAd=!0)},c.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdComplete")&&(this._trigger(v),this._isTrackingAd=!1)},c.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()"),this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(C)},c.prototype.trackVideoPlayerError=function(a){if(this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+a+")"),this._startSessionIfNeeded("trackVideoPlayerError")){var b={};b[I]=l,b[J]=a,this._trigger(D,b)}},c.prototype.trackApplicationError=function(a){if(this._logger.info(this._logTag,"#trackApplicationError(errorId="+a+")"),this._startSessionIfNeeded("trackApplicationError")){var b={};b[I]=k,b[J]=a,this._trigger(D,b)}},c.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart),this._pluginManager.comply(this,"handleVideoIdleResume",this._cmdVideoIdleResume)},c.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new e(j,E),this,"handleVideoIdleStart"),this._pluginManager.registerBehaviour(new e(j,F),this,"handleVideoIdleResume",[new d(i,"ad.isInAd","isInAd"),new d(i,"chapter.isInChapter","isInChapter")])},c.prototype._setupDataResolver=function(){function a(){return g.video?g.video:(g.video=h._delegate.getVideoInfo(),h._logger.info(h._logTag,"Data from delegate > VideoInfo: "+g.video),g.video)}function b(){return g.ad?g.ad:(g.ad=h._delegate.getAdInfo(),h._logger.info(h._logTag,"Data from delegate > AdInfo: "+g.ad),g.ad)}function c(){return g.pod?g.pod:(g.pod=h._delegate.getAdBreakInfo(),h._logger.info(h._logTag,"Data from delegate > AdBreakInfo: "+g.pod),g.pod)}function d(){return g.chapter?g.chapter:(g.chapter=h._delegate.getChapterInfo(),h._logger.info(h._logTag,"Data from delegate > ChapterInfo: "+g.chapter),g.chapter)}function e(){return g.qos?g.qos:(g.qos=h._delegate.getQoSInfo(),h._logger.info(h._logTag,"Data from delegate > QoSInfo: "+g.qos),g.qos)}var f={},g={},h=this;f["video.id"]=function(){var b=a(),c=b?b.id:null;return h._logger.debug(h._logTag,"Resolving video.id: "+c),c},f["video.name"]=function(){var b=a(),c=b?b.name:null;return h._logger.debug(h._logTag,"Resolving video.name: "+c),c},f["video.length"]=function(){var b=a(),c=b?b.length:NaN;return h._logger.debug(h._logTag,"Resolving video.length: "+c),c},f["video.playerName"]=function(){var b=a(),c=b?b.playerName:null;return h._logger.debug(h._logTag,"Resolving video.playerName: "+c),c},f["video.streamType"]=function(){var b=a(),c=b?b.streamType:null;return h._logger.debug(h._logTag,"Resolving video.streamType: "+c),c},f["video.playhead"]=function(){var b=a(),c=b?b.playhead:NaN;return h._logger.debug(h._logTag,"Resolving video.playhead: "+c),c},f["video.resumed"]=function(){var b=a(),c=b?b.resumed:!1;return h._logger.debug(h._logTag,"Resolving video.resumed: "+c),c},f["video.playheadStalled"]=function(){return this._playheadStalled},f["pod.name"]=function(){var a=c(),b=a?a.name:null;return h._logger.debug(h._logTag,"Resolving pod.name: "+b),b},f["pod.playerName"]=function(){var a=c(),b=a?a.playerName:null;return h._logger.debug(h._logTag,"Resolving pod.playerName: "+b),b},f["pod.position"]=function(){var a=c(),b=a?a.position:NaN;return h._logger.debug(h._logTag,"Resolving pod.position: "+b),b},f["pod.startTime"]=function(){var a=c(),b=a?a.startTime:NaN;return h._logger.debug(h._logTag,"Resolving pod.startTime: "+b),b},f["ad.isInAd"]=function(){var a=b(),c=null!=a;return h._logger.debug(h._logTag,"Resolving ad.isInAd: "+c),c},f["ad.isInAdBreak"]=function(){var a=c(),b=null!=a;return h._logger.debug(h._logTag,"Resolving ad.isInAdBreak: "+b),b},f["ad.id"]=function(){var a=b(),c=a?a.id:null;return h._logger.debug(h._logTag,"Resolving ad.id: "+c),c},f["ad.name"]=function(){var a=b(),c=a?a.name:null;return h._logger.debug(h._logTag,"Resolving ad.name: "+c),c},f["ad.length"]=function(){var a=b(),c=a?a.length:NaN;return h._logger.debug(h._logTag,"Resolving ad.length: "+c),c},f["ad.position"]=function(){var a=b(),c=a?a.position:NaN;return h._logger.debug(h._logTag,"Resolving ad.position: "+c),c},f["chapter.isInChapter"]=function(){var a=d(),b=null!=a;return h._logger.debug(h._logTag,"Resolving chapter.isInChapter: "+b),b},f["chapter.name"]=function(){var a=d(),b=a?a.name:null;return h._logger.debug(h._logTag,"Resolving chapter.name: "+b),b},f["chapter.length"]=function(){var a=d(),b=a?a.length:NaN;return h._logger.debug(h._logTag,"Resolving chapter.length: "+b),b},f["chapter.position"]=function(){var a=d(),b=a?a.position:NaN;return h._logger.debug(h._logTag,"Resolving chapter.position: "+b),b},f["chapter.startTime"]=function(){var a=d(),b=a?a.startTime:NaN;return h._logger.debug(h._logTag,"Resolving chapter.startTime: "+b),b},f["qos.bitrate"]=function(){var a=e(),b=a?a.bitrate:NaN;return h._logger.debug(h._logTag,"Resolving qos.bitrate: "+b),b},f["qos.fps"]=function(){var a=e(),b=a?a.fps:NaN;return h._logger.debug(h._logTag,"Resolving qos.fps: "+b),b},f["qos.droppedFrames"]=function(){var a=e(),b=a?a.droppedFrames:NaN;return h._logger.debug(h._logTag,"Resolving qos.droppedFrames: "+b),b},f["qos.startupTime"]=function(){var a=e(),b=a?1e3*a.startupTime:NaN;return h._logger.debug(h._logTag,"Resolving qos.startupTime: "+b),b},this._dataResolver=function(a){if(!a||0==a.length)return null;g={};for(var b=null,c=0;c<a.length;c++){var d=a[c];b=b||{},b[d]=f.hasOwnProperty(d)?f[d].call(this):null}return b}},c.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(t)))},c.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,this._playheadStalled&&(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this.trackPlay()))},c.prototype._startPlayheadTimer=function(){var a=this;this._playheadTimer||(this._playheadTimer=setInterval(function(){if(a._canProcess()){var b=a._dataResolver(["ad.isInAd","video.playhead"]);if(a._isTrackingAd)a._playheadStalled&&a._trackExitStall(),b.hasOwnProperty("ad.isInAd")&&!b["ad.isInAd"]&&(a._isTrackingAd=!1);else{var c=b["video.playhead"];c!=a._previousPlayhead?a._trackExitStall():a._previousPlayhead>=0&&c==a._previousPlayhead&&(a._stalledPlayheadCount++,a._stalledPlayheadCount==L&&a._trackPlayheadStall()),a._previousPlayhead=c}}},K))},c.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null),this._trackExitStall()},c.prototype._startSessionIfNeeded=function(a){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+a+"() > Tracking session auto-start."),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+a+"() > No active tracking session."),!1)};var h="player",i=h,j="adobe-heartbeat",k="sourceErrorExternal",l="sourceErrorSDK",m="video_load",n="video_unload",o="video_start",p="video_resume",q="video_complete",r="timed_metadata",s="play",t="pause",u="ad_start",v="ad_complete",w="buffer_start",x="buffer_complete",y="seek_start",z="seek_complete",A="chapter_start",B="chapter_complete",C="bitrate_change",D="track_error",E="video_idle_start",F="video_idle_resume",G="callback",H="filter_report",I="source",J="error_id",K=1001,L=2;b.VideoPlayerPlugin=c}(a.ADB.core,b),a.ADB.va.plugins.videoplayer||(a.ADB.va.plugins.videoplayer=b)}(this);

// AdobeHeartbeatPlugin
!function(a){if("undefined"==typeof b)var b={};b.clock||(b.clock={}),b.context||(b.context={}),b.filter||(b.filter={}),b.model||(b.model={}),b.network||(b.network={}),function(a,b){"use strict";function c(a,b,c,d,e){if(!b)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=b,!a)throw new Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=a,!e)throw new Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+c,this._logger=e,this._isDestroyed=!1,this._createTimer(c,d),this._installHandlers()}var d=a.Event;c.KEY_NAME="name",c.KEY_INTERVAL="interval",c.KEY_RESET="reset",c.prototype.resume=function(a){this._logger.debug(this._logTag,"Starting timer: "+this._name);var b={};b[c.KEY_NAME]=e+"."+this._name,b[c.KEY_RESET]=a,this._pluginManager.command(f,i,b)},c.prototype.pause=function(a){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var b={};b[c.KEY_NAME]=e+"."+this._name,b[c.KEY_RESET]=a,this._pluginManager.command(f,h,b)},c.prototype.destroy=function(){if(!this._isDestroyed){this._isDestroyed=!0,this._uninstallHandlers();var a={};a[c.KEY_NAME]=e+"."+this._name,this._pluginManager.command(f,j,a)}},c.prototype.setInterval=function(a){var b=k+"."+e+"."+this._name,c=this._pluginManager.request(f,[b])[b];this.pause(!0),this._createTimer(this._name,a),c||this.resume(!0)},c.prototype._cmdResume=function(a){var b=!1;null!=a&&a.hasOwnProperty(c.KEY_RESET)&&(b=a[c.KEY_RESET]),this.resume(b)},c.prototype._cmdPause=function(a){var b=!1;null!=a&&a.hasOwnProperty(c.KEY_RESET)&&(b=a[c.KEY_RESET]),this.pause(b)},c.prototype._onTick=function(a,b){this._channel.trigger(new d("clock:"+this._name+".tick",b))},c.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this),this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this),this._pluginManager.on(f,e+"."+this._name+".tick",this._onTick,this)},c.prototype._uninstallHandlers=function(){this._channel.off(null,null,this),this._pluginManager.off(null,null,null,this)},c.prototype._createTimer=function(a,b){this._name=a,this._interval=b;var d={};d[c.KEY_NAME]=e+"."+this._name,d[c.KEY_INTERVAL]=this._interval,this._pluginManager.command(f,g,d)};var e="heartbeat",f="service.clock",g="create",h="pause",i="resume",j="destroy",k="is_paused";b.clock.Timer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,f,h,d)}var d=a.Event,e=b.clock.Timer;a.extend(c,e),c.prototype._onCheckStatusComplete=function(a){var b=a.data[l];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+b+")"),b){if(b==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");b>g?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+b),this.setInterval(g)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+b),this.setInterval(b))}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(h)},c.prototype._getSettings=function(a){this._logger.debug(this._logTag,"#_getSettings()"),this._channel.trigger(new d(i))},c.prototype._installHandlers=function(){c.__super__._installHandlers.call(this),this._channel.on(j,this._getSettings,this),this._channel.on(k,this._onCheckStatusComplete,this),this._channel.reply(l,function(){return this._interval},this)};var f="check_status",g=600,h=60,i="clock:check_status.tick",j="clock:check_status.get_settings",k="net:check_status_complete",l="check_status_interval";b.clock.CheckStatusTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,e,f,d)}var d=b.clock.Timer;a.extend(c,d),c.prototype._onCheckStatusComplete=function(a){var b=a.data[g];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+b+")"),b){if(b==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+b),this.setInterval(b)}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(f)},c.prototype._installHandlers=function(){c.__super__._installHandlers.call(this),this._channel.on(h,this._onCheckStatusComplete,this),this._channel.reply(g,function(){return this._interval},this)};var e="reporting",f=10,g="reporting_interval",h="net:check_status_complete";b.clock.ReportingTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,e,f,d)}var d=b.clock.Timer;a.extend(c,d);var e="idle",f=1800;b.clock.IdleTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,e,f,d)}var d=b.clock.Timer;a.extend(c,d);var e="flush_filter",f=.25;b.clock.FlushFilterTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,c){if(!a)throw new Error("Reference to the pluginManager object cannot be NULL");if(!b)throw new Error("Reference to the channel object cannot be NULL");if(!c)throw new Error("Reference to the logger object cannot be NULL");this._isDestroyed=!1,this._reportingTimer=new f(a,b,c),this._checkStatusTimer=new d(a,b,c),this._flushFilterTimer=new e(a,b,c),this._idleTimer=new g(a,b,c)}var d=b.clock.CheckStatusTimer,e=b.clock.FlushFilterTimer,f=b.clock.ReportingTimer,g=b.clock.IdleTimer;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())},b.clock.Clock=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){this.value=a,this.hint=b}function d(a){this.realm=a,this.data={}}c.HINT_SHORT="short",d.prototype.setField=function(a,b,d){this.data[a]=new c(b,d)},d.prototype._createAccessor=function(a,b,c){var d=this;return function(){return arguments.length&&(d[a]=arguments[0],d.setField(b,arguments[0],c)),d[a]}},b.model.Dao=d,b.model.DaoField=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.adId(a.adId()),this.sid(a.sid()),this.resolver(a.resolver()),this.podId(a.podId()),this.podPosition(a.podPosition()),this.podOffset(a.podOffset()),this.podName(a.podName()),this.adLength(a.adLength()),this.adName(a.adName())}else this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName("")}var d=b.model.Dao;a.extend(c,d),b.model.AdDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",e.HINT_SHORT),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.reportSuiteId(a.reportSuiteId()),this.trackingServer(a.trackingServer()),this.ssl(a.ssl())}else this.reportSuiteId(""),this.trackingServer(""),this.ssl(0)}var d=b.model.Dao,e=b.model.DaoField;a.extend(c,d),b.model.AdobeAnalyticsDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.id(a.id()),this.sid(a.sid()),this.name(a.name()),this.position(a.position()),this.length(a.length()),this.offset(a.offset())}else this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0)}var d=b.model.Dao;a.extend(c,d),b.model.ChapterDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type()),this.name(a.name()),this.videoId(a.videoId()),this.publisher(a.publisher()),this.length(a.length());var b=a.adData()?new e(a.adData()):null;this.adData(b);var d=a.chapterData()?new f(a.chapterData()):null;this.chapterData(d)}else this.type(""),this.name(""),this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null)}var d=b.model.Dao,e=b.model.AdDao,f=b.model.ChapterDao;a.extend(c,d),c.TYPE_AD="ad",c.TYPE_MAIN_CONTENT="main",b.model.AssetDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration","duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type()),this.duration(a.duration()),this.playhead(a.playhead()),this.id(a.id()),this.source(a.source()),this.ts(a.ts()),this.prevTs(a.prevTs())}else this.type(""),this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1)}var d=b.model.Dao;a.extend(c,d),c.EVENT_TYPE_AA_START="aa_start",c.EVENT_TYPE_AA_AD_START="aa_ad_start",c.EVENT_TYPE_START="start",c.EVENT_TYPE_RESUME="resume",c.EVENT_TYPE_CHAPTER_START="chapter_start",c.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",c.EVENT_TYPE_PLAY="play",c.EVENT_TYPE_PAUSE="pause",c.EVENT_TYPE_STALL="stall",c.EVENT_TYPE_BUFFER="buffer",c.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",c.EVENT_TYPE_ERROR="error",c.EVENT_TYPE_COMPLETE="complete",b.model.EventDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.bitrate(a.bitrate()),this.fps(a.fps()),this.droppedFrames(a.droppedFrames()),this.startupTime(a.startupTime()),this.isStartupTimeOverridden=a.isStartupTimeOverridden}else this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1}var d=b.model.Dao;a.extend(c,d),b.model.QoSDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.ovp(a.ovp()),this.sdk(a.sdk()),this.channel(a.channel()),this.playerName(a.playerName()),this.libVersion(a.libVersion()),this.apiLevel(a.apiLevel())}else this.ovp(e),this.sdk(e),this.channel(e),this.playerName(""),this.libVersion(""),this.apiLevel(0)}var d=b.model.Dao;a.extend(c,d);var e="unknown";b.model.ServiceProviderDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.sessionId(a.sessionId())}else this.sessionId(null)}var d=b.model.Dao;a.extend(c,d),b.model.SessionDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.type=this._createAccessor("_type","type",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type())}else this.type(null)}var d=b.model.Dao;a.extend(c,d),b.model.StreamDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.analyticsVisitorId(a.analyticsVisitorId()),this.marketingCloudVisitorId(a.marketingCloudVisitorId()),this.visitorId(a.visitorId())}else this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null)}var d=b.model.Dao;a.extend(c,d),b.model.UserDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"aam"),this.audienceManagerBlob=this._createAccessor("_audienceManagerBlob","blob",null),this.audienceManagerLocationHint=this._createAccessor("_audienceManagerLocationHint","loc_hint",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.audienceManagerBlob(a.audienceManagerBlob()),this.audienceManagerLocationHint(a.audienceManagerLocationHint())}else this.audienceManagerBlob(null),this.audienceManagerLocationHint(null)}var d=b.model.Dao;a.extend(c,d),b.model.AudienceManagerDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,c,i,j){this.eventData=new e,this.eventData.type(b),this.eventData.duration(0),this.eventData.ts((new Date).getTime()),this.eventData.playhead(c),this.assetData=new f(a._assetData),this.streamData=new g(a._streamData),this.qosData=new h(a._qosData),this.cuserData=d.clone(a._cuserData),this.meta=i,this.callback=j,this.filterReport=!0}var d=a.ObjectUtils,e=b.model.EventDao,f=b.model.AssetDao,g=b.model.StreamDao,h=b.model.QoSDao;b.model.TrackItem=c}(a.ADB.va.utils,b),function(a,b){"use strict";function c(a,b,c,i,j,k){this.adobeAnalyticsData=a,this.userData=b,this.aamData=c,this.serviceProviderData=i,this.sessionData=j,this.eventData=new e(k.eventData),this.assetData=new f(k.assetData),this.streamData=new g(k.streamData),this.qosData=new h(k.qosData),this.cuserData=d.clone(k.cuserData),this.meta=d.clone(k.meta),this.callback=k.callback,this.filterReport=k.filterReport}var d=a.ObjectUtils,e=b.model.EventDao,f=b.model.AssetDao,g=b.model.StreamDao,h=b.model.QoSDao;b.model.CUserDao;b.model.Report=c}(a.ADB.va.utils,b),function(a){"use strict";function b(){}b.prototype.serializeReport=function(a){},b.prototype.serializeDao=function(a){},b.prototype.serializeMap=function(a){},b.prototype.serializeNumber=function(a,b,c,d){},b.prototype.serializeString=function(a,b,c,d){},a.model.ISerializer=b}(b),function(a,b){"use strict";function c(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a}var d=b.model.Dao,e=b.model.DaoField,f=b.model.ISerializer;a.extend(c,f),c.prototype.serializeReport=function(a){var b=[];return b.push(this.serializeDao(a.adobeAnalyticsData)),b.push(this.serializeDao(a.userData)),b.push(this.serializeDao(a.aamData)),b.push(this.serializeMap(a.cuserData,"cuser")),b.push(this.serializeDao(a.serviceProviderData)),b.push(this.serializeDao(a.sessionData)),b.push(this.serializeDao(a.eventData)),b.push(this.serializeDao(a.assetData)),b.push(this.serializeDao(a.streamData)),b.push(this.serializeDao(a.qosData)),b.push(this.serializeMap(a.meta,"meta")),{serializedOutput:b.filter(function(a){return!!a}).join("&"),callback:a.callback}},c.prototype.serializeDao=function(a){var b=this._processDao(a);return b.filter(function(a){return!!a}).join("&")},c.prototype.serializeMap=function(a,b){var c=[],d=b?b:"meta";for(var e in a)a.hasOwnProperty(e)&&a[e]&&c.push("s:"+d+":"+e+"="+window.encodeURIComponent(a[e]));return c.join("&")},c.prototype.serializeNumber=function(a,b,c,d){var f=h;return null==b||isNaN(b)?null:(d===e.HINT_SHORT&&(f=i),f+":"+c+":"+a+"="+Math.floor(b))},c.prototype.serializeString=function(a,b,c,d){return b?j+":"+c+":"+a+"="+window.encodeURIComponent(b):null},c.prototype._processDao=function(a){var b=[];for(var c in a.data)if(a.data.hasOwnProperty(c)){var e=a.data[c],f=e.value,h=e.hint,i=null,j=a.realm;if(null==f)continue;"number"==typeof f?i=this.serializeNumber(c,f,j,h):"string"==typeof f?i=this.serializeString(c,f,j,h):f instanceof d?i=this.serializeDao(f):this._logger.warn(g,"#_processDao() > Unable to serialize DAO. Field: "+c+". Value: "+f+"."),i&&b.push(i)}return b};var g="ah::QuerystringSerializer",h="l",i="h",j="s";b.model.QuerystringSerializer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){if(!a)throw new Error("Reference to the data object cannot be NULL");if(this._data=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b}c.prototype.parse=function(){var a,b,c,i,j;if(window.DOMParser){var k=new window.DOMParser;j=k.parseFromString(this._data,"text/xml")}else j=new window.ActiveXObject("Microsoft.XMLDOM"),j.async=!1,j.loadXML(this.data);var l;l=parseInt(j.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10),l&&(a=l),l=parseInt(j.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10),l&&(b=l),l=parseInt(j.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10),l&&(c=1==l),j.getElementsByTagName("nielsenEnabled")[0]?(l=parseInt(j.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10),i=1==l):i=!0;var m={};return m[e]=a,m[f]=b,m[g]=c,m[h]=i,this._logger.debug(d,"#parse() > Obtained configuration settings."),m};var d="ah::SettingsParser",e="reporting_interval",f="check_status_interval",g="track_external_errors",h="nielsen_enabled";b.network.SettingsParser=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){if(this._trackingServer=null,this._checkStatusServer=null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._quietMode=!1,this._visitorOptedOut=!1,this._prevReportSent=null,!a)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._serializer=new i(b),this._installEventListeners()}var d=a.Event,e=a.URLRequestMethod,f=a.URLRequest,g=a.URLLoader,h=b.network.SettingsParser,i=b.model.QuerystringSerializer;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(j,"#destroy()"),this._uninstallEventListeners())},c.prototype._onApiConfig=function(a){var b=a.data;this._logger.debug(j,"#_onApiConfig(sb_server="+b[k]+", check_status_server="+b[l]+", publisher="+b[m]+", quiet_mode="+b[n]+", ssl="+b[o]+")"),this._trackingServer=this._updateRequestProtocol(b[k],b[o]),this._checkStatusServer=this._updateRequestProtocol(b[l],b[o]),this._publisher=b[m],this._quietMode=b[n],this._isConfigured=!0},c.prototype._onUpdateVisitorOptOut=function(a){var b=a.data;this._logger.debug(j,"#_onUpdateVisitorOptOut(visitor_opt_out="+b[q]+")"),this._visitorOptedOut=b[q]},c.prototype._onFilterReportAvailable=function(a){var b=a.data;if(!this._isConfigured)return void this._logger.warn(j,"#_onFilterReportAvailable() > Unable to send request: not configured.");var c=b[p],h=this._serializer.serializeReport(c),i=this._trackingServer+"/?"+h.serializedOutput;if(this._prevReportSent&&this._prevReportSent.eventData&&c.eventData&&this._prevReportSent.eventData.playhead==c.eventData.playhead&&this._prevReportSent.eventData.ts==c.eventData.ts&&this._prevReportSent.eventData.prevTs==c.eventData.prevTs&&this._prevReportSent.eventData.type==c.eventData.type)return void this._logger.debug(j,"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\n"+i);this._prevReportSent=c;var k=new f(i,e.GET);this._logger.debug(j,"#_onFilterReportAvailable() > "+k.url);var l=this,m=function(a){o.close(),h.callback&&h.callback.call(null)},n=function(a){o.close(),l._logger.warn(j,"#_onFilterReportAvailable() > Failed to send heartbeat report."),h.callback&&h.callback.call(null)};if(!this._quietMode&&!this._visitorOptedOut){var o=new g;o.addEventListener(d.SUCCESS,m,this),o.addEventListener(d.ERROR,n,this),o.load(k)}},c.prototype._onClockCheckStatusTick=function(a){function b(a){if(a.data){var b=new h(a.data.response,i._logger),c=b.parse();c?i._channel.trigger(new d(v,c)):i._logger.warn(j,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")}n.close()}function c(a){i._logger.warn(j,"#_onClockCheckStatusTick() > Failed to obtain the config. settings."),n.close()}if(!this._isConfigured)return void this._logger.warn(j,"#_onClockCheckStatusTick() > Unable to send request: not configured.");if(!this._publisher)return void this._logger.warn(j,"#_onClockCheckStatusTick() > Publisher is NULL.");var i=this,k=this._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),l=this._checkStatusServer+k+".xml?r="+(new Date).getTime(),m=new f(l,e.GET),n=new g;n.addEventListener(d.SUCCESS,b,this),n.addEventListener(d.ERROR,c,this),this._logger.debug(j,"#_onClockCheckStatusTick() > Get new settings from: "+l),n.load(m)},c.prototype._updateRequestProtocol=function(a,b){var c=a;return 0===c.indexOf("http://")?c=c.slice(7):0===c.indexOf("https://")&&(c=c.slice(8)),b?"https://"+c:"http://"+c},c.prototype._installEventListeners=function(){this._channel.on(r,this._onApiConfig,this),this._channel.on(s,this._onUpdateVisitorOptOut,this),this._channel.on(t,this._onFilterReportAvailable,this),this._channel.on(u,this._onClockCheckStatusTick,this)},c.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var j="ah::Network",k="tracking_server",l="check_status_server",m="publisher",n="quiet_mode",o="ssl",p="report",q="visitor_opt_out",r="api:config",s="api:update_visitor_optout",t="filter:data_available",u="clock:check_status.tick",v="net:check_status_complete";b.network.Network=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){if(!a)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._isDestroyed=!1,this._isBufferingInProgress=!1,this._reportBuffer={},this._tsHistory={},this._workQueue=new i,this._installEventListeners()}function d(a){var b=[];return a&&a.forEach(function(a){a.eventData.type()==k.EVENT_TYPE_PAUSE||a.eventData.type()==k.EVENT_TYPE_STALL?(!a.filterReport||a.eventData.duration()>u)&&b.push(a):b.push(a)}),b}function e(a){var b=-1,c=-1,d=[];return a.forEach(function(a){a.eventData.type()==k.EVENT_TYPE_START?a.assetData.type()==l.TYPE_MAIN_CONTENT?-1==b?b=d.push(a)-1:(a.eventData.prevTs(-1),d[b]=a):-1==c?c=d.push(a)-1:(a.eventData.prevTs(-1),d[c]=a):d.push(a)}),d}function f(a){var b=[];return a.forEach(function(c){if(c.eventData.type()==k.EVENT_TYPE_PLAY){if(c.eventData.duration()>t)b.push(c);else if(0==c.eventData.duration()&&c.assetData.type()==l.TYPE_MAIN_CONTENT){var d=g(a);d.indexOf(c)==d.length-1&&b.push(c)}}else b.push(c)}),b}function g(a){var b=[];return a.forEach(function(a){(a.eventData.type()==k.EVENT_TYPE_PLAY||a.eventData.type()==k.EVENT_TYPE_BUFFER||a.eventData.type()==k.EVENT_TYPE_START)&&b.push(a)}),b}var h=a.radio.Command,i=a.radio.CommandQueue,j=a.Event,k=b.model.EventDao,l=b.model.AssetDao;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(w,"#destroy()"),this._uninstallEventListeners(),this.clear())},c.prototype.clear=function(){this._logger.debug(w,"#clear()"),this._workQueue.cancelAllCommands(),this._reportBuffer={},this._tsHistory={},this._isBufferingInProgress=!1},c.prototype.flush=function(){this._workQueue.addCommand(new h(this._flushBufferReport,this))},c.prototype._bufferReport=function(a){if(!this._isDestroyed){var b=a[q];if(b){var c=b.sessionData.sessionId();this._reportBuffer[c]=this._reportBuffer[c]||[],this._reportBuffer[c].push(b)}if(!this._isBufferingInProgress){this._isBufferingInProgress=!0;var d={};d[p]=!0,d[r]=1,this._channel.command(s,d)}}},c.prototype._flushBufferReport=function(){function a(a){if(a)for(var c=0;c<a.length;c++){var d=a[c],e=d.sessionData.sessionId();b._tsHistory[e]=b._tsHistory[e]||{};var f=d.eventData.type()+"."+(d.assetData.type()==l.TYPE_AD?d.assetData.adData().adId():d.assetData.videoId());b._tsHistory[e].hasOwnProperty(f)&&d.eventData.prevTs(b._tsHistory[e][f]),b._tsHistory[e][f]=d.eventData.ts()}}if(!this._isDestroyed){var b=this;for(var c in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(c)){var g=f(e(d(this._reportBuffer[c])));a(g);for(var h=0;h<g.length;h++){var i=g[h],k={};k[q]=i,this._channel.trigger(new j(n,k))}}this._reportBuffer={};var m=this._channel.request(v),o=this._tsHistory[m]||{};this._tsHistory={},this._tsHistory[m]=o,this._isBufferingInProgress=!1}},c.prototype._onContextReportAvailable=function(a){var b=a.data;this._workQueue.addCommand(new h(this._bufferReport,this,[b]))},c.prototype._onClockFlushFilterTick=function(a){this.flush()},c.prototype._installEventListeners=function(){this._channel.on(m,this._onContextReportAvailable,this),this._channel.on(o,this._onClockFlushFilterTick,this)},c.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var m="context:report_available",n="filter:data_available",o="clock:flush_filter.tick",p="reset",q="report",r="repeat_count",s="clock:flush_filter.resume",t=250,u=250,v="session_id",w="ah::ReportFilter";b.filter.ReportFilter=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){this._onFail={fn:a,ctx:b}}var d=a.ErrorInfo;c.prototype.validateFields=function(a,b){if(!a)return this._fail("Data cannot be null");if(b)for(var c=0;c<b.length;c++){var d=b[c];switch(d){case"videoId":if(!a.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof a.videoId)return this._fail("The ID for the main video must be a String.");if(""===a.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!a.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof a.streamType)return this._fail("The stream type for the main video must be a String.");if(""===a.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"videoLength":if(!a.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof a.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(a.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"playhead":if(!a.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if("number"!=typeof a.playhead)return this._fail("The playhead for the main video must be a Number.");if(isNaN(a.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case"playerName":if(!a.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof a.playerName)return this._fail("The player name for the main video must be a String.");if(""===a.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"rsid":if(!a.hasOwnProperty("rsid"))return this._fail("account (rsid) is required and has to be set in the AppMeasurement instance.");if("string"!=typeof a.rsid)return this._fail("account (rsid) of the AppMeasurement instance must be a String.");if(""===a.rsid)return this._fail("account (rsid) of the AppMeasurement instance  cannot be an empty string.");break;case"trackingServer":if(!a.hasOwnProperty("trackingServer"))return this._fail("trackingServer is required and has to be set in the AppMeasurement instance.");if("string"!=typeof a.trackingServer)return this._fail("trackingServer of the AppMeasurement instance must be a String.");if(""===a.trackingServer)return this._fail("trackingServer of the AppMeasurement instance cannot be an empty string.");break;case"podPlayerName":if(!a.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof a.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===a.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!a.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof a.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(a.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!a.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof a.adId)return this._fail("The ad ID must be a String.");if(""===a.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!a.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof a.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(a.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"chapterPosition":if(!a.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof a.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(a.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");break;case"chapterOffset":if(!a.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof a.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(a.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case"chapterLength":if(!a.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof a.chapterLength)return this._fail("The length of the chapter must be a Number.");if(isNaN(a.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+d)}}return!0},c.prototype._fail=function(a){var b=new d("Invalid input data",a);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,b),!1},b.context.InputDataValidator=c}(a.ADB.va,b),function(a,b){"use strict";function c(a,b){if(!b)throw new Error("Reference to the logger object cannot be NULL");if(this._logger=b,!a)throw new Error("Reference to the context object cannot be NULL");this._context=a}var d=b.model.Report;
c.prototype.createReportForItem=function(a){return this._logger.debug(e,"Creating report for item: "+a.eventData.type()),new d(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,a)};var e="ah::ReportFactory";b.context.ReportFactory=c}(a.ADB.core,b),function(a,b,c,d){"use strict";function e(a,b){if(!a)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._lastInBandItem=null,this._autoComputedStartupTime=0,this._reportingInterval=fa,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._cuserData=null,this._adobeAnalyticsData=new j,this._serviceProviderData=new k,this._userData=new l,this._aamData=new m,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._activeAssetId=null,this._isDestroyed=!1,this._doNotOverrideEventDuration=!1,this._reportFactory=new u(this,this._logger),this._inputDataValidator=new v(function(a){this._logger.error(w,a.getMessage()+" | "+a.getDetails()),this._channel.trigger(new h(y,a))},this),this._stashedChapterData=null,this._stashedAdData=null,this._trackExternalErrors=!0,this._installEventListeners()}var f=c.md5,g=c.ObjectUtils,h=a.Event,i=d.model.SessionDao,j=d.model.AdobeAnalyticsDao,k=d.model.ServiceProviderDao,l=d.model.UserDao,m=d.model.AudienceManagerDao,n=d.model.EventDao,o=d.model.AssetDao,p=d.model.StreamDao,q=d.model.QoSDao,r=d.model.AdDao,s=d.model.ChapterDao,t=d.model.TrackItem,u=d.context.ReportFactory,v=d.context.InputDataValidator;e.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(w,"#destroy()"),this._uninstallEventListeners())},e.prototype._onApiAnalyticsStart=function(a){this._logger.debug(w,"#_onApiAnalyticsStart()");var b=a.data;if(this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(b,["playhead"])){this._userData.visitorId(b.vid),this._userData.analyticsVisitorId(b.aid),this._userData.marketingCloudVisitorId(b.mid),this._aamData.audienceManagerBlob(b.blob),this._aamData.audienceManagerLocationHint(b.loc_hint),b.customerIDs&&(this._cuserData=b.customerIDs),this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_AA_START,b.playhead,null,b._eventData[E]);c.assetData.adData(null),c.assetData.type(o.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(c)}},e.prototype._onApiAnalyticsAdStart=function(a){this._logger.debug(w,"#_onApiAnalyticsAdStart()");var b=a.data;if(this._checkCall("_onApiAnalyticsAdStart")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_AA_AD_START,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiVideoLoad=function(a){var b=a.data;this._logger.debug(w,"#_onApiVideoLoad(rsid="+b.rsid+", aa_trackingServer="+b.trackingServer+")"),this._resetInternalState(),this._inputDataValidator.validateFields(b,["rsid","trackingServer"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0)},e.prototype._onApiVideoUnload=function(a){return this._logger.debug(w,"#_onApiVideoUnload()"),this._isTrackingSessionActive?void(this._isTrackingSessionActive=!1):void this._logger.debug(w,"#_onApiVideoUnload() > No active tracking session.")},e.prototype._onApiVideoStart=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiVideoStart(id="+b.videoId+", name="+b.videoName+", length="+b.videoLength+", type="+b.streamType+", playerName="+b.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(b,["videoId","streamType","videoLength","playhead","playerName"])){this._adobeAnalyticsData.reportSuiteId(b.rsid),this._adobeAnalyticsData.trackingServer(b.trackingServer),this._adobeAnalyticsData.ssl(Number(b.useSsl)),this._serviceProviderData.ovp(b.ovp),this._serviceProviderData.sdk(b.sdk),this._serviceProviderData.channel(b.channel),this._serviceProviderData.libVersion(b.version),this._serviceProviderData.apiLevel(b.apiLvl),this._activeAssetId=b.videoId,this._serviceProviderData.playerName(b.playerName),this._assetData.videoId(this._activeAssetId),this._assetData.length(b.videoLength),this._assetData.type(o.TYPE_MAIN_CONTENT),this._assetData.publisher(b.publisher),this._assetData.name(b.videoName),this._streamData.type(b.streamType),this._updateQoSInfo(b);var c=b.metaNielsen?g.merge(b.metaVideo,b.metaNielsen):b.metaVideo,d=new t(this,n.EVENT_TYPE_START,b.playhead,c,b._eventData[E]);this._sendHit(d)}},e.prototype._onApiVideoResume=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiVideoResume(id="+b.videoId+", name="+b.videoName+", length="+b.videoLength+", type="+b.streamType+", playerName="+b.playerName+")"),this._checkCall("_onApiVideoResume")&&this._inputDataValidator.validateFields(b,["videoId","streamType","videoLength","playhead","playerName"])){this._activeAssetId=b.videoId,this._assetData.videoId(this._activeAssetId),this._assetData.length(b.videoLength),this._assetData.type(o.TYPE_MAIN_CONTENT),this._assetData.name(b.videoName),this._streamData.type(b.streamType);var c=new t(this,n.EVENT_TYPE_RESUME,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiVideoComplete=function(a){this._logger.debug(w,"#_onApiVideoComplete()");var b=a.data;if(this._checkCall("_onApiVideoComplete")){var c=new t(this,n.EVENT_TYPE_COMPLETE,this._assetData.length(),null,b._eventData[E]);this._sendHit(c),this._isVideoComplete=!0}},e.prototype._onApiPlay=function(a){this._logger.debug(w,"#_onApiPlay()");var b=a.data;if(this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_PLAY,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiPause=function(a){this._logger.debug(w,"#_onApiPause()");var b=a.data;if(this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=b.playheadStalled?n.EVENT_TYPE_STALL:n.EVENT_TYPE_PAUSE,d=new t(this,c,b.playhead,null,b._eventData[E]);b._eventData.hasOwnProperty(F)&&(d.filterReport=b._eventData[F]),this._sendHit(d)}},e.prototype._onApiBufferStart=function(a){this._logger.debug(w,"#_onApiBufferStart()");var b=a.data;if(this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_BUFFER,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiSeekStart=function(a){this._logger.debug(w,"#_onApiSeekStart()"),this._checkCall("_onApiSeekStart")&&(this._stashedAdData=this._assetData.adData(),this._stashedChapterData=this._assetData.chapterData(),this._assetData.adData(null),this._assetData.type(o.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId(),this._assetData.chapterData(null))},e.prototype._onApiSeekComplete=function(a){this._logger.debug(w,"#_onApiSeekComplete()");var b=a.data;if(this._checkCall("_onApiSeekComplete")&&this._inputDataValidator.validateFields(b,["playhead"])){if(b.isInAd){if(!this._inputDataValidator.validateFields(b,["adId","adPosition","podPosition","podPlayerName"]))return;var c=f(this._assetData.videoId())+"_"+b.podPosition;if(this._stashedAdData&&this._stashedAdData.podId()==c&&parseInt(this._stashedAdData.podPosition(),10)==b.adPosition)this._assetData.adData(this._stashedAdData),this._activeAssetId=this._stashedAdData.adId();else if(!this._assetData.adData()){this._activeAssetId=b.adId;var d=new r;d.adId(this._activeAssetId),d.adName(b.adName),d.adLength(b.adLength),d.podId(c),d.resolver(b.podPlayerName),d.podPosition(b.podPosition+""),d.podName(b.podName),d.podOffset(b.podSecond),d.sid(this._generateSessionId()),this._assetData.adData(d)}this._assetData.type(o.TYPE_AD)}else this._assetData.adData(null),this._assetData.type(o.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId();if(b.isInChapter){if(!this._inputDataValidator.validateFields(b,["chapterPosition","chapterLength","chapterOffset"]))return;if(this._stashedChapterData&&b.chapterPosition==this._stashedChapterData.position())this._assetData.chapterData(this._stashedChapterData);else if(!this._assetData.chapterData()){var e=new s;e.id(f(this._assetData.videoId())+"_"+b.chapterPosition),e.name(b.chapterName),e.length(b.chapterLength),e.position(b.chapterPosition),e.offset(b.chapterOffset),e.sid(this._generateSessionId()),this._assetData.chapterData(e)}}else this._assetData.chapterData(null);this._stashedAdData=null,this._stashedChapterData=null}},e.prototype._onApiAdStart=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiAdStart(id="+b.adId+", player_name="+b.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+b.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(b,["playhead","podPosition","podPlayerName","adId","adPosition"])){this._activeAssetId=b.adId;var c=new r;c.adId(this._activeAssetId),c.adName(b.adName),c.adLength(b.adLength),c.resolver(b.podPlayerName),c.podId(f(this._assetData.videoId())+"_"+b.podPosition),c.podPosition(b.adPosition+""),c.podName(b.podName),c.podOffset(b.podSecond),c.sid(this._generateSessionId()),this._assetData.adData(c),this._assetData.type(o.TYPE_AD),this._updateQoSInfo(b);var d=g.merge(b.metaVideo,b.metaAd);d=b.metaNielsen?g.merge(d,b.metaNielsen):d;var e=new t(this,n.EVENT_TYPE_START,b.playhead,d,b._eventData[E]);this._sendHit(e)}},e.prototype._onApiAdComplete=function(a){this._logger.debug(w,"#_onApiAdComplete()");var b=a.data;if(this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(b,["playhead"])){if(this._assetData.type()!=o.TYPE_AD)return void this._logger.warn(w,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_COMPLETE,b.playhead,null,b._eventData[E]);this._sendHit(c),this._assetData.adData(null),this._assetData.type(o.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId()}},e.prototype._onApiChapterStart=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiChapterStart(name="+b.chapterName+", length="+b.chapterLength+", position="+b.chapterPosition+", chapter_offset="+b.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(b,["playhead","chapterPosition","chapterOffset","chapterLength"])){var c=new s;c.id(f(this._assetData.videoId())+"_"+b.chapterPosition),c.name(b.chapterName),c.length(b.chapterLength),c.position(b.chapterPosition),c.offset(b.chapterOffset),c.sid(this._generateSessionId()),this._assetData.chapterData(c),this._updateQoSInfo(b);var d=g.merge(b.metaVideo,b.metaChapter),e=new t(this,n.EVENT_TYPE_CHAPTER_START,b.playhead,d,b._eventData[E]);e.assetData.adData(null),e.assetData.type(o.TYPE_MAIN_CONTENT),this._sendHit(e)}},e.prototype._onApiChapterComplete=function(a){this._logger.debug(w,"#_onApiChapterComplete()");var b=a.data;if(this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(b,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(w,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_CHAPTER_COMPLETE,b.playhead,null,b._eventData[E]);c.assetData.adData(null),c.assetData.type(o.TYPE_MAIN_CONTENT),this._sendHit(c),this._assetData.chapterData(null)}},e.prototype._onApiBitrateChange=function(a){this._logger.debug(w,"#_onApiBitrateChange()");var b=a.data;if(this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_BITRATE_CHANGE,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiTrackError=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiTrackError(source="+b._eventData.source+", err_id="+b._eventData.error_id+")"),!this._isTrackingSessionActive)return void this._logger.warn(w,"#_onApiTrackError() > No active tracking session.");if(this._trackExternalErrors||b._eventData.source===x){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_ERROR,0,null,b._eventData[E]);c.eventData.id(b._eventData.error_id),c.eventData.source(b._eventData.source),this._sendHit(c)}},e.prototype._onApiTrackInternalError=function(a){var b=a.data;this._logger.debug(w,"#_onApiTrackInternalError(source="+b.source+", err_id="+b.error_id+")"),this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_ERROR,0);c.eventData.id(b.error_id),c.eventData.source(b.source),this._sendHit(c)},e.prototype._onApiQuantumEnd=function(a){this._logger.debug(w,"#_onApiQuantumEnd(interval="+this._channel.request(B)+")");var b=a.data;this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(b,["playhead"])&&(this._lastInBandItem&&(this._lastInBandItem.eventData.playhead(b.playhead),this._updateQoSInfo(b),this._lastInBandItem.qosData.bitrate(this._qosData.bitrate()),this._lastInBandItem.qosData.fps(this._qosData.fps()),this._lastInBandItem.qosData.droppedFrames(this._qosData.droppedFrames()),this._lastInBandItem.qosData.startupTime(this._qosData.startupTime())),this._sendHit(this._lastInBandItem))},e.prototype._onNetworkCheckStatusComplete=function(a){var b=a.data;this._trackExternalErrors=b[I],this._reportingInterval=b[J],this._reportingInterval||(this._reportingInterval=fa),this._logger.debug(w,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},e.prototype._onResetSessionId=function(a){var b=this._generateSessionId();this._sessionData=new i,this._sessionData.sessionId(b),this._logger.debug(w,"#_resetSessionId(new sessionId="+b+")")},e.prototype._installEventListeners=function(){this._channel.on(K,this._onApiAnalyticsStart,this),this._channel.on(L,this._onApiAnalyticsAdStart,this),this._channel.on(M,this._onApiVideoLoad,this),this._channel.on(N,this._onApiVideoUnload,this),this._channel.on(O,this._onApiVideoStart,this),this._channel.on(P,this._onApiVideoComplete,this),this._channel.on(Q,this._onApiVideoResume,this),this._channel.on(R,this._onApiAdStart,this),this._channel.on(S,this._onApiAdComplete,this),this._channel.on(T,this._onApiPlay,this),this._channel.on(U,this._onApiPause,this),this._channel.on(V,this._onApiBufferStart,this),this._channel.on(W,this._onApiSeekStart,this),this._channel.on(X,this._onApiSeekComplete,this),this._channel.on(Y,this._onApiChapterStart,this),this._channel.on(Z,this._onApiChapterComplete,this),this._channel.on(aa,this._onApiBitrateChange,this),this._channel.on($,this._onApiTrackError,this),this._channel.on(_,this._onApiTrackInternalError,this),this._channel.on(ba,this._onApiQuantumEnd,this),this._channel.on(da,this._onNetworkCheckStatusComplete,this),this._channel.on(D,this._onResetSessionId,this),this._channel.reply(C,function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null},this)},e.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},e.prototype._resetInternalState=function(){this._logger.debug(w,"#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._autoComputedStartupTime=0,this._streamData=new p,this._qosData=new q,this._sessionData=new i,this._assetData=new o,this._cuserData=null,this._stashedAdData=null,this._stashedChapterData=null,this._lastInBandItem=null},e.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())},e.prototype._updateQoSInfo=function(a){this._qosData.bitrate(a.bitrate||0),this._qosData.fps(a.fps||0),this._qosData.droppedFrames(a.droppedFrames||0),null==a.startupTime||isNaN(a.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(a.startupTime),this._qosData.isStartupTimeOverridden=!0)},e.prototype._checkCall=function(a){return this._isTrackingSessionActive?this._isVideoComplete?(this._logger.warn(w,"#"+a+"() > The video content already completed."),!1):!0:(this._logger.warn(w,"#"+a+"() > No active tracking session."),!1)},e.prototype._updateLastInBandItem=function(a){var b=(new Date).getTime(),c=1e3*Math.abs(a.eventData.playhead()-this._lastInBandItem.eventData.playhead()),d=Math.abs(b-this._lastInBandItem.eventData.ts());this._lastInBandItem.eventData.type()!=n.EVENT_TYPE_PAUSE&&this._lastInBandItem.eventData.type()!=n.EVENT_TYPE_STALL?(d*ea>=c||this._doNotOverrideEventDuration)&&d<=this._reportingInterval*ea*1e3?this._lastInBandItem.eventData.duration(b-this._lastInBandItem.eventData.ts()):(this._logger.warn(w,"[WARNING] Resetting duration in lastInBandItem to 0. playheadDelta:"+c+" tsDelta:"+d+" event type:"+this._lastInBandItem.eventData.type()),this._lastInBandItem.eventData.duration(0)):this._lastInBandItem.eventData.duration(b-this._lastInBandItem.eventData.ts()),this._doNotOverrideEventDuration&&(this._doNotOverrideEventDuration=!1),this._lastInBandItem.eventData.ts(b),this._lastInBandItem.eventData.playhead(a.eventData.playhead()),this._lastInBandItem.qosData.startupTime(a.qosData.startupTime()),this._lastInBandItem.qosData.isStartupTimeOverridden=a.qosData.isStartupTimeOverridden},e.prototype._sendHit=function(a){function b(a){var b=c._reportFactory.createReportForItem(a);b.qosData.isStartupTimeOverridden||b.qosData.startupTime(c._autoComputedStartupTime);var e={};e[G]=b,c._channel.trigger(new h(ca,e)),(b.eventData.type()==n.EVENT_TYPE_PLAY||b.eventData.type()==n.EVENT_TYPE_BUFFER||b.eventData.type()==n.EVENT_TYPE_START)&&(d={},d[H]=!0,c._channel.command(z,d))}var c=this,d={};switch(a.eventData.type()){case n.EVENT_TYPE_START:case n.EVENT_TYPE_PLAY:case n.EVENT_TYPE_PAUSE:case n.EVENT_TYPE_STALL:case n.EVENT_TYPE_BUFFER:this._lastInBandItem&&(this._updateLastInBandItem(a),this._lastInBandItem.eventData.type()==n.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==o.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),a!=this._lastInBandItem&&b(this._lastInBandItem)),b(a),this._lastInBandItem=a,d={},d[H]=!0,this._channel.command(z,d);break;case n.EVENT_TYPE_COMPLETE:this._lastInBandItem&&(a.assetData.type()==o.TYPE_AD&&(this._doNotOverrideEventDuration=!0),this._updateLastInBandItem(a),b(this._lastInBandItem)),b(a),a.assetData.type()==o.TYPE_MAIN_CONTENT?(this._lastInBandItem=null,d={},d[H]=!0,this._channel.command(A,d)):a.assetData.type()==o.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(o.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case n.EVENT_TYPE_CHAPTER_START:case n.EVENT_TYPE_CHAPTER_COMPLETE:this._lastInBandItem&&(this._updateLastInBandItem(a),b(this._lastInBandItem)),b(a),this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(a.eventData.type()==n.EVENT_TYPE_CHAPTER_START?new s(a.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),b(this._lastInBandItem));break;default:b(a)}};var w="ah::Context",x="sourceErrorSDK",y="error",z="clock:reporting.resume",A="clock:reporting.pause",B="reporting_interval",C="session_id",D="reset_session_id",E="callback",F="filter_report",G="report",H="reset",I="track_external_errors",J="reporting_interval",K="api:aa_start",L="api:aa_ad_start",M="api:video_load",N="api:video_unload",O="api:video_start",P="api:video_complete",Q="api:video_resume",R="api:ad_start",S="api:ad_complete",T="api:play",U="api:pause",V="api:buffer_start",W="api:seek_start",X="api:seek_complete",Y="api:chapter_start",Z="api:chapter_complete",$="api:track_error",_="api:track_internal_error",aa="api:bitrate_change",ba="api:quantum_end",ca="context:report_available",da="net:check_status_complete",ea=1.5,fa=10;d.context.Context=e}(a.ADB.core,a.ADB.va,a.ADB.va.utils,b),function(a){"use strict";function b(a,b){this.trackingServer=a,this.publisher=b,this.ssl=!1,this.ovp=c,this.sdk=c,this.quietMode=!1,this.debugLogging=!1,this.__isPrimetime=!1,this.__psdkVersion=null}var c="unknown";a.AdobeHeartbeatPluginConfig=b}(b),function(a){"use strict";function b(){}b.prototype.onError=function(a){},a.AdobeHeartbeatPluginDelegate=b}(b),function(a,b,c){"use strict";function d(a){d.__super__.constructor.call(this,q),this._radio=new i(this._logger),this._channel=this._radio.channel(y),this._delegate=a,this._context=new l(this._channel,this._logger),this._filter=new m(this._channel,this._logger),this._network=new n(this._channel,this._logger),this._setupDataResolver()}var e=a.Event,f=a.Trigger,g=a.plugin.BasePlugin,h=a.plugin.ParamMapping,i=a.radio.Radio,j=b.ErrorInfo,k=b.Version,l=c.context.Context,m=c.filter.ReportFilter,n=c.network.Network,o=c.clock.Clock,p=c.AdobeHeartbeatPluginConfig;a.extend(d,g),d.prototype.configure=function(a){if(!a)throw new Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof p))throw new Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");this._config=a,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");var b=this._config.trackingServer+"/settings/",c={};c[ba]=this._config.trackingServer,c[ca]=b,c[da]=this._config.publisher,c[ea]=this._config.quietMode,c[fa]=this._config.ssl,this._channel.trigger(new e(ja,c)),this._isConfigured=!0},d.prototype.bootstrap=function(a){d.__super__.bootstrap.call(this,a),this._channel.on(z,this._onError,this),this._clock=new o(this._pluginManager,this._channel,this._logger),this._channel.command(Ea),this._channel.trigger(new e(La)),this._registerCommands(),this._registerBehaviours()},d.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._filter.destroy(),this._network.destroy()},d.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):d.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)},d.prototype._cmdAnalyticsError=function(a){this._errorInfo||(this._errorInfo=new j("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(z,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},d.prototype._cmdAnalyticsStart=function(a){if(this._canProcess()){var b={};b[ga]=a.visitorOptedOut,this._channel.trigger(new e(ka,b)),this._channel.trigger(new e(ha,a))}},d.prototype._cmdAnalyticsAdStart=function(a){this._canProcess()&&this._channel.trigger(new e(ia,a))},d.prototype._cmdVideoLoad=function(a){this._errorInfo=null,this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new e(ma,a)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),this._channel.trigger(new e(la,a)),this._isTrackingSessionActive=!0)},d.prototype._cmdVideoUnload=function(a){this._errorInfo=null,this._canProcess()&&(this._channel.trigger(new e(ma,a)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._isTrackingSessionActive=!1)},d.prototype._cmdVideoStart=function(a){this._canProcess()&&this._channel.trigger(new e(na,a))},d.prototype._cmdVideoComplete=function(a){this._canProcess()&&this._channel.trigger(new e(oa,a))},d.prototype._cmdVideoResume=function(a){this._canProcess()&&this._channel.trigger(new e(pa,a))},d.prototype._cmdPlay=function(a){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(a))},d.prototype._cmdPause=function(a){this._canProcess()&&(this._channel.trigger(new e(ta,a)),this._isPaused=!0,this._runIdleTimer(!0))},d.prototype._cmdAdStart=function(a){this._canProcess()&&(this._channel.trigger(new e(qa,a)),this._resumePlaybackIfPossible(a))},d.prototype._cmdAdComplete=function(a){this._canProcess()&&(this._channel.trigger(new e(ra,a)),a.isInAdBreak||this._resumePlaybackIfPossible(a))},d.prototype._cmdBufferStart=function(a){this._canProcess()&&(this._channel.trigger(new e(ua,a)),this._isBuffering=!0,this._runIdleTimer(!0))},d.prototype._cmdBufferComplete=function(a){this._canProcess()&&(this._isBuffering=!1,this._resumePlaybackIfPossible(a))},d.prototype._cmdSeekStart=function(a){this._canProcess()&&(this._channel.trigger(new e(va,a)),this._channel.trigger(new e(ta,a)),this._isSeeking=!0,this._runIdleTimer(!0))},d.prototype._cmdSeekComplete=function(a){this._canProcess()&&(this._channel.trigger(new e(wa,a)),this._isSeeking=!1,this._resumePlaybackIfPossible(a))},d.prototype._cmdChapterStart=function(a){this._canProcess()&&this._channel.trigger(new e(xa,a))},d.prototype._cmdChapterComplete=function(a){this._canProcess()&&this._channel.trigger(new e(ya,a))},d.prototype._cmdBitrateChange=function(a){this._canProcess()&&this._channel.trigger(new e(Ba,a))},d.prototype._cmdTrackError=function(a){this._canProcess()&&this._channel.trigger(new e(za,a))},d.prototype._cmdClockReportingTick=function(a){this._canProcess()&&this._channel.trigger(new e(Ca,a))},d.prototype._cmdIdleTick=function(a){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(V),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger(T))},d.prototype._onError=function(a){this._errorInfo=a.data;var b={};b[_]=Da,b[aa]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails(),this._channel.trigger(new e(Aa,b)),this._runReportingTimer(!1),this._trigger(z,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo)},d.prototype._runIdleTimer=function(a){var b={};b[$]=!0,a?this._channel.command(Ja,b):this._channel.command(Ka,b)},d.prototype._runFlushFilterTimer=function(a){var b={};b[$]=!0,a?this._channel.command(Ha,b):this._channel.command(Ia,b)},d.prototype._runReportingTimer=function(a){var b={};b[$]=!0,a?this._channel.command(Fa,b):this._channel.command(Ga,b)},d.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError),this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart),this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart),this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete),this._pluginManager.comply(this,"handleVideoResume",this._cmdVideoResume),this._pluginManager.comply(this,"handlePlay",this._cmdPlay),this._pluginManager.comply(this,"handlePause",this._cmdPause),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete),this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart),this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete),this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart),this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete),this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart),this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete),this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange),this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError),this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick),this._pluginManager.comply(this,"handleIdleTick",this._cmdIdleTick)},d.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new f(t,C),this,"handleVideoLoad",[new h(s,"rsid","rsid"),new h(s,"tracking_server","trackingServer")]),this._pluginManager.registerBehaviour(new f(t,D),this,"handleVideoUnload"),this._pluginManager.registerBehaviour(new f(t,E),this,"handleVideoStart",[new h(t,"video.id","videoId"),new h(t,"video.name","videoName"),new h(t,"video.length","videoLength"),new h(t,"video.playhead","playhead"),new h(t,"video.playerName","playerName"),new h(t,"video.streamType","streamType"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime"),new h(s,"rsid","rsid"),new h(s,"tracking_server","trackingServer"),new h(s,"channel","channel"),new h(s,"meta.video.*","metaVideo"),new h(s,"ssl","useSsl"),new h(u,"meta","metaNielsen"),new h(r,"publisher","publisher"),new h(r,"sdk","sdk"),new h(r,"ovp","ovp"),new h(r,"version","version"),new h(r,"api_level","apiLvl")]),this._pluginManager.registerBehaviour(new f(t,G),this,"handleVideoComplete",[new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,F),this,"handleVideoResume",[new h(t,"video.id","videoId"),new h(t,"video.name","videoName"),new h(t,"video.length","videoLength"),new h(t,"video.playhead","playhead"),new h(t,"video.playerName","playerName"),new h(t,"video.streamType","streamType")]),this._pluginManager.registerBehaviour(new f(t,H),this,"handlePlay",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,I),this,"handlePause",[new h(t,"video.playhead","playhead"),new h(t,"video.playheadStalled","playheadStalled"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,J),this,"handleAdStart",[new h(t,"video.playhead","playhead"),new h(t,"ad.id","adId"),new h(t,"ad.name","adName"),new h(t,"ad.length","adLength"),new h(t,"ad.position","adPosition"),new h(t,"pod.name","podName"),new h(t,"pod.playerName","podPlayerName"),new h(t,"pod.position","podPosition"),new h(t,"pod.startTime","podSecond"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime"),new h(s,"meta.video.*","metaVideo"),new h(s,"meta.ad.*","metaAd"),new h(u,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(t,K),this,"handleAdComplete",[new h(t,"video.playhead","playhead"),new h(t,"ad.isInAdBreak","isInAdBreak"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,L),this,"handleBufferStart",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,M),this,"handleBufferComplete",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,N),this,"handleSeekStart",[new h(t,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new f(t,O),this,"handleSeekComplete",[new h(t,"video.playhead","playhead"),new h(t,"ad.isInAd","isInAd"),new h(t,"ad.id","adId"),new h(t,"ad.position","adPosition"),new h(t,"pod.playerName","podPlayerName"),new h(t,"pod.position","podPosition"),new h(t,"chapter.isInChapter","isInChapter"),new h(t,"chapter.position","chapterPosition"),new h(t,"chapter.name","chapterName"),new h(t,"chapter.length","chapterLength"),new h(t,"chapter.startTime","chapterOffset"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),
this._pluginManager.registerBehaviour(new f(t,P),this,"handleChapterStart",[new h(t,"video.playhead","playhead"),new h(t,"chapter.position","chapterPosition"),new h(t,"chapter.name","chapterName"),new h(t,"chapter.length","chapterLength"),new h(t,"chapter.startTime","chapterOffset"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime"),new h(s,"meta.video.*","metaVideo"),new h(s,"meta.chapter.*","metaChapter"),new h(u,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(t,Q),this,"handleChapterComplete",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,R),this,"handleBitrateChange",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,S),this,"handleTrackError"),this._pluginManager.registerBehaviour(new f(v,X),this,"handleClockReportingTick",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(v,Z),this,"handleIdleTick",[]),this._pluginManager.registerBehaviour(new f(r,V),this,"handleClockReportingTick",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(s,z),this,"handleAnalyticsError"),this._pluginManager.registerBehaviour(new f(s,A),this,"handleAnalyticsStart",[new h(s,"vid","vid"),new h(s,"aid","aid"),new h(s,"mid","mid"),new h(s,"customerIDs","customerIDs"),new h(s,"visitorOptedOut","visitorOptedOut"),new h(s,"blob","blob"),new h(s,"loc_hint","loc_hint"),new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(s,B),this,"handleAnalyticsAdStart",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")])},d.prototype._setupDataResolver=function(){var a={},b=this;a.version=function(){return k.getVersion()},a.api_level=function(){return k.getApiLevel()},a.tracking_server=function(){return b._config?b._config.trackingServer:null},a.publisher=function(){return b._config?b._config.publisher:null},a.quiet_mode=function(){return b._config?b._config.quietMode:!1},a.ovp=function(){return b._config?b._config.ovp:null},a.sdk=function(){return b._config?b._config.sdk:null},a.is_primetime=function(){return b._config?b._config.__isPrimetime:!1},a.psdk_version=function(){return b._config?b._config.__psdkVersion:null},a.session_id=function(){return b._channel.request(w)},this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var e=b[d];c=c||{},c[e]=a.hasOwnProperty(e)?a[e].call(this):null}return c}},d.prototype._resumePlaybackIfPossible=function(a){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle&&(this._isVideoIdle=!1,this._resumePlaybackFromIdle()),this._runIdleTimer(!1),this._channel.trigger(new e(sa,a)))},d.prototype._resumePlaybackFromIdle=function(){this._trigger(V),this._filter.clear(),this._channel.trigger(new e(x)),this._trigger(U),this._runReportingTimer(!0),this._runFlushFilterTimer(!0)};var q="adobe-heartbeat",r=q,s="adobe-analytics",t="player",u="nielsen",v="service.clock",w="session_id",x="reset_session_id",y="heartbeat-channel",z="error",A="aa_start",B="sc_ad_start",C="video_load",D="video_unload",E="video_start",F="video_resume",G="video_complete",H="play",I="pause",J="ad_start",K="ad_complete",L="buffer_start",M="buffer_complete",N="seek_start",O="seek_complete",P="chapter_start",Q="chapter_complete",R="bitrate_change",S="track_error",T="video_idle_start",U="video_idle_resume",V="quantum_close",W="heartbeat.reporting",X=W+".tick",Y="heartbeat.idle",Z=Y+".tick",$="reset",_="source",aa="error_id",ba="tracking_server",ca="check_status_server",da="publisher",ea="quiet_mode",fa="ssl",ga="visitor_opt_out",ha="api:aa_start",ia="api:aa_ad_start",ja="api:config",ka="api:update_visitor_optout",la="api:video_load",ma="api:video_unload",na="api:video_start",oa="api:video_complete",pa="api:video_resume",qa="api:ad_start",ra="api:ad_complete",sa="api:play",ta="api:pause",ua="api:buffer_start",va="api:seek_start",wa="api:seek_complete",xa="api:chapter_start",ya="api:chapter_complete",za="api:track_error",Aa="api:track_internal_error",Ba="api:bitrate_change",Ca="api:quantum_end",Da="sourceErrorHeartbeat",Ea="clock:check_status.resume",Fa="clock:reporting.resume",Ga="clock:reporting.pause",Ha="clock:flush_filter.resume",Ia="clock:flush_filter.pause",Ja="clock:idle.resume",Ka="clock:idle.pause",La="clock:check_status.get_settings";c.AdobeHeartbeatPlugin=d}(a.ADB.core,a.ADB.va,b),a.ADB.va.plugins.ah||(a.ADB.va.plugins.ah=b)}(this);

// AdobeAnalyticsPlugin
!function(a){if("undefined"==typeof b)var b={};!function(a,b){"use strict";function c(a,b){this._onFail={fn:a,ctx:b}}var d=a.ErrorInfo;c.prototype.validateFields=function(a,b){if(!a)return this._fail("Data cannot be null");if(b)for(var c=0;c<b.length;c++){var d=b[c];switch(d){case"videoId":if(!a.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof a.videoId)return this._fail("The ID for the main video must be a String.");if(""===a.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!a.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof a.streamType)return this._fail("The stream type for the main video must be a String.");if(""===a.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"playerName":if(!a.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof a.playerName)return this._fail("The player name for the main video must be a String.");if(""===a.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"videoLength":if(!a.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof a.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(a.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"podPlayerName":if(!a.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof a.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===a.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!a.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof a.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(a.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!a.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof a.adId)return this._fail("The ad ID must be a String.");if(""===a.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!a.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof a.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(a.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"adLength":if(!a.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof a.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(a.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+d)}}return!0},c.prototype._fail=function(a){var b=new d("Invalid input data",a);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,b),!1},b.InputDataValidator=c}(a.ADB.va,b),function(a){"use strict";function b(){this.channel=c,this.debugLogging=!1}var c="";a.AdobeAnalyticsPluginConfig=b}(b),function(a){"use strict";function b(){}b.prototype.onError=function(a){},a.AdobeAnalyticsPluginDelegate=b}(b),function(a,b,c,d){"use strict";function e(a,b){if(e.__super__.constructor.call(this,r),!a)throw new Error("The reference to the AppMeasurement object cannot be NULL.");this._appMeasurement=a,this._delegate=b,this._customMetaKeys=[],this._videoMetadata={},this._adMetadata={},this._chapterMetadata={},this._errorInfo=null,this._workQueue=new k(!0,w),this._inputDataValidator=new q(function(a){this._errorInfo=a,this._logger.error(this._logTag,a.getMessage()+" | "+a.getDetails());var b=this;setTimeout(function(){b._trigger(x,a),b._delegate&&b._delegate.onError(b._errorInfo)},0)},this),this._appMeasurement.isReadyToTrack(),this._setupDataResolver()}var f=a.Trigger,g=a.plugin.BasePlugin,h=a.plugin.ParamMapping,i=a.radio.Channel,j=a.radio.Command,k=a.radio.CommandQueue,l=b.ErrorInfo,m=c.md5,n=c.StringUtils,o=c.ObjectUtils,p=d.AdobeAnalyticsPluginConfig,q=d.InputDataValidator;a.extend(e,g),e.prototype.configure=function(a){if(!a)throw new Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof p))throw new Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=a,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")},e.prototype.bootstrap=function(a){e.__super__.bootstrap.call(this,a),this._registerCommands(),this._registerBehaviours()},e.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,[]),e.__super__.setup.call(this)},e.prototype.setVideoMetadata=function(a){this._videoMetadata=o.clone(a)},e.prototype.setAdMetadata=function(a){this._adMetadata=o.clone(a)},e.prototype.setChapterMetadata=function(a){this._chapterMetadata=o.clone(a)},e.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):e.__super__._canProcess.call(this)},e.prototype._cmdVideoLoad=function(a){this._errorInfo=null},e.prototype._cmdVideoStart=function(a){this._logger.debug(this._logTag,"#_cmdVideoStart()"),this._canProcess()&&this._workQueue.addCommand(new j(this._executeOpen,this,[a]))},e.prototype._cmdAdStart=function(a){this._logger.debug(this._logTag,"#_cmdAdStart()"),this._canProcess()&&this._workQueue.addCommand(new j(this._executeOpenAd,this,[a]))},e.prototype._cmdHeartbeatPluginError=function(a){this._errorInfo||(this._errorInfo=new l("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(x,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},e.prototype._resetAppMeasurementContextData=function(){delete this._appMeasurement.contextData["a.contentType"],delete this._appMeasurement.contextData["a.media.name"],delete this._appMeasurement.contextData["a.media.friendlyName"],delete this._appMeasurement.contextData["a.media.length"],delete this._appMeasurement.contextData["a.media.playerName"],delete this._appMeasurement.contextData["a.media.channel"],delete this._appMeasurement.contextData["a.media.view"],delete this._appMeasurement.contextData["a.media.ad.name"],delete this._appMeasurement.contextData["a.media.ad.friendlyName"],delete this._appMeasurement.contextData["a.media.ad.podFriendlyName"],delete this._appMeasurement.contextData["a.media.ad.length"],delete this._appMeasurement.contextData["a.media.ad.playerName"],delete this._appMeasurement.contextData["a.media.ad.pod"],delete this._appMeasurement.contextData["a.media.ad.podPosition"],delete this._appMeasurement.contextData["a.media.ad.podSecond"],delete this._appMeasurement.contextData["a.media.ad.view"];for(var a=0;a<this._customMetaKeys.length;a++){var b=this._customMetaKeys[a];delete this._appMeasurement.contextData[b]}this._customMetaKeys=[]},e.prototype._executeOpen=function(a){if(this._logger.debug(this._logTag,"#_executeOpen(id="+a.videoId+", videoName="+a.videoName+", streamType="+a.streamType+", length="+a.videoLength+", playerName="+a.playerName+", channel="+a.channel+", isPrimetime="+a.isPrimetime+", sessionId="+a.sessionId+")"),this._canProcess()&&this._inputDataValidator.validateFields(a,["videoId","streamType","videoLength","playerName"])){this._resetAppMeasurementContextData();for(var b in a.metaVideo)a.metaVideo.hasOwnProperty(b)&&(this._appMeasurement.contextData[b]=a.metaVideo[b],this._customMetaKeys.push(b));if(a.metaNielsen)for(var b in a.metaNielsen)a.metaNielsen.hasOwnProperty(b)&&(this._appMeasurement.contextData[b]=a.metaNielsen[b],this._customMetaKeys.push(b));this._appMeasurement.contextData["a.contentType"]=a.streamType,this._appMeasurement.contextData["a.media.name"]=a.videoId,this._appMeasurement.contextData["a.media.friendlyName"]=a.videoName||"",this._appMeasurement.contextData["a.media.length"]=Math.floor(a.videoLength)||"0.0",this._appMeasurement.contextData["a.media.playerName"]=a.playerName,this._appMeasurement.contextData["a.media.channel"]=a.channel||"",this._appMeasurement.contextData["a.media.view"]=!0,this._appMeasurement.contextData["a.media.vsid"]=a.sessionId,this._appMeasurement.pev3=y,this._appMeasurement.pe=a.isPrimetime?B:A,this._appMeasurement.track();var c=this;setTimeout(function(){c._trigger(E,a)},0)}},e.prototype._executeOpenAd=function(a){var b=m(a.videoId)+"_"+a.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+a.adId+", streamType="+a.streamType+", length="+a.adLength+", podPlayerName="+a.podPlayerName+", parentId="+a.videoId+", podId="+b+", parentPodPosition="+a.adPosition+", podSecond="+a.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(a,["videoId","streamType","playerName","adId","adLength","podPlayerName","adPosition"])){a.podSecond=null==a.podSecond||isNaN(a.podSecond)?a.playhead:a.podSecond,this._resetAppMeasurementContextData();var c;for(c in a.metaVideo)a.metaVideo.hasOwnProperty(c)&&(this._appMeasurement.contextData[c]=a.metaVideo[c],this._customMetaKeys.push(c));for(c in a.metaAd)a.metaAd.hasOwnProperty(c)&&(this._appMeasurement.contextData[c]=a.metaAd[c],this._customMetaKeys.push(c));if(a.metaNielsen)for(var c in a.metaNielsen)a.metaNielsen.hasOwnProperty(c)&&(this._appMeasurement.contextData[c]=a.metaNielsen[c],this._customMetaKeys.push(c));this._appMeasurement.contextData["a.contentType"]=a.streamType,this._appMeasurement.contextData["a.media.name"]=a.videoId,this._appMeasurement.contextData["a.media.playerName"]=a.playerName,this._appMeasurement.contextData["a.media.channel"]=a.channel||"",this._appMeasurement.contextData["a.media.vsid"]=a.sessionId,this._appMeasurement.contextData["a.media.friendlyName"]=a.videoName||"",this._appMeasurement.contextData["a.media.length"]=Math.floor(a.videoLength)||"0.0",this._appMeasurement.contextData["a.media.ad.name"]=a.adId,this._appMeasurement.contextData["a.media.ad.friendlyName"]=a.adName||"",this._appMeasurement.contextData["a.media.ad.podFriendlyName"]=a.podName||"",this._appMeasurement.contextData["a.media.ad.length"]=Math.floor(a.adLength)||"0.0",this._appMeasurement.contextData["a.media.ad.playerName"]=a.podPlayerName,this._appMeasurement.contextData["a.media.ad.pod"]=b,this._appMeasurement.contextData["a.media.ad.podPosition"]=Math.floor(a.adPosition)||"0.0",this._appMeasurement.contextData["a.media.ad.podSecond"]=Math.floor(a.podSecond)||"0.0",this._appMeasurement.contextData["a.media.ad.view"]=!0,this._appMeasurement.pev3=z,this._appMeasurement.pe=a.isPrimetime?D:C,this._appMeasurement.track();var d=this;setTimeout(function(){d._trigger(F,a)},0)}},e.prototype._setupDataResolver=function(){var a={},b=this;a.rsid=function(){return b._appMeasurement.account},a.tracking_server=function(){return b._appMeasurement.ssl&&b._appMeasurement.trackingServerSecure?b._appMeasurement.trackingServerSecure:b._appMeasurement.trackingServer},a.ssl=function(){return b._appMeasurement.ssl},a.vid=function(){return b._appMeasurement.visitorID},a.aid=function(){return b._appMeasurement.analyticsVisitorID},a.mid=function(){return b._appMeasurement.marketingCloudVisitorID},a.blob=function(){return b._appMeasurement.audienceManagerBlob},a.loc_hint=function(){return b._appMeasurement.audienceManagerLocationHint?parseInt(b._appMeasurement.audienceManagerLocationHint):""},a.customerIDs=function(){var a=b._appMeasurement.visitor.getCustomerIDs(),c={};for(var d in a)if(a.hasOwnProperty(d)){var e=a[d];if("object"==typeof e){for(var f in e)e.hasOwnProperty(f)&&("authState"==f?c[d+".as"]=e[f]:c[d+"."+f]=e[f]);c[d+".as"]||(c[d+".as"]="0")}}return c},a.channel=function(){return b._config?b._config.channel:null},a.meta=function(a){var c=a.split(".");if(c.length<2)return null;var d=c.shift();switch(a=c.join("."),d){case"video":return a==i.WILDCARD?b._videoMetadata:b._videoMetadata[a];case"ad":return a==i.WILDCARD?b._adMetadata:b._adMetadata[a];case"chapter":return a==i.WILDCARD?b._chapterMetadata:b._chapterMetadata[a];default:return null}},a.visitorOptedOut=function(){return void 0==b._appMeasurement.visitorOptedOut?!1:b._appMeasurement.visitorOptedOut},this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var e=b[d];c=c||{},n.startsWith(e,"meta.")?c[e]=a.meta(e.split("meta.")[1]):c[e]=a.hasOwnProperty(e)?a[e].call(this):null}return c}},e.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)},e.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new f(u,G),this,"handleVideoLoad"),this._pluginManager.registerBehaviour(new f(u,H),this,"handleVideoStart",[new h(u,"video.id","videoId"),new h(u,"video.streamType","streamType"),new h(u,"video.name","videoName"),new h(u,"video.length","videoLength"),new h(u,"video.playerName","playerName"),new h(u,"video.streamType","streamType"),new h(v,"is_primetime","isPrimetime"),new h(v,"session_id","sessionId"),new h(s,"channel","channel"),new h(s,"meta.video.*","metaVideo"),new h(t,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(u,I),this,"handleAdStart",[new h(u,"video.id","videoId"),new h(u,"video.streamType","streamType"),new h(u,"video.playhead","playhead"),new h(u,"video.playerName","playerName"),new h(u,"video.name","videoName"),new h(u,"video.length","videoLength"),new h(u,"ad.id","adId"),new h(u,"ad.length","adLength"),new h(u,"ad.position","adPosition"),new h(u,"ad.name","adName"),new h(u,"pod.name","podName"),new h(u,"pod.position","podPosition"),new h(u,"pod.playerName","podPlayerName"),new h(u,"pod.startTime","podSecond"),new h(v,"is_primetime","isPrimetime"),new h(v,"session_id","sessionId"),new h(s,"channel","channel"),new h(s,"meta.video.*","metaVideo"),new h(s,"meta.ad.*","metaAd"),new h(t,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(v,x),this,"handleHeartbeatPluginError")},e.prototype._onAppMeasurementReady=function(){this._workQueue.resume()};var r="adobe-analytics",s=r,t="nielsen",u="player",v="adobe-heartbeat",w=2e3,x="error",y="video",z="videoAd",A="ms_s",B="msp_s",C="msa_s",D="mspa_s",E="aa_start",F="sc_ad_start",G="video_load",H="video_start",I="ad_start";d.AdobeAnalyticsPlugin=e}(a.ADB.core,a.ADB.va,a.ADB.va.utils,b),function(a){"use strict";var b={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",STREAM_FORMAT:"a.media.format"},c={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",CREATIVE_URL:"a.media.ad.creativeURL"};a.VideoMetadataKeys=b,a.AdMetadataKeys=c}(b),a.ADB.va.plugins.aa||(a.ADB.va.plugins.aa=b)}(this);

// MediaHeartbeat
!function(a){!function(a){"use strict";function b(){this.trackingServer=void 0,this.channel=void 0,this.ovp=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!1,this.debugLogging=!1}a.MediaHeartbeatConfig=b,a.MediaHeartbeatConfig.sharedInstance=new b}(a.ADB.va),function(a){"use strict";function b(){this.data={}}var c=a.plugins.videoplayer.VideoInfo,d=a.plugins.videoplayer.AdBreakInfo,e=a.plugins.videoplayer.AdInfo,f=a.plugins.videoplayer.ChapterInfo,g=a.plugins.videoplayer.QoSInfo;b.MEDIAINFO_KEY_NAME="a.name",b.MEDIAINFO_KEY_VIDEOID="a.videoId",b.MEDIAINFO_KEY_ADID="a.adId",b.MEDIAINFO_KEY_LENGTH="a.length",b.MEDIAINFO_KEY_PLAYHEAD="a.playhead",b.MEDIAINFO_KEY_STREAMTYPE="a.streamType",b.MEDIAINFO_KEY_POSITION="a.position",b.MEDIAINFO_KEY_STARTTIME="a.startTime",b.MEDIAINFO_KEY_BITRATE="a.bitrate",b.MEDIAINFO_KEY_FPS="a.fps",b.MEDIAINFO_KEY_DROPPEDFRAMES="a.droppedFrames",b.MEDIAINFO_KEY_STARTUPTIME="a.startupTime",b.MEDIAINFO_KEY_TIMEDMETADATA="a.timedMetadata",b.prototype.setValue=function(a,b){this.data[a]=b},b.prototype.getValue=function(a){return this.data.hasOwnProperty(a)?this.data[a]:null},b.prototype.createVideoInfo=function(){var a=new c;return a.id=null!=this.getValue(b.MEDIAINFO_KEY_VIDEOID)?this.getValue(b.MEDIAINFO_KEY_VIDEOID):"",a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(b.MEDIAINFO_KEY_LENGTH)?this.getValue(b.MEDIAINFO_KEY_LENGTH):0,a.playhead=null!=this.getValue(b.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(b.MEDIAINFO_KEY_PLAYHEAD):0,a.streamType=null!=this.getValue(b.MEDIAINFO_KEY_STREAMTYPE)?this.getValue(b.MEDIAINFO_KEY_STREAMTYPE):"",a},b.prototype.createAdBreakInfo=function(){var a=new d;return a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.position=null!=this.getValue(b.MEDIAINFO_KEY_POSITION)?this.getValue(b.MEDIAINFO_KEY_POSITION):0,a.startTime=null!=this.getValue(b.MEDIAINFO_KEY_STARTTIME)?this.getValue(b.MEDIAINFO_KEY_STARTTIME):0,a},b.prototype.createAdInfo=function(){var a=new e;return a.id=null!=this.getValue(b.MEDIAINFO_KEY_ADID)?this.getValue(b.MEDIAINFO_KEY_ADID):"",a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(b.MEDIAINFO_KEY_LENGTH)?this.getValue(b.MEDIAINFO_KEY_LENGTH):0,a.position=null!=this.getValue(b.MEDIAINFO_KEY_POSITION)?this.getValue(b.MEDIAINFO_KEY_POSITION):0,a},b.prototype.createChapterInfo=function(){var a=new f;return a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(b.MEDIAINFO_KEY_LENGTH)?this.getValue(b.MEDIAINFO_KEY_LENGTH):0,a.startTime=null!=this.getValue(b.MEDIAINFO_KEY_STARTTIME)?this.getValue(b.MEDIAINFO_KEY_STARTTIME):0,a.position=null!=this.getValue(b.MEDIAINFO_KEY_POSITION)?this.getValue(b.MEDIAINFO_KEY_POSITION):0,a},b.prototype.createQoSInfo=function(){var a=new g;return a.bitrate=null!=this.getValue(b.MEDIAINFO_KEY_BITRATE)?this.getValue(b.MEDIAINFO_KEY_BITRATE):0,a.fps=null!=this.getValue(b.MEDIAINFO_KEY_FPS)?this.getValue(b.MEDIAINFO_KEY_FPS):0,a.droppedFrames=null!=this.getValue(b.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(b.MEDIAINFO_KEY_DROPPEDFRAMES):0,a.startupTime=null!=this.getValue(b.MEDIAINFO_KEY_STARTUPTIME)?this.getValue(b.MEDIAINFO_KEY_STARTUPTIME):0,a},a.MediaObject=b}(a.ADB.va),function(a,b){"use strict";function c(a){c.__super__.constructor.call(this),this._heartbeat=a}function d(a){d.__super__.constructor.call(this),this._heartbeat=a}function e(a){e.__super__.constructor.call(this),this._heartbeat=a}function f(a){f.__super__.constructor.call(this),this._heartbeat=a}a.extend(c,b.plugins.aa.AdobeAnalyticsPluginDelegate),c.prototype.onError=function(a){b.MediaHeartbeat._onDelegateError.call(this._heartbeat,a)},a.extend(d,b.plugins.ah.AdobeHeartbeatPluginDelegate),d.prototype.onError=function(a){b.MediaHeartbeat._onDelegateError.call(this._heartbeat,a)},a.extend(e,b.HeartbeatDelegate),e.prototype.onError=function(a){b.MediaHeartbeat._onDelegateError.call(this._heartbeat,a)},a.extend(f,b.plugins.videoplayer.VideoPlayerPluginDelegate),f.prototype.getVideoInfo=function(){return this._heartbeat&&this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),this._heartbeat._videoInfo):null},f.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null},f.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null},f.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?this._heartbeat._chapterInfo:null},f.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var a=this._heartbeat._delegate.getQoSObject();if(a&&"object"==typeof a&&a.setValue)return a.createQoSInfo()}return null},b._MediaAnalyticsPluginDelegate=c,b._MediaHeartbeatPluginDelegate=d,b._ADBMediaHeartbeatDelegate=e,b._MediaHeartbeatVideoPlayerPluginDelegate=f}(a.ADB.core,a.ADB.va),function(a,b){"use strict";function c(){}function d(a){d.__super__.constructor.call(this),this._heartbeat=a}var e=b.MediaHeartbeatConfig;b.plugins.nielsen&&(c.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA="media_nielsen_content_metadata",c.MEDIAHEARTBEAT_NIELSEN_AD_METADATA="media_nielsen_ad_metadata",c.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA="media_nielsen_channel_metadata",e.prototype.nielsenConfigKey=void 0,e.prototype.nielsenAppInfo=void 0,a.extend(d,b.plugins.nielsen.NielsenPluginDelegate),d.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentContentMediaObject){var a=this._heartbeat._currentContentMediaObject.getValue(c.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA);if("object"==typeof a)return a}return null},d.prototype.getAdMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentAdMediaObject){var a=this._heartbeat._currentAdMediaObject.getValue(c.MEDIAHEARTBEAT_NIELSEN_AD_METADATA);if("object"==typeof a)return a}return null},d.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentContentMediaObject){var a=this._heartbeat._currentContentMediaObject.getValue(c.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA);if("object"==typeof a)return a}return null},d.prototype.onError=function(a){this._heartbeat&&b.MediaHeartbeat._onError.call(this._heartbeat,a)},b.MediaHeartbeatNielsen=c,b._MediaHeartbeatNielsenPluginDelegate=d)}(a.ADB.core,a.ADB.va),function(b,c){"use strict";function d(){}function e(b,c,d){if(this._logger=new y,this._plugins=[],this._playerPlugin=null,this._aaPlugin=null,this._ahPlugin=null,this._currentContentMediaObject=void 0,this._currentAdMediaObject=void 0,this._videoInfo=void 0,this._adBreakInfo=void 0,this._adInfo=void 0,this._chapterInfo=void 0,this._state={},this._delegate=b,d)this.appMeasurement=d;else{if(!a.s)return void this._logger.error(X,"Valid AppMeasurement instance required for initialising MediaHeartbeat");this.appMeasurement=a.s}c&&"object"==typeof c&&void 0!=c.trackingServer?this._config=c:this._logger.error(X,"Valid config required for initialising MediaHeartbeat")}function f(a,b){if(a==e.Event.AdBreakStart){if(!t.call(this,W))return void this._logger.error(X,"API call trackEvent:AdBreakStart is unsupported in the current state.");b&&"object"==typeof b&&b.setValue?(this._adBreakInfo=b.createAdBreakInfo(),this._adBreakInfo.playerName=this._config.playerName?this._config.playerName:""):this._logger.error(X,"Invalid AdBreak Info for MediaHeartbeatEvent.AdBreakStart event.")}else{if(!t.call(this,W,!0))return void this._logger.error(X,"API call trackEvent:AdBreakComplete is unsupported in the current state.");this._adBreakInfo=void 0}}function g(a,b,c){if(a==e.Event.AdStart){if(!t.call(this,V))return void this._logger.error(X,"API call trackEvent:AdStart is unsupported in the current state.");if(b&&"object"==typeof b&&b.setValue){this._currentAdMediaObject=b,this._adInfo=b.createAdInfo();var d=b.getValue(e.MediaObjectKey.StandardAdMetadata);if(d&&"object"==typeof d)for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f]);this._aaPlugin&&this._aaPlugin.setAdMetadata(c),this._playerPlugin.trackAdStart()}else this._logger.error(X,"Invalid Ad Info for MediaHeartbeatEvent.AdStart event.")}else if(a==e.Event.AdComplete){if(!t.call(this,V,!0))return void this._logger.error(X,"API call trackEvent:AdComplete is unsupported in the current state.");this._playerPlugin.trackAdComplete(),this._adInfo=null}else{if(!t.call(this,V,!0))return void this._logger.error(X,"API call trackEvent:AdSkip is unsupported in the current state.");this._adInfo=null}}function h(a){if(a==e.Event.SeekStart){if(!t.call(this,T))return void this._logger.error(X,"API call trackEvent:SeekStart is unsupported in the current state.");this._playerPlugin.trackSeekStart()}else{if(!t.call(this,T,!0))return void this._logger.error(X,"API call trackEvent:SeekComplete is unsupported in the current state.");this._playerPlugin.trackSeekComplete()}}function i(a,b,c){if(a==e.Event.ChapterStart){if(!t.call(this,U))return void this._logger.error(X,"API call trackEvent:ChapterStart is unsupported in the current state.");b&&"object"==typeof b&&b.setValue?(this._chapterInfo=b.createChapterInfo(),this._aaPlugin&&this._aaPlugin.setChapterMetadata(c),this._playerPlugin.trackChapterStart()):this._logger.error(X,"Invalid Chapter Info for MediaHeartbeatEvent.ChapterStart event.")}else if(a==e.Event.ChapterComplete){if(!t.call(this,U,!0))return void this._logger.error(X,"API call trackEvent:ChapterComplete is unsupported in the current state.");this._chapterInfo=null,this._playerPlugin.trackChapterComplete()}else{if(!t.call(this,U,!0))return void this._logger.error(X,"API call trackEvent:ChapterSkip is unsupported in the current state.");this._chapterInfo=null}}function j(a){if(a==e.Event.BufferStart){if(!t.call(this,S))return void this._logger.error(X,"API call trackEvent:BufferStart is unsupported in the current state.");this._playerPlugin.trackBufferStart()}else{if(!t.call(this,S,!0))return void this._logger.error(X,"API call trackEvent:BufferComplete is unsupported in the current state.");this._playerPlugin.trackBufferComplete()}}function k(){return w.call(this)?void this._playerPlugin.trackBitrateChange():void this._logger.error(X,"API call trackEvent:BitrateChange is unsupported in the current state.")}function l(a){if(a&&"object"==typeof a&&a.setValue){var b=a.getValue(A.MEDIAINFO_KEY_TIMEDMETADATA);this._playerPlugin&&b&&"string"==typeof b&&this._playerPlugin.trackTimedMetadata(b)}}function m(){this._aaPlugin=new H(this.appMeasurement,new J);var a=new I;a.channel=this._config.channel?this._config.channel:"",a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,this._aaPlugin.configure(a),this._plugins.push(this._aaPlugin)}function n(){this._ahPlugin=new K(new M);var a=new L(this._config.trackingServer,this.appMeasurement.visitor.marketingCloudOrgID);a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,a.ovp=this._config.ovp?this._config.ovp:"",a.ssl=this._config.ssl,a.sdk=this._config.appVersion?this._config.appVersion:"";var b=s.call(this);b&&b.length>0&&(a.__primetime=!0,a.__psdkVersion=b),this._ahPlugin.configure(a),this._plugins.push(this._ahPlugin)}function o(){this._playerPlugin=new E(new G(this));var a=new F;a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,this._playerPlugin.configure(a),this._plugins.push(this._playerPlugin)}function p(){if(c.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo){this._nielsenPlugin=new c.plugins.nielsen.NielsenPlugin(new c._MediaHeartbeatNielsenPluginDelegate(this));var a=new c.plugins.nielsen.NielsenPluginConfig;a.nielsenPluginConfig=c.MediaHeartbeat._debugLogging||this._config.debugLogging,a.appInfo=this._config.nielsenAppInfo,a.configKey=this._config.nielsenConfigKey,this._nielsenPlugin.configure(a),this._plugins.push(this._nielsenPlugin)}}function q(){var a=new C;a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,this._heartbeat=new B(new D(this),this._plugins),this._heartbeat.configure(a)}function r(a){this._logger.error(X,a.getMessage()+" | "+a.getDetails())}function s(){return this._currentContentMediaObject?this._currentContentMediaObject.getValue(Y):null}function t(a,b){if(a!=O&&(!this._state[O]||this._state[R]))return!1;if(a===P&&u.call(this),b?!this._state[a]:this._state[a])return!1;switch(a){case P:this._state[Q]=b;break;case Q:this._state[P]=b;break;case W:if(!b&&this._state[V])return!1;break;case V:if(!b&&!this._state[W])return!1;case U:b||this._state[P]||this.trackPlay()}return this._state[a]=!b,!0}function u(){this._state[T]&&this.trackEvent(e.Event.SeekComplete),this._state[S]&&this.trackEvent(e.Event.BufferComplete)}function v(a){this._state[a]=!1}function w(){return this._state[O]}function x(){this._state={}}var y=b.Logger,z=c.plugins.videoplayer.AssetType,A=c.MediaObject,B=c.Heartbeat,C=c.HeartbeatConfig,D=c._ADBMediaHeartbeatDelegate,E=c.plugins.videoplayer.VideoPlayerPlugin,F=c.plugins.videoplayer.VideoPlayerPluginConfig,G=c._MediaHeartbeatVideoPlayerPluginDelegate,H=c.plugins.aa.AdobeAnalyticsPlugin,I=c.plugins.aa.AdobeAnalyticsPluginConfig,J=c._MediaAnalyticsPluginDelegate,K=c.plugins.ah.AdobeHeartbeatPlugin,L=c.plugins.ah.AdobeHeartbeatPluginConfig,M=c._MediaHeartbeatPluginDelegate;d.prototype.getCurrentPlaybackTime=function(){return null},d.prototype.getQoSObject=function(){return null},e.Event={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",TimedMetadataUpdate:"timedMetadataUpdate"},e.StreamType={VOD:"vod",LIVE:"live",LINEAR:"linear"},e.MediaObjectKey={StandardVideoMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed"},e.VideoMetadataKeys=c.plugins.aa.VideoMetadataKeys,e.AdMetadataKeys=c.plugins.aa.AdMetadataKeys,e.version=function(){return c.Version.getVersion()},e.prototype.trackSessionStart=function(a,b){if(!t.call(this,O))return void this._logger.error(X,"API call trackSessionStart is unsupported in the current state.");if(!a||"object"!=typeof a||!a.setValue)return v.call(this,O),void this._logger.error(X,"Invalid Media Info object");this._currentContentMediaObject=a,this._videoInfo=a.createVideoInfo(),this._videoInfo.playerName=void 0!=this._config.playerName?this._config.playerName:"";var c=a.getValue(e.MediaObjectKey.StandardVideoMetadata);if(c&&"object"==typeof c)for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d]);var f=a.getValue(e.MediaObjectKey.VideoResumed);f&&"boolean"==typeof f&&(this._videoInfo.resumed=a.getValue(e.MediaObjectKey.VideoResumed)),N.call(this),this._playerPlugin&&(this._aaPlugin&&this._aaPlugin.setVideoMetadata(b),this._playerPlugin.trackVideoLoad(),this._playerPlugin.trackSessionStart())},e.prototype.trackPlay=function(){return t.call(this,P)?void this._playerPlugin.trackPlay():void this._logger.error(X,"API call trackPlay is unsupported in the current state.")},e.prototype.trackPause=function(){return t.call(this,Q)?void(this._playerPlugin&&this._playerPlugin.trackPause()):void this._logger.error(X,"API call trackPause is unsupported in the current state.")},e.prototype.trackComplete=function(){return t.call(this,R)?void(this._playerPlugin&&this._playerPlugin.trackComplete(function(){})):void this._logger.error(X,"API call trackComplete is unsupported in the current state.")},e.prototype.trackSessionEnd=function(){return t.call(this,O,!0)?(this._playerPlugin&&this._playerPlugin.trackVideoUnload(),x.call(this),void(this._plugins=[])):(x.call(this),this._plugins=[],void this._logger.error(X,"API call trackSessionEnd is unsupported in the current state."))},e.prototype.trackError=function(a){return w.call(this)?void(this._playerPlugin&&this._playerPlugin.trackVideoPlayerError(a?a:"unknown_error_id")):void this._logger.error(X,"API call trackError is unsupported in the current state.")},e.prototype.trackEvent=function(a,b,c){switch(a){case e.Event.AdBreakStart:case e.Event.AdBreakComplete:f.call(this,a,b);break;case e.Event.AdStart:case e.Event.AdComplete:case e.Event.AdSkip:g.call(this,a,b,c);break;case e.Event.SeekStart:case e.Event.SeekComplete:h.call(this,a);break;case e.Event.ChapterStart:case e.Event.ChapterComplete:case e.Event.ChapterSkip:i.call(this,a,b,c);break;case e.Event.BufferStart:case e.Event.BufferComplete:j.call(this,a);break;case e.Event.BitrateChange:k.call(this);break;case e.Event.TimedMetadataUpdate:l.call(this,b)}};var N=function(){if(!this.appMeasurement||!this.appMeasurement.visitor)throw new Error("appMeasurement.visitor object cannot be NULL.");m.call(this),n.call(this),o.call(this),p.call(this),q.call(this)},O=1,P=2,Q=3,R=4,S=5,T=6,U=7,V=8,W=9;e.createMediaObject=function(a,b,c,d){var f=new A;f.setValue(A.MEDIAINFO_KEY_VIDEOID,b),f.setValue(A.MEDIAINFO_KEY_NAME,a),f.setValue(A.MEDIAINFO_KEY_LENGTH,c),f.setValue(A.MEDIAINFO_KEY_PLAYHEAD,0);var g=z.ASSET_TYPE_VOD;switch(d){case e.StreamType.VOD:g=z.ASSET_TYPE_VOD;break;case e.StreamType.LIVE:g=z.ASSET_TYPE_LIVE;break;case e.StreamType.LINEAR:g=z.ASSET_TYPE_LINEAR}return f.setValue(A.MEDIAINFO_KEY_STREAMTYPE,g),f},e.createAdBreakObject=function(a,b,c){var d=new A;return d.setValue(A.MEDIAINFO_KEY_NAME,a),d.setValue(A.MEDIAINFO_KEY_POSITION,b),d.setValue(A.MEDIAINFO_KEY_STARTUPTIME,c),d},e.createAdObject=function(a,b,c,d){var e=new A;return e.setValue(A.MEDIAINFO_KEY_NAME,a),e.setValue(A.MEDIAINFO_KEY_ADID,b),e.setValue(A.MEDIAINFO_KEY_POSITION,c),e.setValue(A.MEDIAINFO_KEY_LENGTH,d),e},e.createChapterObject=function(a,b,c,d){var e=new A;return e.setValue(A.MEDIAINFO_KEY_NAME,a),e.setValue(A.MEDIAINFO_KEY_POSITION,b),e.setValue(A.MEDIAINFO_KEY_LENGTH,c),e.setValue(A.MEDIAINFO_KEY_STARTTIME,d),e},e.createQoSObject=function(a,b,c,d){var e=new A;return e.setValue(A.MEDIAINFO_KEY_BITRATE,a),e.setValue(A.MEDIAINFO_KEY_FPS,c),e.setValue(A.MEDIAINFO_KEY_DROPPEDFRAMES,d),e.setValue(A.MEDIAINFO_KEY_STARTUPTIME,b),e},e.createTimedMetadataObject=function(a){var b=new A;return b.setValue(A.MEDIAINFO_KEY_TIMEDMETADATA,a),b};var X="MediaHeartbeat",Y="a.__pttvsdkVersion";c.MediaHeartbeat=e,c.MediaHeartbeatDelegate=d,c.MediaHeartbeat.StreamType=e.StreamType,c.MediaHeartbeat.Event=e.Event,c.MediaHeartbeat.version=e.version,c.MediaHeartbeat.createMediaObject=e.createMediaObject,c.MediaHeartbeat.createAdBreakObject=e.createAdBreakObject,c.MediaHeartbeat.createAdObject=e.createAdObject,c.MediaHeartbeat.createChapterObject=e.createChapterObject,c.MediaHeartbeat.createQoSObject=e.createQoSObject,c.MediaHeartbeat.createTimedMetadataObject=e.createTimedMetadataObject,c.MediaHeartbeat._onDelegateError=r,c.MediaHeartbeat._debugLogging=!1}(a.ADB.core,a.ADB.va),a.ADB||(a.ADB={}),a.ADB.core||(a.ADB.core=core),a.ADB.va||(a.ADB.va=va),a.ADB.va.plugins||(a.ADB.va.plugins={})}(this);


</script><script>

/* global $t, s */
(function () {
    'use strict';
    //calculated on load
    //statics
    var noValue = 'not available';
    var isAmp = location.hash.indexOf('amp=1') != -1;
    var isEmbedded = location.pathname.indexOf('/embedded-video/') != -1;
    var ampSection = noValue; //(document.location.search.split('&')[1] || noValue) need to have this passed in URL later
    var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];
    var brand = function () {
        if (topLevelDomain === 'today.com') {
            return 'today';
        } else if (topLevelDomain === 'msnbc.com') {
            return 'msnbc';
        } else {
            return 'nbcnews';
        }
    };
    var extend = function (defaults, options) {
        var extended = {};
        var prop;
        for (prop in defaults) {
            if (Object.prototype.hasOwnProperty.call(defaults, prop)) {
                extended[prop] = defaults[prop];
            }
        }
        for (prop in options) {
            if (Object.prototype.hasOwnProperty.call(options, prop)) {
                extended[prop] = options[prop];
            }
        }
        return extended;
    };

    var contentType = function () {
        if (isAmp || isEmbedded) {
            return 'offsite';
        } else {
            return s.contextData['news.contenttype'];
        }
    };

    var playerStyle = function () {
        switch (contentType()) {
            case 'vertical':
            case 'subvertical':
            case 'show':
                return 'Front Player';
            case 'cover':
                return 'Cover Player';
            case 'canonical video':
                return 'Canonical';
            case 'post':
                return 'Inline';
            case 'offsite':
                if (isAmp) {
                    return 'AMP Player';
                } else {
                    return 'Offsite Embedded';
                }
            default:
                return noValue;
        }
    };

    //formating for publish date
    var formatDate = function (dateStr) {
        //convert: Thu Nov 09 2017 16:32:29 GMT+0000 (UTC) convert to 12/22/2015
        if (typeof dateStr !== 'string') {
            return false;
        }
        var date = new Date(dateStr);
        //return if its not a valid date
        if (isNaN(date.getTime())) { return false; }

        return (date.getUTCMonth() + 1) + '/' + date.getUTCDate() + '/' + date.getUTCFullYear();
    };

    //expose function for custom values
    window.hbCutomValues = (function () {
        var customBuilder = function (context) {
            var eventDataRaw = context.eventDataRaw;
            var customContextData = context.customContextData;

            var playListInfo = (function () {
                var playListInfo = {
                    'id': false,
                    'label': false
                };
                if (eventDataRaw.associatedPlaylist) {
                    playListInfo.label = eventDataRaw.associatedPlaylist.headline && eventDataRaw.associatedPlaylist.headline.actual || false;
                    playListInfo.id = eventDataRaw.associatedPlaylist.playlist_id || false;
                }
                return playListInfo;
            })();

            var brandProgram = (function () {
                //brand is only today, and everything else is nbcnews
                if ($t('jsonLd.Dataset.0.vertical', noValue) === 'today') {
                    return 'today';
                } else {
                    return 'NBC News';
                }
            })();

            customContextData = extend(customContextData, {
                'videocontentsource': eventDataRaw.source && eventDataRaw.source.name || noValue, //show name / network
                'videonetwork': (eventDataRaw.url && eventDataRaw.url.canonical && eventDataRaw.url.canonical.indexOf('msnbc.com') != -1) ? 'msnbc' : 'nbc', //msnbc or nbc
                'videopagecontentcategory': isAmp ? ampSection : $t('jsonLd.Dataset.0.section', noValue),
                'videopagesubverticalname': $t('jsonLd.Dataset.0.subVertical', noValue), //not correct for amp
                'videopagetemplatename': $t('jsonLd.Dataset.0.packageId', noValue), //not  correct for amp
                'videopagetype': isAmp ? 'AMP:post' : contentType(),
                'videopageverticalname': $t('jsonLd.Dataset.0.vertical', noValue),
                'videoplayerstyle': playerStyle(),
                'videoplaylist': playListInfo.label || noValue,
                'videoplaylistid': playListInfo.id || noValue,
                'videoprogram': eventDataRaw.source && eventDataRaw.source.name || brandProgram, //not sure
                'videopublishdate': formatDate(eventDataRaw.datePublished) || noValue,
                'videotitle': eventDataRaw.headline && eventDataRaw.headline.primary || noValue,
                //copied from AppM context variables
                'videoscrollcount': s.contextData['news.scrollcount'] || noValue,
                'videosessionnumber': s.contextData['news.sessionnumber'] || noValue,
                'videoflashversion': s.contextData['news.flashversion'] || noValue,
                //optional values
                'videoplayercount': $t('jsonLd.NewsArticle.0.video', []).length || noValue

            });
            return customContextData;
        };
        customBuilder.appMAccount = function () {
            var appMAccount = s.account;
            return appMAccount;
        };
        customBuilder.playerStyle = playerStyle();
        //get referrer pagename if its an embeded amp page.
        customBuilder.pageName = isAmp ? (brand() + ':AMP:post:embeddedVideo') : false;

        return customBuilder;
    })();
})();


</script><script>

//version 2.19
(function() {
    /*global $t, ADB, console, $ndp, AppMeasurement, visitor*/
    $t('register', 'ahb_adobeAppMeasurmentLoaded');
    var setupHeartbeat = function(s) {
        'use strict';
        //statics
        var noValue = 'not available';
        var playerName = window.otherVideoPlayerTech || 'NDP player'; //at this point, the whole thing shoudl be re-done, but adding a player type global var
        var debugState = window.localStorage && window.localStorage.getItem('jf_test') ? true : false;

        //privates
        var _mediaHeartbeat = null;
        var _appMeasurement = null;
        var _videoData = null; //video data populated in scope by event
        var _adData = null; //video data populated in scope by event
        var _stateInfo = {
            adPosition: 1,
            playheadPosition: 0,
            startupTime: 0,
            manualPlayTime: 0,
            videoCount: 0,
            playState: 'stop',
            videoType: 'VOD Clip',
            inAd: false

        };

        //constructors from adobe for deligate
        var CustomMediaHeartbeatDelegate = new ADB.va.MediaHeartbeatDelegate();
        var MediaHeartbeat = ADB.va.MediaHeartbeat; //mapping to match documentation

        //video info deligate
        CustomMediaHeartbeatDelegate.getCurrentPlaybackTime = function() {
            //playhead will be 0 for ads.
            return Math.round(_stateInfo.playheadPosition / 1000) || 0;
        };

        CustomMediaHeartbeatDelegate.getQoSObject = function() {
            //dont have QOS data right now (<bitrate>, <startuptime>, <fps>, <droppedFrames>)
            return MediaHeartbeat.createQoSObject(0, Math.round(_stateInfo.startupTime), 0, 0);
        };

        var createAMandHBObjects = function() {
            //create new appMeasurementmain and heartbeat instance 
            if (!_mediaHeartbeat) {
                //use DTM values since this may load before the page track is complete
                var appMAccount = window.hbCutomValues && typeof window.hbCutomValues.appMAccount === 'function' && window.hbCutomValues.appMAccount() || ''; //get from site specific function
                // Set-up the AppMeasurement component using values from page version.
                _appMeasurement = new AppMeasurement();
                _appMeasurement.visitor = visitor;
                _appMeasurement.trackingServer = s.trackingServer;
                _appMeasurement.account = appMAccount;
                _appMeasurement.charSet = "UTF-8";
                _appMeasurement.doPlugins = false;
                _appMeasurement.ssl = true;
                $t('track', 'ahb_adobeAppMeasurmentLoaded', {
                    'sc_obj': _appMeasurement
                });

                //Media Heartbeat initialization
                var mediaConfig = new ADB.va.MediaHeartbeatConfig();
                mediaConfig.trackingServer = 'nbcume.hb.omtrdc.net';
                mediaConfig.playerName = playerName;
                mediaConfig.debugLogging = debugState; // set this to false for production apps.
                mediaConfig.ssl = true;
                mediaConfig.appVersion = $ndp && $ndp.__version || 'unknown'; //ndp player version
                mediaConfig.ovp = 'unknown'; //change later
                mediaConfig.channel = (function() {
                    if (window.hbCutomValues && window.hbCutomValues.playerStyle === "Offsite Embedded") {
                        return 'Off-domain';
                    }
                    return 'On-domain';
                })();

                _mediaHeartbeat = new MediaHeartbeat(CustomMediaHeartbeatDelegate, mediaConfig, _appMeasurement);
            }
        };

        var setStartupTime = function(playInitiate) {
            if (!window.performance || _stateInfo.startupTime !== 0) {
                //only set startuptime first play
                return;
            }
            var startupTime = 0;
            if (playInitiate === 'Auto') {
                startupTime = performance.now() / 1000;
            } else {
                startupTime = (performance.now() - _stateInfo.manualPlayTime) / 1000;
            }
            _stateInfo.startupTime = startupTime;
        };

        var convertDuration = function(duration) {
            //if this is an ISO 8601 duration
            var ISO8601 = /^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/;
            if (ISO8601.test(duration)) {
                var h = 0,
                    m = 0,
                    s = 0;
                var matches = ISO8601.exec(duration);
                if (matches[1]) h = Number(matches[1]);
                if (matches[2]) m = Number(matches[2]);
                if (matches[3]) s = Number(matches[3]);
                return h * 3600 + m * 60 + s;
            }
            //else return number
            return duration;
        };

        $t('on', 'ndp_playerManualPlay', function() {
            _stateInfo.manualPlayTime = window.performance && performance.now() || 0;
            if (debugState) {
                console.log('* ndp_playerManualPlay (' + performance.now() + ')');
            }

        });

        //setup events
        $t('on', 'ndp_videoEvent', function(e, data) {
            //populate scope data
            var eventSection = data.eventType.split('_')[1] || '';
            if (eventSection === 'AdEvent') {
                _adData = data; //populate scope data with video data
            } else if (eventSection === 'PlaybackEvent') {
                _videoData = data; //populate scope data with video data
            }

            //if this is a progress event, populate playhead and exit
            if (data.eventType.indexOf('PROGRESS') >= 0) {
                if (data.videoData && data.videoData.playheadPosition !== 0) {
                    //dont update playhead with ad progress
                    if (data.eventType !== 'NDP_AdEvent_PROGRESS') {
                        _stateInfo.playheadPosition = data.videoData.playheadPosition;
                    }
                }

                //let the first AdEvent_PROGRESS event through
                if (!(data.eventType === 'NDP_AdEvent_PROGRESS' && _stateInfo.inAd === false)) {
                    return;
                }
            }

            //if the heartbeat instance wasnt created yet, do it now
            createAMandHBObjects();

            var eventData = _videoData && _videoData.videoData || {};
            var eventDataRaw = eventData.raw || {};

            //set videoType based on guid (VOD, LINEAR, LIVE)
            if (/^lv_/.test(eventDataRaw.guid) || /^nbcnewslive/.test(eventDataRaw.guid)) {
                _stateInfo.videoType = 'Linear';
            } else if (/^nn_netcast_/.test(eventDataRaw.guid)) {
                _stateInfo.videoType = 'VOD Episode';
            } else {
                _stateInfo.videoType = 'VOD Clip';
            }

            var playInitiate = (function() {
                if (eventDataRaw.isContinuousPlay) {
                    return 'Continuous';
                }
                if (!eventDataRaw.autoPlay) {
                    return 'Manual';
                }
                return 'Auto';
            })();

            var playListInfo = (function() {
                var playListInfo = {
                    'id': false,
                    'label': false
                };
                if (eventDataRaw.video_playlists && eventDataRaw.video_playlists[0]) {
                    playListInfo.label = eventDataRaw.video_playlists[0].label || false;
                    playListInfo.id = eventDataRaw.video_playlists[0].playlist_id || false;
                }
                return playListInfo;
            })();

            //had to move this out becuase of the pre-load event firing, and not knowing if ad_Start or content_Start firing
            var startSession = function(customContextData) {
                //start session on first frame

                if (_stateInfo.playState == 'stop') {
                    _stateInfo.playState = 'sessionStarted';
                    var mediaInfo = MediaHeartbeat.createMediaObject(
                        customContextData.videotitle || noValue, //video name
                        customContextData.videoguid || noValue, //video ID
                        (function() {
                            if (_stateInfo.videoType === "Linear") {
                                return -1; //set duration to -1 if its linear
                            } else {
                                return convertDuration(eventDataRaw.duration);
                            }
                        })(), //videoLength
                        (function() {
                            if (_stateInfo.videoType === "Linear") {
                                return MediaHeartbeat.StreamType.LIVE;
                            } else {
                                return MediaHeartbeat.StreamType.VOD; //default VOD
                            }
                        })()
                    );
                    _mediaHeartbeat.trackSessionStart(mediaInfo, customContextData);
                }
            };

            var pageName = window.hbCutomValues && window.hbCutomValues.pageName || s.pageName; //grab pagename from custom

            var customContextData = { //custom context data for calls
                'videocliptype': eventDataRaw.videoType || noValue,
                'videocontentsource': eventDataRaw.source || noValue, //show name / network
                'videocontenttype': 'Video',
                'videodate': s.customTimeParting('d'),
                'videoday': s.customTimeParting('dw'),
                'videoguid': eventDataRaw.guid || noValue,
                'videohour': s.customTimeParting('h'),
                'videoinitiate': playInitiate || noValue, //"Auto" vs. "Manual" vs. "Continuous"
                'videominute': s.customTimeParting('m'), //use customTimepart from scode file
                'videompxid': eventDataRaw.mpxId || noValue,
                'videonetwork': eventDataRaw.newsNetwork || noValue,
                'videopagecontentcategory': noValue, //set remotly
                'videopagename': pageName || noValue,
                'videopagetype': noValue, //set remotly
                'videoplatform': 'Web', //[todo] maybe mobile too?
                'videoplayerstyle': noValue, //set remotly
                'videoplayertech': $ndp && $ndp.playbackAdapter || noValue,
                'videoplayerurl': window.location.href.split('?')[0],
                'videoplaylist': playListInfo.label || noValue,
                'videoplaylistid': playListInfo.id || noValue,
                'videoprogram': eventDataRaw.source || noValue,
                'videopublishdate': noValue,
                'videoscreen': 'Normal', //[TODO] make this also show "Full"
                'videostatus': 'Unrestricted',
                'videosubcat1': noValue, //mpx primary category
                'videosubcat2': noValue,
                'videotitle': eventDataRaw.title || noValue,
                //optionsal values
                'videoadblockerdetection': s.cookieRead("i_abd") || noValue, //use s cookieread
                'videoflashversion': s.eVar88 || noValue, //uses "FlashDetect.raw"
                'videonativesponsor': noValue,
                'videopagestorylines': noValue,
                'videoplayercount': noValue,
                'videoplayertestvalue': window.__DY_VIDEO_TEST__ && window.__DY_VIDEO_TEST__.videoPlayerType || noValue,
                'videoscrollcount': s.eVar86 || noValue,
                'videosessionnumber': s.eVar35 || noValue, //session number count (from adobe)
                'videostreamcount': _stateInfo.videoCount || noValue, //video count (set inside the event)
                'videovideocontenttype': _stateInfo.videoType,
                'videocontentrating': eventDataRaw.sentiment || noValue,
                'videovisitorid': visitor.getMarketingCloudVisitorID() //for testing mostly, visitorID

            };
            //append site specific data from seperate function
            if (window.hbCutomValues) {
                customContextData = window.hbCutomValues({
                    'customContextData': customContextData,
                    'eventDataRaw': eventDataRaw,
                    '_stateInfo': _stateInfo
                });

            }
            if (debugState) {
                console.log('* ndp_videoEvent (' + performance.now() + ') : ' + data.eventType + ' : %O : %O : %O', data, customContextData, JSON.parse(JSON.stringify(_stateInfo)));
            }

            //specific events
            switch (data.eventType) {
                case 'NDP_PlaybackEvent_LOADED':
                    //set videostreamcount, and increment
                    _stateInfo.videoCount = _stateInfo.videoCount + 1;
                    customContextData.videostreamcount = _stateInfo.videoCount;

                    if (_stateInfo.playState !== 'stop') {
                        //if other video is started while in pause, close out last session, and reset values
                        _mediaHeartbeat.trackSessionEnd();
                        _stateInfo.playState = 'stop';
                        _stateInfo.adPosition = 1;
                        _stateInfo.playheadPosition = 0;
                        _stateInfo.inAd = false;
                    }
                    //reload app measurement settings before a videoLoad (to be sure its up to date)
                    _appMeasurement.clearVars();
                    _appMeasurement.pageName = pageName;
                    break;

                case 'NDP_PlaybackEvent_START':
                    //set startup time
                    setStartupTime(playInitiate);

                    startSession(customContextData);

                    if (_stateInfo.adPosition !== 1) { //if just came from an ad, end the adbreak
                        _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdBreakComplete);
                        _stateInfo.adPosition = 1;

                        //do a seek event to force event fire at playback start after ad
                        _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.SeekStart);
                        _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.SeekComplete);
                    }
                    if (_stateInfo.playState !== 'play') {
                        //if first asset after load
                        _stateInfo.playState = 'play';
                        _mediaHeartbeat.trackPlay();
                    }
                    break;

                case 'NDP_PlaybackEvent_PLAY':
                case 'NDP_AdEvent_PLAY':
                    //play was resumed (filter multiple plays)
                    if (_stateInfo.playState === 'pause') {
                        _stateInfo.playState = 'play';
                        _mediaHeartbeat.trackPlay();
                    }
                    break;
                case 'NDP_PlaybackEvent_PAUSE':
                case 'NDP_AdEvent_PAUSE':
                    _stateInfo.playState = 'pause';
                    _mediaHeartbeat.trackPause();
                    break;

                case 'NDP_PlaybackEvent_SEEK':
                    _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.SeekStart);
                    _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.SeekComplete);
                    //track rewind event
                    if (eventData.playheadPosition < _stateInfo.playheadPosition) {
                        _appMeasurement.contextData = customContextData;
                        _appMeasurement.contextData.videoscrub = 'rewind';
                        _appMeasurement.tl(this, 'o', 'Video Rewind', null);
                    }
                    break;

                case 'NDP_PlaybackEvent_COMPLETE':
                    _mediaHeartbeat.trackComplete();
                    _mediaHeartbeat.trackSessionEnd();
                    _stateInfo.playState = 'stop';
                    _stateInfo.playheadPosition = 0;
                    break;

                case 'NDP_AdEvent_START':
                    //move all ad logic to progress
                    //have to use this since content_loaded fires earlier.
                    startSession(customContextData);
                    break;

                case 'NDP_AdEvent_PROGRESS':
                    //set startup time 
                    _stateInfo.inAd = true;
                    setStartupTime(playInitiate);
                    //for ads, its only ever at the beginings for now, so hard coded
                    var adData = _adData && _adData.videoData || {};
                    var adLength = Math.round(adData.totalLength / 1000) || 0;
                    var adBreakInfo = MediaHeartbeat.createAdBreakObject(
                        noValue, //name
                        1, //position 
                        0); //startTime
                    var adInfo = MediaHeartbeat.createAdObject(
                        noValue, //name
                        ('rand_' + (Math.random() * 36 * 100000 | 0).toString(36)), //id (random ID)
                        _stateInfo.adPosition, //position
                        adLength); //length

                    if (_stateInfo.adPosition === 1) { //start adBreak
                        _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdBreakStart, adBreakInfo);
                    }
                    _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdStart, adInfo, customContextData);
                    _stateInfo.adPosition = _stateInfo.adPosition + 1;
                    //do the track play AFTER the ad starts
                    if (_stateInfo.playState !== 'play') {
                        //if first asset after load
                        _stateInfo.playState = 'play';
                        _mediaHeartbeat.trackPlay();
                    }
                    break;

                case 'NDP_AdEvent_COMPLETE':
                    if (_stateInfo.inAd) {
                        _stateInfo.inAd = false;
                        _mediaHeartbeat.trackEvent(MediaHeartbeat.Event.AdComplete);
                        _stateInfo.playheadPosition = 0;
                    }
                    break;

                default:
                    break;
            }
        });
    };

    //run after adobe is loaded, or if its alrady loaded.
    if ($t('dtm_adobeAppMeasurmentLoaded', 'not loaded') !== 'not loaded') {
        setupHeartbeat(window.s);
    } else {
        $t('on', 'dtm_adobeAppMeasurmentLoaded', function() {
            setupHeartbeat(window.s);
        });
    }
})();


</script><script>

(function () {
    /* globals $t */

    //track comscore pageview
    $t('on', 'dtm_pageView', function (e, data) {
        var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];
        var trackView = data.trackView !== false; //this will default all to true if not false
        var c4Values = {
            'today.com': 'today',
            'nbcnews.com': 'nbcnews',
            'msnbc.com': 'msnbc'
        };

        if (trackView) {
            window._comscore = window._comscore || [];
            (function () {
                var s = document.createElement("script"),
                    el = document.getElementsByTagName("script")[0];
                s.async = true;
                s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
                el.parentNode.insertBefore(s, el);
            })();
            window._comscore.push({
                c1: '2',
                c2: '6035083',
                c3: '*null',
                c4: c4Values[topLevelDomain] || c4Values['nbcnews.com']
            });
        }
    });
})();


</script><script>

(function () {
    /*global $t */
    var loadedScripts = {};
    var loadScript = function (address) {
        if (address && !loadedScripts[address]) {
            var t = document.createElement('script'); t.async = !0;
            t.src = address;
            t.id = 'funnel-relay-installer';
            t.setAttribute('data-property-id', 'PROPERTY_ID');
            t.setAttribute('data-customer-id', 'nbc_eqwe2253');

            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(t, s);
            loadedScripts[address] = true;
        }
    };

    var trackonomicsAddresses = {
        'today.com': 'https://cdn-magiclinks.trackonomics.net/client/static/v2/nbc_eqwe2253.js',
        'nbcnews.com': 'https://cdn-magiclinks.trackonomics.net/client/static/v2/nbc_eqwe2253_nbc_news.js'
    }

    $t('on', 'dtm_pageView', function (e, data) {
        var trackView = data.trackView !== false; //this will default all to true if not false
        var pageIndex = $t(e.type + '.index', 0);
        var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];
        var pageType = $t('jsonLd.Dataset.' + pageIndex + '.pageType', '').toLowerCase();
        
        var isCoverOrFront = pageType === 'front' || pageType === 'sectionfront';
        var iEcommerceEnabled = $t('jsonLd.Dataset.' + pageIndex + '.ecommerceEnabled', false);

        //Tracks only ECommerce.
        if (trackView && (iEcommerceEnabled || isCoverOrFront)) {
            loadScript(trackonomicsAddresses[topLevelDomain]);
        }

    });
})();

</script><script>

(function () {
    (function() {
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = location.protocol + '//ak.sail-horizon.com/spm/spm.v1.min.js';
        var x = document.getElementsByTagName('script')[0];
        x.parentNode.insertBefore(s, x);
    })();

    //poll to run sailthru init after loaded
    var pollTimer = {
        tries: 5,
        timer: setInterval(function () {
            pollTimer.tries = pollTimer.tries - 1;
            if (window.Sailthru) {
                var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];
                var customerIdValues = {
                    'today.com': 'f0090744c0d73fb6594d580fbac227a5',
                    'nbcnews.com': 'a839e8824b3cdd864a9ba3052205d70b',
                    'msnbc.com': '18ce7874047066963cf21c55d2137291'
                };
                window.Sailthru.init({ customerId: customerIdValues[topLevelDomain] });
                pollTimer.tries = 0;
            }
            if (pollTimer.tries <= 0) {
                clearInterval(pollTimer.timer);
            }
        }, 200)
    };
})();     


</script><script>

/* global, $t */
(function() {
    'use strict';
    //calculated on load
    //statics
    var noValue = 'not available';
    var extend = function(defaults, options) {
        var extended = {};
        var prop;
        for (prop in defaults) {
            if (Object.prototype.hasOwnProperty.call(defaults, prop)) {
                extended[prop] = defaults[prop];
            }
        }
        for (prop in options) {
            if (Object.prototype.hasOwnProperty.call(options, prop)) {
                extended[prop] = options[prop];
            }
        }
        return extended;
    };

    //setup brand settings per top level domain
    var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];
    var brandSettings = {
        'nbcnews.com': {
            playerID: 'P35C41790-24D9-4BCD-9873-48B547719D85',
            vcid: 'c04'
        },
        'today.com': {
            playerID: 'P629EFCBC-BB38-416B-981A-0F18B5DDA193',
            vcid: 'c30'
        },
        'msnbc.com': {
            playerID: 'P85E5B977-5FE2-4654-A4A4-3AF8BAAF454E',
            vcid: 'c29'
        }
    };
    var currentBrand = brandSettings[topLevelDomain] || brandSettings['nbcnews.com']; //default to nbcnews

    var formatDate = function(dateStr) {
        //convert: Thu Nov 09 2017 16:32:29 GMT+0000 (UTC) convert to YYYYMMDD HH:MI:SS (20170705 11:41:32)
        function pad(number) {
            if (number <= 9) {
                number = '0' + number;
            }
            return number + '';
        }
        if (typeof dateStr !== 'string') {
            return false;
        }
        var date = new Date(dateStr);
        //return if its not a valid date
        if (isNaN(date.getTime())) { return false; }
        var timeString = pad(date.getUTCHours()) + ':' + pad(date.getUTCMinutes()) + ':' + pad(date.getUTCSeconds());

        return '' + date.getUTCFullYear() + pad(date.getUTCMonth() + 1) + pad(date.getUTCDate()) + ' ' + timeString;
    };

    var convertDuration = function(duration) {
        //if this is an ISO 8601 duration
        var ISO8601 = /^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/;
        if (ISO8601.test(duration)) {
            var h = 0,
                m = 0,
                s = 0;
            var matches = ISO8601.exec(duration);
            if (matches[1]) h = Number(matches[1]);
            if (matches[2]) m = Number(matches[2]);
            if (matches[3]) s = Number(matches[3]);
            return h * 3600 + m * 60 + s;
        }
        //else return number
        return duration;
    };

    //expose function for custom values
    window.nielsenCutomValues = (function() {
        var customBuilder = function(context) {
            var eventDataRaw = context.eventDataRaw;
            var contentMetadataObject = context.contentMetadataObject;
            //just add all of them for now
            contentMetadataObject = extend(contentMetadataObject, {
                type: 'content',
                assetid: eventDataRaw.guid,
                program: eventDataRaw.source && eventDataRaw.source.name || 'NBC News', //not sure,
                title: eventDataRaw.headline && eventDataRaw.headline.primary || noValue,
                length: convertDuration(eventDataRaw.duration),
                mediaURL: eventDataRaw.canonicalUrl,
                airdate: formatDate(eventDataRaw.datePublished) || noValue,
                isfullepisode: 'n',
                crossId2: eventDataRaw.source && eventDataRaw.source.name || 'NBC News',
                adloadtype: '2',
                hasAds: '2',
                //from nielsen
                clientid: 'us-800148',
                vcid: currentBrand.vcid
            });
            return contentMetadataObject;
        };
        customBuilder.playerID = currentBrand.playerID;
        return customBuilder;
    })();
})();


</script><script>

/* globals $t, NOLBUNDLE */
// this is basicaly a copy of the adobe heartbeat global script.
// v1.8
(function() {
    // Add Static Queue Snippet
    ! function(t, n) {
        t[n] = t[n] || {
            nlsQ: function(e, o, c, r, s, i) {
                return s = t.document, r = s.createElement("script"), r.async = 1, r.src = ("http:" === t.location.protocol ? "http:" : "https:") + "//cdn-gl.imrworldwide.com/conf/" + e + ".js#name=" + o + "&ns=" + n, i = s.getElementsByTagName("script")[0], i.parentNode.insertBefore(r, i), t[n][o] = t[n][o] || {
                    g: c || {},
                    ggPM: function(e, c, r, s, i) {
                        (t[n][o].q = t[n][o].q || []).push([e, c, r, s, i]);
                    }
                }, t[n][o];
            }
        };
    }(window, "NOLBUNDLE");

    var debugState = window.localStorage && window.localStorage.getItem('jf_test') ? true : false;

    // Created SDK Instance
    var playerID = (function(){
        if(window.nielsenCutomValues){
            return window.nielsenCutomValues.playerID;
        }else{
            //default to the nbcnews playerID
            return 'P35C41790-24D9-4BCD-9873-48B547719D85';
        }
    })();
    var _nSdkInstance = NOLBUNDLE.nlsQ(playerID, "nlsnInstance", {
        nol_sdkDebug: debugState ? "debug" : "off"
    });
    var _videoData = null; //video data populated in scope by event
    var _adData = null; //video data populated  
    var _stateInfo = {
        playheadPosition: 0,
        playState: 'stop',
        inAd: false
    };

    var stopSession = function() {
        if (_stateInfo.inAd === true) {
            // Only inside a midroll indicate <stop> for the ad
            _nSdkInstance.ggPM('stop', _stateInfo.playheadPosition);
        } else if (_stateInfo.playState !== 'stop') {
            // Indicate <end> and <stop> for the content
            _nSdkInstance.ggPM('end', _stateInfo.playheadPosition);
            _nSdkInstance.ggPM('stop', _stateInfo.playheadPosition);
        }
    };
    //set for unload with stop session
    window.addEventListener('beforeunload', stopSession);

    $t('on', 'ndp_videoEvent', function(e, data) {
        //populate scope data
        var eventSection = data.eventType.split('_')[1] || '';
        if (eventSection === 'AdEvent') {
            _adData = data; //populate scope data with video data
        } else if (eventSection === 'PlaybackEvent') {
            _videoData = data; //populate scope data with video data
        }

        //if this is a progress event, populate playhead and exit
        if (data.eventType.indexOf('PROGRESS') >= 0) {
            if (data.videoData && data.videoData.playheadPosition !== 0) {
                (function() {
                    var prevPlayheadPosition = _stateInfo.playheadPosition;
                    _stateInfo.playheadPosition = Math.round(data.videoData.playheadPosition / 1000);
                    //populate playhead to nielsen every second
                    if (prevPlayheadPosition != _stateInfo.playheadPosition) {
                        _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);
                    }
                })();
            }

            //let the first AdEvent_PROGRESS event through
            if (!(data.eventType === 'NDP_AdEvent_PROGRESS' && _stateInfo.inAd === false)) {
                return;
            }
        }

        var eventData = _videoData && _videoData.videoData || {};
        var eventDataRaw = eventData.raw || {};

        //default values, overwritten with custom
        var contentMetadataObject = {
            type: 'content',
            assetid: eventDataRaw.guid,
            program: eventDataRaw.source,
            title: eventDataRaw.title,
            length: eventDataRaw.duration,
            mediaURL: eventDataRaw.canonicalUrl,
            airdate: '', // 'YYYYMMDD HH:MI:SS'
            isfullepisode: 'n',
            //crossId1: 'Standard Episode ID',
            crossId2: eventDataRaw.guid,
            adloadtype: '2',
            hasAds: '2',
            //from nielsen
            clientid: 'us-800148',
            vcid: 'c04' //this is set for each brand also
        };

        if (window.nielsenCutomValues) {
            contentMetadataObject = window.nielsenCutomValues({
                'contentMetadataObject': contentMetadataObject,
                'eventDataRaw': eventDataRaw,
                '_stateInfo': _stateInfo
            });

        }

        //specific events
        switch (data.eventType) {
            case 'NDP_PlaybackEvent_LOADED':
                if (_stateInfo.playState === 'play') {
                    //if other video is started while in pause, close out last session, and reset values
                    stopSession();

                    _stateInfo.playState = 'stop';
                    _stateInfo.playheadPosition = 0;
                    _stateInfo.inAd = false;
                }

                _nSdkInstance.ggPM('loadMetadata', contentMetadataObject);
                break;

            case 'NDP_PlaybackEvent_START':
                _nSdkInstance.ggPM('loadMetadata', contentMetadataObject);
                _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);

                _stateInfo.playState = 'play';
                break;

            case 'NDP_PlaybackEvent_PLAY':
            case 'NDP_AdEvent_PLAY':
                //play was resumed (filter multiple plays)
                if (_stateInfo.playState === 'pause') {
                    _stateInfo.playState = 'play';
                    _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);
                }
                break;
            case 'NDP_PlaybackEvent_PAUSE':
            case 'NDP_AdEvent_PAUSE':
                _stateInfo.playState = 'pause';
                _nSdkInstance.ggPM('stop', _stateInfo.playheadPosition);
                break;

            case 'NDP_PlaybackEvent_SEEK':
                _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);
                break;

            case 'NDP_PlaybackEvent_COMPLETE':
                stopSession();
                _stateInfo.playState = 'stop';
                _stateInfo.playheadPosition = 0;
                break;

            case 'NDP_AdEvent_START':
                //move all ad logic to progress
                break;

            case 'NDP_AdEvent_PROGRESS':
                //need flag since complete is always fired
                _stateInfo.inAd = true;
                //hardcoded pre-roll only
                var adMetadataObject = {
                    assetid: ('rand_' + (Math.random() * 36 * 100000 | 0).toString(36)),
                    type: 'preroll'
                };

                _nSdkInstance.ggPM('loadMetadata', adMetadataObject);
                _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);

                _stateInfo.playState = 'play';
                break;

            case 'NDP_AdEvent_COMPLETE':
                if (_stateInfo.inAd) {
                    _stateInfo.inAd = false;
                    _nSdkInstance.ggPM('setPlayheadPosition', _stateInfo.playheadPosition);
                    _nSdkInstance.ggPM('stop', _stateInfo.playheadPosition);

                    _stateInfo.playheadPosition = 0;
                }
                break;

            default:
                break;
        }
    });
})();


</script><script>_satellite["__runScript1"](function(event, target) {

//dynamicaly load conductrics scripts
(function () {
    var topLevelDomain = document.location.hostname.match(/[^./]+\.[^./]+$/)[0];
    var siteEndpoints = {
        'today.com': '//cdn-v3.conductrics.com/ac-kANJFqzwHz/v3/agent-api/js/f-MGXQstUBzA/dt-dLILCrQnEa9tihQkISOiSQfBsuZKdW?apikey=api-GCNKdGuimYDiuTjQpVpN',
        'nbcnews.com': '//cdn-v3.conductrics.com/ac-kANJFqzwHz/v3/agent-api/js/f-MGXQstUBzA/dt-3RxgN1KLu0QvqskKLYBEVyV2EGUVvw?apikey=api-GCNKdGuimYDiuTjQpVpN',
        'msnbc.com': '//cdn-v3.conductrics.com/ac-kANJFqzwHz/v3/agent-api/js/f-MGXQstUBzA/dt-wpczel0toMY1QBxXg7LJ63vSXifojX?apikey=api-GCNKdGuimYDiuTjQpVpN'
    };

    (function (scriptURL) {
        if (!scriptURL) {
            return false;
        }
        var s = document.createElement('script');
        var el = document.getElementsByTagName('script')[0];
        s.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + scriptURL;
        el.parentNode.insertBefore(s, el);
    })(siteEndpoints[topLevelDomain]);
})();


});</script><script>

/* Copyright (c) 2016 comScore, Inc.
    * All rights reserved.
    * By using this software, you are agreeing to be bound by the
    * terms of these policies: http://www.comscore.com/About_comScore/Privacy_Policy
    */
!function(a,b){false&&"function"==typeof define&&define.a?define([],function(){return a.ns_=b(a.ns_)}):"object"==typeof module&&module.exports?module.exports=b():a.ns_=b(a.ns_)}(this,function(a){a=a||{},a.ns_=a;var b={uid:function(){var a=1;return function(){return+new Date+"_"+a++}}(),filter:function(a,b){var c={};for(var d in b)b.hasOwnProperty(d)&&a(b[d])&&(c[d]=b[d]);return c},extend:function(a){var b,c=arguments.length;a=a||{};for(var d=1;c>d;d++)if(b=arguments[d])for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);return a},getString:function(a,b){var c=String(a);return null==a?b||"na":c},getLong:function(a,b){var c=Number(a);return null==a||isNaN(c)?b||0:c},getInteger:function(a,b){var c=Number(parseInt(a));return null==a||isNaN(c)?b||0:c},getBoolean:function(a,b){var c="true"==String(a).toLowerCase();return null==a?b||!1:c},parseBoolean:function(a,b){return b=b||!1,a?"0"==a?!1:void 0:b},isNotEmpty:function(a){return!this.isEmpty(a)},isEmpty:function(a){return void 0===a||null===a||""===a||a instanceof Array&&0===a.length},indexOf:function(a,b){var c=-1;return this.forEach(b,function(b,d){b==a&&(c=d)}),c},forEach:function(a,b,c){try{if("function"==typeof b)if(c="undefined"!=typeof c?c:null,"number"!=typeof a.length||"undefined"==typeof a[0]){var d="undefined"!=typeof a.__proto__;for(var e in a)a.hasOwnProperty(e)&&(!d||d&&"undefined"==typeof a.__proto__[e])&&"function"!=typeof a[e]&&b.call(c,a[e],e)}else for(var f=0,g=a.length;g>f;f++)b.call(c,a[f],f)}catch(h){}},regionMatches:function(a,b,c,d,e){if(0>b||0>d||b+e>a.length||d+e>c.length)return!1;for(;--e>=0;){var f=a.charAt(b++),g=c.charAt(d++);if(f!=g)return!1}return!0},size:function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b},log:function(a,b){if("undefined"!=typeof b&&b&&"undefined"!=typeof console&&console){var c=new Date,d=c.getHours()+":"+c.getMinutes()+":"+c.getSeconds();console.log(d,a)}},isTrue:function(a){return"undefined"==typeof a?!1:"string"==typeof a?(a=a.toLowerCase(),"true"===a||"1"===a||"on"===a):!!a},toString:function(a){if("undefined"==typeof a)return"undefined";if("string"==typeof a)return a;if("[object Array]"===Object.prototype.toString.call(a))return a.join(",");if(this.size(a)>0){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b}return a.toString()},exists:function(a){return"undefined"!=typeof a&&null!=a},firstGreaterThan0:function(){for(var a=0,b=arguments.length;b>a;a++){var c=arguments[a];if(c>0)return c}return 0},cloneObject:function(a){if(null==a||"object"!=typeof a)return a;var b=function(){function a(){}function b(b){return"object"==typeof b?(a.prototype=b,new a):b}function c(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}function d(){this.copiedObjects=[];var a=this;this.recursiveDeepCopy=function(b){return a.deepCopy(b)},this.depth=0}function e(a,b){var c=new d;return b&&(c.maxDepth=b),c.deepCopy(a)}function f(a){return"undefined"!=typeof window&&window&&window.Node?a instanceof Node:"undefined"!=typeof document&&a===document?!0:"number"==typeof a.nodeType&&a.attributes&&a.childNodes&&a.cloneNode}var g=[];return c.prototype={constructor:c,canCopy:function(){return!1},create:function(a){},populate:function(a,b,c){}},d.prototype={constructor:d,maxDepth:256,cacheResult:function(a,b){this.copiedObjects.push([a,b])},getCachedResult:function(a){for(var b=this.copiedObjects,c=b.length,d=0;c>d;d++)if(b[d][0]===a)return b[d][1]},deepCopy:function(a){if(null===a)return null;if("object"!=typeof a)return a;var b=this.getCachedResult(a);if(b)return b;for(var c=0;c<g.length;c++){var d=g[c];if(d.canCopy(a))return this.applyDeepCopier(d,a)}throw new Error("Unable to clone the following object "+a)},applyDeepCopier:function(a,b){var c=a.create(b);if(this.cacheResult(b,c),this.depth++,this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");return a.populate(this.recursiveDeepCopy,b,c),this.depth--,c}},e.DeepCopier=c,e.deepCopiers=g,e.register=function(a){a instanceof c||(a=new c(a)),g.unshift(a)},e.register({canCopy:function(){return!0},create:function(a){return a instanceof a.constructor?b(a.constructor.prototype):{}},populate:function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&(c[d]=a(b[d]));return c}}),e.register({canCopy:function(a){return a instanceof Array},create:function(a){return new a.constructor},populate:function(a,b,c){for(var d=0;d<b.length;d++)c.push(a(b[d]));return c}}),e.register({canCopy:function(a){return a instanceof Date},create:function(a){return new Date(a)}}),e.register({canCopy:function(a){return f(a)},create:function(a){return"undefined"!=typeof document&&a===document?document:a.cloneNode(!1)},populate:function(a,b,c){if("undefined"!=typeof document&&b===document)return document;if(b.childNodes&&b.childNodes.length)for(var d=0;d<b.childNodes.length;d++){var e=a(b.childNodes[d]);c.appendChild(e)}}}),{deepCopy:e}}();return b.deepCopy(a)},safeGet:function(a,b){return b=this.exists(b)?b:"",this.exists(a)?a:b},getBrowserName:function(){if(!navigator)return"";var a,b,c=navigator.userAgent||"",d=navigator.appName||"";return-1!=(b=c.indexOf("Opera"))||-1!=(b=c.indexOf("OPR/"))?d="Opera":-1!=(b=c.indexOf("Android"))?d="Android":-1!=(b=c.indexOf("Chrome"))?d="Chrome":-1!=(b=c.indexOf("Safari"))?d="Safari":-1!=(b=c.indexOf("Firefox"))?d="Firefox":-1!=(b=c.indexOf("IEMobile"))?d="Internet Explorer Mobile":"Microsoft Internet Explorer"==d||"Netscape"==d?d="Internet Explorer":(a=c.lastIndexOf(" ")+1)<(b=c.lastIndexOf("/"))?(d=c.substring(a,b),d.toLowerCase()==d.toUpperCase()&&(d=navigator.appName)):d="unknown",d},getBrowserFullVersion:function(){if(!navigator)return"";var a,b,c,d,e=navigator.userAgent||"",f=navigator.appName||"",g=navigator.appVersion?""+parseFloat(navigator.appVersion):"";return-1!=(b=e.indexOf("Opera"))?(g=e.substring(b+6),-1!=(b=e.indexOf("Version"))&&(g=e.substring(b+8))):-1!=(b=e.indexOf("OPR/"))?g=e.substring(b+4):-1!=(b=e.indexOf("Android"))?g=e.substring(b+11):-1!=(b=e.indexOf("Chrome"))?g=e.substring(b+7):-1!=(b=e.indexOf("Safari"))?(g=e.substring(b+7),-1!=(b=e.indexOf("Version"))&&(g=e.substring(b+8))):-1!=(b=e.indexOf("Firefox"))?g=e.substring(b+8):"Microsoft Internet Explorer"==f?(d=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=d.exec(e)&&(g=parseFloat(RegExp.$1))):"Netscape"==f?(d=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=d.exec(e)&&(g=parseFloat(RegExp.$1))):g=e.lastIndexOf(" ")+1<(b=e.lastIndexOf("/"))?e.substring(b+1):"unknown",g=g.toString(),-1!=(c=g.indexOf(";"))&&(g=g.substring(0,c)),-1!=(c=g.indexOf(" "))&&(g=g.substring(0,c)),-1!=(c=g.indexOf(")"))&&(g=g.substring(0,c)),a=parseInt(""+g,10),isNaN(a)&&(g=""+parseFloat(navigator.appVersion)),g},browserAcceptsLargeURLs:function(){return"undefined"!=typeof window?(null!==window.ActiveXObject,!0):!0},getNamespace:function(){return a.ns_||a}};return a.StreamSense=a.StreamSense||function(){var c=function(){var a="cs_";return function(){var c="undefined"!=typeof localStorage?localStorage:null;b.extend(this,{get:function(b){return c&&c.getItem(a+b)},set:function(b,d){c&&c.setItem(a+b,d)},has:function(b){return c&&c.getItem(a+b)},remove:function(b){c&&c.removeItem(a+b)},clear:function(){for(var b=0;c&&b<c.length;++b){var d=c.key(b);d.substr(0,a.length)===a&&c.removeItem(d)}}})}}(),d=function(a,b){if("undefined"!=typeof Image){var c=new Image;c.onload=function(){b&&b(200),c=null},c.onerror=function(){b&&b(),c=null},c.src=a}},e=function(a,b,c){c&&"undefined"!=typeof setTimeout&&setTimeout(c,0)},f=function(){return{dir:function(){return null},append:function(a,b,c){},write:function(a,b,c){},deleteFile:function(){return!1},read:function(){return null}}}(),g=function(){return{PLATFORM:"generic",httpGet:d,httpPost:e,Storage:c,IO:f,getCrossPublisherId:function(){return null},getAppName:function(){return h.UNKNOWN_VALUE},getAppVersion:function(){return h.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return h.UNKNOWN_VALUE},getPlatformVersion:function(){return h.UNKNOWN_VALUE},getPlatformName:function(){return"js"},getRuntimeName:function(){return h.UNKNOWN_VALUE},getRuntimeVersion:function(){return h.UNKNOWN_VALUE},getResolution:function(){return h.UNKNOWN_VALUE},getLanguage:function(){return h.UNKNOWN_VALUE},getPackageName:function(){return null},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(a,b){return setTimeout(a,b)},clearTimeout:function(a){return clearTimeout(a)},getDeviceArchitecture:function(){return h.UNKNOWN_VALUE},getConnectionType:function(){return h.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return h.UNKNOWN_VALUE},isConnSecure:function(){return"s"===document.location.href.charAt(4)},processMeasurementLabels:function(){}}}(),h={UNKNOWN_VALUE:"unknown",UNKNOWN_RESOLUTION:"0x0"};b.jsonObjectToStringDictionary=function(a){var b={};for(var c in a){var d=a[c];null===d||void 0===d?b[c]=d:b[c]=a[c]+""}return b},b.getKeys=function(a,b){var c,d=[];for(c in a)b&&!b.test(c)||!a.hasOwnProperty(c)||(d[d.length]=c);return d},b.fixEventTime=function(a){if(a.ns_ts)return parseInt(a.ns_ts);var b=+new Date;return a.ns_ts=String(b),b},b.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},b.addNewPlaybackInterval=function(a,c,d,e){var f={};if(!(d>=c))return b.cloneObject(a);if(f.start=c,f.end=d,0==a.length)return a.push(f),b.cloneObject(a);var g;for(g=0;g<a.length;g++)if(f.start>=a[g].start&&f.end<=a[g].end)return b.cloneObject(a);var h,i=!1;for(h=0;h<a.length;h++)if(h+1===a.length&&f.start>=a[h].start||f.start>=a[h].start&&f.start<a[h+1].start){a.splice(h+1,0,f),i=!0;break}i||a.splice(0,0,f);var j=[a[0]];for(g=1;g<a.length;g++)j[j.length-1].end+e<a[g].start?j.push(a[g]):j[j.length-1].end<a[g].end&&(j[j.length-1].end=a[g].end);return b.cloneObject(j)};var i=function(){var a=["play","pause","pause-on-buffering","end","buffer","buffer-stop","keep-alive","hb","custom","load","start","skstart","adskip","cta","error","trans","drmfa","drmap","drmde","bitrt","playrt","volume","window","audio","video","subs","cdn"];return{PLAY:0,PAUSE:1,PAUSE_ON_BUFFERING:2,END:3,BUFFER:4,BUFFER_STOP:5,KEEPALIVE:6,HEARTBEAT:7,CUSTOM:8,LOAD:9,START:10,SEEK_START:11,AD_SKIP:12,CTA:13,ERROR:14,TRANSFER:15,DRM_FAILED:16,DRM_APPROVED:17,DRM_DENIED:18,BIT_RATE:19,PLAYBACK_RATE:20,VOLUME:21,WINDOW_STATE:22,AUDIO:23,VIDEO:24,SUBS:25,CDN:26,toString:function(b){return a[b]}}}(),j=function(){return{IDLE:0,PLAYBACK_NOT_STARTED:1,PLAYING:2,PAUSED:3,BUFFERING_BEFORE_PLAYBACK:4,BUFFERING_DURING_PLAYBACK:5,BUFFERING_DURING_SEEKING:6,BUFFERING_DURING_PAUSE:7,SEEKING_BEFORE_PLAYBACK:8,SEEKING_DURING_PLAYBACK:9,SEEKING_DURING_BUFFERING:10,SEEKING_DURING_PAUSE:11,PAUSED_DURING_BUFFERING:12}}(),k=function(){var a=["c","s","r"];return{SINGLE_CLIP:0,SEGMENTED:1,REDUCED:2,toString:function(b){return a[b]}}}(),l={STREAMSENSE_VERSION:"5.1.1.160316",MODEL_VERSION:"5.1",DEFAULT_PLAYERNAME:"js_api",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,THROTTLING_DELAY:500,INTERVAL_MERGE_TOLERANCE:500,STANDARD_METADATA_LABELS:["ns_st_ci","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pu","c3","c4","c6"],LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_alias","ca_ns_alias","cb_ns_alias","cc_ns_alias","cd_ns_alias","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","cs_partner","cs_xcid","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_smv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sc","ns_st_sq","ns_st_ppc","ns_st_apc","ns_st_spc","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_sl","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_ad","ns_st_li","ns_st_ci","ns_st_si","ns_st_pt","ns_st_dpt","ns_st_ipt","ns_st_et","ns_st_det","ns_st_upc","ns_st_dupc","ns_st_iupc","ns_st_upa","ns_st_dupa","ns_st_iupa","ns_st_lpc","ns_st_dlpc","ns_st_lpa","ns_st_dlpa","ns_st_pa","ns_ap_jb","ns_ap_et","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ca_cs_c12u","cb_cs_c12u","cc_cs_c12u","cd_cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_dbc","ns_st_bt","ns_st_dbt","ns_st_bp","ns_st_lt","ns_st_skc","ns_st_dskc","ns_st_ska","ns_st_dska","ns_st_skd","ns_st_skt","ns_st_dskt","ns_st_pc","ns_st_dpc","ns_st_pp","ns_st_br","ns_st_pbr","ns_st_rt","ns_st_prt","ns_st_ub","ns_st_vo","ns_st_pvo","ns_st_ws","ns_st_pws","ns_st_ki","ns_st_rp","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pl","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_sr","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_ce","ns_st_ia","ns_st_dt","ns_st_ddt","ns_st_tdt","ns_st_tm","ns_st_dtm","ns_st_ttm","ns_st_de","ns_st_pu","ns_st_ti","ns_st_cu","ns_st_fee","ns_st_at","ns_st_pat","ns_st_vt","ns_st_pvt","ns_st_tt","ns_st_ptt","ns_st_cdn","ns_st_pcdn","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","ns_ecommerce","ns_ec_sv","ns_client_id","ns_order_id","ns_ec_cur","ns_orderline_id","ns_orderlines","ns_prod_id","ns_qty","ns_prod_price","ns_prod_grp","ns_brand","ns_shop","ns_category","category","ns_c","ns_search_term","ns_search_result","ns_m_exp","ns_m_chs","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er"]},m=function(){function a(){function a(){I={},I.ns_st_pt="0",I.ns_st_bt="0",I.ns_st_bc="0",I.ns_st_pc="0",I.ns_st_sq="0",I.ns_st_cl="0",I.ns_st_pn="1",I.ns_st_tp="1",I.ns_st_skc="0",I.ns_st_et="0",I.ns_st_cn="1",I.ns_st_sc="0",I.ns_st_ska="0",I.ns_st_skd="0",I.ns_st_skt="0",I.ns_st_upc="0",I.ns_st_lpc="0",I.ns_st_upa="0",I.ns_st_lpa="0",I.ns_st_ub="0",I.ns_st_br="0",f=!1,e=!1,d=h.UNKNOWN_VALUE,g=NaN,m=0,j=0,i=NaN,n=NaN,p=0,o=0,k=0,s=NaN,q=[],r=[],t=0,u=0,v=0,w=0,x=0,y=0,z=NaN,A=0,B=!1,C=NaN,F=!1,E=0,H=0,D=0,G=0,J=0,K=0,L=0,M=0,N=0}function c(){var a,b,c=0;for(a=0;a<q.length;a++)c+=Math.abs(q[a].end-q[a].start);O.setUniquePlaybackInterval(c);var d=0;for(a=0;a<q.length;a++)b=Math.abs(q[a].end-q[a].start),b>d&&(d=b);O.setLongestPlaybackInterval(d);var e=0;for(a=0;a<r.length;a++)e+=Math.abs(r[a].end-r[a].start);O.setAssetUniquePlaybackInterval(e);var f=0;for(a=0;a<r.length;a++)b=Math.abs(r[a].end-r[a].start),b>f&&(f=b);O.setAssetLongestPlaybackInterval(f)}var d,e,f,g,i,j,k,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=this,P=l.INTERVAL_MERGE_TOLERANCE;b.extend(this,{getHash:function(){return d},setHash:function(a){d=a},setPlaybackIntervalMergeTolerance:function(a){P=a},getPlaybackIntervalMergeTolerance:function(){return P},setLabels:function(a){null!=a&&b.extend(I,a)},getLabels:function(){return I},setLabel:function(a,b){var c={};c[a]=b,O.setLabels(c)},getLabel:function(a){return I[a]},getClipNumber:function(){return parseInt(O.getLabel("ns_st_cn"))},setClipNumber:function(a){O.setLabel("ns_st_cn",String(a))},getPartNumber:function(){return parseInt(O.getLabel("ns_st_pn"))},createLabels:function(a){var c=a||{};c.ns_st_dbt=String(O.getBufferingTime()-A),A=O.getBufferingTime(),c.ns_st_det=String(O.getElapsedTime()-o),o=O.getElapsedTime(),c.ns_st_dupc=String(O.getUniquePlaybackInterval()-t),t=O.getUniquePlaybackInterval(),parseInt(c.ns_st_dupc)<0&&(c.ns_st_dupc="0");var d;d=b.exists(c.ns_st_upc)?parseInt(c.ns_st_upc):O.getUniquePlaybackInterval(),c.ns_st_iupc=String(d-u),u=d,parseInt(c.ns_st_iupc)<0&&(c.ns_st_iupc="0"),c.ns_st_dupa=String(O.getAssetUniquePlaybackInterval()-v),v=O.getAssetUniquePlaybackInterval(),parseInt(c.ns_st_dupa)<0&&(c.ns_st_dupa="0");var e;e=b.exists(c.ns_st_upa)?parseInt(c.ns_st_upa):O.getAssetUniquePlaybackInterval(),c.ns_st_iupa=String(e-w),w=e,parseInt(c.ns_st_iupa)<0&&(c.ns_st_iupa="0"),c.ns_st_dlpc=String(O.getLongestPlaybackInterval()-x),x=O.getLongestPlaybackInterval(),parseInt(c.ns_st_dlpc)<0&&(c.ns_st_dlpc="0"),c.ns_st_dlpa=String(O.getAssetLongestPlaybackInterval()-y),y=O.getAssetLongestPlaybackInterval(),parseInt(c.ns_st_dlpa)<0&&(c.ns_st_dlpa="0");var g;return g=b.exists(c.ns_st_pt)?parseInt(c.ns_st_pt):O.getPlaybackTime(),c.ns_st_ipt=String(g-k),k=g,c.ns_st_dpt=String(O.getPlaybackTime()-j),j=O.getPlaybackTime(),c.ns_st_dpc=String(O.getPauses()-J),J=O.getPauses(),c.ns_st_dskc=String(O.getSeeks()-K),K=O.getSeeks(),c.ns_st_dbc=String(O.getBuffers()-L),L=O.getBuffers(),c.ns_st_dskt=String(O.getSeekingTime()-D),D=O.getSeekingTime(),c.ns_st_dska=String(O.getSeekingAmount()-G),G=O.getSeekingAmount(),b.extend(c,O.getLabels()),O.setSeekingDirection(0),f&&(c.ns_st_spc=String(M),c.ns_st_apc=String(N)),f||b.parseBoolean(c.ns_st_sc)||(c.ns_st_sc="1"),c},getVideoTrack:function(){return O.getLabel("ns_st_vt")},setVideoTrack:function(a){O.setLabel("ns_st_vt",String(a))},getAudioTrack:function(){return O.getLabel("ns_st_at")},setAudioTrack:function(a){O.setLabel("ns_st_at",String(a))},getSubtitleTrack:function(){return O.getLabel("ns_st_tt")},setSubtitleTrack:function(a){O.setLabel("ns_st_tt",String(a))},getCDN:function(){return O.getLabel("ns_st_cdn")},setCDN:function(a){O.setLabel("ns_st_cdn",String(a))},getClipPlaybackIntervals:function(){return q},setClipPlaybackIntervals:function(a){q=a},getAssetPlaybackIntervals:function(){return r},getUniquePlaybackInterval:function(){return parseInt(O.getLabel("ns_st_upc"))},getAssetUniquePlaybackInterval:function(){return parseInt(O.getLabel("ns_st_upa"))},setAssetUniquePlaybackInterval:function(a){O.setLabel("ns_st_upa",String(a))},setUniquePlaybackInterval:function(a){O.setLabel("ns_st_upc",String(a))},getLongestPlaybackInterval:function(){return parseInt(O.getLabel("ns_st_lpc"))},setLongestPlaybackInterval:function(a){O.setLabel("ns_st_lpc",String(a))},getAssetLongestPlaybackInterval:function(){return parseInt(O.getLabel("ns_st_lpa"))},setAssetLongestPlaybackInterval:function(a){O.setLabel("ns_st_lpa",String(a))},incrementPauses:function(){O.setLabel("ns_st_pc",String(O.getPauses()+1))},incrementSeeks:function(){O.setLabel("ns_st_skc",String(O.getSeeks()+1))},incrementPlayCounter:function(){O.setLabel("ns_st_sq",String(O.getPlayCounter()+1))},getPlayCounter:function(){return parseInt(O.getLabel("ns_st_sq"))},getBufferingTime:function(){return parseInt(O.getLabel("ns_st_bt"))},setBufferingTime:function(a){O.setLabel("ns_st_bt",String(a))},addBufferingTime:function(a){if(!isNaN(z)){var b=O.getBufferingTime();b+=a-z,O.setBufferingTime(b),z=NaN}},setPlaybackStartPosition:function(a){s=parseInt(a)},getPlaybackStartPosition:function(){return s},addInterval:function(a){isNaN(s)||isNaN(a)||(q=b.addNewPlaybackInterval(q,s,a,P),r=b.addNewPlaybackInterval(r,s,a,P),c(),s=NaN)},getElapsedTime:function(){return parseInt(O.getLabel("ns_st_et"))},setElapsedTime:function(a){O.setLabel("ns_st_et",String(a))},addElapsedTime:function(a){if(!isNaN(n)){var b=O.getElapsedTime();b+=a-n,O.setElapsedTime(b),n=NaN}},getElapsedTimestamp:function(){return n},setElapsedTimestamp:function(a){n=a},addPlaybackTime:function(a){if(!isNaN(g)){var b=O.getPlaybackTime();b+=a-g,O.setPlaybackTime(b),g=NaN}},getPlaybackTime:function(){return parseInt(O.getLabel("ns_st_pt"))},getExpectedPlaybackPosition:function(a){return isNaN(g)||(m+=a-g),m},setPlaybackTimeOffset:function(a){m=a},getPlaybackTimeOffset:function(){return m},setPlaybackTime:function(a){O.setLabel("ns_st_pt",String(a))},getPlaybackTimestamp:function(){return g},setPlaybackTimestamp:function(a){g=a},setPreviousPlaybackTime:function(a){j=a},setPreviousPlaybackTimestamp:function(a){i=a},getBufferingTimestamp:function(){return z},setBufferingTimestamp:function(a){z=a},getPauses:function(){return parseInt(O.getLabel("ns_st_pc"))},setPauses:function(a){O.setLabel("ns_st_pc",String(a))},getSeeks:function(){return parseInt(O.getLabel("ns_st_skc"))},setSeeks:function(a){O.setLabel("ns_st_skc",String(a))},setSeeking:function(a){B=a},isSeeking:function(){return B},setCollectingSeekingTime:function(a){F=a},isCollectingSeekingTime:function(){return F},setClipStarted:function(a){e=a},isClipStarted:function(){return e},setPlaybackStarted:function(a){f=a},isPlaybackStarted:function(){return f},setSeekingTimestamp:function(a){C=a},getSeekingTimestamp:function(){return C},addSeekingTime:function(a){if(!isNaN(C)){var b=O.getSeekingTime();b+=a-C,O.setSeekingTime(b),C=NaN}},getSeekingTime:function(){return parseInt(O.getLabel("ns_st_skt"))},setSeekingTime:function(a){O.setLabel("ns_st_skt",String(a))},setSeekingTimeBeforeEnd:function(a){H=a},getSeekingTimeBeforeEnd:function(){return H},setSeekStartPosition:function(a){E=a},getSeekStartPosition:function(){return E},setSeekingAmount:function(a){O.setLabel("ns_st_ska",String(a))},getSeekingAmount:function(){return parseInt(O.getLabel("ns_st_ska"))},addSeekingAmount:function(a){var b=O.getSeekingAmount();b+=Math.abs(a-E),O.setSeekingAmount(b);var c;E==a?c=0:E>a?c=-1:a>E&&(c=1),O.setSeekingDirection(c),E=0},getSeekingDirection:function(){return parseInt(O.getLabel("ns_st_skd"))},setSeekingDirection:function(a){O.setLabel("ns_st_skd",String(a))},resetClipLifecycleLabels:function(){I.ns_st_pt="0",j=0,k=0,I.ns_st_bt="0",A=0,I.ns_st_bc="0",L=0,I.ns_st_pc="0",J=0,I.ns_st_sq="0",I.ns_st_upa="0",v=0,w=0,I.ns_st_et="0",o=0,I.ns_st_lpa="0",y=0,I.ns_st_skt="0",D=0,I.ns_st_ska="0",G=0,I.ns_st_skc="0",K=0},incrementSegmentPlaybackCounter:function(){M++},incrementClipLoadCounter:function(){O.setLabel("ns_st_sc",String(O.getClipLoadCounter()+1))},incrementAssetPlaybackCounter:function(){N++},setPreviousUniquePlaybackInterval:function(a){t=a},setPreviousEventIndependentUniquePlaybackInterval:function(a){u=a},setPreviousLongestPlaybackInterval:function(a){x=a},resetAssetPlaybackCounters:function(){r=[],O.setAssetUniquePlaybackInterval(0),v=0,w=0,O.setAssetLongestPlaybackInterval(0),y=0},setSegmentPlaybackCounter:function(a){M=a},setClipLoadCounter:function(a){O.setLabel("ns_st_sc",String(a))},setAssetPlaybackCounter:function(a){N=a},setLowestPartNumberPlayed:function(a){p=a},getSegmentPlaybackCounter:function(){return M},getClipLoadCounter:function(){return parseInt(O.getLabel("ns_st_sc"))},getAssetPlaybackCounter:function(){return N},getLowestPartNumberPlayed:function(){return p},getBuffers:function(){return parseInt(O.getLabel("ns_st_bc"))},incrementBufferCount:function(){O.setLabel("ns_st_bc",String(O.getBuffers()+1))},getPreviousBufferingTime:function(){return A}}),a()}return a.resetClip=function(a,b,c){for(var d=a.getLabels(),e={},f=0;c&&f<c.length;++f)d.hasOwnProperty(c[f])&&(e[c[f]]=d[c[f]]);b.setLabels(e),b.setPlaybackIntervalMergeTolerance(a.getPlaybackIntervalMergeTolerance())},a}(),n=function(){function a(){function a(){c=new m,f={},f.ns_st_bp="0",f.ns_st_pa="0",f.ns_st_pp="0",f.ns_st_sp="1",f.ns_st_id=String(+new Date),d=NaN,e=NaN,h={},i=0,g=!1,j=!1,k=0}var c,d,e,f,g,h,i,j,k,l=this;b.extend(this,{resetClip:function(){var a=c;c=new m,m.resetClip(a,c)},hashExists:function(a){return null!=h[a]},storeHash:function(a){h[a]={}},removeHash:function(a){delete h[a]},storeClipPlaybackCounters:function(){for(var a in h)if(h.hasOwnProperty(a)&&h[a].clipNumber===c.getClipNumber()){b.extend(h[a],{segmentPlaybackCounter:c.getSegmentPlaybackCounter(),clipLoadCounter:c.getClipLoadCounter(),assetPlaybackCounter:c.getAssetPlaybackCounter(),lowestPartNumberPlayed:c.getLowestPartNumberPlayed(),seeking:c.isSeeking(),seekingTimeBeforeEnd:c.getSeekingTimeBeforeEnd(),seekingStartPosition:c.getSeekStartPosition(),clipPlaybackIntervals:c.getClipPlaybackIntervals(),uniquePlaybackInterval:c.getUniquePlaybackInterval(),longestPlaybackInterval:c.getLongestPlaybackInterval(),videoTrack:c.getVideoTrack(),audioTrack:c.getAudioTrack(),subtitleTrack:c.getSubtitleTrack(),cdn:c.getCDN()});break}},getStoredClipRegisters:function(a){return h[a]},getClipNumber:function(a){return h[a].clipNumber},getMaxClipNumber:function(){return i},storeClipNumber:function(a,b){h[a].clipNumber=b,b>i&&(i=b)},setLabels:function(a){null!=a&&b.extend(f,a)},getLabels:function(){return f},setLabel:function(a,b){var c={};c[a]=b,l.setLabels(c)},getLabel:function(a){return f[a]},getClip:function(){return c},createLabels:function(a){var d=a||{};return j||(d.ns_st_pb=null!=d.ns_st_pb?d.ns_st_pb:"1"),b.extend(d,l.getLabels()),c.isPlaybackStarted()&&(d.ns_st_ppc=String(k)),d},incrementPlayCounter:function(){l.setLabel("ns_st_sp",String(parseInt(l.getLabel("ns_st_sp"))+1))},incrementPauses:function(){l.setLabel("ns_st_pp",String(l.getPauses()+1))},addPlaybackTime:function(a){if(!isNaN(e)){var b=l.getPlaybackTime();b+=a-e,l.setPlaybackTime(b),e=NaN}},addBufferingTime:function(a){if(!isNaN(d)){var b=l.getBufferingTime();b+=a-d,l.setBufferingTime(b),d=NaN}},getBufferingTime:function(){return parseInt(l.getLabel("ns_st_bp"))},setBufferingTime:function(a){l.setLabel("ns_st_bp",String(a))},getPlaybackTime:function(){return parseInt(l.getLabel("ns_st_pa"))},setBufferingTimestamp:function(a){d=a},getBufferingTimestamp:function(){return d},setPlaybackTime:function(a){l.setLabel("ns_st_pa",String(a))},setPlaybackTimestamp:function(a){e=a},getPlaybackTimestamp:function(){return e},getPauses:function(){return parseInt(l.getLabel("ns_st_pp"))},setPauses:function(a){l.setLabel("ns_st_pp",String(a))},isPlaylistStarted:function(){return g},setPlaylistStarted:function(a){g=a},getPlaybackCounter:function(){return k},incrementPlaybackCounter:function(){k++},setFirstEventSent:function(a){j=a}}),a()}return a.resetPlaylist=function(b,c,d){for(var e=b.getClip(),f=b.getLabels(),g={},h=0;d&&h<d.length;h++)f.hasOwnProperty(d[h])&&(g[d[h]]=f[d[h]]);c=new a,c.setLabels(g),m.resetClip(e,c.getClip(),d)},a}(),o=function(){return function(a){function c(){e=1}function d(c){f=b.extend({},c);var d=a.getSSECore().getPixelURL();if(a.getAppCore()){if(a.getSSECore().isProperlyInitialized()){var e=a.getSSECore().getExports().am,g=a.getSSECore().getExports().et,h=e.newApplicationMeasurement(a.getAppCore(),g.HIDDEN,c,d);a.getAppCore().getQueue().offer(h)}}else d&&a.getSSECore().getPlatformAPI().httpGet(a.getSSECore().prepareUrl(d,c))}var e,f,g=this;b.extend(this,{newEvent:function(a){d(a.eventLabels),a.eventType!=i.HEARTBEAT&&g.incrementEventCounter()},getEventCounter:function(){return e},incrementEventCounter:function(){e++},setEventCounter:function(a){e=a},getMeasurementSnapshot:function(){return f}}),c()}}(),p=function(){return function(a){function c(){g=0,h=0}function d(){h++;var c={},d=b.fixEventTime(c);c.ns_st_po=String(a.getPlaylist().getClip().getPlaybackTimeOffset()+(d-a.getPlaylist().getClip().getPlaybackTimestamp())),c.ns_st_pa=String(a.getPlaylist().getPlaybackTime()+(d-a.getPlaylist().getPlaybackTimestamp())),c.ns_st_pt=String(a.getPlaylist().getClip().getPlaybackTime()+(d-a.getPlaylist().getClip().getPlaybackTimestamp())),c.ns_st_dpt=String(d-a.getPlaylist().getClip().getPlaybackTimestamp()),a.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK?(c.ns_st_bp=String(a.getPlaylist().getBufferingTime()+(d-a.getPlaylist().getBufferingTimestamp())),c.ns_st_bt=String(a.getPlaylist().getClip().getBufferingTime()+(d-a.getPlaylist().getClip().getBufferingTimestamp())),c.ns_st_dbt=String(d-a.getPlaylist().getClip().getBufferingTimestamp())):c.ns_st_dbt=String(a.getPlaylist().getClip().getBufferingTime()-a.getPlaylist().getClip().getPreviousBufferingTime()),c.ns_st_et=String(a.getPlaylist().getClip().getElapsedTime()+(d-a.getPlaylist().getClip().getElapsedTimestamp())),c.ns_st_det=String(d-a.getPlaylist().getClip().getElapsedTimestamp());var e=b.cloneObject(a.getPlaylist().getClip().getClipPlaybackIntervals()),f=b.cloneObject(a.getPlaylist().getClip().getAssetPlaybackIntervals());e=b.addNewPlaybackInterval(e,a.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(c.ns_st_po),a.getPlaylist().getClip().getPlaybackIntervalMergeTolerance()),f=b.addNewPlaybackInterval(f,a.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(c.ns_st_po),a.getPlaylist().getClip().getPlaybackIntervalMergeTolerance());var l,m,n=0;for(l=0;l<e.length;l++)n+=Math.abs(e[l].end-e[l].start);c.ns_st_upc=String(n),c.ns_st_dupc=String(n-a.getPlaylist().getClip().getUniquePlaybackInterval());var o=0;for(l=0;l<e.length;l++)m=Math.abs(e[l].end-e[l].start),m>o&&(o=m);c.ns_st_lpc=String(o),c.ns_st_dlpc=String(o-a.getPlaylist().getClip().getLongestPlaybackInterval());var p=0;for(l=0;l<f.length;l++)p+=Math.abs(f[l].end-f[l].start);c.ns_st_upa=String(p),c.ns_st_dupa=String(p-a.getPlaylist().getClip().getAssetUniquePlaybackInterval());var q=0;for(l=0;l<f.length;l++)m=Math.abs(f[l].end-f[l].start),m>q&&(q=m);c.ns_st_lpa=String(q),c.ns_st_dlpa=String(q-a.getPlaylist().getClip().getAssetLongestPlaybackInterval()),c.ns_st_hc=String(a.getHeartbeat().getCount());var r=a.getSSECore().createLabels(i.HEARTBEAT,c,d);a.getEventManager().newEvent(r),g=0,k.resume()}function e(){null!=f&&(a.getSSECore().getPlatformAPI().clearTimeout(f),f=null)}var f,g,h,k=this,m=l.DEFAULT_HEARTBEAT_INTERVAL;b.extend(this,{getCount:function(){return h},setIntervals:function(a){m=a},getInterval:function(a){var b=0;if(null!=m)for(var c=0;c<m.length;c++){var d=m[c],e=d.playingtime;if(!e||e>a){b=d.interval;break}}return b},resume:function(){e();var b=k.getInterval(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()));if(b>0){var c=g>0?g:b;f=a.getSSECore().getPlatformAPI().setTimeout(d,c)}g=0},pause:function(){e();var b=k.getInterval(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()));g=b-(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()))%b}}),c()}}(),q=function(){return function(a){function c(){}function d(){var c={},d=b.fixEventTime(c);c.ns_st_po=String(a.getPlaylist().getClip().getExpectedPlaybackPosition(d)),a.getPlaylist().addPlaybackTime(d),a.getPlaylist().setPlaybackTimestamp(d),a.getPlaylist().getClip().addPlaybackTime(d),a.getPlaylist().getClip().setPlaybackTimestamp(d),a.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK&&(a.getPlaylist().addBufferingTime(d),a.getPlaylist().setBufferingTimestamp(d),a.getPlaylist().getClip().addBufferingTime(d),a.getPlaylist().getClip().setBufferingTimestamp(d)),a.getPlaylist().getClip().addElapsedTime(d),a.getPlaylist().getClip().setElapsedTimestamp(d),a.getPlaylist().getClip().addInterval(parseInt(c.ns_st_po)),a.getPlaylist().getClip().setPlaybackStartPosition(parseInt(c.ns_st_po));
var e=a.getSSECore().createLabels(i.KEEPALIVE,c,d);a.getEventManager().newEvent(e),g.resume()}function e(){null!=f&&(a.getSSECore().getPlatformAPI().clearTimeout(f),f=null)}var f,g=this,h=l.DEFAULT_KEEP_ALIVE_INTERVAL;b.extend(g,{resume:function(){e(),f=a.getSSECore().getPlatformAPI().setTimeout(d,h)},pause:function(){e()},setInterval:function(a){h=a},getInterval:function(){return h}}),c()}}(),r=function(){return function(a){function c(){f=j.IDLE,e=null,d=NaN}var d,e,f,g=this;b.extend(g,{eventTypeToState:function(a){if(f==j.IDLE){if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK}else if(f==j.PLAYBACK_NOT_STARTED){if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK;if(a==i.END||a==i.AD_SKIP)return j.IDLE}else if(f==j.PLAYING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.BUFFER)return j.BUFFERING_DURING_PLAYBACK;if(a==i.PAUSE)return j.PAUSED;if(a==i.SEEK_START)return j.SEEKING_DURING_PLAYBACK}else if(f==j.PAUSED){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.BUFFER)return j.BUFFERING_DURING_PAUSE;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_DURING_PAUSE}else if(f==j.BUFFERING_BEFORE_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PLAYBACK_NOT_STARTED;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK}else if(f==j.BUFFERING_DURING_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY||a==i.BUFFER_STOP)return j.PLAYING;if(a==i.PAUSE_ON_BUFFERING)return j.PAUSED_DURING_BUFFERING;if(a==i.SEEK_START)return j.SEEKING_DURING_BUFFERING;if(a==i.PAUSE)return j.PAUSED}else if(f==j.BUFFERING_DURING_SEEKING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.BUFFER_STOP)return j.SEEKING_DURING_PLAYBACK;if(a==i.PAUSE)return j.PAUSED}else if(f==j.BUFFERING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_DURING_PAUSE;if(a==i.BUFFER_STOP||a==i.PAUSE)return j.PAUSED}else if(f==j.SEEKING_BEFORE_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PAUSE)return j.PLAYBACK_NOT_STARTED;if(a==i.PLAY)return j.PLAYING;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK}else if(f==j.SEEKING_DURING_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE)return j.PAUSED;if(a==i.BUFFER)return j.BUFFERING_DURING_SEEKING}else if(f==j.SEEKING_DURING_BUFFERING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PAUSED}else if(f==j.SEEKING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PAUSED;if(a==i.BUFFER)return j.BUFFERING_DURING_PAUSE}else if(f==j.PAUSED_DURING_BUFFERING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.SEEK_START)return j.SEEKING_DURING_BUFFERING;if(a==i.PAUSE)return j.PAUSED;if(a==i.PLAY||a==i.BUFFER_STOP)return j.PLAYING}return null},getCurrentState:function(){return f},newEvent:function(a,b){var c=g.eventTypeToState(a);f!=c&&(e=f,f=c,d=b)},getPreviousState:function(){return e},getLastStateChangeTimestamp:function(){return d}}),c()}}(),s=function(){return function(a){var c=this;b.extend(c,{onSeekStartWhenPausedOrBufferingDuringPause:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onBufferWhenSeekingOrPlayBackNotStartedOrPaused:function(b,c){a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b)},onPlayWhenSeekingDuringBufferingOrSeekingDuringPause:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)},onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)},onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause:function(b,c){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause:function(b,c){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))}})}}(),t=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBufferStop:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=String(a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()),a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),u=function(){return function(a){var c=this;b.extend(c,{onEndAndSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),v=function(){return function(a){var c=this;b.extend(c,{onPauseOnBuffering:function(b,c){var d=parseInt(c.ns_st_po);a.getSSECore().stopPausedOnBufferingTimer(),a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e),a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b),a.getPlaylist().getClip().setPlaybackTimeOffset(d)},onBufferStop:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)},onEndOrAdSkip:function(c,d){var e=parseInt(d.ns_st_po);a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addPlaybackTime(c),a.getPlaylist().getClip().addElapsedTime(c),a.getPlaylist().getClip().addInterval(e);var f=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(f),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)},onPause:function(b,c){var d=parseInt(c.ns_st_po);a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)},onPlay:function(b,c){a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)}})}}(),w=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),x=function(){return function(a){var c=this;b.extend(c,{onBuffer:function(b,c){a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabel("ns_st_pn"))<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabel("ns_st_pn"))),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=String(a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()),a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),y=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),z=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBufferStop:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),A=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().setSeekingTimestamp(b):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=String(a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()),a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),B=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){var e=parseInt(d.ns_st_po);a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(c),a.getPlaylist().getClip().addPlaybackTime(c),a.getPlaylist().getClip().addElapsedTime(c),a.getPlaylist().getClip().addInterval(e);var f=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(f),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBuffer:function(b,c){a.getSSECore().isPauseOnBufferingEnabled()&&a.getSSECore().startPausedOnBufferingTimer(b,c),a.getPlaylist().getClip().incrementBufferCount(),a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)},onPause:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)}})}}(),C=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPause:function(b,c){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=String(a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()),a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),D=function(){return function(a){var c=this;b.extend(c,{onPause:function(b,c){a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))}})}}(),E=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){parseInt(d.ns_st_po);a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=String(a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()),a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),F=function(){return function(){function a(){f=new G(aa),b.getNamespace().comScore?(ba=b.getNamespace().comScore.exports,f.setAppCore(ba.c())):f.setAppCore(null),f.setKeepAlive(new q(f)),
f.setHeartbeat(new p(f)),f.setEventManager(new o(f)),f.setStateMachine(new r),f.setPlaylist(new n),$={},m=new x(f),F=new y(f),H=new A(f),I=new B(f),J=new t(f),K=new v(f),L=new w(f),M=new u(f),N=new z(f),O=new C(f),P=new D(f),Q=new E(f),R=new s(f),S=!1,T=0,U=+new Date,V=!0,X=!1,Z=[]}function c(a){var b=f.getStateMachine().getCurrentState();if(b==j.IDLE||b==j.PLAYBACK_NOT_STARTED||b==j.BUFFERING_BEFORE_PLAYBACK||b==j.SEEKING_BEFORE_PLAYBACK){if(a==i.PLAY)return!0}else if(b==j.PLAYING){if(a==i.END||a==i.AD_SKIP||a==i.SEEK_START||a==i.PAUSE)return!0}else if(b==j.PAUSED||b==j.BUFFERING_DURING_PAUSE||b==j.SEEKING_DURING_PLAYBACK||b==j.SEEKING_DURING_BUFFERING||b==j.SEEKING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP||a==i.PLAY)return!0}else if(b==j.BUFFERING_DURING_PLAYBACK){if(a==i.PAUSE_ON_BUFFERING||a==i.END||a==i.AD_SKIP||a==i.SEEK_START||a==i.PAUSE||a==i.PLAY)return!0}else if(b==j.BUFFERING_DURING_SEEKING){if(a==i.END||a==i.AD_SKIP||a==i.PAUSE||a==i.PLAY)return!0}else if(b==j.PAUSED_DURING_BUFFERING&&(a==i.END||a==i.AD_SKIP||a==i.BUFFER_STOP||a==i.PLAY))return!0;return!1}function d(a,b,d){var e=f.getStateMachine().getCurrentState();a==i.AD_SKIP&&!d.hasOwnProperty("ns_st_ui")&&c(a)?d.ns_st_ui="skip":a==i.SEEK_START&&!d.hasOwnProperty("ns_st_ui")&&c(a)&&(d.ns_st_ui="seek"),e==j.IDLE?a==i.BUFFER?m.onBuffer(b,d):a==i.SEEK_START?m.onSeekStart(b,d):a==i.PLAY&&m.onPlay(b,d):e==j.PLAYBACK_NOT_STARTED?a==i.END||a==i.AD_SKIP?H.onEndOrAdSkip(b,d):a==i.SEEK_START?H.onSeekStart(b,d):a==i.PLAY?H.onPlay(b,d):a==i.BUFFER&&R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):e==j.PLAYING?a==i.END||a==i.AD_SKIP?I.onEndOrAdSkip(b,d):a==i.BUFFER?I.onBuffer(b,d):a==i.SEEK_START?I.onSeekStart(b,d):a==i.PAUSE&&I.onPause(b,d):e==j.PAUSED?a==i.END||a==i.AD_SKIP?F.onEndOrAdSkip(b,d):a==i.PLAY?F.onPlay(b,d):a==i.BUFFER?R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.SEEK_START&&R.onSeekStartWhenPausedOrBufferingDuringPause(b,d):e==j.BUFFERING_BEFORE_PLAYBACK?a==i.END||a==i.AD_SKIP?J.onEndOrAdSkip(b,d):a==i.BUFFER_STOP?J.onBufferStop(b,d):a==i.SEEK_START?J.onSeekStart(b,d):a==i.PAUSE?J.onPause(b,d):a==i.PLAY&&J.onPlay(b,d):e==j.BUFFERING_DURING_PLAYBACK?a==i.PAUSE_ON_BUFFERING?K.onPauseOnBuffering(b,d):a==i.BUFFER_STOP?K.onBufferStop(b,d):a==i.END||a==i.AD_SKIP?K.onEndOrAdSkip(b,d):a==i.SEEK_START?K.onSeekStart(b,d):a==i.PAUSE?K.onPause(b,d):a==i.PLAY&&K.onPlay(b,d):e==j.BUFFERING_DURING_SEEKING?a==i.END||a==i.AD_SKIP?L.onEndOrAdSkip(b,d):a==i.PAUSE?L.onPause(b,d):a==i.PLAY?L.onPlay(b,d):a==i.BUFFER_STOP&&R.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(b,d):e==j.BUFFERING_DURING_PAUSE?a==i.END||a==i.AD_SKIP?M.onEndAndSkip(b,d):a==i.PAUSE?M.onPause(b,d):a==i.PLAY?M.onPlay(b,d):a==i.SEEK_START?R.onSeekStartWhenPausedOrBufferingDuringPause(b,d):a==i.BUFFER_STOP&&R.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(b,d):e==j.SEEKING_BEFORE_PLAYBACK?a==i.END||a==i.AD_SKIP?O.onEndOrAdSkip(b,d):a==i.PAUSE?O.onPause(b,d):a==i.PLAY?O.onPlay(b,d):a==i.BUFFER&&R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):e==j.SEEKING_DURING_PLAYBACK?a==i.END||a==i.AD_SKIP?Q.onEndOrAdSkip(b,d):a==i.PLAY?Q.onPlay(b,d):a==i.BUFFER?R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.PAUSE&&R.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(b,d):e==j.SEEKING_DURING_BUFFERING?a==i.PAUSE?P.onPause(b,d):a==i.BUFFER?R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.PLAY?R.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.END||a==i.AD_SKIP?R.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.BUFFER_STOP&&R.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):e==j.PAUSED_DURING_BUFFERING?a==i.END||a==i.AD_SKIP?N.onEndOrAdSkip(b,d):a==i.BUFFER_STOP?N.onBufferStop(b,d):a==i.SEEK_START?N.onSeekStart(b,d):a==i.PAUSE?N.onPause(b,d):a==i.PLAY&&N.onPlay(b,d):e==j.SEEKING_DURING_PAUSE&&(a==i.BUFFER?R.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.PLAY?R.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.PAUSE?R.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(b,d):a==i.END||a==i.AD_SKIP?R.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.BUFFER_STOP&&R.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(b,d)),c(a)&&f.getPlaylist().setFirstEventSent(!0)}function e(a,c){for(var d,e=ea.encodeURIComponent||escape,f=[],g=l.LABELS_ORDER,h=a.split("?"),i=h[0],j=h[1],k=j.split("&"),m=0,n=k.length;n>m;m++){var o=k[m].split("="),p=unescape(o[0]),q=unescape(o[1]);p&&(c[p]=q)}for(var r={},s=0,t=g.length;t>s;s++){var u=g[s];if(c.hasOwnProperty(u)){var v=c[u];"undefined"!=typeof v&&null!=v&&(r[u]=!0,f.push(e(u)+"="+e(c[u])))}}for(var w in c)if(c.hasOwnProperty(w)){if(r[w])continue;var x=c[w];"undefined"!=typeof x&&null!=x&&f.push(e(w)+"="+e(c[w]))}d=i+"?"+f.join("&"),d=d+(d.indexOf("&c8=")<0?"&c8="+e(fa.title):"")+(d.indexOf("&c7=")<0?"&c7="+e(fa.URL):"")+(d.indexOf("&c9=")<0?"&c9="+e(fa.referrer):"");var y=b.browserAcceptsLargeURLs()?l.URL_LENGTH_LIMIT:l.RESTRICTED_URL_LENGTH_LIMIT;if(d.length>y&&d.indexOf("&")>0){var z=d.substr(0,y-8).lastIndexOf("&");d=(d.substring(0,z)+"&ns_cut="+e(d.substring(z+1))).substr(0,y)}return d}var f,m,F,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa=this,ba={},ca=l.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,da=l.THROTTLING_DELAY;b.extend(aa,{createLabels:function(a,c,d){var e={};if("undefined"!=typeof document){var g=document;e.c7=g.URL,e.c8=g.title,e.c9=g.referrer}return null!=c&&b.extend(e,c),e.ns_ts=null!=e.ns_ts?e.ns_ts:String(+new Date),e.ns_st_ev=null!=e.ns_st_ev?e.ns_st_ev:i.toString(a),e.ns_st_mp=null!=e.ns_st_mp?e.ns_st_mp:l.DEFAULT_PLAYERNAME,e.ns_st_mv=null!=e.ns_st_mv?e.ns_st_mv:l.STREAMSENSE_VERSION,e.ns_st_ub=null!=e.ns_st_ub?e.ns_st_ub:"0",e.ns_st_br=null!=e.ns_st_br?e.ns_st_br:"0",e.ns_st_pn=null!=e.ns_st_pn?e.ns_st_pn:"1",e.ns_st_tp=null!=e.ns_st_tp?e.ns_st_tp:"1",e.ns_st_it=null!=e.ns_st_it?e.ns_st_it:k.toString(k.SINGLE_CLIP),e.ns_st_sv=null!=e.ns_st_sv?e.ns_st_sv:l.STREAMSENSE_VERSION,e.ns_st_smv=null!=e.ns_st_smv?e.ns_st_smv:l.MODEL_VERSION,e.ns_type=null!=e.ns_type?e.ns_type:"hidden",e.ns_st_ec=null!=e.ns_st_ec?e.ns_st_ec:String(f.getEventManager().getEventCounter()),e.ns_st_po=null!=e.ns_st_po?e.ns_st_po:String(f.getPlaylist().getPlaylist().getClip().getExpectedPlaybackPosition(d)),e.ns_st_ki=null!=e.ns_st_ki?e.ns_st_ki:String(f.getKeepAlive().getInterval()),f.getPlaylist().createLabels(e),f.getPlaylist().getClip().createLabels(e),b.extend(e,aa.getLabels()),b.extend(e,c),{eventType:a,eventLabels:e}},newEvent:function(a,b,c,e){aa.stopDelayedTransitionTimer();var g=f.getStateMachine().getCurrentState(),h=f.getStateMachine().eventTypeToState(a);if(null!=h&&h!=g)if(!aa.isThrottlingEnabled()||g!=j.PLAYING&&g!=j.PAUSED||h!=j.PLAYING&&h!=j.PAUSED||e){c.ns_st_po||(f.getStateMachine().getCurrentState()==j.PLAYING&&a==i.BUFFER||f.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK&&a==i.BUFFER_STOP?c.ns_st_po=String(f.getPlaylist().getClip().getPlaybackTimeOffset()+(b-f.getPlaylist().getClip().getPlaybackTimestamp())):c.ns_st_po=String(f.getPlaylist().getClip().getExpectedPlaybackPosition(b))),d(a,b,c);var k=0;isNaN(f.getStateMachine().getLastStateChangeTimestamp())||(k=b-f.getStateMachine().getLastStateChangeTimestamp()),f.getStateMachine().newEvent(a,b);for(var l=0,m=Z.length;m>l;l++)Z[l](g,h,c,k)}else Y=f.getPlatformAPI().setTimeout(function(a,c,d){return function(){aa.newEvent(a,b,d,!0)}}(a,h,c),da)},newPseudoEvent:function(a,b,c){if(a!=i.LOAD&&a!=i.START||f.getStateMachine().getCurrentState()==j.IDLE){a!=i.ERROR||c.ns_st_er||(c.ns_st_er=h.UNKNOWN_VALUE),f.getStateMachine().getCurrentState()!=j.IDLE&&f.getStateMachine().getCurrentState()!=j.PLAYBACK_NOT_STARTED&&f.getStateMachine().getCurrentState()!=j.SEEKING_BEFORE_PLAYBACK&&f.getStateMachine().getCurrentState()!=j.BUFFERING_BEFORE_PLAYBACK&&(f.getPlaylist().getClip().addElapsedTime(b),f.getPlaylist().getClip().setElapsedTimestamp(b));var d,e,g,k=!0,l=!1;switch(a){case i.BIT_RATE:d="ns_st_br",e="ns_st_pbr",l=!0;break;case i.PLAYBACK_RATE:d="ns_st_rt",e="ns_st_prt",l=!0;break;case i.VOLUME:d="ns_st_vo",e="ns_st_pvo",l=!0;break;case i.WINDOW_STATE:d="ns_st_ws",e="ns_st_pws",l=!0;break;case i.AUDIO:d="ns_st_at",e="ns_st_pat",l=!1;break;case i.VIDEO:d="ns_st_vt",e="ns_st_pvt",l=!1;break;case i.SUBS:d="ns_st_tt",e="ns_st_ptt",l=!1;break;case i.CDN:d="ns_st_cdn",e="ns_st_pcdn",l=!1;break;default:k=!1}if(k&&c.hasOwnProperty(d)&&(l?(aa.getLabels().hasOwnProperty(d)&&(g=aa.getLabels()[d],c[e]=g),aa.setLabel(d,c[d])):(f.getPlaylist().getClip().getLabels().hasOwnProperty(d)&&(g=f.getPlaylist().getClip().getLabels()[d],c[e]=g),f.getPlaylist().getClip().setLabel(d,c[d]))),!k||f.getStateMachine().getCurrentState()==j.PLAYING||f.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK){c.ns_st_po||(c.ns_st_po=String(f.getPlaylist().getClip().getExpectedPlaybackPosition(b))),f.getStateMachine().getCurrentState()!=j.PLAYING&&f.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PLAYBACK||(f.getPlaylist().addPlaybackTime(b),f.getPlaylist().setPlaybackTimestamp(b),f.getPlaylist().getClip().addPlaybackTime(b),f.getPlaylist().getClip().setPlaybackTimestamp(b),f.getPlaylist().getClip().addInterval(parseInt(c.ns_st_po)),f.getPlaylist().getClip().setPlaybackStartPosition(parseInt(c.ns_st_po))),f.getStateMachine().getCurrentState()!=j.BUFFERING_BEFORE_PLAYBACK&&f.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PAUSE&&f.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PLAYBACK&&f.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_SEEKING||(f.getPlaylist().addBufferingTime(b),f.getPlaylist().setBufferingTimestamp(b),f.getPlaylist().getClip().addBufferingTime(b),f.getPlaylist().getClip().setBufferingTimestamp(b));var m=aa.createLabels(a,c,b);f.getEventManager().newEvent(m)}}},getState:function(){return f.getStateMachine().getCurrentState()},addListener:function(a){Z.push(a)},removeListener:function(a){Z.splice(b.indexOf(a,Z),1)},getLabel:function(a){return $[a]},getLabels:function(){return $},setLabel:function(a,b){null==b?delete $[a]:$[a]=b},setLabels:function(a){for(var b in a)a.hasOwnProperty(b)&&aa.setLabel(b,a[b])},getPlatformAPI:function(){return f.getAppCore()?f.getAppCore().getPlatformAPI():g},getExports:function(){return ba},isProperlyInitialized:function(){var a=f.getAppCore().getAppContext(),b=f.getAppCore().getSalt(),c=f.getAppCore().getPixelURL();return a&&c&&b},setImplementationType:function(a){f.getStateMachine().getCurrentState()!=j.IDLE||a!=k.SINGLE_CLIP&&a!=k.SEGMENTED&&a!=k.REDUCED||f.getPlaylist().setLabel("ns_st_it",k.toString(a))},setThrottlingDelay:function(a){da=a},getThrottlingDelay:function(){return da},isThrottlingEnabled:function(){return X},setThrottlingEnabled:function(a){X=a},isLoadingTimeSent:function(){return S},setLoadingTimeSent:function(a){S=a},getLoadTimeOffset:function(){return T},setLoadTimeOffset:function(a){T=a},getInitTimestamp:function(){return U},setPauseOnBufferingInterval:function(a){ca=a},getPauseOnBufferingInterval:function(){return ca},isPauseOnBufferingEnabled:function(){return V},setPauseOnBufferingEnabled:function(a){V=a},startPausedOnBufferingTimer:function(a,c){aa.stopPausedOnBufferingTimer(),W=aa.getPlatformAPI().setTimeout(function(){var d={},e=b.fixEventTime(d),f=parseInt(c.ns_st_po);d.ns_st_po=String(f+e-a),aa.newEvent(i.PAUSE_ON_BUFFERING,e,d)},ca)},stopPausedOnBufferingTimer:function(){null!=W&&(aa.getPlatformAPI().clearTimeout(W),W=null)},stopDelayedTransitionTimer:function(){Y&&(aa.getPlatformAPI().clearTimeout(Y),Y=null)},setPixelURL:function(a){if(null==a||0==a.length)return null;var b=decodeURIComponent||unescape,c=a.indexOf("?");if(c>=0){if(c<a.length-1){for(var d=a.substring(c+1).split("&"),e=0,f=d.length;f>e;e++){var g=d[e],h=g.split("=");2==h.length?aa.setLabel(h[0],b(h[1])):1==h.length&&aa.setLabel(l.PAGE_NAME_LABEL,b(h[0]))}a=a.substring(0,c+1)}}else a+="?";return _=a},getPixelURL:function(){return _?_:"undefined"!=typeof ns_p&&"string"==typeof ns_p.src?_=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?_=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null},getSseSM:function(){return f},resetPlaylist:function(a){var b=f.getPlaylist();f.setPlaylist(new n),n.resetPlaylist(b,f.getPlaylist(),a)},resetHeartbeat:function(){f.getHeartbeat().pause(),f.setHeartbeat(new p(f))},resetKeepAlive:function(){f.getKeepAlive().pause(),f.setKeepAlive(new q(f))}});var ea,fa;b.isBrowser()?(ea=window,fa=document):(ea={},fa={location:{href:""},title:"",URL:"",referrer:"",cookie:""}),b.extend(this,{prepareUrl:e}),a()}}(),G=function(){return function(a){var c,d,e,f,g,h,i=this;b.extend(i,{getAppCore:function(){return c},getSSECore:function(){return a},getEventManager:function(){return d},getStateMachine:function(){return e},getHeartbeat:function(){return f},getKeepAlive:function(){return g},getPlaylist:function(){return h},setAppCore:function(a){c=a},setKeepAlive:function(a){g=a},setHeartbeat:function(a){f=a},setEventManager:function(a){d=a},setStateMachine:function(a){e=a},setPlaylist:function(a){h=a}})}}(),H=function(){return function(a,c){function d(){h=new F,g=!0,a&&k.setLabels(a),c&&k.setPixelURL(c)}function e(a,b){k.notify(i.CUSTOM,a,b)}function f(){g&&h.getSseSM().getStateMachine().getCurrentState()!=j.IDLE&&k.end()}var g,h,k=this,m=l.STANDARD_METADATA_LABELS;b.extend(this,{isProperlyInitialized:function(){return h.isProperlyInitialized()},reset:function(a){var b=h;b.getSseSM().getKeepAlive().pause(),b.getSseSM().getHeartbeat().pause(),h=new F,n.resetPlaylist(b.getSseSM().getPlaylist(),h.getSseSM().getPlaylist(),a)},setPauseOnBufferingInterval:function(a){h.setPauseOnBufferingInterval(a)},getPauseOnBufferingInterval:function(){return h.getPauseOnBufferingInterval()},setKeepAliveInterval:function(a){h.getSseSM().getKeepAlive().setInterval(a)},getKeepAliveInterval:function(){return h.getSseSM().getKeepAlive().getInterval()},setHeartbeatIntervals:function(a){h.getSseSM().getHeartbeat().setIntervals(a)},play:function(a,b){k.notify(i.PLAY,a,b)},pause:function(a,b){k.notify(i.PAUSE,a,b)},end:function(a,b){k.notify(i.END,a,b)},bufferStart:function(a,b){k.notify(i.BUFFER,a,b)},bufferStop:function(a,b){k.notify(i.BUFFER_STOP,a,b)},load:function(a,b){k.notify(i.LOAD,a,b)},start:function(a,b){k.notify(i.START,a,b)},seekStart:function(a,b){k.notify(i.SEEK_START,a,b)},skipAd:function(a,b){k.notify(i.AD_SKIP,a,b)},callToAction:function(a,b){k.notify(i.CTA,a,b)},error:function(a,b){k.notify(i.ERROR,a,b)},transferPlayback:function(a,b){k.notify(i.TRANSFER,a,b)},drmFail:function(a,b){k.notify(i.DRM_FAILED,a,b)},drmApprove:function(a,b){k.notify(i.DRM_APPROVED,a,b)},drmDeny:function(a,b){k.notify(i.DRM_DENIED,a,b)},changeBitrate:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_br=String(a),k.notify(i.BIT_RATE,d,b)}},changePlaybackRate:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_rt=String(a),k.notify(i.PLAYBACK_RATE,d,b)}},changeVolume:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_vo=String(a),k.notify(i.VOLUME,d,b)}},changeWindowState:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_ws=String(a),k.notify(i.WINDOW_STATE,d,b)}},changeAudio:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_at=String(a),k.notify(i.AUDIO,d,b)}},changeVideo:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_vt=String(a),k.notify(i.VIDEO,d,b)}},changeSubtitle:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_tt=String(a),k.notify(i.SUBS,d,b)}},changeCDN:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_cdn=String(a),k.notify(i.CDN,d,b)}},notify:function(a){var c,d;if(c="object"==typeof arguments[1]?arguments[1]:"object"==typeof arguments[2]?arguments[2]:{},d="number"==typeof arguments[1]?arguments[1]:"number"==typeof arguments[2]?arguments[2]:NaN,i.toString(a)){c=b.jsonObjectToStringDictionary(c);var e=b.fixEventTime(c);c.ns_st_po||isNaN(d)||(c.ns_st_po=b.getInteger(d,0).toString()),c.ns_st_po&&h.getSseSM().getPlaylist().getClip().setPlaybackTimeOffset(parseInt(c.ns_st_po)),a==i.PLAY||a==i.PAUSE||a==i.BUFFER||a==i.END||a==i.SEEK_START||a==i.AD_SKIP||a==i.BUFFER_STOP?h.newEvent(a,e,c):h.newPseudoEvent(a,e,c)}},getLabels:function(){return h.getLabels()},getState:function(){return h.getSseSM().getStateMachine().getCurrentState()},setLabels:function(a){h.setLabels(a)},getLabel:function(a){return h.getLabel(a)},setLabel:function(a,b){h.setLabel(a,b)},getLoadTimeOffset:function(){return h.getLoadTimeOffset()},setLoadTimeOffset:function(a){h.setLoadTimeOffset(a)},setPixelURL:function(a){return h.setPixelURL(a)},getPixelURL:function(){return h.getSseSM().getSSECore().getPixelURL()},setImplementationType:function(a){h.setImplementationType(a)},isPauseOnBufferingEnabled:function(){return h.isPauseOnBufferingEnabled()},setPauseOnBufferingEnabled:function(a){h.setPauseOnBufferingEnabled(a)},isThrottlingEnabled:function(){return h.isThrottlingEnabled()},setThrottlingEnabled:function(a){h.setThrottlingEnabled(a)},setThrottlingDelay:function(a){h.setThrottlingDelay(a)},getThrottlingDelay:function(){return h.getThrottlingDelay()},setPlaybackIntervalMergeTolerance:function(a){h.getSseSM().getPlaylist().getClip().setPlaybackIntervalMergeTolerance(a)},getPlaybackIntervalMergeTolerance:function(){return h.getSseSM().getPlaylist().getClip().getPlaybackIntervalMergeTolerance()},setClip:function(a,c,d){if(void 0===d&&(d=!0),a=b.jsonObjectToStringDictionary(a),d&&h.getSseSM().getStateMachine().getCurrentState()!==j.IDLE&&k.end(),h.getSseSM().getStateMachine().getCurrentState()==j.IDLE){var e="",f=0;if(null!=a.ns_st_cn)e=String(a.ns_st_cn);else for(var g=0;g<m.length;g++)a[m[g]]&&(e+=m[g]+":"+a[m[g]]+";");var i=h.getSseSM().getPlaylist(),l=i.getClip();l.isClipStarted()?(i.hashExists(l.getHash())||(i.storeHash(l.getHash()),i.storeClipNumber(l.getHash(),l.getClipNumber())),i.storeClipPlaybackCounters(),f=i.hashExists(e)?i.getClipNumber(e):b.exists(a.ns_st_cn)?parseInt(a.ns_st_cn):i.getMaxClipNumber()+1):f=i.hashExists(e)?i.getClipNumber(e):l.getClipNumber(),i.resetClip(),l=i.getClip(),l.setHash(e),l.setClipNumber(f),l.setLabels(a);var n=i.getStoredClipRegisters(e);return n&&(l.setClipStarted(!0),l.setSegmentPlaybackCounter(n.segmentPlaybackCounter),l.setClipLoadCounter(n.clipLoadCounter),l.setAssetPlaybackCounter(n.assetPlaybackCounter),l.setLowestPartNumberPlayed(n.lowestPartNumberPlayed),l.setSeeking(n.seeking),l.setSeekingTimeBeforeEnd(n.seekingTimeBeforeEnd),l.setSeekStartPosition(n.seekingStartPosition),l.setClipPlaybackIntervals(n.clipPlaybackIntervals),l.setUniquePlaybackInterval(n.uniquePlaybackInterval),l.setLongestPlaybackInterval(n.longestPlaybackInterval),l.setVideoTrack(n.videoTrack),l.setAudioTrack(n.audioTrack),l.setSubtitleTrack(n.subtitleTrack),l.setCDN(n.cdn),l.setPreviousUniquePlaybackInterval(n.uniquePlaybackInterval),l.setPreviousEventIndependentUniquePlaybackInterval(n.uniquePlaybackInterval),l.setPreviousLongestPlaybackInterval(n.longestPlaybackInterval)),l.incrementClipLoadCounter(),l.isClipStarted()&&c&&(i.incrementPlayCounter(),i.incrementPlaybackCounter()),!0}return!1},setPlaylist:function(a,c){return void 0===c&&(c=!0),a=b.jsonObjectToStringDictionary(a),c&&h.getSseSM().getStateMachine().getCurrentState()!==j.IDLE&&k.end(),h.getSseSM().getStateMachine().getCurrentState()==j.IDLE?(h.getSseSM().getPlaylist().isPlaylistStarted()&&h.resetPlaylist(),h.getSseSM().getPlaylist().setLabels(a),!0):!1},importState:function(){},exportState:function(){return{}},getVersion:function(){return l.STREAMSENSE_VERSION},addListener:function(a){h.addListener(a)},removeListener:function(a){h.removeListener(a)},getClip:function(){return console&&console.warn&&console.warn("getClip() is deprecated. Use getPlaylist().getClip() instead."),h.getSseSM().getPlaylist().getClip()},getPlaylist:function(){return h.getSseSM().getPlaylist()},setHttpGet:function(a){"function"==typeof a&&(h.getPlatformAPI().httpGet=a)},setHttpPost:function(a){"function"==typeof a&&(h.getPlatformAPI().httpPost=a)},setExitEndEventEnabled:function(a){g=a},isExitEndEventEnabled:function(){return g},getPlatformAPI:function(){return h.getPlatformAPI()}}),b.extend(this,{customNotify:e,viewNotify:function(a,b){a=a||k.getPixelURL(),a&&viewNotify(a,b)}}),b.isBrowser()&&(window.addEventListener?(window.addEventListener("beforeunload",f),window.addEventListener("unload",f)):window.attachEvent&&(window.attachEvent("onbeforeunload",f),window.attachEvent("onunload",f))),d()}}();return function(c){function d(a,b){return x[z]||f(a,b)}function e(){z=-1;for(var b=0;y>=b;b++)if(x.hasOwnProperty(String(b))){z=b;break}return a.StreamSense.activeIndex=z,z}function f(b,c){return b=b||null,c=c||null,b&&"object"==typeof b&&(c=b,b=null),x[++y]=new a.StreamSense(c,b),e(),x[y]}function g(){var b=!1,c=z;if("number"==typeof arguments[0]&&isFinite(arguments[0]))c=arguments[0];else if(arguments[0]instanceof a.StreamSense)for(var d in x)if(x.hasOwnProperty(d)&&x[d]===arguments[0]){c=d;break}return x.hasOwnProperty(String(c))&&(b=x[c],delete x[c],b.reset(),e()),b}function h(a){return a=a||{},d().setPlaylist(a),d().getPlaylist()}function i(a,b,c){return a=a||{},"number"==typeof b&&(a.ns_st_cn=String(b)),d().setClip(a,c),d().getClip()}function j(a,b,c){return"undefined"==typeof a?!1:(c=c||null,b=b||{},d().notify(a,b,c))}function k(a){"undefined"!=typeof a&&d().setLabels(a)}function l(){return d().getLabels()}function m(a){"undefined"!=typeof a&&d().getPlaylist().setLabels(a)}function n(){return d().getPlaylist().getLabels()}function o(a){"undefined"!=typeof a&&d().getClip().setLabels(a)}function p(){return d().getClip().getLabels()}function q(a){return d().reset(a||{})}function r(a){return d().getPlaylist().reset(a||{})}function s(a){return d().getClip().reset(a||{})}function t(a){return a=a||{},d().viewNotify(null,a)}function u(a,b){return arguments.length>2&&(a=arguments[1],b=arguments[2]),a=a||{},"number"==typeof b&&(a.ns_st_po=String(b)),d().customNotify(a,b)}function v(){return d().exportState()}function w(a){d().importState(a)}var x={},y=-1,z=-1;b.extend(c,{activeIndex:z,newInstance:f,"new":f,destroyInstance:g,destroy:g,newPlaylist:h,newClip:i,notify:j,setLabels:k,getLabels:l,setPlaylistLabels:m,getPlaylistLabels:n,setClipLabels:o,getClipLabels:p,resetInstance:q,resetPlaylist:r,resetClip:s,viewEvent:t,customEvent:u,exportState:v,importState:w})}(H),H.PlayerEvents=i,H.InternalStates=j,H.ImplementationType=k,H}(),a.StreamingTag=a.StreamingTag||function(){var c=a.StreamSense,d=(a.StreamSense.PlayerEvents,a.StreamSense.InternalStates||null),e=a.StreamSense.ImplementationType||null,f=null!=a.StreamSense.InternalStates&&null!=a.StreamSense.ImplementationType;return function(){var a={LongFormOnDemand:"12",ShortFormOnDemand:"11",Live:"13",UserGeneratedLongFormOnDemand:"22",UserGeneratedShortFormOnDemand:"21",UserGeneratedLive:"23",Bumper:"99",Other:"00"},g={LinearOnDemandPreRoll:"11",LinearOnDemandMidRoll:"12",LinearOnDemandPostRoll:"13",LinearLive:"21",Other:"00"},h=function(a){function g(){if(f)if(b.getNamespace().comScore)q=new c,q.setImplementationType(e.REDUCED);else if(b.exists(a))if(r=b.isTrue(a.debug),b.exists(a.customerC2)&&a.customerC2.length>0){var d=a.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");q=new c,q.setPixelURL(d+".scorecardresearch.com/p?c1=2"),q.setLabel("c2",a.customerC2),q.setImplementationType(e.REDUCED)}else r&&console&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.")}function h(a){b.exists(a)||(a={});for(var c in t)t.hasOwnProperty(c)&&!b.exists(a[t[c]])&&("ns_st_ci"==t[c]?a.ns_st_ci="0":a[t[c]]="*null");return a}function i(a){for(var b in t)if(t.hasOwnProperty(b)&&!j(t[b],o,a))return!1;return!0}function j(a,c,d){if(b.exists(a)&&b.exists(c)&&b.exists(d)){var e=c[a],f=d[a];return b.exists(e)&&b.exists(f)&&e===f}return!1}function k(a){n++;var c={ns_st_cn:String(n),ns_st_pn:"1",ns_st_tp:"0"};b.extend(c,a),q.setClip(c),o=a,q.play()}function l(a){n++,a=h(a);var c={ns_st_cn:String(n),ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};b.extend(c,a),q.setClip(c),q.play(),p=!1}function m(a,b){a=h(a),u==s.None&&(u=b),p&&u==b&&i(a)?(q.getClip().setLabels(a),q.getState()!=d.PLAYING&&q.play()):k(a),p=!0,u=b}var n=0,o=null,p=!1,q=null,r=!1,s={None:0,AudioContent:1,VideoContent:2},t=["ns_st_ci","c3","c4","c6","ns_st_st","ns_st_pu","ns_st_pr","ns_st_ep","ns_st_sn","ns_st_en","ns_st_ct"],u=s.None;b.extend(this,{playAdvertisement:function(){if(q){r&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead.");var a={ns_st_ct:"va"};l(a)}},playVideoAdvertisement:function(a,c){if(q){var d={ns_st_ct:"va"};c?d.ns_st_ct="va"+c:r&&console&&console.warn("Calling 'playVideoAdvertisement' without specifying the media type as a second parameter."),a&&b.extend(d,a),l(d)}},playAudioAdvertisement:function(a,c){if(q){var d={ns_st_ct:"aa"};c?d.ns_st_ct="aa"+c:r&&console&&console.warn("Calling 'playAudioAdvertisement' without specifying the media type as a second parameter."),a&&b.extend(d,a),l(d)}},playContentPart:function(a){if(q){r&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var c={ns_st_ct:"vc"};a&&b.extend(c,a),m(c,s.VideoContent)}},playVideoContentPart:function(a,c){if(q){var d={ns_st_ct:"vc"};c?d.ns_st_ct="vc"+c:r&&console&&console.warn("Calling 'playVideoContentPart' without specifying the media type as a second parameter."),a&&b.extend(d,a),m(d,s.VideoContent)}},playAudioContentPart:function(a,c){if(q){var d={ns_st_ct:"ac"};c?d.ns_st_ct="ac"+c:r&&console&&console.warn("Calling 'playAudioContentPart' without specifying the media type as a second parameter."),a&&b.extend(d,a),m(d,s.AudioContent)}},stop:function(){q&&q.pause()}}),g()};return function(a){}(h),h.ContentType=a,h.AdType=g,h}()}(),a});


</script><script>

(function () {
    var streamingTag = null;
    var previousVideoStopped = true;
    var trackedAd = false;
    $t('on', 'ndp_videoEvent', function (e, data) {
        var eventData = data && data.videoData || {};
        var eventDataRaw = eventData.raw || {};
        var siteBrand = (function () {
            //brand is only today, and everything else is nbcnews, (this doenst work for continous consumption)
            if ($t('jsonLd.Dataset.0.vertical') === 'today') {
                return {
                    st: 'Today',
                    c6Default: '*null',
                    c4: 'today'
                };
            } else if ($t('jsonLd.Dataset.0.vertical') === 'msnbc') {
                return {
                    st: 'MSNBC',
                    c6Default: 'msnbc',
                    c4: 'msnbc'
                };
            } else {
                return {
                    st: 'NBC News',
                    c6Default: 'nbcnews',
                    c4: 'nbcnews'
                };
            }
        })();
        switch (data.eventType) {
            case 'NDP_PlaybackEvent_LOADED':
                //set new streaming tag for each instance, stop previous if needed
                if (!previousVideoStopped) {
                    streamingTag.stop();
                }
                streamingTag = new ns_.StreamingTag({ customerC2: '6035083' });

                previousVideoStopped = false;
                trackedAd = false;
                break;

            case 'NDP_PlaybackEvent_START':
            case 'NDP_PlaybackEvent_PLAY':
                var showNamesC6 = {
                    //nbcnews shows
                    'Dateline': 'dateline',
                    'Dateline Digital': 'dateline',
                    'Meet the Press': 'meetthepress',
                    'MTP Daily': 'meetthepress',
                    //msnbc shows
                    'Nightly News': 'nightlynews',
                    'News Nation': 'newsnation', //check
                    'Morning Joe': 'morningjoe',//check
                    'MSNBC': 'msnbc',//check
                    'Rachel Maddow': 'rachelmaddow',
                    'Andrea Mitchell': 'andreamitchell',//check
                    'All In': 'allin',//check
                    'Way Too Early': 'waytooearly',//check
                    'Hardball': 'hardball',//check
                    'The Ed Show': 'theedshow',//check
                    'The Last Word': 'thelastword',//check
                    'Politics Nation': 'politicsnation'//check
                };
                var videoLength = eventDataRaw.duration * 1000;
                var videoSource = eventDataRaw.source && eventDataRaw.source.name || 'NBC News'
                var metadata = {
                    ns_st_ci: eventDataRaw.guid || '0', // Content Asset ID
                    ns_st_cl: data.videoData.totalLength ? data.videoData.totalLength : "0", // Clip Length
                    ns_st_st: siteBrand.st,
                    ns_st_pu: videoSource, // Publisher Brand Name (needs fixing for today)
                    ns_st_pr: videoSource || '*null', // Program Title
                    ns_st_ep: eventDataRaw.headline && eventDataRaw.headline.primary || '*null', // Episode Title
                    ns_st_sn: "*null", // Episode Season Number
                    ns_st_en: "*null", // Episode Number
                    ns_st_ge: "News", // Content Genre
                    ns_st_ti: "*null", // TMS ID (unavailable)
                    ns_st_ia: "0", // Identical Ad Assignment Flag
                    ns_st_ce: "0", // Complete Episode Flag (TODO 1 for msnbc authenticated video)
                    ns_st_ddt: "*null", // Digital Air Date (not setup) "2014-10-03"
                    ns_st_tdt: "*null", // TV Air Date (not setup) "2014-10-03"
                    c3: "*null", // Dictionary Classification Value
                    c4: siteBrand.c4, // Unused Dictionary Classification Value
                    c6: showNamesC6[videoSource] ? showNamesC6[videoSource] : siteBrand.c6Default // Unused Dictionary Classification Value
                }
                streamingTag && streamingTag.playVideoContentPart(metadata, ns_.StreamingTag.ContentType.ShortFormOnDemand);
                break;
            case 'NDP_AdEvent_PROGRESS':
                //adstart is not used anymore, has to be ad progress
                if (!trackedAd) {
                    streamingTag && streamingTag.playVideoAdvertisement({ ns_st_cl: eventData.totalLength || 0 }, ns_.StreamingTag.ContentType.ShortFormOnDemand);
                    trackedAd = true;
                }
                break;
            case 'NDP_AdEvent_COMPLETE':
                trackedAd = false;
                streamingTag && streamingTag.stop();
                break;
            case 'NDP_PlaybackEvent_COMPLETE':
            case 'NDP_PlaybackEvent_PAUSE':
                streamingTag && streamingTag.stop();
                previousVideoStopped = true;
                break;
        }
    });
})();


</script><script>

/* globals $t */
(function () {
    var currentVideo = {};
    var blurred = false;

    //blur focus events
    window.addEventListener('blur', function () {
        if (window.PARSELY && window.PARSELY.video && currentVideo.playState === 'play') {
            blurred = true;
            window.PARSELY.video.trackPause(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
        }
    });
    window.addEventListener('focus', function () {
        if (window.PARSELY && window.PARSELY.video && currentVideo.playState === 'play' && blurred) {
            blurred = false;
            window.PARSELY.video.trackPlay(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
        }
    });
    //video events
    $t('on', 'ndp_videoEvent', function (e, data) {
        if (window.PARSELY && window.PARSELY.video) {
            var eventData = data && data.videoData || {};
            var eventDataRaw = eventData.raw || {};

            var getPubDate = function () { return eventDataRaw.datePublished && (new Date(eventDataRaw.datePublished).getTime()) || 0; };

            switch (data.eventType) {
                case 'NDP_PlaybackEvent_START':
                    if (currentVideo && currentVideo.guid != eventDataRaw.guid) {
                        //end previous if it hadn't
                        if (typeof currentVideo.guid !== 'undefined' && !blurred) {
                            window.PARSELY.video.trackPause(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
                        }
                        currentVideo = {
                            'guid': eventDataRaw.guid,
                            'mediaInfo': {
                                'title': eventDataRaw.headline && eventDataRaw.headline.primary || '', // required
                                'pub_date_tmsp': getPubDate(), // timestamp
                            },
                            'url': $t('dataLayer.canonical_url', document.location.href),
                            'playState': 'play'
                        };
                    }
                    if (!blurred) {
                        window.PARSELY.video.trackPlay(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
                    }
                    break;
                case 'NDP_PlaybackEvent_PLAY':
                    //resume from pause
                    if (!blurred) {
                        window.PARSELY.video.trackPlay(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
                    }
                    currentVideo.playState = 'play';
                    break;
                case 'NDP_PlaybackEvent_COMPLETE':
                case 'NDP_PlaybackEvent_PAUSE':
                    if (!blurred) {
                        window.PARSELY.video.trackPause(currentVideo.guid, currentVideo.mediaInfo, currentVideo.url);
                    }
                    currentVideo.playState = 'pause';
                    break;

                default:
                    break;
            }
        }
    });
})();


</script><script>

/* globals $t, s */
$t('on', 'mbt_rightRailTabbed_latestClick', function() {
    var actionContextData = {
        'news.linkmoduledetail': 'Button',
        'news.linkmoduletype': 'Latest Stories Tab'
    };
    s.contextData = s.extendArray(s.contextData, actionContextData);

    //track action
    s.tl(true, 'o', 'latest stories tab click');

    //cleanup values after action
    for (var item in actionContextData) {
        delete s.contextData[item];
    }
});


</script><script>

/* global $t, parseJsonLd */
(function () {
    window.dtm_pageview = window.dtm_pageview || {};
    window.dtm_pageview.viewedPages = window.dtm_pageview.viewedPages || {}; //list of URLS already tracked (make it exposed, so )
    var viewedPages = window.dtm_pageview.viewedPages; //keep it simple, so its shorter

    var trackView = true;
    var i, excludedPaths = [
        /\/embedded-video\//,
        /^\/playmaker\/embed/
    ];

    $t('register', 'dtm_pageView');
    //reparse ldjson before pageview
    if (typeof parseJsonLd === 'function') {
        parseJsonLd();
    }

    //dont track pages from exlude list
    for (i = 0; (excludedPaths[i] && trackView); i++) {
        if (document.location.pathname.search(excludedPaths[i]) != -1) {
            trackView = false;
        }
    }

    //check to see if thise page has been tracked already (only one pageview per URL)
    if (viewedPages[document.location.pathname]) {
        trackView = false;
    }
    $t('track', 'dtm_pageView', { initiator: 'pageViewPassThrough', trackView: trackView, url: document.location.pathname });
    viewedPages[document.location.pathname] = true;

})();


</script><script>window.__enigmaconfig = {"provider":"mps","preprocessors":{"xfinity":true},"targeting":{"site":"nbcnews-bento","type":"bentoarticle","pageid":"ncna112576","transporter":"false","targeting":"news|science|sciencenews|space|weirdscience"},"refreshInterval":30,"vendors":{"gptAdUnitPath":"\u002F2620\u002Fnbcnews\u002Fscience","mpsUrl":"https:\u002F\u002Fmps.nbcuni.com\u002Ffetch\u002Fext\u002Fload-nbcnews-bento.js?nowrite=jq"},"breakpoints":[1000,758,0]};</script><script async="" src="https://ndassets.s-nbcnews.com/ads-b74578ce24592a544228.js"></script><script charset="UTF-8">window.__data={"amp":{"vertical":null},"article":{"loading":false,"content":[{"type":"article","id":"ncna112576","subType":"spread","dek":null,"documentTracing":{"currentMessageId":null,"correlationID":"24aba53f-1515-4104-8167-77882d4356b9","type":"article"},"flag":null,"unibrow":{"taxonomyPath":"nbcnews\u002Fsection\u002Fscience\u002Fweird-science","text":"Weird Science","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fscience\u002Fweird-science"}},"primaryMedia":{"presentation":{"alignment":null,"size":"medium","style":"default","byline":null,"hideRecommendations":false},"type":"embeddedImage","image":{"id":"ncim461161","headline":{"primary":"HAARP","tease":"HAARP","seo":"HAARP","social":"HAARP"},"caption":"The 180-antenna HAARP array is spread across a 40-acre site at Gakona, Alaska.","altText":"Image: HAARP","url":{"primary":"https:\u002F\u002Fmedia4.s-nbcnews.com\u002Fi\u002Fnewscms\u002F2014_21\u002F461161\u002F140522-haarp2_95823e74dfad2494bd0e81a36a228c95.jpg"},"encodingFormat":null,"height":1243,"width":2000,"authors":[{"name":"Michael Kleiman"}],"source":{"name":"USAF","copyright":null},"graphicContent":false}},"headline":{"primary":"Conspiracy Theories Abound as U.S. Military Closes HAARP","seo":"Conspiracy Theories Abound as U.S. Military Closes HAARP","social":"Conspiracy Theories Abound as U.S. Military Closes HAARP"},"description":{"primary":"The U.S. Air Force has told Congress it intends to shut down HAARP, a controversial Alaska-based research facility that studies the upper atmosphere.","seo":"The U.S. Air Force has told Congress it intends to shut down HAARP, a controversial Alaska-based research facility that studies the upper atmosphere."},"url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fscience\u002Fweird-science\u002Fconspiracy-theories-abound-u-s-military-closes-haarp-n112576","short":"http:\u002F\u002Fnbcnews.to\u002F1HmVG6s","canonical":"https:\u002F\u002Fwww.nbcnews.com\u002Fscience\u002Fweird-science\u002Fconspiracy-theories-abound-u-s-military-closes-haarp-n112576"},"taxonomy":{"primarySection":{"dateCreated":"Tue Mar 07 2017 00:18:57 GMT+0000 (UTC)","dateModified":"Tue Mar 07 2017 00:18:57 GMT+0000 (UTC)","description":{"primary":"Find the latest science news articles, photos and videos covering space, the environment, human development and more on NBCNews.com."},"id":"nctx73","name":"Science","path":"nbcnews\u002Fsection\u002Fscience","slug":"science","type":"taxonomy","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fscience"}},"primaryTopic":{"dateCreated":"Tue Mar 07 2017 23:59:28 GMT+0000 (UTC)","dateModified":"Tue Mar 07 2017 23:59:28 GMT+0000 (UTC)","description":{"primary":"Find weird science discoveries and experiments. Read about weird animals, scientific studies, theories and more on http:\u002F\u002Fwww.nbcnews.com."},"id":"nctx45","name":"Weird Science","path":"nbcnews\u002Fsection\u002Fscience\u002Fweird-science","slug":"weird-science","type":"taxonomy","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fscience\u002Fweird-science"}},"primarySubtopic":null,"primaryVertical":{"dateCreated":"Fri Apr 20 2018 12:07:57 GMT+0000 (UTC)","dateModified":"Fri Apr 20 2018 12:07:57 GMT+0000 (UTC)","description":{"primary":null},"id":"nctx20366","name":"News","path":"nbcnews\u002Fvertical\u002Fnews","slug":"news","type":"taxonomy","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fnews"}},"primarySubvertical":null,"primaryChannel":null,"primaryLabel":null,"primaryShow":null,"channels":[],"topics":[{"dateCreated":"Tue Mar 07 2017 23:58:48 GMT+0000 (UTC)","dateModified":"Tue Mar 07 2017 23:58:48 GMT+0000 (UTC)","description":{"primary":"Find scientific news, photos, and videos on NBCNews.com. Read about the latest headlines covering discoveries in health, space, technology, virtual reality, and more."},"id":"nctx2","name":"Science News","path":"nbcnews\u002Fsection\u002Fscience\u002Fscience-news","slug":"science-news","type":"taxonomy","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fscience\u002Fscience-news"}},{"dateCreated":"Tue Mar 07 2017 23:59:06 GMT+0000 (UTC)","dateModified":"Tue Mar 07 2017 23:59:06 GMT+0000 (UTC)","description":{"primary":"Find the latest news, photos, and videos of outer space on NBCNews.com. Read headlines covering stories on our planet, spacecrafts & probes, new studies & missions, and more"},"id":"nctx83","name":"Space","path":"nbcnews\u002Fsection\u002Fscience\u002Fspace","slug":"space","type":"taxonomy","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fscience\u002Fspace"}},{"dateCreated":"Tue Mar 07 2017 23:59:28 GMT+0000 (UTC)","dateModified":"Tue Mar 07 2017 23:59:28 GMT+0000 (UTC)","description":{"primary":"Find weird science discoveries and experiments. Read about weird animals, scientific studies, theories and more on http:\u002F\u002Fwww.nbcnews.com."},"id":"nctx45","name":"Weird Science","path":"nbcnews\u002Fsection\u002Fscience\u002Fweird-science","slug":"weird-science","type":"taxonomy","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fscience\u002Fweird-science"}}],"sections":[{"dateCreated":"Tue Mar 07 2017 00:18:57 GMT+0000 (UTC)","dateModified":"Tue Mar 07 2017 00:18:57 GMT+0000 (UTC)","description":{"primary":"Find the latest science news articles, photos and videos covering space, the environment, human development and more on NBCNews.com."},"id":"nctx73","name":"Science","path":"nbcnews\u002Fsection\u002Fscience","slug":"science","type":"taxonomy","url":{"primary":"https:\u002F\u002Fwww.nbcnews.com\u002Fscience"}}],"subverticals":[],"series":[],"labels":[],"subtopics":[],"shows":[],"anchors":[],"cuisines":[],"recipeCategories":[],"courseTypes":[]},"primaryImage":{"id":"ncim461161","headline":{"primary":"HAARP","tease":"HAARP","seo":"HAARP","social":"HAARP"},"caption":"The 180-antenna HAARP array is spread across a 40-acre site at Gakona, Alaska.","altText":"Image: HAARP","url":{"primary":"https:\u002F\u002Fmedia4.s-nbcnews.com\u002Fi\u002Fnewscms\u002F2014_21\u002F461161\u002F140522-haarp2_95823e74dfad2494bd0e81a36a228c95.jpg"},"encodingFormat":null,"height":1243,"width":2000,"authors":[{"name":"Michael Kleiman"}],"source":{"name":"USAF","copyright":null},"graphicContent":false},"teaseImage":{"id":"ncim461161","headline":{"primary":"HAARP","tease":"HAARP","seo":"HAARP","social":"HAARP"},"caption":"The 180-antenna HAARP array is spread across a 40-acre site at Gakona, Alaska.","altText":"Image: HAARP","url":{"primary":"https:\u002F\u002Fmedia4.s-nbcnews.com\u002Fi\u002Fnewscms\u002F2014_21\u002F461161\u002F140522-haarp2_95823e74dfad2494bd0e81a36a228c95.jpg"},"encodingFormat":null,"height":1243,"width":2000,"authors":[{"name":"Michael Kleiman"}],"source":{"name":"USAF","copyright":null},"graphicContent":false},"socialImage":{"id":"ncim461161","headline":{"primary":"HAARP","tease":"HAARP","seo":"HAARP","social":"HAARP"},"caption":"The 180-antenna HAARP array is spread across a 40-acre site at Gakona, Alaska.","altText":"Image: HAARP","url":{"primary":"https:\u002F\u002Fmedia4.s-nbcnews.com\u002Fi\u002Fnewscms\u002F2014_21\u002F461161\u002F140522-haarp2_95823e74dfad2494bd0e81a36a228c95.jpg"},"encodingFormat":null,"height":1243,"width":2000,"authors":[{"name":"Michael Kleiman"}],"source":{"name":"USAF","copyright":null},"graphicContent":false},"authors":[],"adsEnabled":true,"ecommerceEnabled":false,"sponsoredBy":null,"hidden":false,"searchable":true,"nativeAd":false,"breakingNews":false,"body":[{"type":"markup","element":"p","html":"The U.S. Air Force has notified Congress that it intends to shut down HAARP, a controversial Alaska-based research facility that studies an energetic and active region of the upper atmosphere."},{"type":"markup","element":"p","html":"Conspiracy theorists are abuzz about the news, given that HAARP (short for High Frequency Active Auroral Research Program) has long been the center of wild speculation that the program is designed to \u003Ca href=\"http:\u002F\u002Fwww.livescience.com\u002F22131-wild-weather-control-ideas.html\"\u003Econtrol the weather\u003C\u002Fa\u003E  or worse. In 2010, Venezuelan leader Huge Chavez claimed that HAARP or a program like it \u003Ca href=\"http:\u002F\u002Fwww.livescience.com\u002F8071-chavez-tectonic-weapon-caused-haiti-quake.html\"\u003Etriggered the Haiti earthquake\u003C\u002Fa\u003E."},{"type":"markup","element":"p","html":"For the record, the Haitian quake of 2010 was caused by the slippage of a \u003Ca href=\"http:\u002F\u002Fwww.livescience.com\u002F8469-haiti-quake-caused-previously-unknown-fault.html\"\u003Epreviously unmapped fault\u003C\u002Fa\u003E along the border of the Caribbean and North American tectonic plates."},{"type":"markup","element":"p","html":"HAARP is a research program designed to analyze the ionosphere, a portion of the upper atmosphere that stretches from about 53 miles (85 kilometers) above the surface of the Earth to 370 miles (600 kilometers) up. The program has been funded by the Air Force, the Navy, the University of Alaska and the Defense Advanced Research Projects Agency, or DARPA. [\u003Ca href=\"http:\u002F\u002Fwww.livescience.com\u002F11375-top-ten-conspiracy-theories.html\"\u003ETop 10 Conspiracy Theories\u003C\u002Fa\u003E]"},{"type":"markup","element":"p","html":"\u003Cstrong\u003EWhy HAARP exists\u003C\u002Fstrong\u003E"},{"type":"markup","element":"p","html":"The U.S. military is interested in the ionosphere because this portion of the atmosphere plays a role in transmitting radio signals. HAARP sends radio beams into the ionosphere to study the responses from it  one of the few ways to accurately measure this inaccessible part of the atmosphere."},{"type":"markup","element":"p","html":"HAARP operates out of the HAARP Research Station in Gakona, Alaska, where it has a high-power radio frequency transmitter that can perturb a small portion of the ionosphere. Other instruments are then used to measure the perturbations."},{"presentation":{"alignment":null,"size":"medium","style":"default","byline":null,"hideRecommendations":false},"type":"embeddedImage","image":{"id":"ncim461166","headline":{"primary":null,"tease":null,"seo":null,"social":null},"caption":"Images from the HAARP camera show speckle-like artificial optical emissions superimposed on the background natural aurora only during frames when the transmitter was on. The experiment was conducted on March 10, 2004.","altText":null,"url":{"primary":"https:\u002F\u002Fmedia4.s-nbcnews.com\u002Fi\u002Fnewscms\u002F2014_21\u002F461166\u002F050202_haarp_02_1f936d03a8c709e092e87bb27dc259a7.jpg"},"encodingFormat":null,"height":300,"width":603,"authors":[],"source":{"name":"USAF","copyright":null},"graphicContent":false}},{"type":"markup","element":"p","html":"The goal of the program is to understand the physics of the ionosphere, which is constantly responding to influences from the sun. Solar flares can send solar particles racing toward Earth, occasionally \u003Ca href=\"http:\u002F\u002Fwww.livescience.com\u002F34537-extreme-solar-storms-electrical-grids.html\"\u003Edisrupting communications and the electrical grid\u003C\u002Fa\u003E. If scientists could better understand what happens in the ionosphere, they might be able to mitigate some of these problems."},{"type":"markup","element":"p","html":"But the Air Force is no longer interested in maintaining HAARP, according to David Walker, the Air Force deputy assistant secretary for science, technology and engineering."},{"type":"markup","element":"p","html":"At a Senate hearing on May 14, Walker said the Air Force has no interest in maintaining the site, and is moving in another direction in ionospheric research."},{"type":"markup","element":"p","html":"\u003Cstrong\u003EPolitics and conspiracy\u003C\u002Fstrong\u003E"},{"type":"markup","element":"p","html":"The Air Force's plan to destroy HAARP has detractors."},{"type":"markup","element":"p","html":"\"While the Air Force neither wants nor appreciates the unique value of HAARP, users from several federal agencies, laboratories and universities, and friendly nations such as Canada, Britain, Taiwan, South Korea, Sweden and Norway, are eager to use its unique resources, which would further spread American influence and leadership,\" Dennis Papadopoulos, a professor of physics and astronomy at the University of Maryland, wrote in an opinion piece in \u003Ca href=\"http:\u002F\u002Fnews.techmedianetwork.com\u002Farticles\u002F65746\u002FWhile%20the%20Air%20Force%20neither%20wants%20nor%20appreciates%20the%20unique%20value%20of%20HAARP,%20users%20from%20several%20federal%20agencies,%20laboratories%20and%20universities,%20and%20friendly%20nations%20such%20as%20Canada,%20Britain,%20Taiwan,%20South%20Korea,%20Sweden%20and%20Norway,%20are%20eager%20to%20use%20its%20unique%20resources,%20which%20would%20further%20spread%20American%20influence%20and%20leadership.\"\u003Ethe Alaska Dispatch\u003C\u002Fa\u003E."},{"type":"markup","element":"p","html":"HAARP cost more than $290 million to build, much of it earmarked by late Sen. Ted Stevens, R-Alaska, who had great influence over the U.S. defense budget during his time in Congress. The site was host to numerous projects over the years, including the creation of the \u003Ca href=\"http:\u002F\u002Fwww.livescience.com\u002F124-artificial-neon-sky-show-created.html\"\u003Efirst artificially produced aurora in 2005\u003C\u002Fa\u003E. The site's generators now require remediation to meet the environmental standards set in the Clean Air Act, an expense no one seems keen to take on."},{"type":"markup","element":"p","html":"Conspiracy theorists think HAARP's purpose is far more sinister than meets the eye. The program has been blamed for everything from global warming to natural disasters to mysterious humming noises in the sky."},{"type":"markup","element":"p","html":"Name a natural phenomenon, and someone probably suspects HAARP of being behind it. Online, conspiracy theorists suggest that HAARP was to blame for the 2011 earthquake and tsunami in Japan; the Moore, Oklahoma, tornado of 2013; a landslide in 2006 in the Philippines; and many more natural disasters. Other conspiracy theories hold that HAARP controls people's minds or is capable of altering the very fabric of reality."},{"type":"markup","element":"p","html":"These theories have yet to subside, even though very little has been going on at HAARP over the past year. In May 2013, the site shut down during a change in operations contractors. At the time, the HAARP program manager told reporters that the site was temporarily closed and locked, with only one DARPA project left to wrap up by early 2014."},{"type":"markup","element":"h3","html":"\u003Cstrong\u003E Stephanie Pappas, LiveScience\u003C\u002Fstrong\u003E"},{"type":"markup","element":"p","html":"\u003Cem\u003EFollow Stephanie Pappas on \u003C\u002Fem\u003E\u003Ca href=\"https:\u002F\u002Ftwitter.com\u002Fsipappas\"\u003E\u003Cem\u003ETwitter\u003C\u002Fem\u003E\u003C\u002Fa\u003E\u003Cem\u003E and \u003C\u002Fem\u003E\u003Ca href=\"https:\u002F\u002Fplus.google.com\u002F101831066787121148004\u002Fposts\"\u003E\u003Cem\u003EGoogle+\u003C\u002Fem\u003E\u003C\u002Fa\u003E\u003Cem\u003E. Follow LiveScience on \u003C\u002Fem\u003E\u003Ca href=\"https:\u002F\u002Ftwitter.com\u002FLiveScience\"\u003E\u003Cem\u003ETwitter\u003C\u002Fem\u003E\u003C\u002Fa\u003E\u003Cem\u003E, \u003C\u002Fem\u003E\u003Ca href=\"http:\u002F\u002Fwww.facebook.com\u002F#!\u002Flivescience\"\u003E\u003Cem\u003EFacebook\u003C\u002Fem\u003E\u003C\u002Fa\u003E\u003Cem\u003E and \u003C\u002Fem\u003E\u003Ca href=\"https:\u002F\u002Fplus.google.com\u002F101164570444913213957\u002Fposts\"\u003E\u003Cem\u003EGoogle+\u003C\u002Fem\u003E\u003C\u002Fa\u003E\u003Cem\u003E. Original article on \u003Ca href=\"http:\u002F\u002Fwww.livescience.com\u002F45829-haarp-shutdown.html\"\u003ELiveScience\u003C\u002Fa\u003E.\u003C\u002Fem\u003E"},{"type":"markup","element":"ul","html":"\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fwww.livescience.com\u002F11345-top-ten-unexplained-phenomena.html\"\u003ESpooky! The Top 10 Unexplained Phenomena\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fwww.livescience.com\u002F15842-northern-lights-aurora-photos.html\"\u003EAurora Photos: Northern Lights Dazzle\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fwww.livescience.com\u002F29572-earth-atmosphere-layers-atmospheric-pressure-infographic.html\"\u003EInfographic: Earth's Atmosphere Top to Bottom\u003C\u002Fa\u003E\u003C\u002Fli\u003E"}],"datePublished":"Thu May 22 2014 23:25:36 GMT+0000 (UTC)","dateModified":"Thu Jun 11 2015 00:00:00 GMT+0000 (UTC)","dateCreated":"Thu May 22 2014 23:25:36 GMT+0000 (UTC)","source":null,"presentation":{"alignment":null,"size":"medium","style":"default","byline":"EXPANDED","hideRecommendations":false}}],"error":null,"isNativeAd":false,"presentation":{"alignment":null,"size":"medium","style":"default","byline":"EXPANDED","hideRecommendations":false}},"front":{"loading":false,"draftId":null,"curation":{},"error":null},"layout":{"header":{"css":{"link":["https:\u002F\u002Fnodeassets.nbcnews.com\u002Fassets\u002Fheader-footer\u002F1.0.6\u002Fnews\u002Fheader.css","https:\u002F\u002Fnodeassets.nbcnews.com\u002Fassets\u002Ffonts\u002Fshared\u002Ffontface.css","https:\u002F\u002Fnodeassets.nbcnews.com\u002Fassets\u002Fheader-footer\u002F1.0.6\u002Ficons.css"]},"js":{"src":["https:\u002F\u002Fnodeassets.nbcnews.com\u002Fassets\u002Fheader-footer\u002F1.0.6\u002Fhfs-header.js"],"html":["var _HFS = { version: \"1.0.6\", host: \"https:\u002F\u002Fnodeassets.nbcnews.com\u002Fassets\u002Fheader-footer\", social: \"nbcnews\" }","%2F*%20eslint-disable%20*%2F%0A(function%20()%20%7B%0A%20%20var%20hd%20%3D%20(window._HFS%20%26%26%20window._HFS.host)%20%7C%7C%20!1%3B%0A%20%20if%20(hd%20!%3D%3D%20!1%20%26%26%20typeof%20window.HTMLPictureElement%20%3D%3D%3D%20'undefined')%20%7B%0A%20%20%20%20var%20srcScript%20%3D%20document.createElement('script')%3B%0A%20%20%20%20document.head.appendChild(srcScript)%3B%0A%20%20%20%20srcScript.src%20%3D%20hd.concat('picturefill.min.js')%3B%0A%20%20%7D%0A%7D)()%3B%0A"]},"html":["\u003Cnav class=\"hfsh show-global\"\u003E\u003Cdiv class=\"global\"\u003E\u003Cdiv class=\"global-insert js-global-nav-insert\"\u003E\u003C\u002Fdiv\u003E\u003Cul class=\"global-list\"\u003E\u003Cli class=\"global-list-item \"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\"\u003ENews\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"global-list-item \"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fnow\"\u003ENBC News NOW\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"global-list-item \"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fnightly-news\"\u003ENightly News\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"global-list-item \"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fmeet-the-press\"\u003EMeet the Press\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"global-list-item \"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fdateline\"\u003EDateline\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"global-list-item secondary\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.msnbc.com\"\u003EMSNBC\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"global-list-item secondary\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.today.com\"\u003ETODAY\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cbutton class=\"search-icon js-search-open\"\u003E\u003Cspan class=\"hfs-i hfs-i-search\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"local h-h\"\u003E\u003Cdiv class=\"logo-wrap h-h\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\"\u003E\u003Cspan class=\"logo  h-h\"\u003E\u003Csvg class=\"peacock\" width=\"67\" height=\"39\" viewBox=\"578 62 67 39\" xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\"\u003E\u003Cg fill-rule=\"evenodd\"\u003E\u003Cpath d=\"M579.074 90.58c1.717-4.494 6.472-6.08 10.697-3.37l18.29 12.754h-22.18c-4.62 0-8.252-4.23-6.8-9.385\"\u003E\u003C\u002Fpath\u003E\u003Cpath class=\"feather\" d=\"M579.074 90.58c1.717-4.494 6.472-6.08 10.697-3.37l18.29 12.754h-22.18c-4.62 0-8.252-4.23-6.8-9.385\"\u003E\u003C\u002Fpath\u003E\u003Cpath class=\"feather\" d=\"M597.563 75.863l9.442 21.613-19.478-13.35c-4.887-3.24-3.896-8.79-1.19-11.237 3.83-3.24 9.245-2.12 11.226 2.97\"\u003E\u003C\u002Fpath\u003E\u003Cpath class=\"feather\" d=\"M610.57 70.93l-3.433 24.19-9.772-23c-2.113-5.75 2.64-9.516 5.81-9.583 3.632-.396 8.188 2.38 7.396 8.394\"\u003E\u003C\u002Fpath\u003E\u003Cpath class=\"feather\" d=\"M625.494 72.103l-9.707 23.067-3.102-20.82c-.265-3.17 1.716-3.237 2.443-3.832-.133-.463-1.124-.463-1.124-.463h-1.848c-.198-5.42 4.028-7.8 7.462-7.535 3.697.132 7.856 4.428 5.876 9.583\"\u003E\u003C\u002Fpath\u003E\u003Cpath class=\"feather\" d=\"M635.338 84.167L615.86 97.584l9.177-21.348c2.775-6.742 9.245-5.42 11.556-2.842 2.51 2.51 3.235 7.6-1.255 10.773\"\u003E\u003C\u002Fpath\u003E\u003Cpath class=\"feather\" d=\"M637.448 99.9h-22.515l18.29-12.756c4.49-2.975 9.244-.266 10.498 3.635 1.327 4.36-1.65 9.12-6.27 9.12\"\u003E\u003C\u002Fpath\u003E\u003C\u002Fg\u003E\u003C\u002Fsvg\u003E\u003Cdiv class=\"brand\"\u003E\u003Cspan class=\"hfs-i hfs-i-vertical-news\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"js-sponsor-wrap\"\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"local-wrap\"\u003E\u003Cdiv class=\"shortcuts h-h\"\u003E\u003Cul class=\"shortcuts-list h-lh\"\u003E\u003Cli class=\"shortcuts-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fpolitics\"\u003EPolitics\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"shortcuts-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fus-news\"\u003EU.S. News\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"shortcuts-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fbusiness\"\u003EBusiness\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"shortcuts-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fworld\"\u003EWorld\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"shortcuts-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fthe-thread\"\u003ETech &amp; Media\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"shortcuts-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fthink\"\u003ETHINK\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"shortcuts-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcsports.com\u002F?cid=eref:nbcnews:text\"\u003ESports\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"headline-wrap h-h\"\u003E\u003Cdiv class=\"headline-title h-h\"\u003E\u003Ch2 class=\"headline-title-text h-lh js-headline-text\"\u003E\u003C\u002Fh2\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"share-list share-shared h-h\"\u003E\u003Cdiv class=\"share-inner\"\u003E\u003Cul class=\"share-ul h-h\"\u003E\u003Cli class=\"share-li share-txt\"\u003EShare this&nbsp;&mdash;\u003C\u002Fli\u003E\u003Cli class=\"share-li share-li-facebook\"\u003E\u003Ca href=\"javascript:void(0);\" target=\"_blank\" class=\"js-hfs-share\" data-key=\"facebook\" data-template=\"https:\u002F\u002Fwww.facebook.com\u002Fsharer\u002Fsharer.php?u=URL&cid=article_share_facebook\" data-track-event=\"mbt_navbar_share\" data-track-key=\"platform\" data-track-value=\"facebook\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-facebook share-icon\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"share-li share-li-twitter\"\u003E\u003Ca href=\"javascript:void(0);\" target=\"_blank\" class=\"js-hfs-share\" data-key=\"twitter\" data-template=\"https:\u002F\u002Ftwitter.com\u002Fintent\u002Ftweet?text=HEADLINE&via=VIA&url=URL&original_referer=URL&cid=article_share_twitter\" data-track-event=\"mbt_navbar_share\" data-track-key=\"platform\" data-track-value=\"twitter\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-twitter share-icon\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"share-li share-li-email\"\u003E\u003Ca href=\"javascript:void(0);\" target=\"_blank\" class=\"js-hfs-share\" data-key=\"email\" data-template=\"mailto:?subject=HEADLINE&body=URL\" data-track-event=\"mbt_navbar_share\" data-track-key=\"platform\" data-track-value=\"email\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-email share-icon\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"share-li share-li-sms dn-l\"\u003E\u003Ca href=\"javascript:void(0);\" target=\"_blank\" class=\"js-hfs-share\" data-key=\"sms\" data-template=\"sms:?body=HEADLINE via VIA - URL\" data-track-event=\"mbt_navbar_share\" data-track-key=\"platform\" data-track-value=\"sms\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-sms share-icon\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"share-li\"\u003E\u003Cbutton class=\"share-ex h-h h-w js-share-toggle\"\u003E\u003Cspan class=\"share-dot\"\u003E\u003C\u002Fspan\u003E\u003Csvg class=\"share-cl\" viewBox=\"0 0 20 20\"\u003E\u003Cline x1=\"0\" x2=\"20\" y1=\"0\" y2=\"20\"\u003E\u003C\u002Fline\u003E\u003Cline x1=\"0\" x2=\"20\" y1=\"20\" y2=\"0\"\u003E\u003C\u002Fline\u003E\u003C\u002Fsvg\u003E\u003C\u002Fbutton\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbutton class=\"hamburger h-h h-w js-menu-toggle\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"menu js-menu-selector\"\u003E\u003Cbutton class=\"overlay js-menu-toggle\"\u003E\u003C\u002Fbutton\u003E\u003Csection class=\"inner\"\u003E\u003Cdiv class=\"menu-logo-wrapper\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\" class=\"menu-logo\"\u003E\u003Cspan class=\"hfs-i hfs-i-peacock\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hfs-i hfs-i-vertical-news\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"search-wrap-inline\"\u003E\u003Cform action=\"https:\u002F\u002Fwww.nbcnews.com\u002Fsearch\" method=\"GET\" class=\"search-form js-search-form\"\u003E\u003Clabel class=\"search-label\" for=q id=\"search_label\"\u003ESearch\u003C\u002Flabel\u003E\u003Cdiv class=\"search-inner\"\u003E\u003Cinput type=\"search\" class=\"search-input js-search-input\" aria-labelledby=\"search_label\" id=q name=q placeholder=\"Search NBC News\"\u003E\u003Cbutton class=\"search-button\"\u003E\u003Cspan class=\"search-button-icon hfs-i hfs-i-search\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E\u003C\u002Fdiv\u003E\u003C\u002Fform\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"layout\"\u003E\u003Cdiv class=\"menu-section menu-section-main\"\u003E\u003Ch3 class=\"menu-section-heading\"\u003ESections\u003C\u002Fh3\u003E\u003Cul class=\"menu-list\"\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fus-news\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EU.S. News\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fpolitics\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EPolitics\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fnews\u002Fworld\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EWorld\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Flocal\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ELocal\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fbusiness\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EBusiness\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fhealth\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EHealth\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Finvestigations\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EInvestigations\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fculture-matters\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ECulture Matters\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fscience\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EScience\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcsports.com\u002F?cid=eref:nbcnews:text\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ESports\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Ftech-media\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ETech &amp; Media\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Ftrump-effect\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ETrump Effect\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fin-focus\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EIn Focus\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Frussia-investigation\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ERussia Investigation\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fphotos\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EPhotos\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fweather\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EWeather\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"menu-section menu-section-tv\"\u003E\u003Ch3 class=\"menu-section-heading\"\u003ETV\u003C\u002Fh3\u003E\u003Cul class=\"menu-list\"\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.today.com\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EToday\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.msnbc.com\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EMSNBC\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fnightly-news\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ENightly News\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fmeet-the-press\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EMeet The Press\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fdateline\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EDateline\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"menu-section menu-section-featured\"\u003E\u003Ch3 class=\"menu-section-heading\"\u003EFeatured\u003C\u002Fh3\u003E\u003Cul class=\"menu-list\"\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fnow\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ENBC NEWS NOW\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fthink\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ETHINK\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fmach\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EMACH\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fbetter\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EBETTER\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fnightly-films\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ENIGHTLY FILMS\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fleftfield\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ENBC LEFT FIELD\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fnews\u002Fasian-america\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EASIAN AMERICA\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fnews\u002Flatino\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ENBC LATINO\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fnews\u002Fnbcblk\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ENBCBLK\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Ffeature\u002Fnbc-out\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ENBC OUT\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.snapchat.com\u002Fadd\u002FStay-Tuned\u002F8367265869\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ESTAY TUNED\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fspecials\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ESPECIAL FEATURES\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"menu-section menu-section-more\"\u003E\u003Ch3 class=\"menu-section-heading\"\u003EMore from NBC\u003C\u002Fh3\u003E\u003Cul class=\"menu-list\"\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.cnbc.com\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ECNBC\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbc.com\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ENBC.COM\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbclearn.com\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ENBC LEARN\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"http:\u002F\u002Fwww.nbcpeacockproductions.com\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EPeacock Productions\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fveterans.nbcnews.com\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ENext Steps for Vets\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.parenttoolkit.com\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EParent Toolkit\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnewsarchivesxpress.com\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003ENBC Archives\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fknow-your-value\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"menu-list-item-title\"\u003EKnow Your Value\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"menu-section menu-section-social\"\u003E\u003Ch3 class=\"menu-section-heading\"\u003EFollow NBC News\u003C\u002Fh3\u003E\u003Cul class=\"menu-list\"\u003E\u003Cli class=\"menu-list-item\" data-track-event=\"mbt_navbar_follow\" data-track-key=\"platform\" data-track-value=\"facebook\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.facebook.com\u002FNBCNews\" rel=\"noopener noreferrer\" target=\"_blank\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-facebook\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\" data-track-event=\"mbt_navbar_follow\" data-track-key=\"platform\" data-track-value=\"twitter\"\u003E\u003Ca href=\"https:\u002F\u002Ftwitter.com\u002Fnbcnews\" rel=\"noopener noreferrer\" target=\"_blank\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-twitter\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"menu-list-item\" data-track-event=\"mbt_navbar_follow\" data-track-key=\"platform\" data-track-value=\"email\"\u003E\u003Ca href=\"https:\u002F\u002Fsecure.nbcnews.com\u002F_tps\u002Faccounts\u002Fnewsletters\" rel=\"noopener noreferrer\" target=\"_blank\" class=\"menu-list-item-link\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-email\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fsection\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"search-overlay\" tabindex=\"0\"\u003E\u003Cbutton class=\"search-close js-search-close\"\u003E\u003Cspan class=\"search-overlay-icon hfs-i hfs-i-close\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E\u003Cdiv class=\"search-wrap-overlay\"\u003E\u003Cform action=\"https:\u002F\u002Fwww.nbcnews.com\u002Fsearch\" method=\"GET\" class=\"search-form js-search-form\"\u003E\u003Clabel class=\"search-label\" for=q id=\"search_label\"\u003ESearch\u003C\u002Flabel\u003E\u003Cdiv class=\"search-inner\"\u003E\u003Cinput type=\"search\" class=\"search-input js-search-input\" aria-labelledby=\"search_label\" id=q name=q placeholder=\"Search NBC News\"\u003E\u003Cbutton class=\"search-button\"\u003E\u003Cspan class=\"search-button-icon hfs-i hfs-i-search\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E\u003C\u002Fdiv\u003E\u003C\u002Fform\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"share-drop share-shared js-share-selector\"\u003E\u003Cdiv class=\"share-inner\"\u003E\u003Cul class=\"share-ul\"\u003E\u003Cli class=\"share-li dn-l\"\u003E\u003Ca href=\"javascript:void(0);\" target=\"_blank\" class=\"share-a js-hfs-share\" data-key=\"facebook\" data-template=\"https:\u002F\u002Fwww.facebook.com\u002Fsharer\u002Fsharer.php?u=URL&cid=article_share_facebook\" data-track-event=\"mbt_navbar_share\" data-track-key=\"platform\" data-track-value=\"facebook\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-facebook share-icon\"\u003E\u003C\u002Fspan\u003E\u003Cspan\u003EFacebook\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"share-li dn-l\"\u003E\u003Ca href=\"javascript:void(0);\" target=\"_blank\" class=\"share-a js-hfs-share\" data-key=\"twitter\" data-template=\"https:\u002F\u002Ftwitter.com\u002Fintent\u002Ftweet?text=HEADLINE&via=VIA&url=URL&original_referer=URL&cid=article_share_twitter\" data-track-event=\"mbt_navbar_share\" data-track-key=\"platform\" data-track-value=\"twitter\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-twitter share-icon\"\u003E\u003C\u002Fspan\u003E\u003Cspan\u003ETwitter\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"share-li dn-l\"\u003E\u003Ca href=\"javascript:void(0);\" target=\"_blank\" class=\"share-a js-hfs-share\" data-key=\"email\" data-template=\"mailto:?subject=HEADLINE&body=URL\" data-track-event=\"mbt_navbar_share\" data-track-key=\"platform\" data-track-value=\"email\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-email share-icon\"\u003E\u003C\u002Fspan\u003E\u003Cspan\u003EEmail\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"share-li dn-l\"\u003E\u003Ca href=\"javascript:void(0);\" target=\"_blank\" class=\"share-a js-hfs-share\" data-key=\"sms\" data-template=\"sms:?body=HEADLINE via VIA - URL\" data-track-event=\"mbt_navbar_share\" data-track-key=\"platform\" data-track-value=\"sms\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-sms share-icon\"\u003E\u003C\u002Fspan\u003E\u003Cspan\u003ESMS\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"share-li\"\u003E\u003Ca href=\"javascript:void(0);\" target=\"_blank\" class=\"share-a js-hfs-share\" data-key=\"print\" data-template=\"javascript:if(window.print)window.print()\" data-track-event=\"mbt_navbar_share\" data-track-key=\"platform\" data-track-value=\"print\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-print share-icon\"\u003E\u003C\u002Fspan\u003E\u003Cspan\u003EPrint\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"share-li\"\u003E\u003Ca href=\"javascript:void(0);\" target=\"_blank\" class=\"share-a js-hfs-share\" data-key=\"whatsapp\" data-template=\"https:\u002F\u002Fapi.whatsapp.com\u002Fsend?phone=&text=HEADLINE&cid=article_share_whatsapp\" data-track-event=\"mbt_navbar_share\" data-track-key=\"platform\" data-track-value=\"whatsapp\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-whatsapp share-icon\"\u003E\u003C\u002Fspan\u003E\u003Cspan\u003EWhatsapp\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"share-li\"\u003E\u003Ca href=\"javascript:void(0);\" target=\"_blank\" class=\"share-a js-hfs-share\" data-key=\"reddit\" data-template=\"http:\u002F\u002Fwww.reddit.com\u002Fsubmit?url=URL&title=HEADLINE&cid=article_share_reddit\" data-track-event=\"mbt_navbar_share\" data-track-key=\"platform\" data-track-value=\"reddit\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-reddit share-icon\"\u003E\u003C\u002Fspan\u003E\u003Cspan\u003EReddit\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"share-li\"\u003E\u003Ca href=\"javascript:void(0);\" target=\"_blank\" class=\"share-a js-hfs-share\" data-key=\"pocket\" data-template=\"https:\u002F\u002Fgetpocket.com\u002Fsave?url=URL&title=HEADLINE&cid=article_share_pocket\" data-track-event=\"mbt_navbar_share\" data-track-key=\"platform\" data-track-value=\"pocket\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-pocket share-icon\"\u003E\u003C\u002Fspan\u003E\u003Cspan\u003EPocket\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"share-li\"\u003E\u003Ca href=\"javascript:void(0);\" target=\"_blank\" class=\"share-a js-hfs-share\" data-key=\"flipboard\" data-template=\"https:\u002F\u002Fshare.flipboard.com\u002Fbookmarklet\u002Fpopout?v=2&title=HEADLINE&url=URL&cid=article_share_flipboard\" data-track-event=\"mbt_navbar_share\" data-track-key=\"platform\" data-track-value=\"flipboard\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-flipboard share-icon\"\u003E\u003C\u002Fspan\u003E\u003Cspan\u003EFlipboard\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"share-li\"\u003E\u003Ca href=\"javascript:void(0);\" target=\"_blank\" class=\"share-a js-hfs-share\" data-key=\"pinterest\" data-template=\"http:\u002F\u002Fpinterest.com\u002Fpin\u002Fcreate\u002Flink\u002F?url=URL&cid=article_share_pinterest\" data-track-event=\"mbt_navbar_share\" data-track-key=\"platform\" data-track-value=\"pinterest\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-pinterest share-icon\"\u003E\u003C\u002Fspan\u003E\u003Cspan\u003EPinterest\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"share-li\"\u003E\u003Ca href=\"javascript:void(0);\" target=\"_blank\" class=\"share-a js-hfs-share\" data-key=\"linkedin\" data-template=\"https:\u002F\u002Fwww.linkedin.com\u002FshareArticle?mini=true&url=URL&title=HEADLINE&cid=article_share_linkedin\" data-track-event=\"mbt_navbar_share\" data-track-key=\"platform\" data-track-value=\"linkedin\"\u003E\u003Cspan class=\"hfs-i hfs-i-share-linkedin share-icon\"\u003E\u003C\u002Fspan\u003E\u003Cspan\u003ELinkedin\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fnav\u003E\u003Cdiv class=\"hfsh-spacer\"\u003E\u003C\u002Fdiv\u003E"]},"footer":{"css":{"link":["https:\u002F\u002Fnodeassets.nbcnews.com\u002Fassets\u002Fheader-footer\u002F1.0.6\u002Fnews\u002Ffooter.css","https:\u002F\u002Fnodeassets.nbcnews.com\u002Fassets\u002Ffonts\u002Fshared\u002Ffontface.css","https:\u002F\u002Fnodeassets.nbcnews.com\u002Fassets\u002Fheader-footer\u002F1.0.6\u002Ficons.css"]},"html":["\u003Cfooter class=\"hfsf\"\u003E\u003Cdiv class=\"home\"\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\"\u003E\u003Cspan class=\"hfs-i hfs-i-peacock\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\u003Cnav class=\"links\"\u003E\u003Cul\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fpages\u002Fabout-nbc-news-digital\"\u003EAbout\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fpages\u002Fcontact-us\"\u003EContact\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcunicareers.com\"\u003ECareers\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcuniversal.com\u002Fprivacy\"\u003EPrivacy policy\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fpages\u002Fterms-of-service\"\u003ETerms of Service\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\u002Fpages\u002Fsitemap\"\u003ENBCNews.COM Site Map\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Ftogether.nbcuni.com\"\u003EAdvertise\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli class=\"adchoices\"\u003E\u003Ca href=\"https:\u002F\u002Finfo.evidon.com\u002Fpub_info\u002F1195?v=1\"\u003EAdChoices\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fnav\u003E\u003Cdiv class=\"copy\"\u003E\u003Cp\u003E&copy;&nbsp;2019 NBC UNIVERSAL\u003C\u002Fp\u003E\u003Cul class=\"brands\"\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fwww.nbcnews.com\"\u003E\u003Cspan class=\"hfs-i hfs-i-logo-news\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fwww.msnbc.com\"\u003E\u003Cspan class=\"hfs-i hfs-i-logo-msnbc\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fwww.today.com\"\u003E\u003Cspan class=\"hfs-i hfs-i-logo-today\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Ffooter\u003E"]},"menu":{"html":[]},"triggerTop":0,"navigation":{"globalMenu":{"menuItems":[]},"localMenu":{"menuItems":[]}}},"liveBlog":{"cardLoading":false,"card":null,"pagination":null,"fetchingLatest":false,"activeItems":[],"latestItems":[],"numberOfNewItems":0,"error":null,"loadingMoreCards":false,"trueTotalItems":null,"allTotalItems":null},"localnews":{"news":[],"zip":null,"city":null,"state":null,"latitude":null,"longitude":null,"error":null,"loading":false},"marquee":{"active":false,"marquees":[]},"navbar":{"theme":"light","headline":null,"active":false,"shortcutsVisible":true,"watchScroll":true,"transported":false,"shareUrl":null,"mounted":false,"showMiniPlayer":false,"miniPlayerFetchComplete":false,"miniPlayerLoading":false,"miniplayerError":false,"miniPlayerData":{}},"recommended":{"loading":false,"recommendations":{}},"router":{"status":200,"error":null,"loaded":false,"navigating":false,"path":"\u002Fscience\u002Fweird-science\u002Fconspiracy-theories-abound-u-s-military-closes-haarp-n112576","domain":"nbcnews.com","vertical":"news","transporting":false,"host":"www.nbcnews.com"},"shared":{"vertical":"news","section":null,"topic":null,"subTopic":null,"series":null,"label":null,"show":null,"pageView":"article","canonicalUrl":null,"adsEnabled":true,"socialMediaProfiles":{"facebook":"http:\u002F\u002Fwww.facebook.com\u002Fnbcnews","twitter":"https:\u002F\u002Fwww.twitter.com\u002Fnbcnews"},"isChromeless":false,"enigmaConfig":{},"taboolaLoaderLoaded":false,"verticalScrollDisabled":false,"disableLazyLoad":false,"taboolaFeed":false},"slideshow":{"loading":false,"current":null},"transporter":{"loading":false,"error":null,"content":{}},"video":{"current":null,"topPlaylists":[],"associatedPlaylists":[],"disableRecommendations":false,"relatedArticle":{}},"waffle":{"waffles":[],"aggregation":null,"loading":false,"error":null,"pagination":null,"isInitialSet":false},"adTest":{"slots":[],"articleHeight":50}};</script><script charset="UTF-8" src="https://ndassets.s-nbcnews.com/manifest-f13ac03cf9595d192df8.js"></script><script charset="UTF-8" src="https://ndassets.s-nbcnews.com/node_static_56376723edbae2751952.js"></script><script charset="UTF-8" defer="" src="https://ndassets.s-nbcnews.com/main-774da6731a81d56d50ff.js"></script><script data-onpluginload="(function () { });" data-publickey="a5d3c400d9872cc4aa3bb4e9c87c7cab" src="https://static.vilynx.com/vidrec/vidrec.3.3.3.min.js"></script><script src="https://mb.moatads.com/yi.js?ud=undefined&amp;qn=(%2BIb%7Cj8o%3FJei%2F*%5EJqD(aD%5Bqir1fcSC%3AU%3FWOvTh%7CzFK%3F%5B%22l!j%3F%5DNCLmT%23%3CF%2B1S%2BapY%3C%5ECUo1vOJ%3D%3A9)NpU7efcH%3BH%3Cu%7C_PyDN(%2BWx*h~%3F03*%5B)%2C2iVSWfV%7D%2F%2FRA7R.eJKx%7Ci6sGm!ryh%7C%25%3BpIT*uCnNc!%40.%5BoVBsVyt!9jr)GOf%2C%7Bee%3C!HJEkgSS%3F(KA.E%24C%23Z.yB%3AU!%2FoD%7BMx5%3C1%3B(Oy%2CUy%3CD&amp;qp=00000&amp;is=voqBBkBBy4HhBBwukBBJjBRCqUCY3CTCB6BXwUcu8gKCBS9lYBBBCCBpYFmR4BOZBBgSJTcBBBBBBeBHUoBOFCyz7BB3CZ6mv5TimoIe9oeCt9lXqBvB8fBBBBBBBBBBBBBBCBMBa8eBBkKzQClBeaKaMVMBj5iMPzyHVY9zqxknZlysGBBBcBBBB9CctORpnICyRBBB4OBBBBBBBBBBC9TiFF3dOKBCBBxBBBBBBBfBz1BD7fB4BpkBJ0DyDCZ6IDDDCCCCDDCCCCCCCBdh2eBBBGI57kNB8DJoDBBBBCiE7iB&amp;iv=6&amp;qt=0&amp;gz=0&amp;hh=0&amp;hn=0&amp;tw=null&amp;qc=0&amp;qd=0&amp;qf=1920&amp;qe=1080&amp;qh=1905&amp;qg=4272&amp;qm=-60&amp;qa=1920&amp;qb=1200&amp;qi=1920&amp;qj=1177&amp;qr=0&amp;url=https%3A%2F%2Fwww.nbcnews.com%2Fscience%2Fweird-science%2Fconspiracy-theories-abound-u-s-military-closes-haarp-n112576&amp;confidence=2&amp;pcode=nbcuyieldheader7581548001&amp;callback=MoatNadoAllJsonpRequest_6334617" type="text/javascript"></script><script forcetoimageparent="forcetoimageparent" onpluginload="(function (e) {});" redirect="redirect" redirectwithclick="redirectwithclick" resizetoimage="resizetoimage" src="//static.vilynx.com/plugins/nbcnews-vilynx.1.0.2.min.js" userid="a5d3c400d9872cc4aa3bb4e9c87c7cab"></script>
<script src="//native.sharethrough.com/assets/sfp.js" type="text/javascript"></script><script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>
<script>
  //--[2018-12-12] [AEM] Wavefront Example (requires: trackAds CORE)
  mps.trackadsPush = function(){
  mps._queue.gptloaded.push(function() {
    mps._queue.trackads = mps._queue.trackads || [];
    mps._queue.trackads.push(function(ev, data) {
      if (ev === 'load') {
        var sitename = mpscall && mpscall.adunit && mpscall.adunit.split('/') && mpscall.adunit.split('/')[2]+'.com' || data.context.site;
        var wavefrontString = {
          "payload": ev + ' ' + data.timing.load + ' ' + 'source="' + data.context.site + '" site="' + sitename + '" path="' + data.context.path + '" type="' + data.context.type + '" slot="' + data.ad.slotname + '"'
        };
        mps._d('[MPS/trackAds] Wavefront POST:' + JSON.stringify(wavefrontString));
        var request = jQuery.ajax({
          crossDomain: true,
          contentType: "application/x-www-form-urlencoded; charset=UTF-8",
          url: "//mpsaem-dev.apps.nbcuni.com/aem.php",
          type: "POST",
          data: wavefrontString,
          dataType: "text"
        });
        request.done(function(msg) {
          console.log("Request sent: " + msg);
        });
        request.fail(function(jqXHR, textStatus) {
          console.log("Request failed: " + textStatus);
        });
      }
    });
  });
}
//--[2019-05-01] [AEM] Wavefront without Jquery 
// nbcnews-bento, nbc-web
if (typeof jQuery == 'undefined') {
  var headTag = document.getElementsByTagName("head")[0];
  var jqTag = document.createElement('script');
  jqTag.type = 'text/javascript';
  jqTag.src = 'https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.min.js';
  jqTag.onload = mps.trackadsPush();
  headTag.appendChild(jqTag);
} else {
  mps.trackadsPush();
}
</script>
<script>//--[2018-05-23] Xfinity Ad Targeting
mps.xfinity=mps.xfinity||{};
mps.xfinity.setTargeting = function(){
  mps._queue.gptloaded=mps._queue.gptloaded||[];
  mps._queue.gptloaded.push(function() {
    mps._d('[mps/xfinity] setting targeting');
    mps._setPageTargeting('partner','xfinity');
  });
}
mps.xfinity.checkRef = function(){
  if(!document.referrer) return 0;
  var _xfhosts=["philly.xfinity.comcast.net","mr.qa.xfinity.comcast.net","xfinity.comcast.net","finance.comcast.net","staging.xfinity.comcast.net","comcast.com","customer.comcast.com","xfinitytv.comcast.net","xfinityconnect.mail.comcast.net","search.comcast.net","my.xfinity.com","www.xfinity.com"];
  var ref = document.createElement('a');
  ref.href = document.referrer;
  if(_xfhosts.indexOf(ref.hostname)>-1) return 1;
  return 0;
}
if(mps._ck.r('active_partner_exp')=='xfinity') {
  mps.xfinity.setTargeting();
} else {
  if(mps.xfinity.checkRef()) mps.xfinity.setTargeting();
}
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.enable();</script>
<script>
if(mps._queue.mpsready.length) {
  mps._debug('[mps:PATCH] mpsready fired again: '+ mps._elapsed());
  mps._queue.render('mpsready');
}
</script>
<script>typeof mps._postscribe == "object" && mps._postscribe.disable();</script><iframe height="0" src="https://8168974.fls.doubleclick.net/activityi;src=8168974;type=nbcvi0;cat=nbcne0;ord=3660569070448;gtm=2od6q1;auiddc=1933889238.1563124440;~oref=https%3A%2F%2Fwww.nbcnews.com%2Fscience%2Fweird-science%2Fconspiracy-theories-abound-u-s-military-closes-haarp-n112576?" style="display: none; visibility: hidden;" width="0"></iframe><style>#cx_bottom_banner { position:fixed;bottom:0;left:0;right:0;z-index:1000;background:rgba(0,0,0,.89);padding:24px; } #cx_bottom_content { max-width: 100vw; width: 100vw; margin: auto } #cx_bottom_content span { font-family: "FoundersGroteskMono", Menlo, Monaco, monospace; font-size: 12px; line-height: 1.5; letter-spacing: -0.4px; color: white; margin: auto; } @media only screen and (max-width : 320px) { #cx_bottom_content { max-width: 280px;}}#cx_bottom_close { position: absolute; top: 5px; right: 5px; z-index: 1; border: none; opacity: .7; width: 18px; height: 18px; cursor: pointer; border-radius: 30px; background-size: 14px; color: white; display: inline-block; background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTUgNTUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDU1IDU1IiB4bWw6c3BhY2U9InByZXNlcnZlIj48ZyBpZD0iY2xvc2UiPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iNDMuNSwxNC43IDQwLjMsMTEuNSAyNy41LDI0LjMgMTQuNywxMS41IDExLjUsMTQuNyAyNC4zLDI3LjUgMTEuNSw0MC4zIDE0LjcsNDMuNSAyNy41LDMwLjcgNDAuMyw0My41IDQzLjUsNDAuMyAzMC43LDI3LjUgIi8+PC9nPjwvc3ZnPg==) 2px no-repeat #575757; background-size: 14px; }  @media only screen and (max-width : 758px) { #cx_bottom_content { max-width: 560px; } } @media only screen and (min-width : 1000px) { #cx_bottom_content { max-width: 780px; } }</style><div id="cx_bottom_banner"><div id="cx_bottom_close"></div><div id="cx_bottom_content"><span>WE AND OUR PARTNERS USE COOKIES ON THIS SITE TO IMPROVE OUR SERVICE, PERFORM ANALYTICS, PERSONALIZE ADVERTISING, MEASURE ADVERTISING PERFORMANCE, AND REMEMBER WEBSITE PREFERENCES. BY USING THE SITE, YOU CONSENT TO THESE COOKIES. FOR MORE INFORMATION ON COOKIES INCLUDING HOW TO MANAGE YOUR CONSENT VISIT OUR <a href="https://www.nbcuniversal.com/privacy/cookies" style="text-decoration:underline; color: #3062ff;">COOKIE POLICY</a>.</span></div></div><script data-ongalleryload="window.galleryNbcMach" data-publickey="a5d3c400d9872cc4aa3bb4e9c87c7cab" forcetoimageparent="forcetoimageparent" onpluginload="(function (e) {});" redirect="redirect" redirectwithclick="redirectwithclick" resizetoimage="resizetoimage" src="https://static.vilynx.com/gallery/vpg.5.4.1.min.js" type="text/javascript" urlregexp="[?]i?cid=(.*)" userid="a5d3c400d9872cc4aa3bb4e9c87c7cab"></script><style title="vilynx-css" type="text/css"> a.vilynx_registered{display:block;}  article > div > a.vilynx_registered .supra-wrapper{top:auto; bottom: 0px;}  article > div > h2 {z-index: 2}  .vilynx_borderRadius .supra-wrapper {border-top-left-radius: 50%; border-top-right-radius: 50%; border-bottom-right-radius: 50%; border-bottom-left-radius: 50%;}  a.vilynx_registered .vilynx_wrapperImg {vertical-align: baseline;}  a.vilynx_registered.vilynx_duplicated > .supra-wrapper {display: none;}  img.vilynx_wrapperImg[src*="msnbc-color-square-dvt"], img.vilynx_wrapperImg[src*="today-color-square-dvt"], img.vilynx_wrapperImg[src*="nbc-news-color-square-dvt"] {opacity: 0;}   </style><iframe height="0" id="lsframe" src="https://cdn-gl.imrworldwide.com/novms/html/ls.html" style="display: none;" width="0"></iframe><iframe src="https://static.vilynx.com/gallery/vtrk.html" style="display: none;"></iframe><iframe class="aamIframeLoaded" id="destination_publishing_iframe_nbcuni_0" src="https://nbcuni.demdex.net/dest5.html?d_nsid=0#https%3A%2F%2Fwww.nbcnews.com%2Fscience%2Fweird-science%2Fconspiracy-theories-abound-u-s-military-closes-haarp-n112576" style="display: none; width: 0px; height: 0px;"></iframe><iframe class="aamIframeLoaded" id="destination_publishing_iframe_nbcu_0" sandbox="allow-scripts allow-same-origin" src="https://nbcu.demdex.net/dest5.html?d_nsid=0#https%3A%2F%2Fwww.nbcnews.com%2Fscience%2Fweird-science%2Fconspiracy-theories-abound-u-s-military-closes-haarp-n112576" style="display: none; width: 0px; height: 0px;" title="Adobe ID Syncing iFrame"></iframe></body></html>